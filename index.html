<?xml version="1.0"?>
<project name="Javascript compress project" basedir="." default="compile">

    <!-- The classpath should be modified to the real closure compiler jar file path -->
    <taskdef name="jscomp" classname="com.google.javascript.jscomp.ant.CompileTask" classpath="./compiler.jar"/>
    <target name="compile">
        <jscomp compilationLevel="simple" warning="quiet"
                debug="false" output="./game.min.js">
                <!-- Uncomment the line below to enable sourcemap generation -->
            <!--sourceMapOutputFile="./cocos2d-js-sourcemap" sourceMapFormat="V3"> -->
            <sources dir="./">
                <!-- You may need to modify the file name to the actual downloaded file name -->
                <file name="cocos2d-js-lite.js"/>
                <!-- Put your own js files here, dependency order is also important -->
            </sources>
        </jscomp>
    </target>
</project>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Color Hole</title>

    <meta name="ad.size" content="width=300,height=250">    

    <meta name="viewport"
        content="width=device-width,user-scalable=no,initial-scale=1, minimum-scale=1,maximum-scale=1"/>

    <!--https://developer.apple.com/library/safari/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">

    <!-- force webkit on 360 -->
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <!-- force edge on IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="msapplication-tap-highlight" content="no">

    <!-- force full screen on some browser -->
    <meta name="full-screen" content="yes"/>
    <meta name="x5-fullscreen" content="true"/>
    <meta name="360-fullscreen" content="true"/>

    <!-- force screen orientation on some browser -->
    <!-- <meta name="screen-orientation" content="portrait"/>
    <meta name="x5-orientation" content="portrait"> -->

    <meta name="browsermode" content="application">
    <meta name="x5-page-mode" content="app">

    <style type="text/css">
        html {
        -ms-touch-action: none;
        }

        body, canvas, div {
        margin: 0;
        padding: 0;
        outline: none;
        -moz-user-select: none;
        -webkit-user-select: none;
        -ms-user-select: none;
        -khtml-user-select: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        }

        body {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        padding: 0;
        border: 0;
        margin: 0;

        cursor: default;
        color: #888;
        background-color: #333;

        text-align: center;
        font-family: Helvetica, Verdana, Arial, sans-serif;

        display: flex;
        flex-direction: column;
        }

        #Cocos2dGameContainer {
        position: absolute;
        margin: 0;
        overflow: hidden;
        left: 0px;
        top: 0px;

        display: -webkit-box;
        -webkit-box-orient: horizontal;
        -webkit-box-align: center;
        -webkit-box-pack: center;
        }

        canvas {
        background-color: rgba(0, 0, 0, 0);
        }
    </style>
</head>
<body>   
    <canvas id="gameCanvas" width="800" height="450" style="background-color:black;"></canvas>
    <script type="text/javascript" charset="UTF-8">
      function regionCreate(){var a=regionPool.pop();return a||(a=new Region),a}function regionRelease(a){regionPool.push(a)}function unionArea(a,b){var c=a._minX<b._minX?a._minX:b._minX,d=a._minY<b._minY?a._minY:b._minY,e=a._maxX>b._maxX?a._maxX:b._maxX,f=a._maxY>b._maxY?a._maxY:b._maxY;return(e-c)*(f-d)}var cc=cc||{};cc._tmp=cc._tmp||{},cc._LogInfos={};var _p=window;_p.gl,_p.WebGLRenderingContext,_p.DeviceOrientationEvent,_p.DeviceMotionEvent,_p.AudioContext,_p.AudioContext||_p.webkitAudioContext,_p.mozAudioContext,_p=Object.prototype,_p._super,_p.ctor,_p=null,cc.ORIENTATION_PORTRAIT=0,cc.ORIENTATION_PORTRAIT_UPSIDE_DOWN=1,cc.ORIENTATION_LANDSCAPE_LEFT=2,cc.ORIENTATION_LANDSCAPE_RIGHT=3,cc._drawingUtil=null,cc._renderContext=null,cc._supportRender=!1,cc._canvas=null,cc.container=null,cc._gameDiv=null,cc.newElement=function(a){return document.createElement(a)},cc.each=function(a,b,c){if(a)if(a instanceof Array){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d)===!1)return}else for(var f in a)if(b.call(c,a[f],f)===!1)return},cc.extend=function(a){var b=arguments.length>=2?Array.prototype.slice.call(arguments,1):[];return cc.each(b,function(b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}),a},cc.isFunction=function(a){return"function"==typeof a},cc.isNumber=function(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)},cc.isString=function(a){return"string"==typeof a||"[object String]"===Object.prototype.toString.call(a)},cc.isArray=function(a){return Array.isArray(a)||"object"==typeof a&&"[object Array]"===Object.prototype.toString.call(a)},cc.isUndefined=function(a){return"undefined"==typeof a},cc.isObject=function(a){return"object"==typeof a&&"[object Object]"===Object.prototype.toString.call(a)},cc.isCrossOrigin=function(a){if(!a)return cc.log("invalid URL"),!1;var b=a.indexOf("://");if(b===-1)return!1;var c=a.indexOf("/",b+3),d=c===-1?a:a.substring(0,c);return d!==location.origin},cc.AsyncPool=function(a,b,c,d,e){var f=this;f._srcObj=a,f._limit=b,f._pool=[],f._iterator=c,f._iteratorTarget=e,f._onEnd=d,f._onEndTarget=e,f._results=a instanceof Array?[]:{},f._errors=a instanceof Array?[]:{},cc.each(a,function(a,b){f._pool.push({index:b,value:a})}),f.size=f._pool.length,f.finishedSize=0,f._workingSize=0,f._limit=f._limit||f.size,f.onIterator=function(a,b){f._iterator=a,f._iteratorTarget=b},f.onEnd=function(a,b){f._onEnd=a,f._onEndTarget=b},f._handleItem=function(){var a=this;if(!(0===a._pool.length||a._workingSize>=a._limit)){var b=a._pool.shift(),c=b.value,d=b.index;a._workingSize++,a._iterator.call(a._iteratorTarget,c,d,function(b,c){if(a.finishedSize++,a._workingSize--,b?a._errors[this.index]=b:a._results[this.index]=c,a.finishedSize!==a.size)a._handleItem();else if(a._onEnd){var d=0===a._errors.length?null:a._errors;a._onEnd.call(a._onEndTarget,d,a._results)}}.bind(b),a)}},f.flow=function(){var a=this;if(0===a._pool.length)return void(a._onEnd&&a._onEnd.call(a._onEndTarget,null,[]));for(var b=0;b<a._limit;b++)a._handleItem()}},cc.async={series:function(a,b,c){var d=new cc.AsyncPool(a,1,function(a,b,d){a.call(c,d)},b,c);return d.flow(),d},parallel:function(a,b,c){var d=new cc.AsyncPool(a,0,function(a,b,d){a.call(c,d)},b,c);return d.flow(),d},waterfall:function(a,b,c){var d=[],e=[null],f=new cc.AsyncPool(a,1,function(b,f,g){d.push(function(b){d=Array.prototype.slice.call(arguments,1),a.length-1===f&&(e=e.concat(d)),g.apply(null,arguments)}),b.apply(c,d)},function(a){if(b)return a?b.call(c,a):void b.apply(c,e)});return f.flow(),f},map:function(a,b,c,d){var e=b;"object"==typeof b&&(c=b.cb,d=b.iteratorTarget,e=b.iterator);var f=new cc.AsyncPool(a,0,e,c,d);return f.flow(),f},mapLimit:function(a,b,c,d,e){var f=new cc.AsyncPool(a,b,c,d,e);return f.flow(),f}},cc.path={normalizeRE:/[^\.\/]+\/\.\.\//,join:function(){for(var a=arguments.length,b="",c=0;c<a;c++)b=(b+(""===b?"":"/")+arguments[c]).replace(/(\/|\\\\)$/,"");return b},extname:function(a){var b=/(\.[^\.\/\?\\]*)(\?.*)?$/.exec(a);return b?b[1]:null},mainFileName:function(a){if(a){var b=a.lastIndexOf(".");if(b!==-1)return a.substring(0,b)}return a},basename:function(a,b){var c=a.indexOf("?");c>0&&(a=a.substring(0,c));var d=/(\/|\\\\)([^(\/|\\\\)]+)$/g,e=d.exec(a.replace(/(\/|\\\\)$/,""));if(!e)return null;var f=e[2];return b&&a.substring(a.length-b.length).toLowerCase()===b.toLowerCase()?f.substring(0,f.length-b.length):f},dirname:function(a){return a.replace(/((.*)(\/|\\|\\\\))?(.*?\..*$)?/,"$2")},changeExtname:function(a,b){b=b||"";var c=a.indexOf("?"),d="";return c>0&&(d=a.substring(c),a=a.substring(0,c)),c=a.lastIndexOf("."),c<0?a+b+d:a.substring(0,c)+b+d},changeBasename:function(a,b,c){if(0===b.indexOf("."))return this.changeExtname(a,b);var d=a.indexOf("?"),e="",f=c?this.extname(a):"";return d>0&&(e=a.substring(d),a=a.substring(0,d)),d=a.lastIndexOf("/"),d=d<=0?0:d+1,a.substring(0,d)+b+f+e},_normalize:function(a){var b=a=String(a);do b=a,a=a.replace(this.normalizeRE,"");while(b.length!==a.length);return a}},cc.loader=function(){var a={},b={},c={},d={},e={},f=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))|(?:localhost))(?::\\d{2,5})?(?:/\\S*)?$","i");return{resPath:"",audioPath:"",cache:{},getXMLHttpRequest:function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},_getArgs4Js:function(a){var b=a[0],c=a[1],d=a[2],e=["",null,null];if(1===a.length)e[1]=b instanceof Array?b:[b];else if(2===a.length)"function"==typeof c?(e[1]=b instanceof Array?b:[b],e[2]=c):(e[0]=b||"",e[1]=c instanceof Array?c:[c]);else{if(3!==a.length)throw new Error("arguments error to load js!");e[0]=b||"",e[1]=c instanceof Array?c:[c],e[2]=d}return e},isLoading:function(a){return void 0!==e[a]},loadJs:function(b,c,d){var e=this,f=e._getArgs4Js(arguments),g=f[0],h=f[1],i=f[2];navigator.userAgent.indexOf("Trident/5")>-1?e._loadJs4Dependency(g,h,0,i):cc.async.map(h,function(b,c,d){var f=cc.path.join(g,b);return a[f]?d(null):void e._createScript(f,!1,d)},i)},loadJsWithImg:function(a,b,c){var d=this,e=d._loadJsImg(),f=d._getArgs4Js(arguments);this.loadJs(f[0],f[1],function(a){if(a)throw new Error(a);e.parentNode.removeChild(e),f[2]&&f[2]()})},_createScript:function(b,c,d){var e=document,f=this,g=document.createElement("script");g.async=c,a[b]=!0,cc.game.config.noCache&&"string"==typeof b?f._noCacheRex.test(b)?g.src=b+"&_t="+(new Date-0):g.src=b+"?_t="+(new Date-0):g.src=b,g.addEventListener("load",function(){g.parentNode.removeChild(g),this.removeEventListener("load",arguments.callee,!1),d()},!1),g.addEventListener("error",function(){g.parentNode.removeChild(g),d("Load "+b+" failed!")},!1),e.body.appendChild(g)},_loadJs4Dependency:function(a,b,c,d){if(c>=b.length)return void(d&&d());var e=this;e._createScript(cc.path.join(a,b[c]),!1,function(f){return f?d(f):void e._loadJs4Dependency(a,b,c+1,d)})},_loadJsImg:function(){var a=document,b=a.getElementById("cocos2d_loadJsImg");if(!b){b=document.createElement("img"),cc._loadingImage&&(b.src=cc._loadingImage);var c=a.getElementById(cc.game.config.id);c.style.backgroundColor="transparent",c.parentNode.appendChild(b);var d=getComputedStyle?getComputedStyle(c):c.currentStyle;d||(d={width:c.width,height:c.height}),b.style.left=c.offsetLeft+(parseFloat(d.width)-b.width)/2+"px",b.style.top=c.offsetTop+(parseFloat(d.height)-b.height)/2+"px",b.style.position="absolute"}return b},loadTxt:function(a,b){if(cc._isNodeJs){var c=require("fs");c.readFile(a,function(a,c){a?b(a):b(null,c.toString())})}else{var d=this.getXMLHttpRequest(),e="load "+a+" failed!";d.open("GET",a,!0),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?(d.setRequestHeader("Accept-Charset","utf-8"),d.onreadystatechange=function(){4===d.readyState&&(200===d.status?b(null,d.responseText):b({status:d.status,errorMessage:e},null))}):(d.overrideMimeType&&d.overrideMimeType("text/plain; charset=utf-8"),d.onload=function(){4===d.readyState&&(200===d.status?b(null,d.responseText):b({status:d.status,errorMessage:e},null))},d.onerror=function(){b({status:d.status,errorMessage:e},null)}),d.send(null)}},_loadTxtSync:function(a){if(cc._isNodeJs){var b=require("fs");return b.readFileSync(a).toString()}var c=this.getXMLHttpRequest();return c.open("GET",a,!1),/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)?c.setRequestHeader("Accept-Charset","utf-8"):c.overrideMimeType&&c.overrideMimeType("text/plain; charset=utf-8"),c.send(null),4===!c.readyState||200!==c.status?null:c.responseText},loadCsb:function(a,b){var c=new XMLHttpRequest,d="load "+a+" failed!";c.open("GET",a,!0),c.responseType="arraybuffer",c.onload=function(){var a=c.response;a&&(window.msg=a),4===c.readyState&&(200===c.status?b(null,c.response):b({status:c.status,errorMessage:d},null))},c.onerror=function(){b({status:c.status,errorMessage:d},null)},c.send(null)},loadJson:function(a,b){this.loadTxt(a,function(c,d){if(c)b(c);else{try{var e=JSON.parse(d)}catch(b){throw new Error("parse json ["+a+"] failed : "+b)}b(null,e)}})},_checkIsImageURL:function(a){var b=/(\.png)|(\.jpg)|(\.bmp)|(\.jpeg)|(\.gif)/.exec(a);return null!=b},loadImg:function(a,b,c){var d={isCrossOrigin:!0};void 0!==c?d.isCrossOrigin=void 0===b.isCrossOrigin?d.isCrossOrigin:b.isCrossOrigin:void 0!==b&&(c=b);var g=this.getRes(a);if(g)return c&&c(null,g),g;var h=e[a];if(h)return h.callbacks.push(c),h.img;g=new Image,d.isCrossOrigin&&"file://"!==location.origin&&(g.crossOrigin="Anonymous");var i=function(){this.removeEventListener("load",i,!1),this.removeEventListener("error",k,!1),f.test(a)||(cc.loader.cache[a]=g);var b=e[a];if(b){for(var c=b.callbacks,d=0;d<c.length;++d){var h=c[d];h&&h(null,g)}b.img=null,delete e[a]}},j=this,k=function(){if(this.removeEventListener("error",k,!1),g.crossOrigin&&"anonymous"===g.crossOrigin.toLowerCase())d.isCrossOrigin=!1,j.release(a),cc.loader.loadImg(a,d,c);else{var b=e[a];if(b){for(var f=b.callbacks,h=0;h<f.length;++h){var i=f[h];i&&i("load image failed")}b.img=null,delete e[a]}}};return e[a]={img:g,callbacks:c?[c]:[]},g.addEventListener("load",i),g.addEventListener("error",k),g.src=a,g},_loadResIterator:function(a,c,d){var e=this,g=null,h=a.type;h?(h="."+h.toLowerCase(),g=a.src?a.src:a.name+h):(g=a,h=cc.path.extname(g));var i=e.getRes(g);if(i)return d(null,i);var j=null;if(h&&(j=b[h.toLowerCase()]),!j)return cc.error("loader for ["+h+"] not exists!"),d();var k=g;if(!f.test(g)){var l=j.getBasePath?j.getBasePath():e.resPath;k=e.getUrl(l,g)}cc.game.config.noCache&&"string"==typeof k&&(k+=e._noCacheRex.test(k)?"&_t="+(new Date-0):"?_t="+(new Date-0)),j.load(k,g,a,function(a,b){a?(cc.log(a),e.cache[g]=null,delete e.cache[g],d({status:520,errorMessage:a},null)):(e.cache[g]=b,d(null,b))})},_noCacheRex:/\?/,getUrl:function(a,d){var e=this,f=cc.path;if(void 0!==a&&void 0===d){d=a;var g=f.extname(d);g=g?g.toLowerCase():"";var h=b[g];a=h&&h.getBasePath?h.getBasePath():e.resPath}if(d=cc.path.join(a||"",d),d.match(/[\/(\\\\)]lang[\/(\\\\)]/i)){if(c[d])return c[d];var i=f.extname(d)||"";d=c[d]=d.substring(0,d.length-i.length)+"_"+cc.sys.language+i}return d},load:function(a,b,c){var d=this,e=arguments.length;if(0===e)throw new Error("arguments error!");3===e?"function"==typeof b&&(b="function"==typeof c?{trigger:b,cb:c}:{cb:b,cbTarget:c}):2===e?"function"==typeof b&&(b={cb:b}):1===e&&(b={}),a instanceof Array||(a=[a]);var f=new cc.AsyncPool(a,0,function(a,c,e,f){d._loadResIterator(a,c,function(a){var c=Array.prototype.slice.call(arguments,1);b.trigger&&b.trigger.call(b.triggerTarget,c[0],f.size,f.finishedSize),e(a,c[0])})},b.cb,b.cbTarget);return f.flow(),f},_handleAliases:function(a,b){var c=[];for(var e in a){var f=a[e];d[e]=f,c.push(f)}this.load(c,b)},loadAliases:function(a,b){var c=this,d=c.getRes(a);d?c._handleAliases(d.filenames,b):c.load(a,function(a,d){c._handleAliases(d[0].filenames,b)})},register:function(a,c){if(a&&c){if("string"==typeof a)return b[a.trim().toLowerCase()]=c;for(var d=0,e=a.length;d<e;d++)b["."+a[d].trim().toLowerCase()]=c}},getRes:function(a){return this.cache[a]||this.cache[d[a]]},_getAliase:function(a){return d[a]},release:function(a){var b=this.cache,c=e[a];c&&(c.img=null,delete e[a]),delete b[a],delete b[d[a]],delete d[a]},releaseAll:function(){var a=this.cache;for(var b in a)delete a[b];for(var b in d)delete d[b]}}}(),cc.formatStr=function(){var a=arguments,b=a.length;if(b<1)return"";var c=a[0],d=!0;"object"==typeof c&&(d=!1);for(var e=1;e<b;++e){var f=a[e];if(d)for(;;){var g=null;if("number"==typeof f&&(g=c.match(/(%d)|(%s)/))){c=c.replace(/(%d)|(%s)/,f);break}g=c.match(/%s/),g?c=c.replace(/%s/,f):c+="    "+f;break}else c+="    "+f}return c},function(){function a(a){var b=cc.game.CONFIG_KEY,c=parseInt(a[b.renderMode])||0;(isNaN(c)||c>2||c<0)&&(a[b.renderMode]=0),cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!1,0===c?cc.sys.capabilities.opengl?(cc._renderType=cc.game.RENDER_TYPE_WEBGL,cc._supportRender=!0):cc.sys.capabilities.canvas&&(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!0):1===c&&cc.sys.capabilities.canvas?(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc._supportRender=!0):2===c&&cc.sys.capabilities.opengl&&(cc._renderType=cc.game.RENDER_TYPE_WEBGL,cc._supportRender=!0)}function b(a,c,d){if(i[c])return null;d=d||"";var e=[],f=a[c];if(!f)throw new Error("can not find module ["+c+"]");for(var g=cc.path,h=0,j=f.length;h<j;h++){var k=f[h];if(!i[k]){var l=g.extname(k);if(l)".js"===l.toLowerCase()&&e.push(g.join(d,k));else{var m=b(a,k,d);m&&(e=e.concat(m))}i[k]=1}}return e}function c(a){cc._initDebugSetting&&cc._initDebugSetting(a[cc.game.CONFIG_KEY.debugMode]),cc._engineLoaded=!0,cc.log(cc.ENGINE_VERSION),k&&k()}function d(a){var d=cc.game.CONFIG_KEY,e=a[d.engineDir],f=cc.loader;if(cc.Class)c(a);else{var g=cc.path.join(e,"moduleConfig.json");f.loadJson(g,function(d,f){if(d)throw new Error(d);var g=a.modules||[],h=f.module,i=[];cc.sys.capabilities.opengl&&g.indexOf("base4webgl")<0?g.splice(0,0,"base4webgl"):g.indexOf("core")<0&&g.splice(0,0,"core");for(var j=0,k=g.length;j<k;j++){var l=b(h,g[j],e);l&&(i=i.concat(l))}cc.loader.loadJsWithImg(i,function(b){if(b)throw b;c(a)})})}}function e(){this.removeEventListener("load",e,!1),d(cc.game.config)}var f=document.createElement("canvas"),g=document.createElement("canvas");cc.create3DContext=function(a,b){for(var c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],d=null,e=0;e<c.length;++e){try{d=a.getContext(c[e],b)}catch(a){}if(d)break}return d};var h=function(){cc.sys={};var a=cc.sys;a.LANGUAGE_ENGLISH="en",a.LANGUAGE_CHINESE="zh",a.LANGUAGE_FRENCH="fr",a.LANGUAGE_ITALIAN="it",a.LANGUAGE_GERMAN="de",a.LANGUAGE_SPANISH="es",a.LANGUAGE_DUTCH="du",a.LANGUAGE_RUSSIAN="ru",a.LANGUAGE_KOREAN="ko",a.LANGUAGE_JAPANESE="ja",a.LANGUAGE_HUNGARIAN="hu",a.LANGUAGE_PORTUGUESE="pt",a.LANGUAGE_ARABIC="ar",a.LANGUAGE_NORWEGIAN="no",a.LANGUAGE_POLISH="pl",a.LANGUAGE_UNKNOWN="unkonwn",a.OS_IOS="iOS",a.OS_ANDROID="Android",a.OS_WINDOWS="Windows",a.OS_MARMALADE="Marmalade",a.OS_LINUX="Linux",a.OS_BADA="Bada",a.OS_BLACKBERRY="Blackberry",a.OS_OSX="OS X",a.OS_WP8="WP8",a.OS_WINRT="WINRT",a.OS_UNKNOWN="Unknown",a.UNKNOWN=-1,a.WIN32=0,a.LINUX=1,a.MACOS=2,a.ANDROID=3,a.IPHONE=4,a.IPAD=5,a.BLACKBERRY=6,a.NACL=7,a.EMSCRIPTEN=8,a.TIZEN=9,a.WINRT=10,a.WP8=11,a.MOBILE_BROWSER=100,a.DESKTOP_BROWSER=101,a.BROWSER_TYPE_WECHAT="wechat",a.BROWSER_TYPE_ANDROID="androidbrowser",a.BROWSER_TYPE_IE="ie",a.BROWSER_TYPE_QQ="qqbrowser",a.BROWSER_TYPE_MOBILE_QQ="mqqbrowser",a.BROWSER_TYPE_UC="ucbrowser",a.BROWSER_TYPE_360="360browser",a.BROWSER_TYPE_BAIDU_APP="baiduboxapp",a.BROWSER_TYPE_BAIDU="baidubrowser",a.BROWSER_TYPE_MAXTHON="maxthon",a.BROWSER_TYPE_OPERA="opera",a.BROWSER_TYPE_OUPENG="oupeng",a.BROWSER_TYPE_MIUI="miuibrowser",a.BROWSER_TYPE_FIREFOX="firefox",a.BROWSER_TYPE_SAFARI="safari",a.BROWSER_TYPE_CHROME="chrome",a.BROWSER_TYPE_LIEBAO="liebao",a.BROWSER_TYPE_QZONE="qzone",a.BROWSER_TYPE_SOUGOU="sogou",a.BROWSER_TYPE_UNKNOWN="unknown",a.isNative=!1;var b=window,c=b.navigator,d=document,e=d.documentElement,h=c.userAgent.toLowerCase();a.isMobile=h.indexOf("mobile")!==-1||h.indexOf("android")!==-1,a.platform=a.isMobile?a.MOBILE_BROWSER:a.DESKTOP_BROWSER;var i=c.language;i=i?i:c.browserLanguage,i=i?i.split("-")[0]:a.LANGUAGE_ENGLISH,a.language=i;var j=!1,k=!1,l="",m=0,n=/android (\d+(?:\.\d+)+)/i.exec(h)||/android (\d+(?:\.\d+)+)/i.exec(c.platform);n&&(j=!0,l=n[1]||"",m=parseInt(l)||0),n=/(iPad|iPhone|iPod).*OS ((\d+_?){2,3})/i.exec(h),n&&(k=!0,l=n[2]||"",m=parseInt(l)||0);var o=a.OS_UNKNOWN;c.appVersion.indexOf("Win")!==-1?o=a.OS_WINDOWS:k?o=a.OS_IOS:c.appVersion.indexOf("Mac")!==-1?o=a.OS_OSX:c.appVersion.indexOf("X11")!==-1&&c.appVersion.indexOf("Linux")===-1?o=a.OS_UNIX:j?o=a.OS_ANDROID:c.appVersion.indexOf("Linux")!==-1&&(o=a.OS_LINUX),a.os=o,a.osVersion=l,a.osMainVersion=m,a.browserType=a.BROWSER_TYPE_UNKNOWN,function(){var b=/mqqbrowser|sogou|qzone|liebao|micromessenger|ucbrowser|360 aphone|360browser|baiduboxapp|baidubrowser|maxthon|mxbrowser|trident|miuibrowser/i,c=/qqbrowser|chrome|safari|firefox|opr|oupeng|opera/i,d=b.exec(h);d||(d=c.exec(h));var e=d?d[0]:a.BROWSER_TYPE_UNKNOWN;"micromessenger"===e?e=a.BROWSER_TYPE_WECHAT:"safari"===e&&h.match(/android.*applewebkit/)?e=a.BROWSER_TYPE_ANDROID:"trident"===e?e=a.BROWSER_TYPE_IE:"360 aphone"===e?e=a.BROWSER_TYPE_360:"mxbrowser"===e?e=a.BROWSER_TYPE_MAXTHON:"opr"===e&&(e=a.BROWSER_TYPE_OPERA),a.browserType=e}(),a.browserVersion="",function(){var b=/(micromessenger|qq|mx|maxthon|baidu|sogou)(mobile)?(browser)?\/?([\d.]+)/i,c=/(msie |rv:|firefox|chrome|ucbrowser|oupeng|opera|opr|safari|miui)(mobile)?(browser)?\/?([\d.]+)/i,d=h.match(b);d||(d=h.match(c)),a.browserVersion=d?d[4]:""}();var p=window.innerWidth||document.documentElement.clientWidth,q=window.innerHeight||document.documentElement.clientHeight,r=window.devicePixelRatio||1;if(a.windowPixelResolution={width:r*p,height:r*q},a._checkWebGLRenderMode=function(){if(cc._renderType!==cc.game.RENDER_TYPE_WEBGL)throw new Error("This feature supports WebGL render mode only.")},a._supportCanvasNewBlendModes=function(){var a=f;a.width=1,a.height=1;var b=a.getContext("2d");b.fillStyle="#000",b.fillRect(0,0,1,1),b.globalCompositeOperation="multiply";var c=g;c.width=1,c.height=1;var d=c.getContext("2d");return d.fillStyle="#fff",d.fillRect(0,0,1,1),b.drawImage(c,0,0,1,1),0===b.getImageData(0,0,1,1).data[0]}(),cc.sys.isMobile){var s=document.createElement("style");s.type="text/css",document.body.appendChild(s),s.textContent="body,canvas,div{ -moz-user-select: none;-webkit-user-select: none;-ms-user-select: none;-khtml-user-select: none;-webkit-tap-highlight-color:rgba(0,0,0,0);}"}try{var t=a.localStorage=b.localStorage;t.setItem("storage",""),t.removeItem("storage"),t=null}catch(b){var u=function(){cc.warn("Warning: localStorage isn't enabled. Please confirm browser cookie or privacy option")};a.localStorage={getItem:u,setItem:u,removeItem:u,clear:u}}var v=!!f.getContext("2d"),w=!1;if(b.WebGLRenderingContext){var x=document.createElement("CANVAS");try{var y=cc.create3DContext(x,{stencil:!0});if(y&&(w=!0),w&&a.os===a.OS_ANDROID){var z=parseFloat(a.browserVersion);switch(a.browserType){case a.BROWSER_TYPE_MOBILE_QQ:case a.BROWSER_TYPE_BAIDU:case a.BROWSER_TYPE_BAIDU_APP:w=z>=6.2;break;case a.BROWSER_TYPE_CHROME:w=z>=30;break;case a.BROWSER_TYPE_ANDROID:a.osMainVersion&&a.osMainVersion>=5&&(w=!0);break;case a.BROWSER_TYPE_UNKNOWN:case a.BROWSER_TYPE_360:case a.BROWSER_TYPE_MIUI:case a.BROWSER_TYPE_UC:w=!1}}}catch(a){}x=null}var A=a.capabilities={canvas:v,opengl:w};(void 0!==e.ontouchstart||void 0!==d.ontouchstart||c.msPointerEnabled)&&(A.touches=!0),void 0!==e.onmouseup&&(A.mouse=!0),void 0!==e.onkeyup&&(A.keyboard=!0),(b.DeviceMotionEvent||b.DeviceOrientationEvent)&&(A.accelerometer=!0),a.garbageCollect=function(){},a.dumpRoot=function(){},a.restartVM=function(){},a.cleanScript=function(a){},a.isObjectValid=function(a){return!!a},a.dump=function(){var a=this,b="";b+="isMobile : "+a.isMobile+"\r\n",b+="language : "+a.language+"\r\n",b+="browserType : "+a.browserType+"\r\n",b+="browserVersion : "+a.browserVersion+"\r\n",b+="capabilities : "+JSON.stringify(a.capabilities)+"\r\n",b+="os : "+a.os+"\r\n",b+="osVersion : "+a.osVersion+"\r\n",b+="platform : "+a.platform+"\r\n",b+="Using "+(cc._renderType===cc.game.RENDER_TYPE_WEBGL?"WEBGL":"CANVAS")+" renderer.\r\n",cc.log(b)},a.openURL=function(a){window.open(a)}};h(),f=null,g=null,cc.log=cc.warn=cc.error=cc.assert=function(){};var i={},j=!1,k=null;cc._engineLoaded=!1,cc.initEngine=function(b,c){if(j){var f=k;return void(k=function(){f&&f(),c&&c()})}k=c,!cc.game.config&&b?cc.game.config=b:cc.game.config||cc.game._loadConfig(),b=cc.game.config,a(b),document.body?d(b):cc._addEventListener(window,"load",e,!1),j=!0}}(),cc.game={DEBUG_MODE_NONE:0,DEBUG_MODE_INFO:1,DEBUG_MODE_WARN:2,DEBUG_MODE_ERROR:3,DEBUG_MODE_INFO_FOR_WEB_PAGE:4,DEBUG_MODE_WARN_FOR_WEB_PAGE:5,DEBUG_MODE_ERROR_FOR_WEB_PAGE:6,EVENT_HIDE:"game_on_hide",EVENT_SHOW:"game_on_show",EVENT_RESIZE:"game_on_resize",EVENT_RENDERER_INITED:"renderer_inited",RENDER_TYPE_CANVAS:0,RENDER_TYPE_WEBGL:1,RENDER_TYPE_OPENGL:2,_eventHide:null,_eventShow:null,CONFIG_KEY:{width:"width",height:"height",engineDir:"engineDir",modules:"modules",debugMode:"debugMode",showFPS:"showFPS",frameRate:"frameRate",id:"id",renderMode:"renderMode",jsList:"jsList"},_paused:!0,_prepareCalled:!1,_prepared:!1,_rendererInitialized:!1,_renderContext:null,_intervalId:null,_lastTime:null,_frameTime:null,frame:null,container:null,canvas:null,config:null,onStart:null,onStop:null,setFrameRate:function(a){var b=this,c=b.config,d=b.CONFIG_KEY;c[d.frameRate]=a,b._intervalId&&window.cancelAnimationFrame(b._intervalId),b._paused=!0,b._setAnimFrame(),b._runMainLoop()},step:function(){cc.director.mainLoop()},pause:function(){this._paused||(this._paused=!0,cc.audioEngine&&(cc.audioEngine.stopAllEffects(),cc.audioEngine.pauseMusic()),this._intervalId&&window.cancelAnimationFrame(this._intervalId),this._intervalId=0)},resume:function(){this._paused&&(this._paused=!1,cc.audioEngine&&cc.audioEngine.resumeMusic(),this._runMainLoop())},isPaused:function(){return this._paused},restart:function(){cc.director.popToSceneStackLevel(0),cc.audioEngine&&cc.audioEngine.end(),cc.game.onStart()},end:function(){close()},prepare:function(a){var b=this,c=b.config,d=b.CONFIG_KEY;if(this._loadConfig(),this._prepared)return void(a&&a());if(!this._prepareCalled){if(cc._engineLoaded){this._prepareCalled=!0,this._initRenderer(c[d.width],c[d.height]),cc.view=cc.EGLView._getInstance(),cc.director=cc.Director._getInstance(),cc.director.setOpenGLView&&cc.director.setOpenGLView(cc.view),cc.winSize=cc.director.getWinSize(),this._initEvents(),this._setAnimFrame(),this._runMainLoop();var e=c[d.jsList];return void(e?cc.loader.loadJsWithImg(e,function(c){if(c)throw new Error(c);b._prepared=!0,a&&a()}):a&&a())}cc.initEngine(this.config,function(){b.prepare(a)})}},run:function(a,b){"function"==typeof a?cc.game.onStart=a:(a&&("string"==typeof a?(cc.game.config||this._loadConfig(),cc.game.config[cc.game.CONFIG_KEY.id]=a):cc.game.config=a),"function"==typeof b&&(cc.game.onStart=b)),this.prepare(cc.game.onStart&&cc.game.onStart.bind(cc.game))},_setAnimFrame:function(){this._lastTime=new Date,this._frameTime=1e3/cc.game.config[cc.game.CONFIG_KEY.frameRate],cc.sys.os===cc.sys.OS_IOS&&cc.sys.browserType===cc.sys.BROWSER_TYPE_WECHAT||60!==cc.game.config[cc.game.CONFIG_KEY.frameRate]?(window.requestAnimFrame=this._stTime,window.cancelAnimationFrame=this._ctTime):(window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||this._stTime,window.cancelAnimationFrame=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.msCancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.oCancelAnimationFrame||this._ctTime)},_stTime:function(a){var b=(new Date).getTime(),c=Math.max(0,cc.game._frameTime-(b-cc.game._lastTime)),d=window.setTimeout(function(){a()},c);return cc.game._lastTime=b+c,d},_ctTime:function(a){window.clearTimeout(a)},_runMainLoop:function(){var a,b=this,c=b.config,d=b.CONFIG_KEY,e=cc.director;e.setDisplayStats(c[d.showFPS]),a=function(){b._paused||(e.mainLoop(),b._intervalId&&window.cancelAnimationFrame(b._intervalId),b._intervalId=window.requestAnimFrame(a))},window.requestAnimFrame(a),b._paused=!1},_loadConfig:function(){if(this.config)return void this._initConfig(this.config);if(document.ccConfig)this._initConfig(document.ccConfig);else{var a={"debugMode": 1,"showFPS" : false,"frameRate": 60,"id": "gameCanvas","renderMode": 1,"jsList": []};this._initConfig(a)}},_initConfig:function(a){var b=this.CONFIG_KEY,c=a[b.modules];a[b.showFPS]="undefined"==typeof a[b.showFPS]||a[b.showFPS],a[b.engineDir]=a[b.engineDir]||"frameworks/cocos2d-html5",null==a[b.debugMode]&&(a[b.debugMode]=0),a[b.frameRate]=a[b.frameRate]||60,null==a[b.renderMode]&&(a[b.renderMode]=0),null==a[b.registerSystemEvent]&&(a[b.registerSystemEvent]=!0),c&&c.indexOf("core")<0&&c.splice(0,0,"core"),c&&(a[b.modules]=c),this.config=a},_initRenderer:function(a,b){if(!this._rendererInitialized){if(!cc._supportRender)throw new Error("The renderer doesn't support the renderMode "+this.config[this.CONFIG_KEY.renderMode]);var c,d,e=this.config[cc.game.CONFIG_KEY.id],f=window,g=cc.$(e)||cc.$("#"+e);"CANVAS"===g.tagName?(a=a||g.width,b=b||g.height,this.canvas=cc._canvas=c=g,this.container=cc.container=d=document.createElement("DIV"),c.parentNode&&c.parentNode.insertBefore(d,c)):("DIV"!==g.tagName&&cc.log("Warning: target element is not a DIV or CANVAS"),a=a||g.clientWidth,b=b||g.clientHeight,this.canvas=cc._canvas=c=document.createElement("CANVAS"),this.container=cc.container=d=document.createElement("DIV"),g.appendChild(d)),d.setAttribute("id","Cocos2dGameContainer"),d.appendChild(c),this.frame=d.parentNode===document.body?document.documentElement:d.parentNode,c.addClass("gameCanvas"),c.setAttribute("width",a||480),c.setAttribute("height",b||320),c.setAttribute("tabindex",99),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._renderContext=cc._renderContext=cc.webglContext=cc.create3DContext(c,{stencil:!0,antialias:!cc.sys.isMobile,alpha:!1})),this._renderContext?(cc.renderer=cc.rendererWebGL,f.gl=this._renderContext,cc.renderer.init(),cc.shaderCache._init(),cc._drawingUtil=new cc.DrawingPrimitiveWebGL(this._renderContext),cc.textureCache._initializingRenderer(),cc.glExt={},cc.glExt.instanced_arrays=f.gl.getExtension("ANGLE_instanced_arrays"),cc.glExt.element_uint=f.gl.getExtension("OES_element_index_uint")):(cc._renderType=cc.game.RENDER_TYPE_CANVAS,cc.renderer=cc.rendererCanvas,this._renderContext=cc._renderContext=new cc.CanvasContextWrapper(c.getContext("2d")),cc._drawingUtil=cc.DrawingPrimitiveCanvas?new cc.DrawingPrimitiveCanvas(this._renderContext):null),cc._gameDiv=d,cc.game.canvas.oncontextmenu=function(){if(!cc._isContextMenuEnable)return!1},this.dispatchEvent(this.EVENT_RENDERER_INITED,!0),this._rendererInitialized=!0}},_initEvents:function(){var a,b,c=window;this._eventHide=this._eventHide||new cc.EventCustom(this.EVENT_HIDE),this._eventHide.setUserData(this),this._eventShow=this._eventShow||new cc.EventCustom(this.EVENT_SHOW),this._eventShow.setUserData(this),this.config[this.CONFIG_KEY.registerSystemEvent]&&cc.inputManager.registerSystemEvent(this.canvas),cc.isUndefined(document.hidden)?cc.isUndefined(document.mozHidden)?cc.isUndefined(document.msHidden)?cc.isUndefined(document.webkitHidden)||(a="webkitHidden",b="webkitvisibilitychange"):(a="msHidden",b="msvisibilitychange"):(a="mozHidden",b="mozvisibilitychange"):(a="hidden",b="visibilitychange");var d=function(){cc.eventManager&&cc.game._eventHide&&cc.eventManager.dispatchEvent(cc.game._eventHide)},e=function(){cc.eventManager&&cc.game._eventShow&&cc.eventManager.dispatchEvent(cc.game._eventShow)};a?document.addEventListener(b,function(){document[a]?d():e()},!1):(c.addEventListener("blur",d,!1),c.addEventListener("focus",e,!1)),navigator.userAgent.indexOf("MicroMessenger")>-1&&(c.onfocus=function(){e()}),"onpageshow"in window&&"onpagehide"in window&&(c.addEventListener("pagehide",d,!1),c.addEventListener("pageshow",e,!1)),cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){cc.game.pause()}),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){cc.game.resume()})}},Function.prototype.bind=Function.prototype.bind||function(a){if(!cc.isFunction(this))throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e},cc._urlRegExp=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))|(?:localhost))(?::\\d{2,5})?(?:/\\S*)?$","i"),cc.SimplePool=function(){this._pool=[]},cc.SimplePool.prototype={constructor:cc.SimplePool,size:function(){return this._pool.length},put:function(a){a&&this._pool.indexOf(a)===-1&&this._pool.unshift(a)},get:function(){var a=this._pool.length-1;if(a<0)return null;var b=this._pool[a];return this._pool.length=a,b},find:function(a,b){var c,d,e,f=this._pool,g=f.length-1;for(d=f.length;d>=0;--d)if(e=f[d],c=a(d,e))return f[d]=f[g],f.length=g,e;if(b){var h=b();if(h>=0)return f[h]=f[g],f.length=g,e}return null}},cc.EventHelper=function(){},cc.EventHelper.prototype={constructor:cc.EventHelper,apply:function(a){a.addEventListener=cc.EventHelper.prototype.addEventListener,a.hasEventListener=cc.EventHelper.prototype.hasEventListener,a.removeEventListener=cc.EventHelper.prototype.removeEventListener,a.dispatchEvent=cc.EventHelper.prototype.dispatchEvent},addEventListener:function(a,b,c){if("load"===a&&this._textureLoaded)return void setTimeout(function(){b.call(c)},0);void 0===this._listeners&&(this._listeners={});var d=this._listeners;void 0===d[a]&&(d[a]=[]),this.hasEventListener(a,b,c)||d[a].push({callback:b,eventTarget:c})},hasEventListener:function(a,b,c){if(void 0===this._listeners)return!1;var d=this._listeners;if(void 0!==d[a])for(var e=0,f=d.length;e<f;e++){var g=d[e];if(g.callback===b&&g.eventTarget===c)return!0}return!1},removeEventListener:function(a,b,c){if(void 0!==this._listeners){var d=this._listeners,e=d[a];if(void 0!==e)for(var f=0;f<e.length;){var g=e[f];g.eventTarget===c&&g.callback===b?e.splice(f,1):f++}}},removeEventTarget:function(a,b,c){if(void 0!==this._listeners){var d=this._listeners,e=d[a];if(void 0!==e)for(var f=0;f<e.length;){var g=e[f];g.eventTarget===c?e.splice(f,1):f++}}},dispatchEvent:function(a,b){if(void 0!==this._listeners){null==b&&(b=!0);var c=this._listeners,d=c[a];if(void 0!==d){for(var e=[],f=d.length,g=0;g<f;g++)e[g]=d[g];for(g=0;g<f;g++)e[g].callback.call(e[g].eventTarget,this);b&&(d.length=0)}}}},cc.EventHelper.prototype.apply(cc.game);var cc=cc||{};if(cc._loadingImage="data:image/gif;base64,R0lGODlhEAAQALMNAD8/P7+/vyoqKlVVVX9/fxUVFUBAQGBgYMDAwC8vL5CQkP///wAAAP///wAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFAAANACwAAAAAEAAQAAAEO5DJSau9OOvNex0IMnDIsiCkiW6g6BmKYlBFkhSUEgQKlQCARG6nEBwOgl+QApMdCIRD7YZ5RjlGpCUCACH5BAUAAA0ALAAAAgAOAA4AAAQ6kLGB0JA4M7QW0hrngRllkYyhKAYqKUGguAws0ypLS8JxCLQDgXAIDg+FRKIA6v0SAECCBpXSkstMBAAh+QQFAAANACwAAAAACgAQAAAEOJDJORAac6K1kDSKYmydpASBUl0mqmRfaGTCcQgwcxDEke+9XO2WkxQSiUIuAQAkls0n7JgsWq8RACH5BAUAAA0ALAAAAAAOAA4AAAQ6kMlplDIzTxWC0oxwHALnDQgySAdBHNWFLAvCukc215JIZihVIZEogDIJACBxnCSXTcmwGK1ar1hrBAAh+QQFAAANACwAAAAAEAAKAAAEN5DJKc4RM+tDyNFTkSQF5xmKYmQJACTVpQSBwrpJNteZSGYoFWjIGCAQA2IGsVgglBOmEyoxIiMAIfkEBQAADQAsAgAAAA4ADgAABDmQSVZSKjPPBEDSGucJxyGA1XUQxAFma/tOpDlnhqIYN6MEAUXvF+zldrMBAjHoIRYLhBMqvSmZkggAIfkEBQAADQAsBgAAAAoAEAAABDeQyUmrnSWlYhMASfeFVbZdjHAcgnUQxOHCcqWylKEohqUEAYVkgEAMfkEJYrFA6HhKJsJCNFoiACH5BAUAAA0ALAIAAgAOAA4AAAQ3kMlJq704611SKloCAEk4lln3DQgyUMJxCBKyLAh1EMRR3wiDQmHY9SQslyIQUMRmlmVTIyRaIgA7",
cc._fpsImage="data:image/png;base64,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",cc._loaderImage="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAlAAD/4QMpaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjM4MDBEMDY2QTU1MjExRTFBQTAzQjEzMUNFNzMxRkQwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjM4MDBEMDY1QTU1MjExRTFBQTAzQjEzMUNFNzMxRkQwIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU2RTk0OEM4OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU2RTk0OEM5OERCNDExRTE5NEUyRkE3M0M3QkE1NTlEIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQADQkJCQoJDQoKDRMMCwwTFhENDREW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",cc.loader.loadBinary=function(a,b){var c=this,d=this.getXMLHttpRequest(),e="load "+a+" failed!";d.open("GET",a,!0),cc.loader.loadBinary._IEFilter?(d.setRequestHeader("Accept-Charset","x-user-defined"),d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var a=cc._convertResponseBodyToText(d.responseBody);b(null,c._str2Uint8Array(a))}else b(e)}):(d.overrideMimeType&&d.overrideMimeType("text/plain; charset=x-user-defined"),d.onload=function(){4===d.readyState&&200===d.status?b(null,c._str2Uint8Array(d.responseText)):b(e)}),d.send(null)},cc.loader.loadBinary._IEFilter=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent)&&window.IEBinaryToArray_ByteStr&&window.IEBinaryToArray_ByteStr_Last,cc.loader._str2Uint8Array=function(a){if(!a)return null;for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=255&a.charCodeAt(c);return b},cc.loader.loadBinarySync=function(a){var b=this,c=this.getXMLHttpRequest(),d="load "+a+" failed!";c.open("GET",a,!1);var e=null;if(cc.loader.loadBinary._IEFilter){if(c.setRequestHeader("Accept-Charset","x-user-defined"),c.send(null),200!==c.status)return cc.log(d),null;var f=cc._convertResponseBodyToText(c.responseBody);f&&(e=b._str2Uint8Array(f))}else{if(c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),200!==c.status)return cc.log(d),null;e=this._str2Uint8Array(c.responseText)}return e},window.Uint8Array=window.Uint8Array||window.Array,cc.loader.loadBinary._IEFilter){var IEBinaryToArray_ByteStr_Script='<!-- IEBinaryToArray_ByteStr -->\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n   IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n   Dim lastIndex\r\n   lastIndex = LenB(Binary)\r\n   if lastIndex mod 2 Then\r\n       IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n   Else\r\n       IEBinaryToArray_ByteStr_Last = ""\r\n   End If\r\nEnd Function\r\n',myVBScript=document.createElement("script");myVBScript.type="text/vbscript",myVBScript.textContent=IEBinaryToArray_ByteStr_Script,document.body.appendChild(myVBScript),cc._convertResponseBodyToText=function(a){for(var b={},c=0;c<256;c++)for(var d=0;d<256;d++)b[String.fromCharCode(c+256*d)]=String.fromCharCode(c)+String.fromCharCode(d);var e=IEBinaryToArray_ByteStr(a),f=IEBinaryToArray_ByteStr_Last(a);return e.replace(/[\s\S]/g,function(a){return b[a]})+f}}var cc=cc||{},ClassManager={id:0|998*Math.random(),instanceId:0|998*Math.random(),getNewID:function(){return this.id++},getNewInstanceId:function(){return this.instanceId++}};switch(function(){var a=/\b_super\b/;cc.Class=function(){},cc.Class.extend=function(b){function c(){this.__instanceId=ClassManager.getNewInstanceId(),this.ctor&&this.ctor.apply(this,arguments)}var d=this.prototype,e=Object.create(d),f=ClassManager.getNewID();ClassManager[f]=d;var g={writable:!0,enumerable:!1,configurable:!0};e.__instanceId=null,c.id=f,g.value=f,Object.defineProperty(e,"__pid",g),c.prototype=e,g.value=c,Object.defineProperty(c.prototype,"constructor",g),this.__getters__&&(c.__getters__=cc.clone(this.__getters__)),this.__setters__&&(c.__setters__=cc.clone(this.__setters__));for(var h=0,i=arguments.length;h<i;++h){var j=arguments[h];for(var k in j){var l="function"==typeof j[k],m="function"==typeof d[k],n=a.test(j[k]);if(l&&m&&n?(g.value=function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);return this._super=c,e}}(k,j[k]),Object.defineProperty(e,k,g)):l?(g.value=j[k],Object.defineProperty(e,k,g)):e[k]=j[k],l){var o,p,q;if(this.__getters__&&this.__getters__[k]){q=this.__getters__[k];for(var r in this.__setters__)if(this.__setters__[r]===q){p=r;break}cc.defineGetterSetter(e,q,j[k],j[p]?j[p]:e[p],k,p)}if(this.__setters__&&this.__setters__[k]){q=this.__setters__[k];for(var r in this.__getters__)if(this.__getters__[r]===q){o=r;break}cc.defineGetterSetter(e,q,j[o]?j[o]:e[o],j[k],o,k)}}}}return c.extend=cc.Class.extend,c.implement=function(a){for(var b in a)e[b]=a[b]},c}}(),cc.defineGetterSetter=function(a,b,c,d,e,f){if(a.__defineGetter__)c&&a.__defineGetter__(b,c),d&&a.__defineSetter__(b,d);else{if(!Object.defineProperty)throw new Error("browser does not support getters");var g={enumerable:!1,configurable:!0};c&&(g.get=c),d&&(g.set=d),Object.defineProperty(a,b,g)}if(!e&&!f)for(var h=null!=c,i=void 0!=d,j=Object.getOwnPropertyNames(a),k=0;k<j.length;k++){var l=j[k];if((a.__lookupGetter__?!a.__lookupGetter__(l):!Object.getOwnPropertyDescriptor(a,l))&&"function"==typeof a[l]){var m=a[l];if(h&&m===c&&(e=l,!i||f))break;if(i&&m===d&&(f=l,!h||e))break}}var n=a.constructor;e&&(n.__getters__||(n.__getters__={}),n.__getters__[e]=b),f&&(n.__setters__||(n.__setters__={}),n.__setters__[f]=b)},cc.clone=function(a){var b=a.constructor?new a.constructor:{};for(var c in a){var d=a[c];"object"!=typeof d||!d||d instanceof cc.Node||d instanceof HTMLElement?b[c]=d:b[c]=cc.clone(d)}return b},cc.inject=function(a,b){for(var c in a)b[c]=a[c]},cc.Point=function(a,b){this.x=a||0,this.y=b||0},cc.p=function(a,b){return void 0===a?{x:0,y:0}:void 0===b?{x:a.x,y:a.y}:{x:a,y:b}},cc.pointEqualToPoint=function(a,b){return a&&b&&a.x===b.x&&a.y===b.y},cc.Size=function(a,b){this.width=a||0,this.height=b||0},cc.size=function(a,b){return void 0===a?{width:0,height:0}:void 0===b?{width:a.width,height:a.height}:{width:a,height:b}},cc.sizeEqualToSize=function(a,b){return a&&b&&a.width===b.width&&a.height===b.height},cc.Rect=function(a,b,c,d){this.x=a||0,this.y=b||0,this.width=c||0,this.height=d||0},cc.rect=function(a,b,c,d){return void 0===a?{x:0,y:0,width:0,height:0}:void 0===b?{x:a.x,y:a.y,width:a.width,height:a.height}:{x:a,y:b,width:c,height:d}},cc.rectEqualToRect=function(a,b){return a&&b&&a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height},cc._rectEqualToZero=function(a){return a&&0===a.x&&0===a.y&&0===a.width&&0===a.height},cc.rectContainsRect=function(a,b){return!(!a||!b)&&!(a.x>=b.x||a.y>=b.y||a.x+a.width<=b.x+b.width||a.y+a.height<=b.y+b.height)},cc.rectGetMaxX=function(a){return a.x+a.width},cc.rectGetMidX=function(a){return a.x+a.width/2},cc.rectGetMinX=function(a){return a.x},cc.rectGetMaxY=function(a){return a.y+a.height},cc.rectGetMidY=function(a){return a.y+a.height/2},cc.rectGetMinY=function(a){return a.y},cc.rectContainsPoint=function(a,b){return b.x>=cc.rectGetMinX(a)&&b.x<=cc.rectGetMaxX(a)&&b.y>=cc.rectGetMinY(a)&&b.y<=cc.rectGetMaxY(a)},cc.rectIntersectsRect=function(a,b){var c=a.x+a.width,d=a.y+a.height,e=b.x+b.width,f=b.y+b.height;return!(c<b.x||e<a.x||d<b.y||f<a.y)},cc.rectOverlapsRect=function(a,b){return!(a.x+a.width<b.x||b.x+b.width<a.x||a.y+a.height<b.y||b.y+b.height<a.y)},cc.rectUnion=function(a,b){var c=cc.rect(0,0,0,0);return c.x=Math.min(a.x,b.x),c.y=Math.min(a.y,b.y),c.width=Math.max(a.x+a.width,b.x+b.width)-c.x,c.height=Math.max(a.y+a.height,b.y+b.height)-c.y,c},cc.rectIntersection=function(a,b){var c=cc.rect(Math.max(cc.rectGetMinX(a),cc.rectGetMinX(b)),Math.max(cc.rectGetMinY(a),cc.rectGetMinY(b)),0,0);return c.width=Math.min(cc.rectGetMaxX(a),cc.rectGetMaxX(b))-cc.rectGetMinX(c),c.height=Math.min(cc.rectGetMaxY(a),cc.rectGetMaxY(b))-cc.rectGetMinY(c),c},cc.SAXParser=cc.Class.extend({_parser:null,_isSupportDOMParser:null,ctor:function(){window.DOMParser?(this._isSupportDOMParser=!0,this._parser=new DOMParser):this._isSupportDOMParser=!1},parse:function(a){return this._parseXML(a)},_parseXML:function(a){var b;return this._isSupportDOMParser?b=this._parser.parseFromString(a,"text/xml"):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)),b}}),cc.PlistParser=cc.SAXParser.extend({parse:function(a){var b=this._parseXML(a),c=b.documentElement;if("plist"!==c.tagName)return cc.warn("Not a plist file!"),{};for(var d=null,e=0,f=c.childNodes.length;e<f&&(d=c.childNodes[e],1!==d.nodeType);e++);return b=null,this._parseNode(d)},_parseNode:function(a){var b=null,c=a.tagName;if("dict"===c)b=this._parseDict(a);else if("array"===c)b=this._parseArray(a);else if("string"===c)if(1===a.childNodes.length)b=a.firstChild.nodeValue;else{b="";for(var d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].nodeValue}else"false"===c?b=!1:"true"===c?b=!0:"real"===c?b=parseFloat(a.firstChild.nodeValue):"integer"===c&&(b=parseInt(a.firstChild.nodeValue,10));return b},_parseArray:function(a){for(var b=[],c=0,d=a.childNodes.length;c<d;c++){var e=a.childNodes[c];1===e.nodeType&&b.push(this._parseNode(e))}return b},_parseDict:function(a){for(var b={},c=null,d=0,e=a.childNodes.length;d<e;d++){var f=a.childNodes[d];1===f.nodeType&&("key"===f.tagName?c=f.firstChild.nodeValue:b[c]=this._parseNode(f))}return b}}),cc.saxParser=new cc.SAXParser,cc.plistParser=new cc.PlistParser,cc._txtLoader={load:function(a,b,c,d){cc.loader.loadTxt(a,d)}},cc.loader.register(["txt","xml","vsh","fsh","atlas"],cc._txtLoader),cc._jsonLoader={load:function(a,b,c,d){cc.loader.loadJson(a,d)}},cc.loader.register(["json","ExportJson"],cc._jsonLoader),cc._jsLoader={load:function(a,b,c,d){cc.loader.loadJs(a,d)}},cc.loader.register(["js"],cc._jsLoader),cc._imgLoader={load:function(a,b,c,d){var e;e=cc.loader.isLoading(a)?d:function(a,c){return a?d(a):(cc.loader.cache[b]=c,cc.textureCache.handleLoadedTexture(b),void d(null,c))},cc.loader.loadImg(a,e)}},cc.loader.register(["png","jpg","bmp","jpeg","gif","ico","tiff","webp"],cc._imgLoader),cc._serverImgLoader={load:function(a,b,c,d){cc._imgLoader.load(c.src,b,c,d)}},cc.loader.register(["serverImg"],cc._serverImgLoader),cc._plistLoader={load:function(a,b,c,d){cc.loader.loadTxt(a,function(a,b){return a?d(a):void d(null,cc.plistParser.parse(b))})}},cc.loader.register(["plist"],cc._plistLoader),cc._fontLoader={TYPE:{".eot":"embedded-opentype",".ttf":"truetype",".ttc":"truetype",".woff":"woff",".svg":"svg"},_loadFont:function(a,b,c){var d=document,e=cc.path,f=this.TYPE,g=document.createElement("style");g.type="text/css",d.body.appendChild(g);var h="";if(h+=isNaN(a-0)?"@font-face { font-family:"+a+"; src:":"@font-face { font-family:'"+a+"'; src:",b instanceof Array)for(var i=0,j=b.length;i<j;i++){var k=b[i];c=e.extname(k).toLowerCase(),h+="url('"+b[i]+"') format('"+f[c]+"')",h+=i===j-1?";":","}else c=c.toLowerCase(),h+="url('"+b+"') format('"+f[c]+"');";g.textContent+=h+"}";var l=document.createElement("div"),m=l.style;m.fontFamily=a,l.innerHTML=".",m.position="absolute",m.left="-100px",m.top="-100px",d.body.appendChild(l)},load:function(a,b,c,d){var e=this,f=c.type,g=c.name,h=c.srcs;cc.isString(c)?(f=cc.path.extname(c),g=cc.path.basename(c,f),e._loadFont(g,c,f)):e._loadFont(g,h),document.fonts?document.fonts.load("1em "+g).then(function(){d(null,!0)},function(a){d(a)}):d(null,!0)}},cc.loader.register(["font","eot","ttf","woff","svg","ttc"],cc._fontLoader),cc._binaryLoader={load:function(a,b,c,d){cc.loader.loadBinary(a,d)}},cc._csbLoader={load:function(a,b,c,d){cc.loader.loadCsb(a,d)}},cc.loader.register(["csb"],cc._csbLoader),window.CocosEngine=cc.ENGINE_VERSION="Cocos2d-JS v3.13",cc.FIX_ARTIFACTS_BY_STRECHING_TEXEL=0,cc.DIRECTOR_STATS_POSITION=cc.p(0,0),cc.DIRECTOR_FPS_INTERVAL=.5,cc.COCOSNODE_RENDER_SUBPIXEL=1,cc.SPRITEBATCHNODE_RENDER_SUBPIXEL=1,cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA=1,cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP=0,cc.TEXTURE_ATLAS_USE_VAO=0,cc.TEXTURE_NPOT_SUPPORT=0,cc.RETINA_DISPLAY_SUPPORT=1,cc.RETINA_DISPLAY_FILENAME_SUFFIX="-hd",cc.USE_LA88_LABELS=1,cc.SPRITE_DEBUG_DRAW=0,cc.SPRITEBATCHNODE_DEBUG_DRAW=0,cc.LABELBMFONT_DEBUG_DRAW=0,cc.LABELATLAS_DEBUG_DRAW=0,cc.IS_RETINA_DISPLAY_SUPPORTED=1,cc.DEFAULT_ENGINE=cc.ENGINE_VERSION+"-canvas",cc.ENABLE_STACKABLE_ACTIONS=1,cc.ENABLE_GL_STATE_CACHE=1,cc.$=function(a){var b=this===cc?document:this,c=a instanceof HTMLElement?a:b.querySelector(a);return c&&(c.find=c.find||cc.$,c.hasClass=c.hasClass||function(a){return this.className.match(new RegExp("(\\s|^)"+a+"(\\s|$)"))},c.addClass=c.addClass||function(a){return this.hasClass(a)||(this.className&&(this.className+=" "),this.className+=a),this},c.removeClass=c.removeClass||function(a){return this.hasClass(a)&&(this.className=this.className.replace(a,"")),this},c.remove=c.remove||function(){return this.parentNode&&this.parentNode.removeChild(this),this},c.appendTo=c.appendTo||function(a){return a.appendChild(this),this},c.prependTo=c.prependTo||function(a){return a.childNodes[0]?a.insertBefore(this,a.childNodes[0]):a.appendChild(this),this},c.transforms=c.transforms||function(){return this.style[cc.$.trans]=cc.$.translate(this.position)+cc.$.rotate(this.rotation)+cc.$.scale(this.scale)+cc.$.skew(this.skew),this},c.position=c.position||{x:0,y:0},c.rotation=c.rotation||0,c.scale=c.scale||{x:1,y:1},c.skew=c.skew||{x:0,y:0},c.translates=function(a,b){return this.position.x=a,this.position.y=b,this.transforms(),this},c.rotate=function(a){return this.rotation=a,this.transforms(),this},c.resize=function(a,b){return this.scale.x=a,this.scale.y=b,this.transforms(),this},c.setSkew=function(a,b){return this.skew.x=a,this.skew.y=b,this.transforms(),this}),c},cc.sys.browserType){case cc.sys.BROWSER_TYPE_FIREFOX:cc.$.pfx="Moz",cc.$.hd=!0;break;case cc.sys.BROWSER_TYPE_CHROME:case cc.sys.BROWSER_TYPE_SAFARI:cc.$.pfx="webkit",cc.$.hd=!0;break;case cc.sys.BROWSER_TYPE_OPERA:cc.$.pfx="O",cc.$.hd=!1;break;case cc.sys.BROWSER_TYPE_IE:cc.$.pfx="ms",cc.$.hd=!1;break;default:cc.$.pfx="webkit",cc.$.hd=!0}cc.$.trans=cc.$.pfx+"Transform",cc.$.translate=cc.$.hd?function(a){return"translate3d("+a.x+"px, "+a.y+"px, 0) "}:function(a){return"translate("+a.x+"px, "+a.y+"px) "},cc.$.rotate=cc.$.hd?function(a){
return"rotateZ("+a+"deg) "}:function(a){return"rotate("+a+"deg) "},cc.$.scale=function(a){return"scale("+a.x+", "+a.y+") "},cc.$.skew=function(a){return"skewX("+-a.x+"deg) skewY("+a.y+"deg)"},cc.$new=function(a){return cc.$(document.createElement(a))},cc.$.findpos=function(a){var b=0,c=0;do b+=a.offsetLeft,c+=a.offsetTop;while(a=a.offsetParent);return{x:b,y:c}},cc.INVALID_INDEX=-1,cc.PI=Math.PI,cc.FLT_MAX=parseFloat("3.402823466e+38F"),cc.FLT_MIN=parseFloat("1.175494351e-38F"),cc.RAD=cc.PI/180,cc.DEG=180/cc.PI,cc.UINT_MAX=4294967295,cc.swap=function(a,b,c){if(!cc.isObject(c)||cc.isUndefined(c.x)||cc.isUndefined(c.y))cc.log(cc._LogInfos.swap);else{var d=c[a];c[a]=c[b],c[b]=d}},cc.lerp=function(a,b,c){return a+(b-a)*c},cc.rand=function(){return 16777215*Math.random()},cc.randomMinus1To1=function(){return 2*(Math.random()-.5)},cc.random0To1=Math.random,cc.degreesToRadians=function(a){return a*cc.RAD},cc.radiansToDegrees=function(a){return a*cc.DEG},cc.radiansToDegress=function(a){return cc.log(cc._LogInfos.radiansToDegress),a*cc.DEG},cc.REPEAT_FOREVER=Number.MAX_VALUE-1,cc.nodeDrawSetup=function(a){a._shaderProgram&&(a._shaderProgram.use(),a._shaderProgram.setUniformForModelViewAndProjectionMatrixWithMat4())},cc.enableDefaultGLStates=function(){},cc.disableDefaultGLStates=function(){},cc.incrementGLDraws=function(a){cc.g_NumberOfDraws+=a},cc.FLT_EPSILON=1.192092896e-7,cc.contentScaleFactor=cc.IS_RETINA_DISPLAY_SUPPORTED?function(){return cc.director.getContentScaleFactor()}:function(){return 1},cc.pointPointsToPixels=function(a){var b=cc.contentScaleFactor();return cc.p(a.x*b,a.y*b)},cc.pointPixelsToPoints=function(a){var b=cc.contentScaleFactor();return cc.p(a.x/b,a.y/b)},cc._pointPixelsToPointsOut=function(a,b){var c=cc.contentScaleFactor();b.x=a.x/c,b.y=a.y/c},cc.sizePointsToPixels=function(a){var b=cc.contentScaleFactor();return cc.size(a.width*b,a.height*b)},cc.sizePixelsToPoints=function(a){var b=cc.contentScaleFactor();return cc.size(a.width/b,a.height/b)},cc._sizePixelsToPointsOut=function(a,b){var c=cc.contentScaleFactor();b.width=a.width/c,b.height=a.height/c},cc.rectPixelsToPoints=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){var b=cc.contentScaleFactor();return cc.rect(a.x/b,a.y/b,a.width/b,a.height/b)}:function(a){return a},cc.rectPointsToPixels=cc.IS_RETINA_DISPLAY_SUPPORTED?function(a){var b=cc.contentScaleFactor();return cc.rect(a.x*b,a.y*b,a.width*b,a.height*b)}:function(a){return a},cc.ONE=1,cc.ZERO=0,cc.SRC_ALPHA=770,cc.SRC_ALPHA_SATURATE=776,cc.SRC_COLOR=768,cc.DST_ALPHA=772,cc.DST_COLOR=774,cc.ONE_MINUS_SRC_ALPHA=771,cc.ONE_MINUS_SRC_COLOR=769,cc.ONE_MINUS_DST_ALPHA=773,cc.ONE_MINUS_DST_COLOR=775,cc.ONE_MINUS_CONSTANT_ALPHA=32772,cc.ONE_MINUS_CONSTANT_COLOR=32770,cc.LINEAR=9729,cc.REPEAT=10497,cc.CLAMP_TO_EDGE=33071,cc.MIRRORED_REPEAT=33648,cc.BLEND_SRC=cc.SRC_ALPHA,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&cc.OPTIMIZE_BLEND_FUNC_FOR_PREMULTIPLIED_ALPHA&&(cc.BLEND_SRC=cc.ONE)}),cc.BLEND_DST=cc.ONE_MINUS_SRC_ALPHA,cc.checkGLErrorDebug=function(){if(cc.renderMode===cc.game.RENDER_TYPE_WEBGL){var a=cc._renderContext.getError();a&&cc.log(cc._LogInfos.checkGLErrorDebug,a)}},cc.ORIENTATION_PORTRAIT=1,cc.ORIENTATION_LANDSCAPE=2,cc.ORIENTATION_AUTO=3,cc.VERTEX_ATTRIB_FLAG_NONE=0,cc.VERTEX_ATTRIB_FLAG_POSITION=1,cc.VERTEX_ATTRIB_FLAG_COLOR=2,cc.VERTEX_ATTRIB_FLAG_TEX_COORDS=4,cc.VERTEX_ATTRIB_FLAG_POS_COLOR_TEX=cc.VERTEX_ATTRIB_FLAG_POSITION|cc.VERTEX_ATTRIB_FLAG_COLOR|cc.VERTEX_ATTRIB_FLAG_TEX_COORDS,cc.GL_ALL=0,cc.VERTEX_ATTRIB_POSITION=0,cc.VERTEX_ATTRIB_COLOR=1,cc.VERTEX_ATTRIB_TEX_COORDS=2,cc.VERTEX_ATTRIB_MAX=7,cc.UNIFORM_PMATRIX=0,cc.UNIFORM_MVMATRIX=1,cc.UNIFORM_MVPMATRIX=2,cc.UNIFORM_TIME=3,cc.UNIFORM_SINTIME=4,cc.UNIFORM_COSTIME=5,cc.UNIFORM_RANDOM01=6,cc.UNIFORM_SAMPLER=7,cc.UNIFORM_MAX=8,cc.SHADER_POSITION_TEXTURECOLOR="ShaderPositionTextureColor",cc.SHADER_SPRITE_POSITION_TEXTURECOLOR="ShaderSpritePositionTextureColor",cc.SHADER_POSITION_TEXTURECOLORALPHATEST="ShaderPositionTextureColorAlphaTest",cc.SHADER_SPRITE_POSITION_TEXTURECOLORALPHATEST="ShaderSpritePositionTextureColorAlphaTest",cc.SHADER_POSITION_COLOR="ShaderPositionColor",cc.SHADER_SPRITE_POSITION_COLOR="ShaderSpritePositionColor",cc.SHADER_POSITION_TEXTURE="ShaderPositionTexture",cc.SHADER_POSITION_TEXTURE_UCOLOR="ShaderPositionTexture_uColor",cc.SHADER_POSITION_TEXTUREA8COLOR="ShaderPositionTextureA8Color",cc.SHADER_POSITION_UCOLOR="ShaderPosition_uColor",cc.SHADER_POSITION_LENGTHTEXTURECOLOR="ShaderPositionLengthTextureColor",cc.UNIFORM_PMATRIX_S="CC_PMatrix",cc.UNIFORM_MVMATRIX_S="CC_MVMatrix",cc.UNIFORM_MVPMATRIX_S="CC_MVPMatrix",cc.UNIFORM_TIME_S="CC_Time",cc.UNIFORM_SINTIME_S="CC_SinTime",cc.UNIFORM_COSTIME_S="CC_CosTime",cc.UNIFORM_RANDOM01_S="CC_Random01",cc.UNIFORM_SAMPLER_S="CC_Texture0",cc.UNIFORM_ALPHA_TEST_VALUE_S="CC_alpha_value",cc.ATTRIBUTE_NAME_COLOR="a_color",cc.ATTRIBUTE_NAME_POSITION="a_position",cc.ATTRIBUTE_NAME_TEX_COORD="a_texCoord",cc.ATTRIBUTE_NAME_MVMAT="a_mvMatrix",cc.ITEM_SIZE=32,cc.CURRENT_ITEM=3233828865,cc.ZOOM_ACTION_TAG=3233828866,cc.NORMAL_TAG=8801,cc.SELECTED_TAG=8802,cc.DISABLE_TAG=8803,cc.arrayVerifyType=function(a,b){if(a&&a.length>0)for(var c=0;c<a.length;c++)if(!(a[c]instanceof b))return cc.log("element type is wrong!"),!1;return!0},cc.arrayRemoveObject=function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b){a.splice(c,1);break}},cc.arrayRemoveArray=function(a,b){for(var c=0,d=b.length;c<d;c++)cc.arrayRemoveObject(a,b[c])},cc.arrayAppendObjectsToIndex=function(a,b,c){return a.splice.apply(a,[c,0].concat(b)),a},cc.copyArray=function(a){var b,c=a.length,d=new Array(c);for(b=0;b<c;b+=1)d[b]=a[b];return d},cc._tmp.PrototypeColor=function(){var a=cc.color;a._getWhite=function(){return a(255,255,255)},a._getYellow=function(){return a(255,255,0)},a._getBlue=function(){return a(0,0,255)},a._getGreen=function(){return a(0,255,0)},a._getRed=function(){return a(255,0,0)},a._getMagenta=function(){return a(255,0,255)},a._getBlack=function(){return a(0,0,0)},a._getOrange=function(){return a(255,127,0)},a._getGray=function(){return a(166,166,166)},a.WHITE,cc.defineGetterSetter(a,"WHITE",a._getWhite),a.YELLOW,cc.defineGetterSetter(a,"YELLOW",a._getYellow),a.BLUE,cc.defineGetterSetter(a,"BLUE",a._getBlue),a.GREEN,cc.defineGetterSetter(a,"GREEN",a._getGreen),a.RED,cc.defineGetterSetter(a,"RED",a._getRed),a.MAGENTA,cc.defineGetterSetter(a,"MAGENTA",a._getMagenta),a.BLACK,cc.defineGetterSetter(a,"BLACK",a._getBlack),a.ORANGE,cc.defineGetterSetter(a,"ORANGE",a._getOrange),a.GRAY,cc.defineGetterSetter(a,"GRAY",a._getGray),cc.BlendFunc._disable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)},cc.BlendFunc._alphaPremultiplied=function(){return new cc.BlendFunc(cc.ONE,cc.ONE_MINUS_SRC_ALPHA)},cc.BlendFunc._alphaNonPremultiplied=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA)},cc.BlendFunc._additive=function(){return new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE)},cc.BlendFunc.DISABLE,cc.defineGetterSetter(cc.BlendFunc,"DISABLE",cc.BlendFunc._disable),cc.BlendFunc.ALPHA_PREMULTIPLIED,cc.defineGetterSetter(cc.BlendFunc,"ALPHA_PREMULTIPLIED",cc.BlendFunc._alphaPremultiplied),cc.BlendFunc.ALPHA_NON_PREMULTIPLIED,cc.defineGetterSetter(cc.BlendFunc,"ALPHA_NON_PREMULTIPLIED",cc.BlendFunc._alphaNonPremultiplied),cc.BlendFunc.ADDITIVE,cc.defineGetterSetter(cc.BlendFunc,"ADDITIVE",cc.BlendFunc._additive)};var cc=cc||{};cc._tmp=cc._tmp||{},cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){cc.color=function(a,b,c,d,e,f){if(void 0===a)return new cc.Color(0,0,0,255,e,f);if(cc.isString(a)){var g=cc.hexToColor(a);return new cc.Color(g.r,g.g,g.b,g.a)}return cc.isObject(a)?new cc.Color(a.r,a.g,a.b,a.a,a.arrayBuffer,a.offset):new cc.Color(a,b,c,d,e,f)},cc.Color=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.Color.BYTES_PER_ELEMENT),this._offset=f||0;var g=this._arrayBuffer,h=this._offset;this._view=new Uint8Array(g,h,4),this._view[0]=a||0,this._view[1]=b||0,this._view[2]=c||0,this._view[3]=null==d?255:d,void 0===d&&(this.a_undefined=!0)},cc.Color.BYTES_PER_ELEMENT=4;var a=cc.Color.prototype;a._getR=function(){return this._view[0]},a._setR=function(a){this._view[0]=a<0?0:a},a._getG=function(){return this._view[1]},a._setG=function(a){this._view[1]=a<0?0:a},a._getB=function(){return this._view[2]},a._setB=function(a){this._view[2]=a<0?0:a},a._getA=function(){return this._view[3]},a._setA=function(a){this._view[3]=a<0?0:a},a.r,cc.defineGetterSetter(a,"r",a._getR,a._setR),a.g,cc.defineGetterSetter(a,"g",a._getG,a._setG),a.b,cc.defineGetterSetter(a,"b",a._getB,a._setB),a.a,cc.defineGetterSetter(a,"a",a._getA,a._setA),cc.assert(cc.isFunction(cc._tmp.PrototypeColor),cc._LogInfos.MissingFile,"CCTypesPropertyDefine.js"),cc._tmp.PrototypeColor(),delete cc._tmp.PrototypeColor}}),cc.Color=function(a,b,c,d){this.r=a||0,this.g=b||0,this.b=c||0,this.a=null==d?255:d},cc.color=function(a,b,c,d){return void 0===a?{r:0,g:0,b:0,a:255}:cc.isString(a)?cc.hexToColor(a):cc.isObject(a)?{r:a.r,g:a.g,b:a.b,a:null==a.a?255:a.a}:{r:a,g:b,b:c,a:null==d?255:d}},cc.colorEqual=function(a,b){return a.r===b.r&&a.g===b.g&&a.b===b.b},cc.Acceleration=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.timestamp=d||0},cc.Vertex2F=function(a,b,c,d){this._arrayBuffer=c||new ArrayBuffer(cc.Vertex2F.BYTES_PER_ELEMENT),this._offset=d||0,this._view=new Float32Array(this._arrayBuffer,this._offset,2),this._view[0]=a||0,this._view[1]=b||0},cc.Vertex2F.BYTES_PER_ELEMENT=8,_p=cc.Vertex2F.prototype,_p._getX=function(){return this._view[0]},_p._setX=function(a){this._view[0]=a},_p._getY=function(){return this._view[1]},_p._setY=function(a){this._view[1]=a},_p.x,cc.defineGetterSetter(_p,"x",_p._getX,_p._setX),_p.y,cc.defineGetterSetter(_p,"y",_p._getY,_p._setY),cc.Vertex3F=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.Vertex3F.BYTES_PER_ELEMENT),this._offset=e||0;var f=this._arrayBuffer,g=this._offset;this._view=new Float32Array(f,g,3),this._view[0]=a||0,this._view[1]=b||0,this._view[2]=c||0},cc.Vertex3F.BYTES_PER_ELEMENT=12,_p=cc.Vertex3F.prototype,_p._getX=function(){return this._view[0]},_p._setX=function(a){this._view[0]=a},_p._getY=function(){return this._view[1]},_p._setY=function(a){this._view[1]=a},_p._getZ=function(){return this._view[2]},_p._setZ=function(a){this._view[2]=a},_p.x,cc.defineGetterSetter(_p,"x",_p._getX,_p._setX),_p.y,cc.defineGetterSetter(_p,"y",_p._getY,_p._setY),_p.z,cc.defineGetterSetter(_p,"z",_p._getZ,_p._setZ),cc.Tex2F=function(a,b,c,d){this._arrayBuffer=c||new ArrayBuffer(cc.Tex2F.BYTES_PER_ELEMENT),this._offset=d||0,this._view=new Float32Array(this._arrayBuffer,this._offset,2),this._view[0]=a||0,this._view[1]=b||0},cc.Tex2F.BYTES_PER_ELEMENT=8,_p=cc.Tex2F.prototype,_p._getU=function(){return this._view[0]},_p._setU=function(a){this._view[0]=a},_p._getV=function(){return this._view[1]},_p._setV=function(a){this._view[1]=a},_p.u,cc.defineGetterSetter(_p,"u",_p._getU,_p._setU),_p.v,cc.defineGetterSetter(_p,"v",_p._getV,_p._setV),cc.Quad2=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.Quad2.BYTES_PER_ELEMENT),this._offset=f||0;var g=this._arrayBuffer,h=this._offset,i=cc.Vertex2F.BYTES_PER_ELEMENT;this._tl=a?new cc.Vertex2F(a.x,a.y,g,h):new cc.Vertex2F(0,0,g,h),h+=i,this._tr=b?new cc.Vertex2F(b.x,b.y,g,h):new cc.Vertex2F(0,0,g,h),h+=i,this._bl=c?new cc.Vertex2F(c.x,c.y,g,h):new cc.Vertex2F(0,0,g,h),h+=i,this._br=d?new cc.Vertex2F(d.x,d.y,g,h):new cc.Vertex2F(0,0,g,h)},cc.Quad2.BYTES_PER_ELEMENT=32,_p=cc.Quad2.prototype,_p._getTL=function(){return this._tl},_p._setTL=function(a){this._tl._view[0]=a.x,this._tl._view[1]=a.y},_p._getTR=function(){return this._tr},_p._setTR=function(a){this._tr._view[0]=a.x,this._tr._view[1]=a.y},_p._getBL=function(){return this._bl},_p._setBL=function(a){this._bl._view[0]=a.x,this._bl._view[1]=a.y},_p._getBR=function(){return this._br},_p._setBR=function(a){this._br._view[0]=a.x,this._br._view[1]=a.y},_p.tl,cc.defineGetterSetter(_p,"tl",_p._getTL,_p._setTL),_p.tr,cc.defineGetterSetter(_p,"tr",_p._getTR,_p._setTR),_p.bl,cc.defineGetterSetter(_p,"bl",_p._getBL,_p._setBL),_p.br,cc.defineGetterSetter(_p,"br",_p._getBR,_p._setBR),cc.Quad3=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.Quad3.BYTES_PER_ELEMENT),this._offset=f||0;var g=this._arrayBuffer,h=this._offset,i=cc.Vertex3F.BYTES_PER_ELEMENT;this.bl=a?new cc.Vertex3F(a.x,a.y,a.z,g,h):new cc.Vertex3F(0,0,0,g,h),h+=i,this.br=b?new cc.Vertex3F(b.x,b.y,b.z,g,h):new cc.Vertex3F(0,0,0,g,h),h+=i,this.tl=c?new cc.Vertex3F(c.x,c.y,c.z,g,h):new cc.Vertex3F(0,0,0,g,h),h+=i,this.tr=d?new cc.Vertex3F(d.x,d.y,d.z,g,h):new cc.Vertex3F(0,0,0,g,h)},cc.Quad3.BYTES_PER_ELEMENT=48,cc.V3F_C4B_T2F=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.V3F_C4B_T2F.BYTES_PER_ELEMENT),this._offset=e||0;var f=this._arrayBuffer,g=this._offset;this._vertices=a?new cc.Vertex3F(a.x,a.y,a.z,f,g):new cc.Vertex3F(0,0,0,f,g),g+=cc.Vertex3F.BYTES_PER_ELEMENT,this._colors=b?new cc.Color(b.r,b.g,b.b,b.a,f,g):new cc.Color(0,0,0,0,f,g),g+=cc.Color.BYTES_PER_ELEMENT,this._texCoords=c?new cc.Tex2F(c.u,c.v,f,g):new cc.Tex2F(0,0,f,g)},cc.V3F_C4B_T2F.BYTES_PER_ELEMENT=24,_p=cc.V3F_C4B_T2F.prototype,_p._getVertices=function(){return this._vertices},_p._setVertices=function(a){var b=this._vertices;b._view[0]=a.x,b._view[1]=a.y,b._view[2]=a.z},_p._getColor=function(){return this._colors},_p._setColor=function(a){var b=this._colors;b._view[0]=a.r,b._view[1]=a.g,b._view[2]=a.b,b._view[3]=a.a},_p._getTexCoords=function(){return this._texCoords},_p._setTexCoords=function(a){this._texCoords._view[0]=a.u,this._texCoords._view[1]=a.v},_p.vertices,cc.defineGetterSetter(_p,"vertices",_p._getVertices,_p._setVertices),_p.colors,cc.defineGetterSetter(_p,"colors",_p._getColor,_p._setColor),_p.texCoords,cc.defineGetterSetter(_p,"texCoords",_p._getTexCoords,_p._setTexCoords),cc.V3F_C4B_T2F_Quad=function(a,b,c,d,e,f){this._arrayBuffer=e||new ArrayBuffer(cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT),this._offset=f||0;var g=this._arrayBuffer,h=this._offset,i=cc.V3F_C4B_T2F.BYTES_PER_ELEMENT;this._tl=a?new cc.V3F_C4B_T2F(a.vertices,a.colors,a.texCoords,g,h):new cc.V3F_C4B_T2F(null,null,null,g,h),h+=i,this._bl=b?new cc.V3F_C4B_T2F(b.vertices,b.colors,b.texCoords,g,h):new cc.V3F_C4B_T2F(null,null,null,g,h),h+=i,this._tr=c?new cc.V3F_C4B_T2F(c.vertices,c.colors,c.texCoords,g,h):new cc.V3F_C4B_T2F(null,null,null,g,h),h+=i,this._br=d?new cc.V3F_C4B_T2F(d.vertices,d.colors,d.texCoords,g,h):new cc.V3F_C4B_T2F(null,null,null,g,h)},cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT=96,_p=cc.V3F_C4B_T2F_Quad.prototype,_p._getTL=function(){return this._tl},_p._setTL=function(a){var b=this._tl;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p._getBL=function(){return this._bl},_p._setBL=function(a){var b=this._bl;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p._getTR=function(){return this._tr},_p._setTR=function(a){var b=this._tr;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p._getBR=function(){return this._br},_p._setBR=function(a){var b=this._br;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p._getArrayBuffer=function(){return this._arrayBuffer},_p.tl,cc.defineGetterSetter(_p,"tl",_p._getTL,_p._setTL),_p.tr,cc.defineGetterSetter(_p,"tr",_p._getTR,_p._setTR),_p.bl,cc.defineGetterSetter(_p,"bl",_p._getBL,_p._setBL),_p.br,cc.defineGetterSetter(_p,"br",_p._getBR,_p._setBR),_p.arrayBuffer,cc.defineGetterSetter(_p,"arrayBuffer",_p._getArrayBuffer,null),cc.V3F_C4B_T2F_QuadZero=function(){return new cc.V3F_C4B_T2F_Quad},cc.V3F_C4B_T2F_QuadCopy=function(a){if(!a)return cc.V3F_C4B_T2F_QuadZero();var b=a.tl,c=a.bl,d=a.tr,e=a.br;return{tl:{vertices:{x:b.vertices.x,y:b.vertices.y,z:b.vertices.z},colors:{r:b.colors.r,g:b.colors.g,b:b.colors.b,a:b.colors.a},texCoords:{u:b.texCoords.u,v:b.texCoords.v}},bl:{vertices:{x:c.vertices.x,y:c.vertices.y,z:c.vertices.z},colors:{r:c.colors.r,g:c.colors.g,b:c.colors.b,a:c.colors.a},texCoords:{u:c.texCoords.u,v:c.texCoords.v}},tr:{vertices:{x:d.vertices.x,y:d.vertices.y,z:d.vertices.z},colors:{r:d.colors.r,g:d.colors.g,b:d.colors.b,a:d.colors.a},texCoords:{u:d.texCoords.u,v:d.texCoords.v}},br:{vertices:{x:e.vertices.x,y:e.vertices.y,z:e.vertices.z},colors:{r:e.colors.r,g:e.colors.g,b:e.colors.b,a:e.colors.a},texCoords:{u:e.texCoords.u,v:e.texCoords.v}}}},cc.V3F_C4B_T2F_QuadsCopy=function(a){if(!a)return[];for(var b=[],c=0;c<a.length;c++)b.push(cc.V3F_C4B_T2F_QuadCopy(a[c]));return b},cc.V2F_C4B_T2F=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.V2F_C4B_T2F.BYTES_PER_ELEMENT),this._offset=e||0;var f=this._arrayBuffer,g=this._offset;this._vertices=a?new cc.Vertex2F(a.x,a.y,f,g):new cc.Vertex2F(0,0,f,g),g+=cc.Vertex2F.BYTES_PER_ELEMENT,this._colors=b?cc.color(b.r,b.g,b.b,b.a,f,g):cc.color(0,0,0,0,f,g),g+=cc.Color.BYTES_PER_ELEMENT,this._texCoords=c?new cc.Tex2F(c.u,c.v,f,g):new cc.Tex2F(0,0,f,g)},cc.V2F_C4B_T2F.BYTES_PER_ELEMENT=20,_p=cc.V2F_C4B_T2F.prototype,_p._getVertices=function(){return this._vertices},_p._setVertices=function(a){this._vertices._view[0]=a.x,this._vertices._view[1]=a.y},_p._getColor=function(){return this._colors},_p._setColor=function(a){var b=this._colors;b._view[0]=a.r,b._view[1]=a.g,b._view[2]=a.b,b._view[3]=a.a},_p._getTexCoords=function(){return this._texCoords},_p._setTexCoords=function(a){this._texCoords._view[0]=a.u,this._texCoords._view[1]=a.v},_p.vertices,cc.defineGetterSetter(_p,"vertices",_p._getVertices,_p._setVertices),_p.colors,cc.defineGetterSetter(_p,"colors",_p._getColor,_p._setColor),_p.texCoords,cc.defineGetterSetter(_p,"texCoords",_p._getTexCoords,_p._setTexCoords),cc.V2F_C4B_T2F_Triangle=function(a,b,c,d,e){this._arrayBuffer=d||new ArrayBuffer(cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT),this._offset=e||0;var f=this._arrayBuffer,g=this._offset,h=cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;this._a=a?new cc.V2F_C4B_T2F(a.vertices,a.colors,a.texCoords,f,g):new cc.V2F_C4B_T2F(null,null,null,f,g),g+=h,this._b=b?new cc.V2F_C4B_T2F(b.vertices,b.colors,b.texCoords,f,g):new cc.V2F_C4B_T2F(null,null,null,f,g),g+=h,this._c=c?new cc.V2F_C4B_T2F(c.vertices,c.colors,c.texCoords,f,g):new cc.V2F_C4B_T2F(null,null,null,f,g)},cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT=60,_p=cc.V2F_C4B_T2F_Triangle.prototype,_p._getA=function(){return this._a},_p._setA=function(a){var b=this._a;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p._getB=function(){return this._b},_p._setB=function(a){var b=this._b;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p._getC=function(){return this._c},_p._setC=function(a){var b=this._c;b.vertices=a.vertices,b.colors=a.colors,b.texCoords=a.texCoords},_p.a,cc.defineGetterSetter(_p,"a",_p._getA,_p._setA),_p.b,cc.defineGetterSetter(_p,"b",_p._getB,_p._setB),_p.c,cc.defineGetterSetter(_p,"c",_p._getC,_p._setC),cc.vertex2=function(a,b){return new cc.Vertex2F(a,b)},cc.vertex3=function(a,b,c){return new cc.Vertex3F(a,b,c)},cc.tex2=function(a,b){return new cc.Tex2F(a,b)},cc.BlendFunc=function(a,b){this.src=a,this.dst=b},cc.blendFuncDisable=function(){return new cc.BlendFunc(cc.ONE,cc.ZERO)},cc.hexToColor=function(a){a=a.replace(/^#?/,"0x");var b=parseInt(a),c=b>>16,d=(b>>8)%256,e=b%256;return cc.color(c,d,e)},cc.colorToHex=function(a){var b=a.r.toString(16),c=a.g.toString(16),d=a.b.toString(16);return"#"+(a.r<16?"0"+b:b)+(a.g<16?"0"+c:c)+(a.b<16?"0"+d:d)},cc.TEXT_ALIGNMENT_LEFT=0,cc.TEXT_ALIGNMENT_CENTER=1,cc.TEXT_ALIGNMENT_RIGHT=2,cc.VERTICAL_TEXT_ALIGNMENT_TOP=0,cc.VERTICAL_TEXT_ALIGNMENT_CENTER=1,cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM=2,cc._Dictionary=cc.Class.extend({_keyMapTb:null,_valueMapTb:null,__currId:0,ctor:function(){this._keyMapTb={},this._valueMapTb={},this.__currId=2<<(0|10*Math.random())},__getKey:function(){return this.__currId++,"key_"+this.__currId},setObject:function(a,b){if(null!=b){var c=this.__getKey();this._keyMapTb[c]=b,this._valueMapTb[c]=a}},objectForKey:function(a){if(null==a)return null;var b=this._keyMapTb;for(var c in b)if(b[c]===a)return this._valueMapTb[c];return null},valueForKey:function(a){return this.objectForKey(a)},removeObjectForKey:function(a){if(null!=a){var b=this._keyMapTb;for(var c in b)if(b[c]===a)return delete this._valueMapTb[c],void delete b[c]}},removeObjectsForKeys:function(a){if(null!=a)for(var b=0;b<a.length;b++)this.removeObjectForKey(a[b])},allKeys:function(){var a=[],b=this._keyMapTb;for(var c in b)a.push(b[c]);return a},removeAllObjects:function(){this._keyMapTb={},this._valueMapTb={}},count:function(){return this.allKeys().length}}),cc.FontDefinition=function(a){var b=this;if(b.fontName="Arial",b.fontSize=12,b.textAlign=cc.TEXT_ALIGNMENT_CENTER,b.verticalAlign=cc.VERTICAL_TEXT_ALIGNMENT_TOP,b.fillStyle=cc.color(255,255,255,255),b.boundingWidth=0,b.boundingHeight=0,b.strokeEnabled=!1,b.strokeStyle=cc.color(255,255,255,255),b.lineWidth=1,b.lineHeight="normal",b.fontStyle="normal",b.fontWeight="normal",b.shadowEnabled=!1,b.shadowOffsetX=0,b.shadowOffsetY=0,b.shadowBlur=0,b.shadowOpacity=1,a&&a instanceof Object)for(var c in a)b[c]=a[c]},cc.FontDefinition.prototype._getCanvasFontStr=function(){var a=this.lineHeight.charAt?this.lineHeight:this.lineHeight+"px";return this.fontStyle+" "+this.fontWeight+" "+this.fontSize+"px/"+a+" '"+this.fontName+"'"},cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_CANVAS&&(cc.assert(cc.isFunction(cc._tmp.PrototypeColor),cc._LogInfos.MissingFile,"CCTypesPropertyDefine.js"),cc._tmp.PrototypeColor(),delete cc._tmp.PrototypeColor)}),cc.Touches=[],cc.TouchesIntergerDict={},cc.DENSITYDPI_DEVICE="device-dpi",cc.DENSITYDPI_HIGH="high-dpi",cc.DENSITYDPI_MEDIUM="medium-dpi",cc.DENSITYDPI_LOW="low-dpi";var __BrowserGetter={init:function(){this.html=document.getElementsByTagName("html")[0]},availWidth:function(a){return a&&a!==this.html?a.clientWidth:window.innerWidth},availHeight:function(a){return a&&a!==this.html?a.clientHeight:window.innerHeight},meta:{width:"device-width"},adaptationType:cc.sys.browserType};switch(window.navigator.userAgent.indexOf("OS 8_1_")>-1&&(__BrowserGetter.adaptationType=cc.sys.BROWSER_TYPE_MIUI),cc.sys.os===cc.sys.OS_IOS&&(__BrowserGetter.adaptationType=cc.sys.BROWSER_TYPE_SAFARI),__BrowserGetter.adaptationType){case cc.sys.BROWSER_TYPE_SAFARI:__BrowserGetter.meta["minimal-ui"]="true",__BrowserGetter.availWidth=function(a){return a.clientWidth},__BrowserGetter.availHeight=function(a){return a.clientHeight};break;case cc.sys.BROWSER_TYPE_CHROME:__BrowserGetter.__defineGetter__("target-densitydpi",function(){return cc.view._targetDensityDPI});case cc.sys.BROWSER_TYPE_SOUGOU:case cc.sys.BROWSER_TYPE_UC:__BrowserGetter.availWidth=function(a){return a.clientWidth},__BrowserGetter.availHeight=function(a){return a.clientHeight};break;case cc.sys.BROWSER_TYPE_MIUI:__BrowserGetter.init=function(a){if(!a.__resizeWithBrowserSize){var b=function(){a.setDesignResolutionSize(a._designResolutionSize.width,a._designResolutionSize.height,a._resolutionPolicy),window.removeEventListener("resize",b,!1)};window.addEventListener("resize",b,!1)}}}var _scissorRect=cc.rect();cc.EGLView=cc.Class.extend({_delegate:null,_frameSize:null,_designResolutionSize:null,_originalDesignResolutionSize:null,_viewPortRect:null,_visibleRect:null,_retinaEnabled:!1,_autoFullScreen:!1,_devicePixelRatio:1,_viewName:"",_resizeCallback:null,_scaleX:1,_originalScaleX:1,_scaleY:1,_originalScaleY:1,_isRotated:!1,_orientation:3,_resolutionPolicy:null,_rpExactFit:null,_rpShowAll:null,_rpNoBorder:null,_rpFixedHeight:null,_rpFixedWidth:null,_initialized:!1,_contentTranslateLeftTop:null,_frame:null,_frameZoomFactor:1,__resizeWithBrowserSize:!1,_isAdjustViewPort:!0,_targetDensityDPI:null,ctor:function(){var a=this,b=document,c=cc.ContainerStrategy,d=cc.ContentStrategy;__BrowserGetter.init(this),a._frame=cc.container.parentNode===b.body?b.documentElement:cc.container.parentNode,a._frameSize=cc.size(0,0),a._initFrameSize();var e=cc._canvas.width,f=cc._canvas.height;a._designResolutionSize=cc.size(e,f),a._originalDesignResolutionSize=cc.size(e,f),a._viewPortRect=cc.rect(0,0,e,f),a._visibleRect=cc.rect(0,0,e,f),a._contentTranslateLeftTop={left:0,top:0},a._viewName="Cocos2dHTML5";var g=cc.sys;a.enableRetina(g.os===g.OS_IOS||g.os===g.OS_OSX),a.enableAutoFullScreen(g.isMobile&&g.browserType!==g.BROWSER_TYPE_BAIDU),cc.visibleRect&&cc.visibleRect.init(a._visibleRect),a._rpExactFit=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.EXACT_FIT),a._rpShowAll=new cc.ResolutionPolicy(c.PROPORTION_TO_FRAME,d.SHOW_ALL),a._rpNoBorder=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.NO_BORDER),a._rpFixedHeight=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.FIXED_HEIGHT),a._rpFixedWidth=new cc.ResolutionPolicy(c.EQUAL_TO_FRAME,d.FIXED_WIDTH),a._targetDensityDPI=cc.DENSITYDPI_HIGH},_resizeEvent:function(){var a;a=this.setDesignResolutionSize?this:cc.view;var b=a._frameSize.width,c=a._frameSize.height,d=a._isRotated;if(a._initFrameSize(),a._isRotated!==d||a._frameSize.width!==b||a._frameSize.height!==c){a._resizeCallback&&a._resizeCallback.call();var e=a._originalDesignResolutionSize.width,f=a._originalDesignResolutionSize.height;e>0&&a.setDesignResolutionSize(e,f,a._resolutionPolicy)}},setTargetDensityDPI:function(a){this._targetDensityDPI=a,this._adjustViewportMeta()},getTargetDensityDPI:function(){return this._targetDensityDPI},resizeWithBrowserSize:function(a){a?this.__resizeWithBrowserSize||(this.__resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._resizeEvent)):this.__resizeWithBrowserSize&&(this.__resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",this._resizeEvent))},setResizeCallback:function(a){(cc.isFunction(a)||null==a)&&(this._resizeCallback=a)},setOrientation:function(a){a&=cc.ORIENTATION_AUTO,a&&(this._orientation=a)},_initFrameSize:function(){var a=this._frameSize,b=__BrowserGetter.availWidth(this._frame),c=__BrowserGetter.availHeight(this._frame),d=b>=c;!cc.sys.isMobile||d&&this._orientation&cc.ORIENTATION_LANDSCAPE||!d&&this._orientation&cc.ORIENTATION_PORTRAIT?(a.width=b,a.height=c,cc.container.style["-webkit-transform"]="rotate(0deg)",cc.container.style.transform="rotate(0deg)",this._isRotated=!1):(a.width=c,a.height=b,cc.container.style["-webkit-transform"]="rotate(90deg)",cc.container.style.transform="rotate(90deg)",cc.container.style["-webkit-transform-origin"]="0px 0px 0px",cc.container.style.transformOrigin="0px 0px 0px",this._isRotated=!0)},_adjustSizeKeepCanvasSize:function(){var a=this._originalDesignResolutionSize.width,b=this._originalDesignResolutionSize.height;a>0&&this.setDesignResolutionSize(a,b,this._resolutionPolicy)},_setViewportMeta:function(a,b){var c=document.getElementById("cocosMetaElement");c&&b&&document.head.removeChild(c);var d,e,f,g=document.getElementsByName("viewport"),h=g?g[0]:null;d=h?h.content:"",c=c||document.createElement("meta"),c.id="cocosMetaElement",c.name="viewport",c.content="";for(e in a)d.indexOf(e)==-1?d+=","+e+"="+a[e]:b&&(f=new RegExp(e+"s*=s*[^,]+"),d.replace(f,e+"="+a[e]));/^,/.test(d)&&(d=d.substr(1)),c.content=d,h&&(h.content=d),document.head.appendChild(c)},_adjustViewportMeta:function(){this._isAdjustViewPort&&(this._setViewportMeta(__BrowserGetter.meta,!1),this._isAdjustViewPort=!1)},_setScaleXYForRenderTexture:function(){var a=cc.contentScaleFactor();this._scaleX=a,this._scaleY=a},_resetScale:function(){this._scaleX=this._originalScaleX,this._scaleY=this._originalScaleY},_adjustSizeToBrowser:function(){},initialize:function(){this._initialized=!0},adjustViewPort:function(a){this._isAdjustViewPort=a},enableRetina:function(a){this._retinaEnabled=!!a},isRetinaEnabled:function(){return this._retinaEnabled},enableAutoFullScreen:function(a){a&&a!==this._autoFullScreen&&cc.sys.isMobile&&this._frame===document.documentElement?(this._autoFullScreen=!0,cc.screen.autoFullScreen(this._frame)):this._autoFullScreen=!1},isAutoFullScreenEnabled:function(){return this._autoFullScreen},end:function(){},isOpenGLReady:function(){return cc.game.canvas&&cc._renderContext},setFrameZoomFactor:function(a){this._frameZoomFactor=a,this.centerWindow(),cc.director.setProjection(cc.director.getProjection())},swapBuffers:function(){},setIMEKeyboardState:function(a){},setContentTranslateLeftTop:function(a,b){this._contentTranslateLeftTop={left:a,top:b}},getContentTranslateLeftTop:function(){return this._contentTranslateLeftTop},getCanvasSize:function(){return cc.size(cc._canvas.width,cc._canvas.height)},getFrameSize:function(){return cc.size(this._frameSize.width,this._frameSize.height)},setFrameSize:function(a,b){this._frameSize.width=a,this._frameSize.height=b,this._frame.style.width=a+"px",this._frame.style.height=b+"px",this._resizeEvent(),cc.director.setProjection(cc.director.getProjection())},centerWindow:function(){},getVisibleSize:function(){return cc.size(this._visibleRect.width,this._visibleRect.height)},getVisibleSizeInPixel:function(){return cc.size(this._visibleRect.width*this._scaleX,this._visibleRect.height*this._scaleY)},getVisibleOrigin:function(){return cc.p(this._visibleRect.x,this._visibleRect.y)},getVisibleOriginInPixel:function(){return cc.p(this._visibleRect.x*this._scaleX,this._visibleRect.y*this._scaleY)},canSetContentScaleFactor:function(){return!0},getResolutionPolicy:function(){return this._resolutionPolicy},setResolutionPolicy:function(a){var b=this;if(a instanceof cc.ResolutionPolicy)b._resolutionPolicy=a;else{var c=cc.ResolutionPolicy;a===c.EXACT_FIT&&(b._resolutionPolicy=b._rpExactFit),a===c.SHOW_ALL&&(b._resolutionPolicy=b._rpShowAll),a===c.NO_BORDER&&(b._resolutionPolicy=b._rpNoBorder),a===c.FIXED_HEIGHT&&(b._resolutionPolicy=b._rpFixedHeight),a===c.FIXED_WIDTH&&(b._resolutionPolicy=b._rpFixedWidth)}},setDesignResolutionSize:function(a,b,c){if(!(a>0||b>0))return void cc.log(cc._LogInfos.EGLView_setDesignResolutionSize);this.setResolutionPolicy(c);var d=this._resolutionPolicy;if(!d)return void cc.log(cc._LogInfos.EGLView_setDesignResolutionSize_2);d.preApply(this),cc.sys.isMobile&&this._adjustViewportMeta(),this._initFrameSize(),this._originalDesignResolutionSize.width=this._designResolutionSize.width=a,this._originalDesignResolutionSize.height=this._designResolutionSize.height=b;var e=d.apply(this,this._designResolutionSize);if(e.scale&&2===e.scale.length&&(this._scaleX=e.scale[0],this._scaleY=e.scale[1]),e.viewport){var f=this._viewPortRect,g=this._visibleRect,h=e.viewport;f.x=h.x,f.y=h.y,f.width=h.width,f.height=h.height,g.x=-f.x/this._scaleX,g.y=-f.y/this._scaleY,g.width=cc._canvas.width/this._scaleX,g.height=cc._canvas.height/this._scaleY,cc._renderContext.setOffset&&cc._renderContext.setOffset(f.x,-f.y)}var i=cc.director;i._winSizeInPoints.width=this._designResolutionSize.width,i._winSizeInPoints.height=this._designResolutionSize.height,d.postApply(this),cc.winSize.width=i._winSizeInPoints.width,cc.winSize.height=i._winSizeInPoints.height,cc._renderType===cc.game.RENDER_TYPE_WEBGL&&i.setGLDefaultValues(),this._originalScaleX=this._scaleX,this._originalScaleY=this._scaleY,cc.DOM&&cc.DOM._resetEGLViewDiv(),cc.visibleRect&&cc.visibleRect.init(this._visibleRect)},getDesignResolutionSize:function(){return cc.size(this._designResolutionSize.width,this._designResolutionSize.height)},setRealPixelResolution:function(a,b,c){this._setViewportMeta({width:a,"target-densitydpi":cc.DENSITYDPI_DEVICE},!0),document.body.style.width=a+"px",document.body.style.left="0px",document.body.style.top="0px",this.setDesignResolutionSize(a,b,c)},setViewPortInPoints:function(a,b,c,d){var e=this._frameZoomFactor,f=this._scaleX,g=this._scaleY;cc._renderContext.viewport(a*f*e+this._viewPortRect.x*e,b*g*e+this._viewPortRect.y*e,c*f*e,d*g*e)},setScissorInPoints:function(a,b,c,d){var e=this._frameZoomFactor,f=this._scaleX,g=this._scaleY;_scissorRect.x=a,_scissorRect.y=b,_scissorRect.width=c,_scissorRect.height=d,
cc._renderContext.scissor(a*f*e+this._viewPortRect.x*e,b*g*e+this._viewPortRect.y*e,c*f*e,d*g*e)},isScissorEnabled:function(){return cc._renderContext.isEnabled(gl.SCISSOR_TEST)},getScissorRect:function(){return cc.rect(_scissorRect)},setViewName:function(a){null!=a&&a.length>0&&(this._viewName=a)},getViewName:function(){return this._viewName},getViewPortRect:function(){return this._viewPortRect},getScaleX:function(){return this._scaleX},getScaleY:function(){return this._scaleY},getDevicePixelRatio:function(){return this._devicePixelRatio},convertToLocationInView:function(a,b,c){var d=this._devicePixelRatio*(a-c.left),e=this._devicePixelRatio*(c.top+c.height-b);return this._isRotated?{x:this._viewPortRect.width-e,y:d}:{x:d,y:e}},_convertMouseToLocationInView:function(a,b){var c=this._viewPortRect,d=this;a.x=(d._devicePixelRatio*(a.x-b.left)-c.x)/d._scaleX,a.y=(d._devicePixelRatio*(b.top+b.height-a.y)-c.y)/d._scaleY},_convertPointWithScale:function(a){var b=this._viewPortRect;a.x=(a.x-b.x)/this._scaleX,a.y=(a.y-b.y)/this._scaleY},_convertTouchesWithScale:function(a){for(var b,c,d,e=this._viewPortRect,f=this._scaleX,g=this._scaleY,h=0;h<a.length;h++)b=a[h],c=b._point,d=b._prevPoint,c.x=(c.x-e.x)/f,c.y=(c.y-e.y)/g,d.x=(d.x-e.x)/f,d.y=(d.y-e.y)/g}}),cc.EGLView._getInstance=function(){return this._instance||(this._instance=this._instance||new cc.EGLView,this._instance.initialize()),this._instance},cc.ContainerStrategy=cc.Class.extend({preApply:function(a){},apply:function(a,b){},postApply:function(a){},_setupContainer:function(a,b,c){var d=cc.game.canvas,e=cc.game.container;e.style.width=d.style.width=b+"px",e.style.height=d.style.height=c+"px";var f=a._devicePixelRatio=1;a.isRetinaEnabled()&&(f=a._devicePixelRatio=Math.min(2,window.devicePixelRatio||1)),d.width=b*f,d.height=c*f,cc._renderContext.resetCache&&cc._renderContext.resetCache()},_fixContainer:function(){document.body.insertBefore(cc.container,document.body.firstChild);var a=document.body.style;a.width=window.innerWidth+"px",a.height=window.innerHeight+"px",a.overflow="hidden";var b=cc.container.style;b.position="fixed",b.left=b.top="0px",document.body.scrollTop=0}}),cc.ContentStrategy=cc.Class.extend({_result:{scale:[1,1],viewport:null},_buildResult:function(a,b,c,d,e,f){Math.abs(a-c)<2&&(c=a),Math.abs(b-d)<2&&(d=b);var g=cc.rect(Math.round((a-c)/2),Math.round((b-d)/2),c,d);return cc._renderType===cc.game.RENDER_TYPE_CANVAS,this._result.scale=[e,f],this._result.viewport=g,this._result},preApply:function(a){},apply:function(a,b){return{scale:[1,1]}},postApply:function(a){}}),function(){var a=cc.ContainerStrategy.extend({apply:function(a){var b=a._frameSize.height,c=cc.container.style;this._setupContainer(a,a._frameSize.width,a._frameSize.height),a._isRotated?c.marginLeft=b+"px":c.margin="0px"}}),b=cc.ContainerStrategy.extend({apply:function(a,b){var c,d,e=a._frameSize.width,f=a._frameSize.height,g=cc.container.style,h=b.width,i=b.height,j=e/h,k=f/i;j<k?(c=e,d=i*j):(c=h*k,d=f);var l=Math.round((e-c)/2),m=Math.round((f-d)/2);c=e-2*l,d=f-2*m,this._setupContainer(a,c,d),a._isRotated?g.marginLeft=f+"px":g.margin="0px",g.paddingLeft=l+"px",g.paddingRight=l+"px",g.paddingTop=m+"px",g.paddingBottom=m+"px"}}),c=(a.extend({preApply:function(a){this._super(a),a._frame=document.documentElement},apply:function(a){this._super(a),this._fixContainer()}}),b.extend({preApply:function(a){this._super(a),a._frame=document.documentElement},apply:function(a,b){this._super(a,b),this._fixContainer()}}),cc.ContainerStrategy.extend({apply:function(a){this._setupContainer(a,cc._canvas.width,cc._canvas.height)}}));cc.ContainerStrategy.EQUAL_TO_FRAME=new a,cc.ContainerStrategy.PROPORTION_TO_FRAME=new b,cc.ContainerStrategy.ORIGINAL_CONTAINER=new c;var d=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,e=c/b.width,f=d/b.height;return this._buildResult(c,d,c,d,e,f)}}),e=cc.ContentStrategy.extend({apply:function(a,b){var c,d,e=cc._canvas.width,f=cc._canvas.height,g=b.width,h=b.height,i=e/g,j=f/h,k=0;return i<j?(k=i,c=e,d=h*k):(k=j,c=g*k,d=f),this._buildResult(e,f,c,d,k,k)}}),f=cc.ContentStrategy.extend({apply:function(a,b){var c,d,e,f=cc._canvas.width,g=cc._canvas.height,h=b.width,i=b.height,j=f/h,k=g/i;return j<k?(c=k,d=h*c,e=g):(c=j,d=f,e=i*c),this._buildResult(f,g,d,e,c,c)}}),g=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,e=b.height,f=d/e,g=c,h=d;return this._buildResult(c,d,g,h,f,f)},postApply:function(a){cc.director._winSizeInPoints=a.getVisibleSize()}}),h=cc.ContentStrategy.extend({apply:function(a,b){var c=cc._canvas.width,d=cc._canvas.height,e=b.width,f=c/e,g=c,h=d;return this._buildResult(c,d,g,h,f,f)},postApply:function(a){cc.director._winSizeInPoints=a.getVisibleSize()}});cc.ContentStrategy.EXACT_FIT=new d,cc.ContentStrategy.SHOW_ALL=new e,cc.ContentStrategy.NO_BORDER=new f,cc.ContentStrategy.FIXED_HEIGHT=new g,cc.ContentStrategy.FIXED_WIDTH=new h}(),cc.ResolutionPolicy=cc.Class.extend({_containerStrategy:null,_contentStrategy:null,ctor:function(a,b){this.setContainerStrategy(a),this.setContentStrategy(b)},preApply:function(a){this._containerStrategy.preApply(a),this._contentStrategy.preApply(a)},apply:function(a,b){return this._containerStrategy.apply(a,b),this._contentStrategy.apply(a,b)},postApply:function(a){this._containerStrategy.postApply(a),this._contentStrategy.postApply(a)},setContainerStrategy:function(a){a instanceof cc.ContainerStrategy&&(this._containerStrategy=a)},setContentStrategy:function(a){a instanceof cc.ContentStrategy&&(this._contentStrategy=a)}}),cc.ResolutionPolicy.EXACT_FIT=0,cc.ResolutionPolicy.NO_BORDER=1,cc.ResolutionPolicy.SHOW_ALL=2,cc.ResolutionPolicy.FIXED_HEIGHT=3,cc.ResolutionPolicy.FIXED_WIDTH=4,cc.ResolutionPolicy.UNKNOWN=5,cc.screen={_supportsFullScreen:!1,_preOnFullScreenChange:null,_touchEvent:"",_fn:null,_fnMap:[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreenEnabled","fullscreenElement"],["requestFullScreen","exitFullScreen","fullScreenchange","fullScreenEnabled","fullScreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"],["msRequestFullscreen","msExitFullscreen","MSFullscreenChange","msFullscreenEnabled","msFullscreenElement"]],init:function(){this._fn={};var a,b,c,d=this._fnMap;for(a=0,l=d.length;a<l;a++)if(b=d[a],b&&b[1]in document){for(a=0,c=b.length;a<c;a++)this._fn[d[0][a]]=b[a];break}this._supportsFullScreen="undefined"!=typeof this._fn.requestFullscreen,this._touchEvent="ontouchstart"in window?"touchstart":"mousedown"},fullScreen:function(){return!!this._supportsFullScreen&&(void 0!==document[this._fn.fullscreenElement]&&null!==document[this._fn.fullscreenElement])},requestFullScreen:function(a,b){if(this._supportsFullScreen){if(a=a||document.documentElement,b){var c=this._fn.fullscreenchange;this._preOnFullScreenChange&&document.removeEventListener(c,this._preOnFullScreenChange),this._preOnFullScreenChange=b,document.addEventListener(c,b,!1)}return a[this._fn.requestFullscreen]()}},exitFullScreen:function(){return!this._supportsFullScreen||document[this._fn.exitFullscreen]()},autoFullScreen:function(a,b){function c(){d.removeEventListener(e._touchEvent,c),e.requestFullScreen(a,b)}a=a||document.body;var d=cc.game.canvas||a,e=this;this.requestFullScreen(a,b),d.addEventListener(this._touchEvent,c)}},cc.screen.init(),cc.visibleRect={topLeft:cc.p(0,0),topRight:cc.p(0,0),top:cc.p(0,0),bottomLeft:cc.p(0,0),bottomRight:cc.p(0,0),bottom:cc.p(0,0),center:cc.p(0,0),left:cc.p(0,0),right:cc.p(0,0),width:0,height:0,init:function(a){var b=this.width=a.width,c=this.height=a.height,d=a.x,e=a.y,f=e+c,g=d+b;this.topLeft.x=d,this.topLeft.y=f,this.topRight.x=g,this.topRight.y=f,this.top.x=d+b/2,this.top.y=f,this.bottomLeft.x=d,this.bottomLeft.y=e,this.bottomRight.x=g,this.bottomRight.y=e,this.bottom.x=d+b/2,this.bottom.y=e,this.center.x=d+b/2,this.center.y=e+c/2,this.left.x=d,this.left.y=e+c/2,this.right.x=g,this.right.y=e+c/2}},cc.UIInterfaceOrientationLandscapeLeft=-90,cc.UIInterfaceOrientationLandscapeRight=90,cc.UIInterfaceOrientationPortraitUpsideDown=180,cc.UIInterfaceOrientationPortrait=0,cc.inputManager={_mousePressed:!1,_isRegisterEvent:!1,_preTouchPoint:cc.p(0,0),_prevMousePoint:cc.p(0,0),_preTouchPool:[],_preTouchPoolPointer:0,_touches:[],_touchesIntegerDict:{},_indexBitsUsed:0,_maxTouches:5,_accelEnabled:!1,_accelInterval:1/30,_accelMinus:1,_accelCurTime:0,_acceleration:null,_accelDeviceEvent:null,_getUnUsedIndex:function(){for(var a=this._indexBitsUsed,b=0;b<this._maxTouches;b++){if(!(1&a))return this._indexBitsUsed|=1<<b,b;a>>=1}return-1},_removeUsedIndexBit:function(a){if(!(a<0||a>=this._maxTouches)){var b=1<<a;b=~b,this._indexBitsUsed&=b}},_glView:null,handleTouchesBegin:function(a){for(var b,c,d,e,f=[],g=this._touchesIntegerDict,h=0,i=a.length;h<i;h++)if(b=a[h],e=b.getID(),c=g[e],null==c){var j=this._getUnUsedIndex();if(j===-1){cc.log(cc._LogInfos.inputManager_handleTouchesBegin,j);continue}d=this._touches[j]=new cc.Touch(b._point.x,b._point.y,b.getID()),d._setPrevPoint(b._prevPoint),g[e]=j,f.push(d)}if(f.length>0){this._glView._convertTouchesWithScale(f);var k=new cc.EventTouch(f);k._eventCode=cc.EventTouch.EventCode.BEGAN,cc.eventManager.dispatchEvent(k)}},handleTouchesMove:function(a){for(var b,c,d,e=[],f=this._touches,g=0,h=a.length;g<h;g++)b=a[g],d=b.getID(),c=this._touchesIntegerDict[d],null!=c&&f[c]&&(f[c]._setPoint(b._point),f[c]._setPrevPoint(b._prevPoint),e.push(f[c]));if(e.length>0){this._glView._convertTouchesWithScale(e);var i=new cc.EventTouch(e);i._eventCode=cc.EventTouch.EventCode.MOVED,cc.eventManager.dispatchEvent(i)}},handleTouchesEnd:function(a){var b=this.getSetOfTouchesEndOrCancel(a);if(b.length>0){this._glView._convertTouchesWithScale(b);var c=new cc.EventTouch(b);c._eventCode=cc.EventTouch.EventCode.ENDED,cc.eventManager.dispatchEvent(c)}},handleTouchesCancel:function(a){var b=this.getSetOfTouchesEndOrCancel(a);if(b.length>0){this._glView._convertTouchesWithScale(b);var c=new cc.EventTouch(b);c._eventCode=cc.EventTouch.EventCode.CANCELLED,cc.eventManager.dispatchEvent(c)}},getSetOfTouchesEndOrCancel:function(a){for(var b,c,d,e=[],f=this._touches,g=this._touchesIntegerDict,h=0,i=a.length;h<i;h++)b=a[h],d=b.getID(),c=g[d],null!=c&&f[c]&&(f[c]._setPoint(b._point),f[c]._setPrevPoint(b._prevPoint),e.push(f[c]),this._removeUsedIndexBit(c),delete g[d]);return e},getHTMLElementPosition:function(a){var b=document.documentElement,c=window,d=null;return d=cc.isFunction(a.getBoundingClientRect)?a.getBoundingClientRect():{left:0,top:0,width:parseInt(a.style.width),height:parseInt(a.style.height)},{left:d.left+c.pageXOffset-b.clientLeft,top:d.top+c.pageYOffset-b.clientTop,width:d.width,height:d.height}},getPreTouch:function(a){for(var b=null,c=this._preTouchPool,d=a.getID(),e=c.length-1;e>=0;e--)if(c[e].getID()===d){b=c[e];break}return b||(b=a),b},setPreTouch:function(a){for(var b=!1,c=this._preTouchPool,d=a.getID(),e=c.length-1;e>=0;e--)if(c[e].getID()===d){c[e]=a,b=!0;break}b||(c.length<=50?c.push(a):(c[this._preTouchPoolPointer]=a,this._preTouchPoolPointer=(this._preTouchPoolPointer+1)%50))},getTouchByXY:function(a,b,c){var d=this._preTouchPoint,e=this._glView.convertToLocationInView(a,b,c),f=new cc.Touch(e.x,e.y);return f._setPrevPoint(d.x,d.y),d.x=e.x,d.y=e.y,f},getMouseEvent:function(a,b,c){var d=this._prevMousePoint;this._glView._convertMouseToLocationInView(a,b);var e=new cc.EventMouse(c);return e.setLocation(a.x,a.y),e._setPrevCursor(d.x,d.y),d.x=a.x,d.y=a.y,e},getPointByEvent:function(a,b){return null!=a.pageX?{x:a.pageX,y:a.pageY}:(b.left-=document.body.scrollLeft,b.top-=document.body.scrollTop,{x:a.clientX,y:a.clientY})},getTouchesByEvent:function(a,b){for(var c,d,e,f=[],g=this._glView,h=this._preTouchPoint,i=a.changedTouches.length,j=0;j<i;j++)if(c=a.changedTouches[j]){var k;k=cc.sys.BROWSER_TYPE_FIREFOX===cc.sys.browserType?g.convertToLocationInView(c.pageX,c.pageY,b):g.convertToLocationInView(c.clientX,c.clientY,b),null!=c.identifier?(d=new cc.Touch(k.x,k.y,c.identifier),e=this.getPreTouch(d).getLocation(),d._setPrevPoint(e.x,e.y),this.setPreTouch(d)):(d=new cc.Touch(k.x,k.y),d._setPrevPoint(h.x,h.y)),h.x=k.x,h.y=k.y,f.push(d)}return f},registerSystemEvent:function(a){if(!this._isRegisterEvent){var b=(this._glView=cc.view,this),c="mouse"in cc.sys.capabilities,d="touches"in cc.sys.capabilities,e=!1;if(cc.sys.isMobile&&(e=!0),c&&(window.addEventListener("mousedown",function(){b._mousePressed=!0},!1),window.addEventListener("mouseup",function(c){if(!e){var d=b._mousePressed;if(b._mousePressed=!1,d){var f=b.getHTMLElementPosition(a),g=b.getPointByEvent(c,f);if(!cc.rectContainsPoint(new cc.Rect(f.left,f.top,f.width,f.height),g)){b.handleTouchesEnd([b.getTouchByXY(g.x,g.y,f)]);var h=b.getMouseEvent(g,f,cc.EventMouse.UP);h.setButton(c.button),cc.eventManager.dispatchEvent(h)}}}},!1),a.addEventListener("mousedown",function(c){if(!e){b._mousePressed=!0;var d=b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);b.handleTouchesBegin([b.getTouchByXY(f.x,f.y,d)]);var g=b.getMouseEvent(f,d,cc.EventMouse.DOWN);g.setButton(c.button),cc.eventManager.dispatchEvent(g),c.stopPropagation(),c.preventDefault(),a.focus()}},!1),a.addEventListener("mouseup",function(c){if(!e){b._mousePressed=!1;var d=b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);b.handleTouchesEnd([b.getTouchByXY(f.x,f.y,d)]);var g=b.getMouseEvent(f,d,cc.EventMouse.UP);g.setButton(c.button),cc.eventManager.dispatchEvent(g),c.stopPropagation(),c.preventDefault()}},!1),a.addEventListener("mousemove",function(c){if(!e){var d=b.getHTMLElementPosition(a),f=b.getPointByEvent(c,d);b.handleTouchesMove([b.getTouchByXY(f.x,f.y,d)]);var g=b.getMouseEvent(f,d,cc.EventMouse.MOVE);b._mousePressed?g.setButton(c.button):g.setButton(null),cc.eventManager.dispatchEvent(g),c.stopPropagation(),c.preventDefault()}},!1),a.addEventListener("mousewheel",function(c){var d=b.getHTMLElementPosition(a),e=b.getPointByEvent(c,d),f=b.getMouseEvent(e,d,cc.EventMouse.SCROLL);f.setButton(c.button),f.setScrollData(0,c.wheelDelta),cc.eventManager.dispatchEvent(f),c.stopPropagation(),c.preventDefault()},!1),a.addEventListener("DOMMouseScroll",function(c){var d=b.getHTMLElementPosition(a),e=b.getPointByEvent(c,d),f=b.getMouseEvent(e,d,cc.EventMouse.SCROLL);f.setButton(c.button),f.setScrollData(0,c.detail*-120),cc.eventManager.dispatchEvent(f),c.stopPropagation(),c.preventDefault()},!1)),window.navigator.msPointerEnabled){var f={MSPointerDown:b.handleTouchesBegin,MSPointerMove:b.handleTouchesMove,MSPointerUp:b.handleTouchesEnd,MSPointerCancel:b.handleTouchesCancel};for(var g in f)!function(c,d){a.addEventListener(c,function(c){var e=b.getHTMLElementPosition(a);e.left-=document.documentElement.scrollLeft,e.top-=document.documentElement.scrollTop,d.call(b,[b.getTouchByXY(c.clientX,c.clientY,e)]),c.stopPropagation()},!1)}(g,f[g])}d&&(a.addEventListener("touchstart",function(c){if(c.changedTouches){var d=b.getHTMLElementPosition(a);d.left-=document.body.scrollLeft,d.top-=document.body.scrollTop,b.handleTouchesBegin(b.getTouchesByEvent(c,d)),c.stopPropagation(),c.preventDefault(),a.focus()}},!1),a.addEventListener("touchmove",function(c){if(c.changedTouches){var d=b.getHTMLElementPosition(a);d.left-=document.body.scrollLeft,d.top-=document.body.scrollTop,b.handleTouchesMove(b.getTouchesByEvent(c,d)),c.stopPropagation(),c.preventDefault()}},!1),a.addEventListener("touchend",function(c){if(c.changedTouches){var d=b.getHTMLElementPosition(a);d.left-=document.body.scrollLeft,d.top-=document.body.scrollTop,b.handleTouchesEnd(b.getTouchesByEvent(c,d)),c.stopPropagation(),c.preventDefault()}},!1),a.addEventListener("touchcancel",function(c){if(c.changedTouches){var d=b.getHTMLElementPosition(a);d.left-=document.body.scrollLeft,d.top-=document.body.scrollTop,b.handleTouchesCancel(b.getTouchesByEvent(c,d)),c.stopPropagation(),c.preventDefault()}},!1)),this._registerKeyboardEvent(),this._registerAccelerometerEvent(),this._isRegisterEvent=!0}},_registerKeyboardEvent:function(){},_registerAccelerometerEvent:function(){},update:function(a){this._accelCurTime>this._accelInterval&&(this._accelCurTime-=this._accelInterval,cc.eventManager.dispatchEvent(new cc.EventAcceleration(this._acceleration))),this._accelCurTime+=a}},cc.AffineTransform=function(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f},cc.affineTransformMake=function(a,b,c,d,e,f){return{a:a,b:b,c:c,d:d,tx:e,ty:f}},cc.pointApplyAffineTransform=function(a,b,c){var d,e;return void 0===c?(c=b,d=a.x,e=a.y):(d=a,e=b),{x:c.a*d+c.c*e+c.tx,y:c.b*d+c.d*e+c.ty}},cc._pointApplyAffineTransform=function(a,b,c){return cc.pointApplyAffineTransform(a,b,c)},cc.sizeApplyAffineTransform=function(a,b){return{width:b.a*a.width+b.c*a.height,height:b.b*a.width+b.d*a.height}},cc.affineTransformMakeIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},cc.affineTransformIdentity=function(){return{a:1,b:0,c:0,d:1,tx:0,ty:0}},cc.rectApplyAffineTransform=function(a,b){var c=cc.rectGetMinY(a),d=cc.rectGetMinX(a),e=cc.rectGetMaxX(a),f=cc.rectGetMaxY(a),g=cc.pointApplyAffineTransform(d,c,b),h=cc.pointApplyAffineTransform(e,c,b),i=cc.pointApplyAffineTransform(d,f,b),j=cc.pointApplyAffineTransform(e,f,b),k=Math.min(g.x,h.x,i.x,j.x),l=Math.max(g.x,h.x,i.x,j.x),m=Math.min(g.y,h.y,i.y,j.y),n=Math.max(g.y,h.y,i.y,j.y);return cc.rect(k,m,l-k,n-m)},cc._rectApplyAffineTransformIn=function(a,b){var c=cc.rectGetMinY(a),d=cc.rectGetMinX(a),e=cc.rectGetMaxX(a),f=cc.rectGetMaxY(a),g=cc.pointApplyAffineTransform(d,c,b),h=cc.pointApplyAffineTransform(e,c,b),i=cc.pointApplyAffineTransform(d,f,b),j=cc.pointApplyAffineTransform(e,f,b),k=Math.min(g.x,h.x,i.x,j.x),l=Math.max(g.x,h.x,i.x,j.x),m=Math.min(g.y,h.y,i.y,j.y),n=Math.max(g.y,h.y,i.y,j.y);return a.x=k,a.y=m,a.width=l-k,a.height=n-m,a},cc.affineTransformTranslate=function(a,b,c){return{a:a.a,b:a.b,c:a.c,d:a.d,tx:a.tx+a.a*b+a.c*c,ty:a.ty+a.b*b+a.d*c}},cc.affineTransformScale=function(a,b,c){return{a:a.a*b,b:a.b*b,c:a.c*c,d:a.d*c,tx:a.tx,ty:a.ty}},cc.affineTransformRotate=function(a,b){var c=Math.sin(b),d=Math.cos(b);return{a:a.a*d+a.c*c,b:a.b*d+a.d*c,c:a.c*d-a.a*c,d:a.d*d-a.b*c,tx:a.tx,ty:a.ty}},cc.affineTransformConcat=function(a,b){return{a:a.a*b.a+a.b*b.c,b:a.a*b.b+a.b*b.d,c:a.c*b.a+a.d*b.c,d:a.c*b.b+a.d*b.d,tx:a.tx*b.a+a.ty*b.c+b.tx,ty:a.tx*b.b+a.ty*b.d+b.ty}},cc.affineTransformConcatIn=function(a,b){var c=a.a,d=a.b,e=a.c,f=a.d,g=a.tx,h=a.ty;return a.a=c*b.a+d*b.c,a.b=c*b.b+d*b.d,a.c=e*b.a+f*b.c,a.d=e*b.b+f*b.d,a.tx=g*b.a+h*b.c+b.tx,a.ty=g*b.b+h*b.d+b.ty,a},cc.affineTransformEqualToTransform=function(a,b){return a.a===b.a&&a.b===b.b&&a.c===b.c&&a.d===b.d&&a.tx===b.tx&&a.ty===b.ty},cc.affineTransformInvert=function(a){var b=1/(a.a*a.d-a.b*a.c);return{a:b*a.d,b:-b*a.b,c:-b*a.c,d:b*a.a,tx:b*(a.c*a.ty-a.d*a.tx),ty:b*(a.b*a.tx-a.a*a.ty)}},cc.POINT_EPSILON=parseFloat("1.192092896e-07F"),cc.pNeg=function(a){return cc.p(-a.x,-a.y)},cc.pAdd=function(a,b){return cc.p(a.x+b.x,a.y+b.y)},cc.pSub=function(a,b){return cc.p(a.x-b.x,a.y-b.y)},cc.pMult=function(a,b){return cc.p(a.x*b,a.y*b)},cc.pMidpoint=function(a,b){return cc.pMult(cc.pAdd(a,b),.5)},cc.pDot=function(a,b){return a.x*b.x+a.y*b.y},cc.pCross=function(a,b){return a.x*b.y-a.y*b.x},cc.pPerp=function(a){return cc.p(-a.y,a.x)},cc.pRPerp=function(a){return cc.p(a.y,-a.x)},cc.pProject=function(a,b){return cc.pMult(b,cc.pDot(a,b)/cc.pDot(b,b))},cc.pRotate=function(a,b){return cc.p(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x)},cc.pUnrotate=function(a,b){return cc.p(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)},cc.pLengthSQ=function(a){return cc.pDot(a,a)},cc.pDistanceSQ=function(a,b){return cc.pLengthSQ(cc.pSub(a,b))},cc.pLength=function(a){return Math.sqrt(cc.pLengthSQ(a))},cc.pDistance=function(a,b){return cc.pLength(cc.pSub(a,b))},cc.pNormalize=function(a){var b=cc.pLength(a);return 0===b?cc.p(a):cc.pMult(a,1/b)},cc.pForAngle=function(a){return cc.p(Math.cos(a),Math.sin(a))},cc.pToAngle=function(a){return Math.atan2(a.y,a.x)},cc.clampf=function(a,b,c){if(b>c){var d=b;b=c,c=d}return a<b?b:a<c?a:c},cc.pClamp=function(a,b,c){return cc.p(cc.clampf(a.x,b.x,c.x),cc.clampf(a.y,b.y,c.y))},cc.pFromSize=function(a){return cc.p(a.width,a.height)},cc.pCompOp=function(a,b){return cc.p(b(a.x),b(a.y))},cc.pLerp=function(a,b,c){return cc.pAdd(cc.pMult(a,1-c),cc.pMult(b,c))},cc.pFuzzyEqual=function(a,b,c){return a.x-c<=b.x&&b.x<=a.x+c&&a.y-c<=b.y&&b.y<=a.y+c},cc.pCompMult=function(a,b){return cc.p(a.x*b.x,a.y*b.y)},cc.pAngleSigned=function(a,b){var c=cc.pNormalize(a),d=cc.pNormalize(b),e=Math.atan2(c.x*d.y-c.y*d.x,cc.pDot(c,d));return Math.abs(e)<cc.POINT_EPSILON?0:e},cc.pAngle=function(a,b){var c=Math.acos(cc.pDot(cc.pNormalize(a),cc.pNormalize(b)));return Math.abs(c)<cc.POINT_EPSILON?0:c},cc.pRotateByAngle=function(a,b,c){var d=cc.pSub(a,b),e=Math.cos(c),f=Math.sin(c),g=d.x;return d.x=g*e-d.y*f+b.x,d.y=g*f+d.y*e+b.y,d},cc.pLineIntersect=function(a,b,c,d,e){if(a.x===b.x&&a.y===b.y||c.x===d.x&&c.y===d.y)return!1;var f=b.x-a.x,g=b.y-a.y,h=d.x-c.x,i=d.y-c.y,j=a.x-c.x,k=a.y-c.y,l=i*f-h*g;return e.x=h*k-i*j,e.y=f*k-g*j,0===l?0===e.x||0===e.y:(e.x=e.x/l,e.y=e.y/l,!0)},cc.pSegmentIntersect=function(a,b,c,d){var e=cc.p(0,0);return!!(cc.pLineIntersect(a,b,c,d,e)&&e.x>=0&&e.x<=1&&e.y>=0&&e.y<=1)},cc.pIntersectPoint=function(a,b,c,d){var e=cc.p(0,0);if(cc.pLineIntersect(a,b,c,d,e)){var f=cc.p(0,0);return f.x=a.x+e.x*(b.x-a.x),f.y=a.y+e.x*(b.y-a.y),f}return cc.p(0,0)},cc.pSameAs=function(a,b){return null!=a&&null!=b&&(a.x===b.x&&a.y===b.y)},cc.pZeroIn=function(a){a.x=0,a.y=0},cc.pIn=function(a,b){a.x=b.x,a.y=b.y},cc.pMultIn=function(a,b){a.x*=b,a.y*=b},cc.pSubIn=function(a,b){a.x-=b.x,a.y-=b.y},cc.pAddIn=function(a,b){a.x+=b.x,a.y+=b.y},cc.pNormalizeIn=function(a){cc.pMultIn(a,1/Math.sqrt(a.x*a.x+a.y*a.y))},cc.Touch=cc.Class.extend({_point:null,_prevPoint:null,_id:0,_startPointCaptured:!1,_startPoint:null,ctor:function(a,b,c){this.setTouchInfo(c,a,b)},getLocation:function(){return{x:this._point.x,y:this._point.y}},getLocationX:function(){return this._point.x},getLocationY:function(){return this._point.y},getPreviousLocation:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocation:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getDelta:function(){return cc.pSub(this._point,this._prevPoint)},getLocationInView:function(){return{x:this._point.x,y:this._point.y}},getPreviousLocationInView:function(){return{x:this._prevPoint.x,y:this._prevPoint.y}},getStartLocationInView:function(){return{x:this._startPoint.x,y:this._startPoint.y}},getID:function(){return this._id},getId:function(){return cc.log("getId is deprecated. Please use getID instead."),this._id},setTouchInfo:function(a,b,c){this._prevPoint=this._point,this._point=cc.p(b||0,c||0),this._id=a,this._startPointCaptured||(this._startPoint=cc.p(this._point),cc.view._convertPointWithScale(this._startPoint),this._startPointCaptured=!0)},_setPoint:function(a,b){void 0===b?(this._point.x=a.x,this._point.y=a.y):(this._point.x=a,this._point.y=b)},_setPrevPoint:function(a,b){void 0===b?this._prevPoint=cc.p(a.x,a.y):this._prevPoint=cc.p(a||0,b||0)}}),cc.Event=cc.Class.extend({_type:0,_isStopped:!1,_currentTarget:null,_setCurrentTarget:function(a){this._currentTarget=a},ctor:function(a){this._type=a},getType:function(){return this._type},stopPropagation:function(){this._isStopped=!0},isStopped:function(){return this._isStopped},getCurrentTarget:function(){return this._currentTarget}}),cc.Event.TOUCH=0,cc.Event.KEYBOARD=1,cc.Event.ACCELERATION=2,cc.Event.MOUSE=3,cc.Event.FOCUS=4,cc.Event.CUSTOM=6,cc.EventCustom=cc.Event.extend({_eventName:null,_userData:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.CUSTOM),this._eventName=a},setUserData:function(a){this._userData=a},getUserData:function(){return this._userData},getEventName:function(){return this._eventName}}),cc.EventMouse=cc.Event.extend({_eventType:0,_button:0,_x:0,_y:0,_prevX:0,_prevY:0,_scrollX:0,_scrollY:0,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.MOUSE),this._eventType=a},setScrollData:function(a,b){this._scrollX=a,this._scrollY=b},getScrollX:function(){return this._scrollX},getScrollY:function(){return this._scrollY},setLocation:function(a,b){this._x=a,this._y=b},getLocation:function(){return{x:this._x,y:this._y}},getLocationInView:function(){return{x:this._x,y:cc.view._designResolutionSize.height-this._y}},_setPrevCursor:function(a,b){this._prevX=a,this._prevY=b},getDelta:function(){return{x:this._x-this._prevX,y:this._y-this._prevY}},getDeltaX:function(){return this._x-this._prevX},getDeltaY:function(){return this._y-this._prevY},setButton:function(a){this._button=a},getButton:function(){return this._button},getLocationX:function(){return this._x},getLocationY:function(){return this._y}}),cc.EventMouse.NONE=0,cc.EventMouse.DOWN=1,cc.EventMouse.UP=2,cc.EventMouse.MOVE=3,cc.EventMouse.SCROLL=4,cc.EventMouse.BUTTON_LEFT=0,cc.EventMouse.BUTTON_RIGHT=2,cc.EventMouse.BUTTON_MIDDLE=1,cc.EventMouse.BUTTON_4=3,cc.EventMouse.BUTTON_5=4,cc.EventMouse.BUTTON_6=5,cc.EventMouse.BUTTON_7=6,cc.EventMouse.BUTTON_8=7,cc.EventTouch=cc.Event.extend({_eventCode:0,_touches:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.TOUCH),this._touches=a||[]},getEventCode:function(){return this._eventCode},getTouches:function(){return this._touches},_setEventCode:function(a){this._eventCode=a},_setTouches:function(a){this._touches=a}}),cc.EventTouch.MAX_TOUCHES=5,cc.EventTouch.EventCode={BEGAN:0,MOVED:1,ENDED:2,CANCELLED:3},cc.EventFocus=cc.Event.extend({_widgetGetFocus:null,_widgetLoseFocus:null,ctor:function(a,b){cc.Event.prototype.ctor.call(this,cc.Event.FOCUS),this._widgetGetFocus=b,this._widgetLoseFocus=a}}),cc.EventListener=cc.Class.extend({_onEvent:null,_type:0,_listenerID:null,_registered:!1,_fixedPriority:0,_node:null,_paused:!0,_isEnabled:!0,ctor:function(a,b,c){this._onEvent=c,this._type=a||0,this._listenerID=b||""},_setPaused:function(a){this._paused=a},_isPaused:function(){return this._paused},_setRegistered:function(a){this._registered=a},_isRegistered:function(){return this._registered},_getType:function(){return this._type},_getListenerID:function(){return this._listenerID},_setFixedPriority:function(a){this._fixedPriority=a},_getFixedPriority:function(){return this._fixedPriority},_setSceneGraphPriority:function(a){this._node=a},_getSceneGraphPriority:function(){return this._node},checkAvailable:function(){return null!==this._onEvent},clone:function(){return null},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},retain:function(){},release:function(){}}),cc.EventListener.UNKNOWN=0,cc.EventListener.TOUCH_ONE_BY_ONE=1,cc.EventListener.TOUCH_ALL_AT_ONCE=2,cc.EventListener.KEYBOARD=3,cc.EventListener.MOUSE=4,cc.EventListener.ACCELERATION=6,cc.EventListener.FOCUS=7,cc.EventListener.CUSTOM=8,cc._EventListenerCustom=cc.EventListener.extend({_onCustomEvent:null,ctor:function(a,b){this._onCustomEvent=b;var c=this,d=function(a){null!==c._onCustomEvent&&c._onCustomEvent(a)};cc.EventListener.prototype.ctor.call(this,cc.EventListener.CUSTOM,a,d)},checkAvailable:function(){return cc.EventListener.prototype.checkAvailable.call(this)&&null!==this._onCustomEvent},clone:function(){return new cc._EventListenerCustom(this._listenerID,this._onCustomEvent)}}),cc._EventListenerCustom.create=function(a,b){return new cc._EventListenerCustom(a,b)},cc._EventListenerMouse=cc.EventListener.extend({onMouseDown:null,onMouseUp:null,onMouseMove:null,onMouseScroll:null,ctor:function(){var a=this,b=function(b){var c=cc.EventMouse;switch(b._eventType){case c.DOWN:a.onMouseDown&&a.onMouseDown(b);break;case c.UP:a.onMouseUp&&a.onMouseUp(b);break;case c.MOVE:a.onMouseMove&&a.onMouseMove(b);break;case c.SCROLL:a.onMouseScroll&&a.onMouseScroll(b)}};cc.EventListener.prototype.ctor.call(this,cc.EventListener.MOUSE,cc._EventListenerMouse.LISTENER_ID,b)},clone:function(){var a=new cc._EventListenerMouse;return a.onMouseDown=this.onMouseDown,a.onMouseUp=this.onMouseUp,a.onMouseMove=this.onMouseMove,a.onMouseScroll=this.onMouseScroll,a},checkAvailable:function(){return!0}}),cc._EventListenerMouse.LISTENER_ID="__cc_mouse",cc._EventListenerMouse.create=function(){return new cc._EventListenerMouse},cc._EventListenerTouchOneByOne=cc.EventListener.extend({_claimedTouches:null,swallowTouches:!1,onTouchBegan:null,onTouchMoved:null,onTouchEnded:null,onTouchCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ONE_BY_ONE,cc._EventListenerTouchOneByOne.LISTENER_ID,null),this._claimedTouches=[]},setSwallowTouches:function(a){this.swallowTouches=a},isSwallowTouches:function(){return this.swallowTouches},clone:function(){var a=new cc._EventListenerTouchOneByOne;return a.onTouchBegan=this.onTouchBegan,a.onTouchMoved=this.onTouchMoved,a.onTouchEnded=this.onTouchEnded,a.onTouchCancelled=this.onTouchCancelled,a.swallowTouches=this.swallowTouches,a},checkAvailable:function(){return!!this.onTouchBegan||(cc.log(cc._LogInfos._EventListenerTouchOneByOne_checkAvailable),!1)}}),cc._EventListenerTouchOneByOne.LISTENER_ID="__cc_touch_one_by_one",cc._EventListenerTouchOneByOne.create=function(){return new cc._EventListenerTouchOneByOne},cc._EventListenerTouchAllAtOnce=cc.EventListener.extend({onTouchesBegan:null,onTouchesMoved:null,onTouchesEnded:null,onTouchesCancelled:null,ctor:function(){cc.EventListener.prototype.ctor.call(this,cc.EventListener.TOUCH_ALL_AT_ONCE,cc._EventListenerTouchAllAtOnce.LISTENER_ID,null)},clone:function(){var a=new cc._EventListenerTouchAllAtOnce;return a.onTouchesBegan=this.onTouchesBegan,a.onTouchesMoved=this.onTouchesMoved,a.onTouchesEnded=this.onTouchesEnded,a.onTouchesCancelled=this.onTouchesCancelled,a},checkAvailable:function(){return null!==this.onTouchesBegan||null!==this.onTouchesMoved||null!==this.onTouchesEnded||null!==this.onTouchesCancelled||(cc.log(cc._LogInfos._EventListenerTouchAllAtOnce_checkAvailable),!1)}}),cc._EventListenerTouchAllAtOnce.LISTENER_ID="__cc_touch_all_at_once",cc._EventListenerTouchAllAtOnce.create=function(){return new cc._EventListenerTouchAllAtOnce},cc.EventListener.create=function(a){cc.assert(a&&a.event,cc._LogInfos.EventListener_create);var b=a.event;delete a.event;var c=null;b===cc.EventListener.TOUCH_ONE_BY_ONE?c=new cc._EventListenerTouchOneByOne:b===cc.EventListener.TOUCH_ALL_AT_ONCE?c=new cc._EventListenerTouchAllAtOnce:b===cc.EventListener.MOUSE?c=new cc._EventListenerMouse:b===cc.EventListener.CUSTOM?(c=new cc._EventListenerCustom(a.eventName,a.callback),delete a.eventName,delete a.callback):b===cc.EventListener.KEYBOARD?c=new cc._EventListenerKeyboard:b===cc.EventListener.ACCELERATION?(c=new cc._EventListenerAcceleration(a.callback),delete a.callback):b===cc.EventListener.FOCUS&&(c=new cc._EventListenerFocus);for(var d in a)c[d]=a[d];return c},cc._EventListenerFocus=cc.EventListener.extend({clone:function(){var a=new cc._EventListenerFocus;return a.onFocusChanged=this.onFocusChanged,a},checkAvailable:function(){return!!this.onFocusChanged||(cc.log("Invalid EventListenerFocus!"),!1)},onFocusChanged:null,ctor:function(){var a=function(a){this.onFocusChanged&&this.onFocusChanged(a._widgetLoseFocus,a._widgetGetFocus)};cc.EventListener.prototype.ctor.call(this,cc.EventListener.FOCUS,cc._EventListenerFocus.LISTENER_ID,a)}}),cc._EventListenerFocus.LISTENER_ID="__cc_focus_event",cc._EventListenerVector=cc.Class.extend({_fixedListeners:null,_sceneGraphListeners:null,gt0Index:0,ctor:function(){this._fixedListeners=[],this._sceneGraphListeners=[]},size:function(){return this._fixedListeners.length+this._sceneGraphListeners.length},empty:function(){return 0===this._fixedListeners.length&&0===this._sceneGraphListeners.length},push:function(a){0===a._getFixedPriority()?this._sceneGraphListeners.push(a):this._fixedListeners.push(a)},clearSceneGraphListeners:function(){this._sceneGraphListeners.length=0;
},clearFixedListeners:function(){this._fixedListeners.length=0},clear:function(){this._sceneGraphListeners.length=0,this._fixedListeners.length=0},getFixedPriorityListeners:function(){return this._fixedListeners},getSceneGraphPriorityListeners:function(){return this._sceneGraphListeners}}),cc.__getListenerID=function(a){var b=cc.Event,c=a.getType();return c===b.ACCELERATION?cc._EventListenerAcceleration.LISTENER_ID:c===b.CUSTOM?a.getEventName():c===b.KEYBOARD?cc._EventListenerKeyboard.LISTENER_ID:c===b.MOUSE?cc._EventListenerMouse.LISTENER_ID:c===b.FOCUS?cc._EventListenerFocus.LISTENER_ID:(c===b.TOUCH&&cc.log(cc._LogInfos.__getListenerID),"")},cc.eventManager={DIRTY_NONE:0,DIRTY_FIXED_PRIORITY:1,DIRTY_SCENE_GRAPH_PRIORITY:2,DIRTY_ALL:3,_listenersMap:{},_priorityDirtyFlagMap:{},_nodeListenersMap:{},_nodePriorityMap:{},_globalZOrderNodeMap:{},_toAddedListeners:[],_toRemovedListeners:[],_dirtyNodes:[],_inDispatch:0,_isEnabled:!1,_nodePriorityIndex:0,_internalCustomListenerIDs:[cc.game.EVENT_HIDE,cc.game.EVENT_SHOW],_setDirtyForNode:function(a){null!=this._nodeListenersMap[a.__instanceId]&&this._dirtyNodes.push(a);for(var b=a.getChildren(),c=0,d=b.length;c<d;c++)this._setDirtyForNode(b[c])},pauseTarget:function(a,b){var c,d,e=this._nodeListenersMap[a.__instanceId];if(e)for(c=0,d=e.length;c<d;c++)e[c]._setPaused(!0);if(b===!0){var f=a.getChildren();for(c=0,d=f.length;c<d;c++)this.pauseTarget(f[c],!0)}},resumeTarget:function(a,b){var c,d,e=this._nodeListenersMap[a.__instanceId];if(e)for(c=0,d=e.length;c<d;c++)e[c]._setPaused(!1);if(this._setDirtyForNode(a),b===!0){var f=a.getChildren();for(c=0,d=f.length;c<d;c++)this.resumeTarget(f[c],!0)}},_addListener:function(a){0===this._inDispatch?this._forceAddEventListener(a):this._toAddedListeners.push(a)},_forceAddEventListener:function(a){var b=a._getListenerID(),c=this._listenersMap[b];if(c||(c=new cc._EventListenerVector,this._listenersMap[b]=c),c.push(a),0===a._getFixedPriority()){this._setDirty(b,this.DIRTY_SCENE_GRAPH_PRIORITY);var d=a._getSceneGraphPriority();null===d&&cc.log(cc._LogInfos.eventManager__forceAddEventListener),this._associateNodeAndEventListener(d,a),d.isRunning()&&this.resumeTarget(d)}else this._setDirty(b,this.DIRTY_FIXED_PRIORITY)},_getListeners:function(a){return this._listenersMap[a]},_updateDirtyFlagForSceneGraph:function(){if(0!==this._dirtyNodes.length){for(var a,b,c=this._dirtyNodes,d=this._nodeListenersMap,e=0,f=c.length;e<f;e++)if(a=d[c[e].__instanceId])for(var g=0,h=a.length;g<h;g++)b=a[g],b&&this._setDirty(b._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY);this._dirtyNodes.length=0}},_removeAllListenersInVector:function(a){if(a)for(var b,c=0;c<a.length;)b=a[c],b._setRegistered(!1),null!=b._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(b._getSceneGraphPriority(),b),b._setSceneGraphPriority(null)),0===this._inDispatch?cc.arrayRemoveObject(a,b):++c},_removeListenersForListenerID:function(a){var b,c=this._listenersMap[a];if(c){var d=c.getFixedPriorityListeners(),e=c.getSceneGraphPriorityListeners();this._removeAllListenersInVector(e),this._removeAllListenersInVector(d),delete this._priorityDirtyFlagMap[a],this._inDispatch||(c.clear(),delete this._listenersMap[a])}var f,g=this._toAddedListeners;for(b=0;b<g.length;)f=g[b],f&&f._getListenerID()===a?cc.arrayRemoveObject(g,f):++b},_sortEventListeners:function(a){var b=this.DIRTY_NONE,c=this._priorityDirtyFlagMap;if(c[a]&&(b=c[a]),b!==this.DIRTY_NONE&&(c[a]=this.DIRTY_NONE,b&this.DIRTY_FIXED_PRIORITY&&this._sortListenersOfFixedPriority(a),b&this.DIRTY_SCENE_GRAPH_PRIORITY)){var d=cc.director.getRunningScene();d?this._sortListenersOfSceneGraphPriority(a,d):c[a]=this.DIRTY_SCENE_GRAPH_PRIORITY}},_sortListenersOfSceneGraphPriority:function(a,b){var c=this._getListeners(a);if(c){var d=c.getSceneGraphPriorityListeners();d&&0!==d.length&&(this._nodePriorityIndex=0,this._nodePriorityMap={},this._visitTarget(b,!0),c.getSceneGraphPriorityListeners().sort(this._sortEventListenersOfSceneGraphPriorityDes))}},_sortEventListenersOfSceneGraphPriorityDes:function(a,b){var c=cc.eventManager._nodePriorityMap,d=a._getSceneGraphPriority(),e=b._getSceneGraphPriority();return b&&e&&c[e.__instanceId]?a&&d&&c[d.__instanceId]?c[b._getSceneGraphPriority().__instanceId]-c[a._getSceneGraphPriority().__instanceId]:1:-1},_sortListenersOfFixedPriority:function(a){var b=this._listenersMap[a];if(b){var c=b.getFixedPriorityListeners();if(c&&0!==c.length){c.sort(this._sortListenersOfFixedPriorityAsc);for(var d=0,e=c.length;d<e&&!(c[d]._getFixedPriority()>=0);)++d;b.gt0Index=d}}},_sortListenersOfFixedPriorityAsc:function(a,b){return a._getFixedPriority()-b._getFixedPriority()},_onUpdateListeners:function(a){var b=this._listenersMap[a];if(b){var c,d,e,f=b.getFixedPriorityListeners(),g=b.getSceneGraphPriorityListeners(),h=this._toRemovedListeners;if(g)for(c=0;c<g.length;)d=g[c],d._isRegistered()?++c:(cc.arrayRemoveObject(g,d),e=h.indexOf(d),e!==-1&&h.splice(e,1));if(f)for(c=0;c<f.length;)d=f[c],d._isRegistered()?++c:(cc.arrayRemoveObject(f,d),e=h.indexOf(d),e!==-1&&h.splice(e,1));g&&0===g.length&&b.clearSceneGraphListeners(),f&&0===f.length&&b.clearFixedListeners()}},_updateListeners:function(a){var b=this._inDispatch;if(cc.assert(b>0,cc._LogInfos.EventManager__updateListeners),!(b>1)){a.getType()===cc.Event.TOUCH?(this._onUpdateListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),this._onUpdateListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID)):this._onUpdateListeners(cc.__getListenerID(a)),cc.assert(1===b,cc._LogInfos.EventManager__updateListeners_2);var c=this._listenersMap,d=this._priorityDirtyFlagMap;for(var e in c)c[e].empty()&&(delete d[e],delete c[e]);var f=this._toAddedListeners;if(0!==f.length){for(var g=0,h=f.length;g<h;g++)this._forceAddEventListener(f[g]);this._toAddedListeners.length=0}0!==this._toRemovedListeners.length&&this._cleanToRemovedListeners()}},_cleanToRemovedListeners:function(){for(var a=this._toRemovedListeners,b=0;b<a.length;b++){var c=a[b],d=this._listenersMap[c._getListenerID()];if(d){var e,f=d.getFixedPriorityListeners(),g=d.getSceneGraphPriorityListeners();g&&(e=g.indexOf(c),e!==-1&&g.splice(e,1)),f&&(e=f.indexOf(c),e!==-1&&f.splice(e,1))}}a.length=0},_onTouchEventCallback:function(a,b){if(!a._isRegistered)return!1;var c=b.event,d=b.selTouch;c._setCurrentTarget(a._node);var e,f=!1,g=c.getEventCode(),h=cc.EventTouch.EventCode;return g===h.BEGAN?a.onTouchBegan&&(f=a.onTouchBegan(d,c),f&&a._registered&&a._claimedTouches.push(d)):a._claimedTouches.length>0&&(e=a._claimedTouches.indexOf(d))!==-1&&(f=!0,g===h.MOVED&&a.onTouchMoved?a.onTouchMoved(d,c):g===h.ENDED?(a.onTouchEnded&&a.onTouchEnded(d,c),a._registered&&a._claimedTouches.splice(e,1)):g===h.CANCELLED&&(a.onTouchCancelled&&a.onTouchCancelled(d,c),a._registered&&a._claimedTouches.splice(e,1))),c.isStopped()?(cc.eventManager._updateListeners(c),!0):!!(f&&a._registered&&a.swallowTouches)&&(b.needsMutableSet&&b.touches.splice(d,1),!0)},_dispatchTouchEvent:function(a){this._sortEventListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),this._sortEventListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);var b=this._getListeners(cc._EventListenerTouchOneByOne.LISTENER_ID),c=this._getListeners(cc._EventListenerTouchAllAtOnce.LISTENER_ID);if(null!==b||null!==c){var d=a.getTouches(),e=cc.copyArray(d),f={event:a,needsMutableSet:b&&c,touches:e,selTouch:null};if(b)for(var g=0;g<d.length;g++)if(f.selTouch=d[g],this._dispatchEventToListeners(b,this._onTouchEventCallback,f),a.isStopped())return;c&&e.length>0&&(this._dispatchEventToListeners(c,this._onTouchesEventCallback,{event:a,touches:e}),a.isStopped())||this._updateListeners(a)}},_onTouchesEventCallback:function(a,b){if(!a._registered)return!1;var c=cc.EventTouch.EventCode,d=b.event,e=b.touches,f=d.getEventCode();return d._setCurrentTarget(a._node),f===c.BEGAN&&a.onTouchesBegan?a.onTouchesBegan(e,d):f===c.MOVED&&a.onTouchesMoved?a.onTouchesMoved(e,d):f===c.ENDED&&a.onTouchesEnded?a.onTouchesEnded(e,d):f===c.CANCELLED&&a.onTouchesCancelled&&a.onTouchesCancelled(e,d),!!d.isStopped()&&(cc.eventManager._updateListeners(d),!0)},_associateNodeAndEventListener:function(a,b){var c=this._nodeListenersMap[a.__instanceId];c||(c=[],this._nodeListenersMap[a.__instanceId]=c),c.push(b)},_dissociateNodeAndEventListener:function(a,b){var c=this._nodeListenersMap[a.__instanceId];c&&(cc.arrayRemoveObject(c,b),0===c.length&&delete this._nodeListenersMap[a.__instanceId])},_dispatchEventToListeners:function(a,b,c){var d,e,f=!1,g=a.getFixedPriorityListeners(),h=a.getSceneGraphPriorityListeners(),i=0;if(g&&0!==g.length)for(;i<a.gt0Index;++i)if(e=g[i],e.isEnabled()&&!e._isPaused()&&e._isRegistered()&&b(e,c)){f=!0;break}if(h&&!f)for(d=0;d<h.length;d++)if(e=h[d],e.isEnabled()&&!e._isPaused()&&e._isRegistered()&&b(e,c)){f=!0;break}if(g&&!f)for(;i<g.length;++i)if(e=g[i],e.isEnabled()&&!e._isPaused()&&e._isRegistered()&&b(e,c)){f=!0;break}},_setDirty:function(a,b){var c=this._priorityDirtyFlagMap;null==c[a]?c[a]=b:c[a]=b|c[a]},_visitTarget:function(a,b){var c=a.getChildren(),d=0,e=c.length,f=this._globalZOrderNodeMap,g=this._nodeListenersMap;if(e>0){for(var h;d<e&&(h=c[d],h&&h.getLocalZOrder()<0);d++)this._visitTarget(h,!1);for(null!=g[a.__instanceId]&&(f[a.getGlobalZOrder()]||(f[a.getGlobalZOrder()]=[]),f[a.getGlobalZOrder()].push(a.__instanceId));d<e;d++)h=c[d],h&&this._visitTarget(h,!1)}else null!=g[a.__instanceId]&&(f[a.getGlobalZOrder()]||(f[a.getGlobalZOrder()]=[]),f[a.getGlobalZOrder()].push(a.__instanceId));if(b){var i=[];for(var j in f)i.push(j);i.sort(this._sortNumberAsc);var k,l,m=i.length,n=this._nodePriorityMap;for(d=0;d<m;d++)for(k=f[i[d]],l=0;l<k.length;l++)n[k[l]]=++this._nodePriorityIndex;this._globalZOrderNodeMap={}}},_sortNumberAsc:function(a,b){return a-b},addListener:function(a,b){if(cc.assert(a&&b,cc._LogInfos.eventManager_addListener_2),a instanceof cc.EventListener){if(a._isRegistered())return void cc.log(cc._LogInfos.eventManager_addListener_4)}else cc.assert(!cc.isNumber(b),cc._LogInfos.eventManager_addListener_3),a=cc.EventListener.create(a);if(a.checkAvailable()){if(cc.isNumber(b)){if(0===b)return void cc.log(cc._LogInfos.eventManager_addListener);a._setSceneGraphPriority(null),a._setFixedPriority(b),a._setRegistered(!0),a._setPaused(!1),this._addListener(a)}else a._setSceneGraphPriority(b),a._setFixedPriority(0),a._setRegistered(!0),this._addListener(a);return a}},addCustomListener:function(a,b){var c=new cc._EventListenerCustom(a,b);return this.addListener(c,1),c},removeListener:function(a){if(null!=a){var b,c=this._listenersMap;for(var d in c){var e=c[d],f=e.getFixedPriorityListeners(),g=e.getSceneGraphPriorityListeners();if(b=this._removeListenerInVector(g,a),b?this._setDirty(a._getListenerID(),this.DIRTY_SCENE_GRAPH_PRIORITY):(b=this._removeListenerInVector(f,a),b&&this._setDirty(a._getListenerID(),this.DIRTY_FIXED_PRIORITY)),e.empty()&&(delete this._priorityDirtyFlagMap[a._getListenerID()],delete c[d]),b)break}if(!b)for(var h=this._toAddedListeners,i=0,j=h.length;i<j;i++){var k=h[i];if(k===a){cc.arrayRemoveObject(h,k),k._setRegistered(!1);break}}}},_removeListenerInCallback:function(a,b){if(null==a)return!1;for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e._onCustomEvent===b||e._onEvent===b)return e._setRegistered(!1),null!=e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(e._getSceneGraphPriority(),e),e._setSceneGraphPriority(null)),0===this._inDispatch&&cc.arrayRemoveObject(a,e),!0}return!1},_removeListenerInVector:function(a,b){if(null==a)return!1;for(var c=0,d=a.length;c<d;c++){var e=a[c];if(e===b)return e._setRegistered(!1),null!=e._getSceneGraphPriority()&&(this._dissociateNodeAndEventListener(e._getSceneGraphPriority(),e),e._setSceneGraphPriority(null)),0===this._inDispatch?cc.arrayRemoveObject(a,e):this._toRemovedListeners.push(e),!0}return!1},removeListeners:function(a,b){var c=this;if(a instanceof cc.Node){delete c._nodePriorityMap[a.__instanceId],cc.arrayRemoveObject(c._dirtyNodes,a);var d,e=c._nodeListenersMap[a.__instanceId];if(e){var f=cc.copyArray(e);for(d=0;d<f.length;d++)c.removeListener(f[d]);f.length=0}var g=c._toAddedListeners;for(d=0;d<g.length;){var h=g[d];h._getSceneGraphPriority()===a?(h._setSceneGraphPriority(null),h._setRegistered(!1),g.splice(d,1)):++d}if(b===!0){var i,j=a.getChildren();for(d=0,i=j.length;d<i;d++)c.removeListeners(j[d],!0)}}else a===cc.EventListener.TOUCH_ONE_BY_ONE?c._removeListenersForListenerID(cc._EventListenerTouchOneByOne.LISTENER_ID):a===cc.EventListener.TOUCH_ALL_AT_ONCE?c._removeListenersForListenerID(cc._EventListenerTouchAllAtOnce.LISTENER_ID):a===cc.EventListener.MOUSE?c._removeListenersForListenerID(cc._EventListenerMouse.LISTENER_ID):a===cc.EventListener.ACCELERATION?c._removeListenersForListenerID(cc._EventListenerAcceleration.LISTENER_ID):a===cc.EventListener.KEYBOARD?c._removeListenersForListenerID(cc._EventListenerKeyboard.LISTENER_ID):cc.log(cc._LogInfos.eventManager_removeListeners)},removeCustomListeners:function(a){this._removeListenersForListenerID(a)},removeAllListeners:function(){var a=this._listenersMap,b=this._internalCustomListenerIDs;for(var c in a)b.indexOf(c)===-1&&this._removeListenersForListenerID(c)},setPriority:function(a,b){if(null!=a){var c=this._listenersMap;for(var d in c){var e=c[d],f=e.getFixedPriorityListeners();if(f){var g=f.indexOf(a);if(g!==-1)return null!=a._getSceneGraphPriority()&&cc.log(cc._LogInfos.eventManager_setPriority),void(a._getFixedPriority()!==b&&(a._setFixedPriority(b),this._setDirty(a._getListenerID(),this.DIRTY_FIXED_PRIORITY)))}}}},setEnabled:function(a){this._isEnabled=a},isEnabled:function(){return this._isEnabled},dispatchEvent:function(a){if(this._isEnabled){if(this._updateDirtyFlagForSceneGraph(),this._inDispatch++,!a||!a.getType)throw new Error("event is undefined");if(a.getType()===cc.Event.TOUCH)return this._dispatchTouchEvent(a),void this._inDispatch--;var b=cc.__getListenerID(a);this._sortEventListeners(b);var c=this._listenersMap[b];null!=c&&this._dispatchEventToListeners(c,this._onListenerCallback,a),this._updateListeners(a),this._inDispatch--}},_onListenerCallback:function(a,b){return b._setCurrentTarget(a._getSceneGraphPriority()),a._onEvent(b),b.isStopped()},dispatchCustomEvent:function(a,b){var c=new cc.EventCustom(a);c.setUserData(b),this.dispatchEvent(c)}},cc._tmp.PrototypeCCNode=function(){var a=cc.Node.prototype;cc.defineGetterSetter(a,"x",a.getPositionX,a.setPositionX),cc.defineGetterSetter(a,"y",a.getPositionY,a.setPositionY),a.width,cc.defineGetterSetter(a,"width",a._getWidth,a._setWidth),a.height,cc.defineGetterSetter(a,"height",a._getHeight,a._setHeight),a.anchorX,cc.defineGetterSetter(a,"anchorX",a._getAnchorX,a._setAnchorX),a.anchorY,cc.defineGetterSetter(a,"anchorY",a._getAnchorY,a._setAnchorY),a.skewX,cc.defineGetterSetter(a,"skewX",a.getSkewX,a.setSkewX),a.skewY,cc.defineGetterSetter(a,"skewY",a.getSkewY,a.setSkewY),a.zIndex,cc.defineGetterSetter(a,"zIndex",a.getLocalZOrder,a.setLocalZOrder),a.vertexZ,cc.defineGetterSetter(a,"vertexZ",a.getVertexZ,a.setVertexZ),a.rotation,cc.defineGetterSetter(a,"rotation",a.getRotation,a.setRotation),a.rotationX,cc.defineGetterSetter(a,"rotationX",a.getRotationX,a.setRotationX),a.rotationY,cc.defineGetterSetter(a,"rotationY",a.getRotationY,a.setRotationY),a.scale,cc.defineGetterSetter(a,"scale",a.getScale,a.setScale),a.scaleX,cc.defineGetterSetter(a,"scaleX",a.getScaleX,a.setScaleX),a.scaleY,cc.defineGetterSetter(a,"scaleY",a.getScaleY,a.setScaleY),a.children,cc.defineGetterSetter(a,"children",a.getChildren),a.childrenCount,cc.defineGetterSetter(a,"childrenCount",a.getChildrenCount),a.parent,cc.defineGetterSetter(a,"parent",a.getParent,a.setParent),a.visible,cc.defineGetterSetter(a,"visible",a.isVisible,a.setVisible),a.running,cc.defineGetterSetter(a,"running",a.isRunning),a.ignoreAnchor,cc.defineGetterSetter(a,"ignoreAnchor",a.isIgnoreAnchorPointForPosition,a.ignoreAnchorPointForPosition),a.tag,a.userData,a.userObject,a.arrivalOrder,a.actionManager,cc.defineGetterSetter(a,"actionManager",a.getActionManager,a.setActionManager),a.scheduler,cc.defineGetterSetter(a,"scheduler",a.getScheduler,a.setScheduler),a.shaderProgram,cc.defineGetterSetter(a,"shaderProgram",a.getShaderProgram,a.setShaderProgram),a.opacity,cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity),a.opacityModifyRGB,cc.defineGetterSetter(a,"opacityModifyRGB",a.isOpacityModifyRGB),a.cascadeOpacity,cc.defineGetterSetter(a,"cascadeOpacity",a.isCascadeOpacityEnabled,a.setCascadeOpacityEnabled),a.color,cc.defineGetterSetter(a,"color",a.getColor,a.setColor),a.cascadeColor,cc.defineGetterSetter(a,"cascadeColor",a.isCascadeColorEnabled,a.setCascadeColorEnabled)},cc.NODE_TAG_INVALID=-1,cc.s_globalOrderOfArrival=1,cc.Node=cc.Class.extend({_localZOrder:0,_globalZOrder:0,_vertexZ:0,_customZ:NaN,_rotationX:0,_rotationY:0,_scaleX:1,_scaleY:1,_position:null,_normalizedPosition:null,_usingNormalizedPosition:!1,_normalizedPositionDirty:!1,_skewX:0,_skewY:0,_children:null,_visible:!0,_anchorPoint:null,_contentSize:null,_running:!1,_parent:null,_ignoreAnchorPointForPosition:!1,tag:cc.NODE_TAG_INVALID,userData:null,userObject:null,_reorderChildDirty:!1,_shaderProgram:null,arrivalOrder:0,_actionManager:null,_scheduler:null,_eventDispatcher:null,_additionalTransformDirty:!1,_additionalTransform:null,_componentContainer:null,_isTransitionFinished:!1,_className:"Node",_showNode:!1,_name:"",_realOpacity:255,_realColor:null,_cascadeColorEnabled:!1,_cascadeOpacityEnabled:!1,_renderCmd:null,ctor:function(){this._initNode(),this._initRendererCmd()},_initNode:function(){var a=this;a._anchorPoint=cc.p(0,0),a._contentSize=cc.size(0,0),a._position=cc.p(0,0),a._normalizedPosition=cc.p(0,0),a._children=[];var b=cc.director;a._actionManager=b.getActionManager(),a._scheduler=b.getScheduler(),a._additionalTransform=cc.affineTransformMakeIdentity(),cc.ComponentContainer&&(a._componentContainer=new cc.ComponentContainer(a)),this._realOpacity=255,this._realColor=cc.color(255,255,255,255),this._cascadeColorEnabled=!1,this._cascadeOpacityEnabled=!1},init:function(){return!0},_arrayMakeObjectsPerformSelector:function(a,b){if(a&&0!==a.length){var c,d,e=a.length,f=cc.Node._stateCallbackType;switch(b){case f.onEnter:for(c=0;c<e;c++)d=a[c],d&&d.onEnter();break;case f.onExit:for(c=0;c<e;c++)d=a[c],d&&d.onExit();break;case f.onEnterTransitionDidFinish:for(c=0;c<e;c++)d=a[c],d&&d.onEnterTransitionDidFinish();break;case f.cleanup:for(c=0;c<e;c++)d=a[c],d&&d.cleanup();break;case f.updateTransform:for(c=0;c<e;c++)d=a[c],d&&d.updateTransform();break;case f.onExitTransitionDidStart:for(c=0;c<e;c++)d=a[c],d&&d.onExitTransitionDidStart();break;case f.sortAllChildren:for(c=0;c<e;c++)d=a[c],d&&d.sortAllChildren();break;default:cc.assert(0,cc._LogInfos.Node__arrayMakeObjectsPerformSelector)}}},attr:function(a){for(var b in a)this[b]=a[b]},getSkewX:function(){return this._skewX},setSkewX:function(a){this._skewX=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getSkewY:function(){return this._skewY},setSkewY:function(a){this._skewY=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setLocalZOrder:function(a){this._localZOrder=a,this._parent&&this._parent.reorderChild(this,a),cc.eventManager._setDirtyForNode(this)},_setLocalZOrder:function(a){this._localZOrder=a},getLocalZOrder:function(){return this._localZOrder},getZOrder:function(){return cc.log(cc._LogInfos.Node_getZOrder),this.getLocalZOrder()},setZOrder:function(a){cc.log(cc._LogInfos.Node_setZOrder),this.setLocalZOrder(a)},setGlobalZOrder:function(a){this._globalZOrder!==a&&(this._globalZOrder=a,cc.eventManager._setDirtyForNode(this))},getGlobalZOrder:function(){return this._globalZOrder},getVertexZ:function(){return this._vertexZ},setVertexZ:function(a){this._customZ=this._vertexZ=a},getRotation:function(){return this._rotationX!==this._rotationY&&cc.log(cc._LogInfos.Node_getRotation),this._rotationX},setRotation:function(a){this._rotationX=this._rotationY=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getRotationX:function(){return this._rotationX},setRotationX:function(a){this._rotationX=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getRotationY:function(){return this._rotationY},setRotationY:function(a){this._rotationY=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScale:function(){return this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale),this._scaleX},setScale:function(a,b){this._scaleX=a,this._scaleY=b||0===b?b:a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleX:function(){return this._scaleX},setScaleX:function(a){this._scaleX=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleY:function(){return this._scaleY},setScaleY:function(a){this._scaleY=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setPosition:function(a,b){var c=this._position;if(void 0===b){if(c.x===a.x&&c.y===a.y)return;c.x=a.x,c.y=a.y}else{if(c.x===a&&c.y===b)return;c.x=a,c.y=b}this._usingNormalizedPosition=!1,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setNormalizedPosition:function(a,b){var c=this._normalizedPosition;void 0===b?(c.x=a.x,c.y=a.y):(c.x=a,c.y=b),this._normalizedPositionDirty=this._usingNormalizedPosition=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPosition:function(){return cc.p(this._position)},getNormalizedPosition:function(){return cc.p(this._normalizedPosition)},getPositionX:function(){return this._position.x},setPositionX:function(a){this._position.x=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPositionY:function(){return this._position.y},setPositionY:function(a){this._position.y=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getChildrenCount:function(){return this._children.length},getChildren:function(){return this._children},isVisible:function(){return this._visible},setVisible:function(a){this._visible!==a&&(this._visible=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),cc.renderer.childrenOrderDirty=!0)},getAnchorPoint:function(){return cc.p(this._anchorPoint)},setAnchorPoint:function(a,b){var c=this._anchorPoint;if(void 0===b){if(a.x===c.x&&a.y===c.y)return;c.x=a.x,c.y=a.y}else{if(a===c.x&&b===c.y)return;c.x=a,c.y=b}this._renderCmd._updateAnchorPointInPoint()},_getAnchorX:function(){return this._anchorPoint.x},_setAnchorX:function(a){this._anchorPoint.x!==a&&(this._anchorPoint.x=a,this._renderCmd._updateAnchorPointInPoint())},_getAnchorY:function(){return this._anchorPoint.y},_setAnchorY:function(a){this._anchorPoint.y!==a&&(this._anchorPoint.y=a,this._renderCmd._updateAnchorPointInPoint())},getAnchorPointInPoints:function(){return this._renderCmd.getAnchorPointInPoints()},_getWidth:function(){return this._contentSize.width},_setWidth:function(a){this._contentSize.width=a,this._renderCmd._updateAnchorPointInPoint()},_getHeight:function(){return this._contentSize.height},_setHeight:function(a){this._contentSize.height=a,this._renderCmd._updateAnchorPointInPoint()},getContentSize:function(){return cc.size(this._contentSize)},setContentSize:function(a,b){var c=this._contentSize;if(void 0===b){if(a.width===c.width&&a.height===c.height)return;c.width=a.width,c.height=a.height}else{if(a===c.width&&b===c.height)return;c.width=a,c.height=b}this._renderCmd._updateAnchorPointInPoint()},isRunning:function(){return this._running},getParent:function(){return this._parent},setParent:function(a){this._parent=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},isIgnoreAnchorPointForPosition:function(){return this._ignoreAnchorPointForPosition},ignoreAnchorPointForPosition:function(a){a!==this._ignoreAnchorPointForPosition&&(this._ignoreAnchorPointForPosition=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))},getTag:function(){return this.tag},setTag:function(a){this.tag=a},setName:function(a){this._name=a},getName:function(){return this._name},getUserData:function(){return this.userData},setUserData:function(a){this.userData=a},getUserObject:function(){return this.userObject},setUserObject:function(a){this.userObject!==a&&(this.userObject=a)},getOrderOfArrival:function(){return this.arrivalOrder},setOrderOfArrival:function(a){this.arrivalOrder=a},getActionManager:function(){return this._actionManager||(this._actionManager=cc.director.getActionManager()),this._actionManager},setActionManager:function(a){this._actionManager!==a&&(this.stopAllActions(),this._actionManager=a)},getScheduler:function(){return this._scheduler||(this._scheduler=cc.director.getScheduler()),this._scheduler},setScheduler:function(a){this._scheduler!==a&&(this.unscheduleAllCallbacks(),this._scheduler=a)},boundingBox:function(){return cc.log(cc._LogInfos.Node_boundingBox),this.getBoundingBox()},getBoundingBox:function(){var a=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return cc._rectApplyAffineTransformIn(a,this.getNodeToParentTransform())},cleanup:function(){this.stopAllActions(),this.unscheduleAllCallbacks(),cc.eventManager.removeListeners(this),this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.cleanup)},getChildByTag:function(a){var b=this._children;if(null!==b)for(var c=0;c<b.length;c++){var d=b[c];if(d&&d.tag===a)return d}return null},getChildByName:function(a){if(!a)return cc.log("Invalid name"),null;for(var b=this._children,c=0,d=b.length;c<d;c++)if(b[c]._name===a)return b[c];return null},addChild:function(a,b,c){b=void 0===b?a._localZOrder:b;var d,e=!1;cc.isUndefined(c)?(c=void 0,d=a._name):cc.isString(c)?(d=c,c=void 0):cc.isNumber(c)&&(e=!0,d=""),cc.assert(a,cc._LogInfos.Node_addChild_3),cc.assert(null===a._parent,"child already added. It can't be added again"),this._addChildHelper(a,b,c,d,e)},_addChildHelper:function(a,b,c,d,e){this._children||(this._children=[]),this._insertChild(a,b),e?a.setTag(c):a.setName(d),a.setParent(this),a.setOrderOfArrival(cc.s_globalOrderOfArrival++),this._running&&(a.onEnter(),this._isTransitionFinished&&a.onEnterTransitionDidFinish()),a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._cascadeColorEnabled&&a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty),this._cascadeOpacityEnabled&&a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},removeFromParent:function(a){this._parent&&(void 0===a&&(a=!0),this._parent.removeChild(this,a))},removeFromParentAndCleanup:function(a){cc.log(cc._LogInfos.Node_removeFromParentAndCleanup),this.removeFromParent(a)},removeChild:function(a,b){0!==this._children.length&&(void 0===b&&(b=!0),this._children.indexOf(a)>-1&&this._detachChild(a,b),cc.renderer.childrenOrderDirty=!0)},removeChildByTag:function(a,b){a===cc.NODE_TAG_INVALID&&cc.log(cc._LogInfos.Node_removeChildByTag);var c=this.getChildByTag(a);c?this.removeChild(c,b):cc.log(cc._LogInfos.Node_removeChildByTag_2,a)},removeAllChildrenWithCleanup:function(a){this.removeAllChildren(a)},removeAllChildren:function(a){var b=this._children;if(null!==b){void 0===a&&(a=!0);for(var c=0;c<b.length;c++){var d=b[c];d&&(this._running&&(d.onExitTransitionDidStart(),d.onExit()),a&&d.cleanup(),d.parent=null,d._renderCmd.detachFromParent())}this._children.length=0,cc.renderer.childrenOrderDirty=!0}},_detachChild:function(a,b){this._running&&(a.onExitTransitionDidStart(),a.onExit()),b&&a.cleanup(),a.parent=null,a._renderCmd.detachFromParent(),cc.arrayRemoveObject(this._children,a)},_insertChild:function(a,b){cc.renderer.childrenOrderDirty=this._reorderChildDirty=!0,this._children.push(a),a._setLocalZOrder(b)},setNodeDirty:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},reorderChild:function(a,b){cc.assert(a,cc._LogInfos.Node_reorderChild),cc.renderer.childrenOrderDirty=this._reorderChildDirty=!0,a.arrivalOrder=cc.s_globalOrderOfArrival,cc.s_globalOrderOfArrival++,a._setLocalZOrder(b),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.orderDirty)},sortAllChildren:function(){if(this._reorderChildDirty){var a,b,c,d=this._children,e=d.length;for(a=1;a<e;a++){for(c=d[a],b=a-1;b>=0;){if(c._localZOrder<d[b]._localZOrder)d[b+1]=d[b];else{if(!(c._localZOrder===d[b]._localZOrder&&c.arrivalOrder<d[b].arrivalOrder))break;d[b+1]=d[b]}b--}d[b+1]=c}this._reorderChildDirty=!1}},draw:function(a){},transformAncestors:function(){null!==this._parent&&(this._parent.transformAncestors(),this._parent.transform())},onEnter:function(){this._isTransitionFinished=!1,this._running=!0,this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onEnter),this.resume()},onEnterTransitionDidFinish:function(){this._isTransitionFinished=!0,this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onEnterTransitionDidFinish)},onExitTransitionDidStart:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onExitTransitionDidStart)},onExit:function(){this._running=!1,this.pause(),this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.onExit),this.removeAllComponents()},runAction:function(a){return cc.assert(a,cc._LogInfos.Node_runAction),this.actionManager.addAction(a,this,!this._running),a},stopAllActions:function(){this.actionManager&&this.actionManager.removeAllActionsFromTarget(this)},stopAction:function(a){this.actionManager.removeAction(a)},stopActionByTag:function(a){return a===cc.ACTION_TAG_INVALID?void cc.log(cc._LogInfos.Node_stopActionByTag):void this.actionManager.removeActionByTag(a,this)},getActionByTag:function(a){return a===cc.ACTION_TAG_INVALID?(cc.log(cc._LogInfos.Node_getActionByTag),null):this.actionManager.getActionByTag(a,this)},getNumberOfRunningActions:function(){return this.actionManager.numberOfRunningActionsInTarget(this)},scheduleUpdate:function(){this.scheduleUpdateWithPriority(0)},scheduleUpdateWithPriority:function(a){this.scheduler.scheduleUpdate(this,a,!this._running)},unscheduleUpdate:function(){this.scheduler.unscheduleUpdate(this)},schedule:function(a,b,c,d,e){var f=arguments.length;"function"==typeof a?1===f?(b=0,c=cc.REPEAT_FOREVER,d=0,e=this.__instanceId):2===f?"number"==typeof b?(c=cc.REPEAT_FOREVER,d=0,e=this.__instanceId):(e=b,b=0,c=cc.REPEAT_FOREVER,d=0):3===f?("string"==typeof c?(e=c,c=cc.REPEAT_FOREVER):e=this.__instanceId,d=0):4===f&&(e=this.__instanceId):1===f?(b=0,c=cc.REPEAT_FOREVER,d=0):2===f&&(c=cc.REPEAT_FOREVER,d=0),cc.assert(a,cc._LogInfos.Node_schedule),cc.assert(b>=0,cc._LogInfos.Node_schedule_2),b=b||0,c=null==c?cc.REPEAT_FOREVER:c,d=d||0,this.scheduler.schedule(a,this,b,c,d,!this._running,e)},scheduleOnce:function(a,b,c){void 0===c&&(c=this.__instanceId),this.schedule(a,0,0,b,c)},unschedule:function(a){a&&this.scheduler.unschedule(a,this)},unscheduleAllCallbacks:function(){this.scheduler.unscheduleAllForTarget(this)},resumeSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_resumeSchedulerAndActions),this.resume()},resume:function(){this.scheduler.resumeTarget(this),this.actionManager&&this.actionManager.resumeTarget(this),cc.eventManager.resumeTarget(this)},pauseSchedulerAndActions:function(){cc.log(cc._LogInfos.Node_pauseSchedulerAndActions),this.pause()},pause:function(){this.scheduler.pauseTarget(this),this.actionManager&&this.actionManager.pauseTarget(this),cc.eventManager.pauseTarget(this)},setAdditionalTransform:function(a){return void 0===a?this._additionalTransformDirty=!1:(this._additionalTransform=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),void(this._additionalTransformDirty=!0))},getParentToNodeTransform:function(){return this._renderCmd.getParentToNodeTransform()},parentToNodeTransform:function(){return this.getParentToNodeTransform()},getNodeToWorldTransform:function(){for(var a=this.getNodeToParentTransform(),b=this._parent;null!==b;b=b.parent)a=cc.affineTransformConcat(a,b.getNodeToParentTransform());return a},nodeToWorldTransform:function(){return this.getNodeToWorldTransform()},getWorldToNodeTransform:function(){return cc.affineTransformInvert(this.getNodeToWorldTransform());
},worldToNodeTransform:function(){return this.getWorldToNodeTransform()},convertToNodeSpace:function(a){return cc.pointApplyAffineTransform(a,this.getWorldToNodeTransform())},convertToWorldSpace:function(a){return a=a||cc.p(0,0),cc.pointApplyAffineTransform(a,this.getNodeToWorldTransform())},convertToNodeSpaceAR:function(a){return cc.pSub(this.convertToNodeSpace(a),this._renderCmd.getAnchorPointInPoints())},convertToWorldSpaceAR:function(a){a=a||cc.p(0,0);var b=cc.pAdd(a,this._renderCmd.getAnchorPointInPoints());return this.convertToWorldSpace(b)},_convertToWindowSpace:function(a){var b=this.convertToWorldSpace(a);return cc.director.convertToUI(b)},convertTouchToNodeSpace:function(a){var b=a.getLocation();return this.convertToNodeSpace(b)},convertTouchToNodeSpaceAR:function(a){var b=cc.director.convertToGL(a.getLocation());return this.convertToNodeSpaceAR(b)},update:function(a){this._componentContainer&&!this._componentContainer.isEmpty()&&this._componentContainer.visit(a)},updateTransform:function(){this._arrayMakeObjectsPerformSelector(this._children,cc.Node._stateCallbackType.updateTransform)},retain:function(){},release:function(){},getComponent:function(a){return this._componentContainer?this._componentContainer.getComponent(a):null},addComponent:function(a){this._componentContainer&&this._componentContainer.add(a)},removeComponent:function(a){return!!this._componentContainer&&this._componentContainer.remove(a)},removeAllComponents:function(){this._componentContainer&&this._componentContainer.removeAll()},grid:null,visit:function(a){this._renderCmd.visit(a)},transform:function(a,b){this._renderCmd.transform(a,b)},nodeToParentTransform:function(){return this.getNodeToParentTransform()},getNodeToParentTransform:function(a){var b=this._renderCmd.getNodeToParentTransform();if(a){for(var c={a:b.a,b:b.b,c:b.c,d:b.d,tx:b.tx,ty:b.ty},d=this._parent;null!=d&&d!=a;d=d.getParent())cc.affineTransformConcatIn(c,d.getNodeToParentTransform());return c}return b},getNodeToParentAffineTransform:function(a){return this.getNodeToParentTransform(a)},getCamera:function(){return null},getGrid:function(){return this.grid},setGrid:function(a){this.grid=a},getShaderProgram:function(){return this._renderCmd.getShaderProgram()},setShaderProgram:function(a){this._renderCmd.setShaderProgram(a)},getGLServerState:function(){return 0},setGLServerState:function(a){},getBoundingBoxToWorld:function(){var a=cc.rect(0,0,this._contentSize.width,this._contentSize.height),b=this.getNodeToWorldTransform();if(a=cc.rectApplyAffineTransform(a,b),!this._children)return a;for(var c=this._children,d=0;d<c.length;d++){var e=c[d];if(e&&e._visible){var f=e._getBoundingBoxToCurrentNode(b);f&&(a=cc.rectUnion(a,f))}}return a},_getBoundingBoxToCurrentNode:function(a){var b=cc.rect(0,0,this._contentSize.width,this._contentSize.height),c=void 0===a?this.getNodeToParentTransform():cc.affineTransformConcat(this.getNodeToParentTransform(),a);if(b=cc.rectApplyAffineTransform(b,c),!this._children)return b;for(var d=this._children,e=0;e<d.length;e++){var f=d[e];if(f&&f._visible){var g=f._getBoundingBoxToCurrentNode(c);g&&(b=cc.rectUnion(b,g))}}return b},getOpacity:function(){return this._realOpacity},getDisplayedOpacity:function(){return this._renderCmd.getDisplayedOpacity()},setOpacity:function(a){this._realOpacity=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},updateDisplayedOpacity:function(a){this._renderCmd._updateDisplayOpacity(a)},isCascadeOpacityEnabled:function(){return this._cascadeOpacityEnabled},setCascadeOpacityEnabled:function(a){this._cascadeOpacityEnabled!==a&&(this._cascadeOpacityEnabled=a,this._renderCmd.setCascadeOpacityEnabledDirty())},getColor:function(){var a=this._realColor;return cc.color(a.r,a.g,a.b,a.a)},getDisplayedColor:function(){return this._renderCmd.getDisplayedColor()},setColor:function(a){var b=this._realColor;b.r=a.r,b.g=a.g,b.b=a.b,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},updateDisplayedColor:function(a){this._renderCmd._updateDisplayColor(a)},isCascadeColorEnabled:function(){return this._cascadeColorEnabled},setCascadeColorEnabled:function(a){this._cascadeColorEnabled!==a&&(this._cascadeColorEnabled=a,this._renderCmd.setCascadeColorEnabledDirty())},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},_initRendererCmd:function(){this._renderCmd=cc.renderer.getRenderCmd(this)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Node.CanvasRenderCmd(this):new cc.Node.WebGLRenderCmd(this)},enumerateChildren:function(a,b){cc.assert(a&&0!=a.length,"Invalid name"),cc.assert(null!=b,"Invalid callback function");var c=a.length,d=0,e=c,f=!1;c>2&&"/"===a[0]&&"/"===a[1]&&(f=!0,d=2,e-=2);var g=!1;c>3&&"/"===a[c-3]&&"."===a[c-2]&&"."===a[c-1]&&(g=!0,e-=3);var h=a.substr(d,e);g&&(h="[[:alnum:]]+/"+h),f?this.doEnumerateRecursive(this,h,b):this.doEnumerate(h,b)},doEnumerateRecursive:function(a,b,c){var d=!1;if(a.doEnumerate(b,c))d=!0;else for(var e,f=a.getChildren(),g=f.length,h=0;h<g;h++)if(e=f[h],this.doEnumerateRecursive(e,b,c)){d=!0;break}},doEnumerate:function(a,b){var c=a.indexOf("/"),d=a,e=!1;c!==-1&&(d=a.substr(0,c),e=!0);for(var f,g=!1,h=this._children,i=h.length,j=0;j<i;j++)if(f=h[j],f._name.indexOf(d)!==-1)if(e){if(g=f.doEnumerate(a,b))break}else if(b(f)){g=!0;break}return g}}),cc.Node.create=function(){return new cc.Node},cc.Node._stateCallbackType={onEnter:1,onExit:2,cleanup:3,onEnterTransitionDidFinish:4,updateTransform:5,onExitTransitionDidStart:6,sortAllChildren:7},cc.assert(cc.isFunction(cc._tmp.PrototypeCCNode),cc._LogInfos.MissingFile,"BaseNodesPropertyDefine.js"),cc._tmp.PrototypeCCNode(),delete cc._tmp.PrototypeCCNode,cc.CustomRenderCmd=function(a,b){this._needDraw=!0,this._target=a,this._callback=b,this.rendering=function(a,b,c){this._callback&&this._callback.call(this._target,a,b,c)},this.needDraw=function(){return this._needDraw}},cc.Node._dirtyFlags={transformDirty:1,visibleDirty:2,colorDirty:4,opacityDirty:8,cacheDirty:16,orderDirty:32,textDirty:64,gradientDirty:128,textureDirty:256,contentDirty:512,COUNT:10,all:1023},cc.Node.RenderCmd=function(a){this._dirtyFlag=1,this._savedDirtyFlag=!0,this._node=a,this._needDraw=!1,this._anchorPointInPoints=new cc.Point(0,0),this._transform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._worldTransform={a:1,b:0,c:0,d:1,tx:0,ty:0},this._inverse={a:1,b:0,c:0,d:1,tx:0,ty:0},this._displayedOpacity=255,this._displayedColor=cc.color(255,255,255,255),this._cascadeColorEnabledDirty=!1,this._cascadeOpacityEnabledDirty=!1,this._curLevel=-1},cc.Node.RenderCmd.prototype={constructor:cc.Node.RenderCmd,needDraw:function(){return this._needDraw},getAnchorPointInPoints:function(){return cc.p(this._anchorPointInPoints)},getDisplayedColor:function(){var a=this._displayedColor;return cc.color(a.r,a.g,a.b,a.a)},getDisplayedOpacity:function(){return this._displayedOpacity},setCascadeColorEnabledDirty:function(){this._cascadeColorEnabledDirty=!0,this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},setCascadeOpacityEnabledDirty:function(){this._cascadeOpacityEnabledDirty=!0,this.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getParentToNodeTransform:function(){return this._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&(this._inverse=cc.affineTransformInvert(this.getNodeToParentTransform())),this._inverse},detachFromParent:function(){},_updateAnchorPointInPoint:function(){var a=this._anchorPointInPoints,b=this._node._contentSize,c=this._node._anchorPoint;a.x=b.width*c.x,a.y=b.height*c.y,this.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setDirtyFlag:function(a){0===this._dirtyFlag&&0!==a&&cc.renderer.pushDirtyNode(this),this._dirtyFlag|=a},getParentRenderCmd:function(){return this._node&&this._node._parent&&this._node._parent._renderCmd?this._node._parent._renderCmd:null},transform:function(a,b){var c=this._node,d=a?a._worldTransform:null,e=this._transform,f=this._worldTransform;if(c._usingNormalizedPosition&&c._parent){var g=c._parent._contentSize;c._position.x=c._normalizedPosition.x*g.width,c._position.y=c._normalizedPosition.y*g.height,c._normalizedPositionDirty=!1}var h=c._rotationX||c._rotationY,i=c._skewX||c._skewY,j=c._scaleX,k=c._scaleY,l=this._anchorPointInPoints.x,m=this._anchorPointInPoints.y,n=1,o=0,p=0,q=1;if(h||i){if(e.tx=c._position.x,e.ty=c._position.y,h){var r=.017453292519943295*c._rotationX;if(p=Math.sin(r),q=Math.cos(r),c._rotationY===c._rotationX)n=q,o=-p;else{var s=.017453292519943295*c._rotationY;n=Math.cos(s),o=-Math.sin(s)}}if(e.a=n*=j,e.b=o*=j,e.c=p*=k,e.d=q*=k,i){var t=Math.tan(c._skewX*Math.PI/180),u=Math.tan(c._skewY*Math.PI/180);t===1/0&&(t=99999999),u===1/0&&(u=99999999),e.a=n+p*u,e.b=o+q*u,e.c=p+n*t,e.d=q+o*t}(l||m)&&(e.tx-=e.a*l+e.c*m,e.ty-=e.b*l+e.d*m,c._ignoreAnchorPointForPosition&&(e.tx+=l,e.ty+=m)),d?(f.a=e.a*d.a+e.b*d.c,f.b=e.a*d.b+e.b*d.d,f.c=e.c*d.a+e.d*d.c,f.d=e.c*d.b+e.d*d.d,f.tx=d.a*e.tx+d.c*e.ty+d.tx,f.ty=d.d*e.ty+d.ty+d.b*e.tx):(f.a=e.a,f.b=e.b,f.c=e.c,f.d=e.d,f.tx=e.tx,f.ty=e.ty)}else e.a=j,e.b=0,e.c=0,e.d=k,e.tx=c._position.x,e.ty=c._position.y,(l||m)&&(e.tx-=e.a*l,e.ty-=e.d*m,c._ignoreAnchorPointForPosition&&(e.tx+=l,e.ty+=m)),d?(f.a=e.a*d.a+e.b*d.c,f.b=e.a*d.b+e.b*d.d,f.c=e.c*d.a+e.d*d.c,f.d=e.c*d.b+e.d*d.d,f.tx=e.tx*d.a+e.ty*d.c+d.tx,f.ty=e.tx*d.b+e.ty*d.d+d.ty):(f.a=e.a,f.b=e.b,f.c=e.c,f.d=e.d,f.tx=e.tx,f.ty=e.ty);if(c._additionalTransformDirty&&(this._transform=cc.affineTransformConcat(e,c._additionalTransform)),this._updateCurrentRegions&&this._updateCurrentRegions(),this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble),b){var v=this._node._children;if(!v||0===v.length)return;var w,x;for(w=0,x=v.length;w<x;w++)v[w]._renderCmd.transform(this,b)}this._cacheDirty=!0},getNodeToParentTransform:function(){return this._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&this.transform(),this._transform},visit:function(a){var b=this._node,c=cc.renderer;b._visible&&(a=a||this.getParentRenderCmd(),a&&(this._curLevel=a._curLevel+1),isNaN(b._customZ)&&(b._vertexZ=c.assignedZ,c.assignedZ+=c.assignedZStep),this._syncStatus(a),this.visitChildren())},_updateDisplayColor:function(a){var b,c,d,e,f=this._node,g=this._displayedColor,h=f._realColor;if(this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._cascadeColorEnabledDirty&&!f._cascadeColorEnabled){g.r=h.r,g.g=h.g,g.b=h.b;var i=new cc.Color(255,255,255,255);for(d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&e._renderCmd._updateDisplayColor(i);this._cascadeColorEnabledDirty=!1}else{if(void 0===a){var j=f._parent;a=j&&j._cascadeColorEnabled?j.getDisplayedColor():cc.color.WHITE}if(g.r=0|h.r*a.r/255,g.g=0|h.g*a.g/255,g.b=0|h.b*a.b/255,f._cascadeColorEnabled)for(d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&(e._renderCmd._updateDisplayColor(g),e._renderCmd._updateColor())}this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.colorDirty^this._dirtyFlag},_updateDisplayOpacity:function(a){var b,c,d,e,f=this._node;if(this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._cascadeOpacityEnabledDirty&&!f._cascadeOpacityEnabled){for(this._displayedOpacity=f._realOpacity,d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&e._renderCmd._updateDisplayOpacity(255);this._cascadeOpacityEnabledDirty=!1}else{if(void 0===a){var g=f._parent;a=255,g&&g._cascadeOpacityEnabled&&(a=g.getDisplayedOpacity())}if(this._displayedOpacity=f._realOpacity*a/255,f._cascadeOpacityEnabled)for(d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&(e._renderCmd._updateDisplayOpacity(this._displayedOpacity),e._renderCmd._updateColor())}this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.opacityDirty^this._dirtyFlag},_syncDisplayColor:function(a){var b=this._node,c=this._displayedColor,d=b._realColor;if(void 0===a){var e=b._parent;a=e&&e._cascadeColorEnabled?e.getDisplayedColor():cc.color.WHITE}c.r=0|d.r*a.r/255,c.g=0|d.g*a.g/255,c.b=0|d.b*a.b/255},_syncDisplayOpacity:function(a){var b=this._node;if(void 0===a){var c=b._parent;a=255,c&&c._cascadeOpacityEnabled&&(a=c.getDisplayedOpacity())}this._displayedOpacity=b._realOpacity*a/255},_updateColor:function(){},updateStatus:function(){var a=cc.Node._dirtyFlags,b=this._dirtyFlag,c=b&a.colorDirty,d=b&a.opacityDirty;this._savedDirtyFlag=this._savedDirtyFlag||b,c&&this._updateDisplayColor(),d&&this._updateDisplayOpacity(),(c||d)&&this._updateColor(),b&a.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this._dirtyFlag=this._dirtyFlag&a.transformDirty^this._dirtyFlag),b&a.orderDirty&&(this._dirtyFlag=this._dirtyFlag&a.orderDirty^this._dirtyFlag)},_syncStatus:function(a){var b=cc.Node._dirtyFlags,c=this._dirtyFlag,d=null;a?(d=a._node,this._savedDirtyFlag=this._savedDirtyFlag||a._savedDirtyFlag||c):this._savedDirtyFlag=this._savedDirtyFlag||c,d&&d._cascadeColorEnabled&&a._dirtyFlag&b.colorDirty&&(c|=b.colorDirty),d&&d._cascadeOpacityEnabled&&a._dirtyFlag&b.opacityDirty&&(c|=b.opacityDirty),a&&a._dirtyFlag&b.transformDirty&&(c|=b.transformDirty);var e=c&b.colorDirty,f=c&b.opacityDirty;this._dirtyFlag=c,e&&this._syncDisplayColor(),f&&this._syncDisplayOpacity(),(e||f)&&this._updateColor(),c&b.transformDirty&&this.transform(a),c&b.orderDirty&&(this._dirtyFlag=this._dirtyFlag&b.orderDirty^this._dirtyFlag)},visitChildren:function(){var a,b,c=cc.renderer,d=this._node,e=d._children,f=e.length;if(f>0){for(d.sortAllChildren(),a=0;a<f&&(b=e[a],b._localZOrder<0);a++)b._renderCmd.visit(this);for(c.pushRenderCommand(this);a<f;a++)e[a]._renderCmd.visit(this)}else c.pushRenderCommand(this);this._dirtyFlag=0}},cc.Node.RenderCmd.prototype.originVisit=cc.Node.RenderCmd.prototype.visit,cc.Node.RenderCmd.prototype.originTransform=cc.Node.RenderCmd.prototype.transform,function(){cc.Node.CanvasRenderCmd=function(a){cc.Node.RenderCmd.call(this,a),this._cachedParent=null,this._cacheDirty=!1,this._currentRegion=new cc.Region,this._oldRegion=new cc.Region,this._regionFlag=0,this._canUseDirtyRegion=!1},cc.Node.CanvasRenderCmd.RegionStatus={NotDirty:0,Dirty:1,DirtyDouble:2};var a=cc.Node.CanvasRenderCmd.prototype=Object.create(cc.Node.RenderCmd.prototype);a.constructor=cc.Node.CanvasRenderCmd,a._notifyRegionStatus=function(a){this._needDraw&&this._regionFlag<a&&(this._regionFlag=a)};var b=new cc.Rect;a.getLocalBB=function(){var a=this._node;return b.x=b.y=0,b.width=a._contentSize.width,b.height=a._contentSize.height,b},a._updateCurrentRegions=function(){var a=this._currentRegion;this._currentRegion=this._oldRegion,this._oldRegion=a,cc.Node.CanvasRenderCmd.RegionStatus.DirtyDouble!==this._regionFlag||this._currentRegion.isEmpty()||this._oldRegion.union(this._currentRegion),this._currentRegion.updateRegion(this.getLocalBB(),this._worldTransform)},a.setDirtyFlag=function(a,b){cc.Node.RenderCmd.prototype.setDirtyFlag.call(this,a,b),this._setCacheDirty(b),this._cachedParent&&this._cachedParent.setDirtyFlag(a,!0)},a._setCacheDirty=function(){if(this._cacheDirty===!1){this._cacheDirty=!0;var a=this._cachedParent;a&&a!==this&&a._setNodeDirtyForCache&&a._setNodeDirtyForCache()}},a._setCachedParent=function(a){if(this._cachedParent!==a){this._cachedParent=a;for(var b=this._node._children,c=0,d=b.length;c<d;c++)b[c]._renderCmd._setCachedParent(a)}},a.detachFromParent=function(){this._cachedParent=null;for(var a,b=this._node._children,c=0,d=b.length;c<d;c++)a=b[c],a&&a._renderCmd&&a._renderCmd.detachFromParent()},a.setShaderProgram=function(a){},a.getShaderProgram=function(){return null},cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc=function(a){return a?a.src===cc.SRC_ALPHA&&a.dst===cc.ONE||a.src===cc.ONE&&a.dst===cc.ONE?"lighter":a.src===cc.ZERO&&a.dst===cc.SRC_ALPHA?"destination-in":a.src===cc.ZERO&&a.dst===cc.ONE_MINUS_SRC_ALPHA?"destination-out":"source-over":"source-over"}}(),cc._tmp.PrototypeTexture2D=function(){var a=cc.Texture2D;a.PVRImagesHavePremultipliedAlpha=function(a){cc.PVRHaveAlphaPremultiplied_=a},a.PIXEL_FORMAT_RGBA8888=2,a.PIXEL_FORMAT_RGB888=3,a.PIXEL_FORMAT_RGB565=4,a.PIXEL_FORMAT_A8=5,a.PIXEL_FORMAT_I8=6,a.PIXEL_FORMAT_AI88=7,a.PIXEL_FORMAT_RGBA4444=8,a.PIXEL_FORMAT_RGB5A1=7,a.PIXEL_FORMAT_PVRTC4=9,a.PIXEL_FORMAT_PVRTC2=10,a.PIXEL_FORMAT_DEFAULT=a.PIXEL_FORMAT_RGBA8888,a.defaultPixelFormat=a.PIXEL_FORMAT_DEFAULT;var b=cc.Texture2D._M={};b[a.PIXEL_FORMAT_RGBA8888]="RGBA8888",b[a.PIXEL_FORMAT_RGB888]="RGB888",b[a.PIXEL_FORMAT_RGB565]="RGB565",b[a.PIXEL_FORMAT_A8]="A8",b[a.PIXEL_FORMAT_I8]="I8",b[a.PIXEL_FORMAT_AI88]="AI88",b[a.PIXEL_FORMAT_RGBA4444]="RGBA4444",b[a.PIXEL_FORMAT_RGB5A1]="RGB5A1",b[a.PIXEL_FORMAT_PVRTC4]="PVRTC4",b[a.PIXEL_FORMAT_PVRTC2]="PVRTC2";var c=cc.Texture2D._B={};c[a.PIXEL_FORMAT_RGBA8888]=32,c[a.PIXEL_FORMAT_RGB888]=24,c[a.PIXEL_FORMAT_RGB565]=16,c[a.PIXEL_FORMAT_A8]=8,c[a.PIXEL_FORMAT_I8]=8,c[a.PIXEL_FORMAT_AI88]=16,c[a.PIXEL_FORMAT_RGBA4444]=16,c[a.PIXEL_FORMAT_RGB5A1]=16,c[a.PIXEL_FORMAT_PVRTC4]=4,c[a.PIXEL_FORMAT_PVRTC2]=3;var d=cc.Texture2D.prototype;d.name,cc.defineGetterSetter(d,"name",d.getName),d.pixelFormat,cc.defineGetterSetter(d,"pixelFormat",d.getPixelFormat),d.pixelsWidth,cc.defineGetterSetter(d,"pixelsWidth",d.getPixelsWide),d.pixelsHeight,cc.defineGetterSetter(d,"pixelsHeight",d.getPixelsHigh),d.width,cc.defineGetterSetter(d,"width",d._getWidth),d.height,cc.defineGetterSetter(d,"height",d._getHeight)},cc._tmp.PrototypeTextureAtlas=function(){var a=cc.TextureAtlas.prototype;a.totalQuads,cc.defineGetterSetter(a,"totalQuads",a.getTotalQuads),a.capacity,cc.defineGetterSetter(a,"capacity",a.getCapacity),a.quads,cc.defineGetterSetter(a,"quads",a.getQuads,a.setQuads)},cc._tmp.WebGLTexture2D=function(){cc.Texture2D=cc.Class.extend({_pVRHaveAlphaPremultiplied:!0,_pixelFormat:null,_pixelsWide:0,_pixelsHigh:0,_name:"",_contentSize:null,maxS:0,maxT:0,_hasPremultipliedAlpha:!1,_hasMipmaps:!1,shaderProgram:null,_textureLoaded:!1,_htmlElementObj:null,_webTextureObj:null,url:null,ctor:function(){this._contentSize=cc.size(0,0),this._pixelFormat=cc.Texture2D.defaultPixelFormat},releaseTexture:function(){this._webTextureObj&&cc._renderContext.deleteTexture(this._webTextureObj),cc.loader.release(this.url)},getPixelFormat:function(){return this._pixelFormat},getPixelsWide:function(){return this._pixelsWide},getPixelsHigh:function(){return this._pixelsHigh},getName:function(){return this._webTextureObj},getContentSize:function(){return cc.size(this._contentSize.width/cc.contentScaleFactor(),this._contentSize.height/cc.contentScaleFactor())},_getWidth:function(){return this._contentSize.width/cc.contentScaleFactor()},_getHeight:function(){return this._contentSize.height/cc.contentScaleFactor()},getContentSizeInPixels:function(){return this._contentSize},getMaxS:function(){return this.maxS},setMaxS:function(a){this.maxS=a},getMaxT:function(){return this.maxT},setMaxT:function(a){this.maxT=a},getShaderProgram:function(){return this.shaderProgram},setShaderProgram:function(a){this.shaderProgram=a},hasPremultipliedAlpha:function(){return this._hasPremultipliedAlpha},hasMipmaps:function(){return this._hasMipmaps},description:function(){var a=this;return"<cc.Texture2D | Name = "+a._name+" | Dimensions = "+a._pixelsWide+" x "+a._pixelsHigh+" | Coordinates = ("+a.maxS+", "+a.maxT+")>"},releaseData:function(a){a=null},keepData:function(a,b){return a},initWithData:function(a,b,c,d,e){var f=this,g=cc.Texture2D,h=cc._renderContext,i=h.RGBA,j=h.UNSIGNED_BYTE,k=cc.Texture2D._B[b],l=c*k/8;switch(l%8===0?h.pixelStorei(h.UNPACK_ALIGNMENT,8):l%4===0?h.pixelStorei(h.UNPACK_ALIGNMENT,4):l%2===0?h.pixelStorei(h.UNPACK_ALIGNMENT,2):h.pixelStorei(h.UNPACK_ALIGNMENT,1),f._webTextureObj=h.createTexture(),cc.glBindTexture2D(f),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),b){case g.PIXEL_FORMAT_RGBA8888:i=h.RGBA;break;case g.PIXEL_FORMAT_RGB888:i=h.RGB;break;case g.PIXEL_FORMAT_RGBA4444:j=h.UNSIGNED_SHORT_4_4_4_4;break;case g.PIXEL_FORMAT_RGB5A1:j=h.UNSIGNED_SHORT_5_5_5_1;break;case g.PIXEL_FORMAT_RGB565:j=h.UNSIGNED_SHORT_5_6_5;break;case g.PIXEL_FORMAT_AI88:i=h.LUMINANCE_ALPHA;break;case g.PIXEL_FORMAT_A8:i=h.ALPHA;break;case g.PIXEL_FORMAT_I8:i=h.LUMINANCE;break;default:cc.assert(0,cc._LogInfos.Texture2D_initWithData)}return h.texImage2D(h.TEXTURE_2D,0,i,c,d,0,i,j,a),f._contentSize.width=e.width,f._contentSize.height=e.height,f._pixelsWide=c,f._pixelsHigh=d,f._pixelFormat=b,f.maxS=e.width/c,f.maxT=e.height/d,f._hasPremultipliedAlpha=!1,f._hasMipmaps=!1,f.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE),f._textureLoaded=!0,!0},drawAtPoint:function(a){var b=this,c=[0,b.maxT,b.maxS,b.maxT,0,0,b.maxS,0],d=cc._renderContext,e=b._pixelsWide*b.maxS,f=b._pixelsHigh*b.maxT,g=[a.x,a.y,0,e+a.x,a.y,0,a.x,f+a.y,0,e+a.x,f+a.y,0];b._shaderProgram.use(),b._shaderProgram.setUniformsForBuiltins(),cc.glBindTexture2D(b),d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),d.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,d.FLOAT,!1,0,g),d.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,d.FLOAT,!1,0,c),d.drawArrays(d.TRIANGLE_STRIP,0,4)},drawInRect:function(a){var b=this,c=[0,b.maxT,b.maxS,b.maxT,0,0,b.maxS,0],d=[a.x,a.y,a.x+a.width,a.y,a.x,a.y+a.height,a.x+a.width,a.y+a.height];b._shaderProgram.use(),b._shaderProgram.setUniformsForBuiltins(),cc.glBindTexture2D(b);var e=cc._renderContext;e.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),e.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),e.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,e.FLOAT,!1,0,d),e.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,e.FLOAT,!1,0,c),e.drawArrays(e.TRIANGLE_STRIP,0,4)},initWithImage:function(a){if(null==a)return cc.log(cc._LogInfos.Texture2D_initWithImage),!1;var b=a.getWidth(),c=a.getHeight(),d=cc.configuration.getMaxTextureSize();return b>d||c>d?(cc.log(cc._LogInfos.Texture2D_initWithImage_2,b,c,d,d),!1):(this._textureLoaded=!0,this._initPremultipliedATextureWithImage(a,b,c))},initWithElement:function(a){a&&(this._webTextureObj=cc._renderContext.createTexture(),this._htmlElementObj=a,this._textureLoaded=!0,this._hasPremultipliedAlpha=!0)},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._textureLoaded},handleLoadedTexture:function(a){var b=this;if(a=void 0!==a?a:b._hasPremultipliedAlpha,cc.game._rendererInitialized){if(!b._htmlElementObj){var c=cc.loader.getRes(b.url);if(!c)return;b.initWithElement(c)}if(b._htmlElementObj.width&&b._htmlElementObj.height){var d=cc._renderContext;cc.glBindTexture2D(b),d.pixelStorei(d.UNPACK_ALIGNMENT,4),a&&d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,d.RGBA,d.UNSIGNED_BYTE,b._htmlElementObj),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),b.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_TEXTURE),cc.glBindTexture2D(null),a&&d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0);var e=b._htmlElementObj.width,f=b._htmlElementObj.height;b._pixelsWide=b._contentSize.width=e,b._pixelsHigh=b._contentSize.height=f,b._pixelFormat=cc.Texture2D.PIXEL_FORMAT_RGBA8888,b.maxS=1,b.maxT=1,b._hasPremultipliedAlpha=a,b._hasMipmaps=!1,b.dispatchEvent("load")}}},initWithString:function(a,b,c,d,e,f){return cc.log(cc._LogInfos.Texture2D_initWithString),null},initWithETCFile:function(a){return cc.log(cc._LogInfos.Texture2D_initWithETCFile_2),!1},initWithPVRFile:function(a){return cc.log(cc._LogInfos.Texture2D_initWithPVRFile_2),!1},initWithPVRTCData:function(a,b,c,d,e,f){return cc.log(cc._LogInfos.Texture2D_initWithPVRTCData_2),!1},setTexParameters:function(a,b,c,d){var e=this,f=cc._renderContext;void 0!==b&&(a={minFilter:a,magFilter:b,wrapS:c,wrapT:d}),cc.assert(e._pixelsWide===cc.NextPOT(e._pixelsWide)&&e._pixelsHigh===cc.NextPOT(e._pixelsHigh)||a.wrapS===f.CLAMP_TO_EDGE&&a.wrapT===f.CLAMP_TO_EDGE,"WebGLRenderingContext.CLAMP_TO_EDGE should be used in NPOT textures"),cc.glBindTexture2D(e),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,a.minFilter),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,a.magFilter),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a.wrapS),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a.wrapT)},setAntiAliasTexParameters:function(){var a=cc._renderContext;cc.glBindTexture2D(this),this._hasMipmaps?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR)},setAliasTexParameters:function(){var a=cc._renderContext;cc.glBindTexture2D(this),this._hasMipmaps?a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST_MIPMAP_NEAREST):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST)},generateMipmap:function(){var a=this;cc.assert(a._pixelsWide===cc.NextPOT(a._pixelsWide)&&a._pixelsHigh===cc.NextPOT(a._pixelsHigh),"Mimpap texture only works in POT textures"),cc.glBindTexture2D(a),cc._renderContext.generateMipmap(cc._renderContext.TEXTURE_2D),a._hasMipmaps=!0},stringForFormat:function(){return cc.Texture2D._M[this._pixelFormat]},bitsPerPixelForFormat:function(a){a=a||this._pixelFormat;var b=cc.Texture2D._B[a];return null!=b?b:(cc.log(cc._LogInfos.Texture2D_bitsPerPixelForFormat,a),-1)},_initPremultipliedATextureWithImage:function(a,b,c){var d,e=cc.Texture2D,f=a.getData(),g=null,h=null,i=a.hasAlpha(),j=cc.size(a.getWidth(),a.getHeight()),k=e.defaultPixelFormat,l=a.getBitsPerComponent();i||(l>=8?k=e.PIXEL_FORMAT_RGB888:(cc.log(cc._LogInfos.Texture2D__initPremultipliedATextureWithImage),k=e.PIXEL_FORMAT_RGB565));var m=b*c;if(k===e.PIXEL_FORMAT_RGB565)if(i)for(f=new Uint16Array(b*c),g=a.getData(),d=0;d<m;++d)f[d]=(g[d]>>0&255)>>3<<11|(g[d]>>8&255)>>2<<5|(g[d]>>16&255)>>3<<0;else for(f=new Uint16Array(b*c),h=a.getData(),d=0;d<m;++d)f[d]=(255&h[d])>>3<<11|(255&h[d])>>2<<5|(255&h[d])>>3<<0;else if(k===e.PIXEL_FORMAT_RGBA4444)for(f=new Uint16Array(b*c),g=a.getData(),d=0;d<m;++d)f[d]=(g[d]>>0&255)>>4<<12|(g[d]>>8&255)>>4<<8|(g[d]>>16&255)>>4<<4|(g[d]>>24&255)>>4<<0;else if(k===e.PIXEL_FORMAT_RGB5A1)for(f=new Uint16Array(b*c),g=a.getData(),d=0;d<m;++d)f[d]=(g[d]>>0&255)>>3<<11|(g[d]>>8&255)>>3<<6|(g[d]>>16&255)>>3<<1|(g[d]>>24&255)>>7<<0;else if(k===e.PIXEL_FORMAT_A8)for(f=new Uint8Array(b*c),g=a.getData(),d=0;d<m;++d)f[d]=g>>24&255;if(i&&k===e.PIXEL_FORMAT_RGB888)for(g=a.getData(),f=new Uint8Array(b*c*3),d=0;d<m;++d)f[3*d]=g>>0&255,f[3*d+1]=g>>8&255,f[3*d+2]=g>>16&255;return this.initWithData(f,k,b,c,j),f!=a.getData()&&(f=null),this._hasPremultipliedAlpha=a.isPremultipliedAlpha(),!0},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},removeLoadedEventListener:function(a){this.removeEventTarget("load",a)}})},cc._tmp.WebGLTextureAtlas=function(){var a=cc.TextureAtlas.prototype;a._setupVBO=function(){var a=this,b=cc._renderContext;a._buffersVBO[0]=b.createBuffer(),a._buffersVBO[1]=b.createBuffer(),a._quadsWebBuffer=b.createBuffer(),a._mapBuffers()},a._mapBuffers=function(){var a=this,b=cc._renderContext;b.bindBuffer(b.ARRAY_BUFFER,a._quadsWebBuffer),b.bufferData(b.ARRAY_BUFFER,a._quadsArrayBuffer,b.DYNAMIC_DRAW),b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a._buffersVBO[1]),b.bufferData(b.ELEMENT_ARRAY_BUFFER,a._indices,b.STATIC_DRAW)},a.drawNumberOfQuads=function(a,b){var c=this;if(b=b||0,0!==a&&c.texture&&c.texture.isLoaded()){var d=cc._renderContext;cc.glBindTexture2D(c.texture),d.bindBuffer(d.ARRAY_BUFFER,c._quadsWebBuffer),c.dirty&&(d.bufferData(d.ARRAY_BUFFER,c._quadsArrayBuffer,d.DYNAMIC_DRAW),c.dirty=!1),d.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),d.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),d.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),d.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,3,d.FLOAT,!1,24,0),d.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,d.UNSIGNED_BYTE,!0,24,12),d.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,d.FLOAT,!1,24,16),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,c._buffersVBO[1]),cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP?d.drawElements(d.TRIANGLE_STRIP,6*a,d.UNSIGNED_SHORT,6*b*c._indices.BYTES_PER_ELEMENT):d.drawElements(d.TRIANGLES,6*a,d.UNSIGNED_SHORT,6*b*c._indices.BYTES_PER_ELEMENT),cc.g_NumberOfDraws++}}},cc._tmp.WebGLTextureCache=function(){var a=cc.textureCache;a.handleLoadedTexture=function(a){var b,c,d=this._textures;cc.game._rendererInitialized||(d=this._loadedTexturesBefore),b=d[a],b||(b=d[a]=new cc.Texture2D,b.url=a),c=cc.path.extname(a),".png"===c?b.handleLoadedTexture(!0):b.handleLoadedTexture()},a.addImage=function(a,b,c){cc.assert(a,cc._LogInfos.Texture2D_addImage_2);var d=this._textures;cc.game._rendererInitialized||(d=this._loadedTexturesBefore);var e=d[a]||d[cc.loader._getAliase(a)];if(e)return e.isLoaded()?(b&&b.call(c,e),e):(e.addEventListener("load",function(){b&&b.call(c,e)},c),e);e=d[a]=new cc.Texture2D,e.url=a;var f=cc.loader.getBasePath?cc.loader.getBasePath():cc.loader.resPath;return cc.loader.loadImg(cc.path.join(f||"",a),function(e,f){if(e)return b&&b.call(c,e);cc.loader.cache[a]||(cc.loader.cache[a]=f),cc.textureCache.handleLoadedTexture(a);var g=d[a];b&&b.call(c,g)}),e},a.addImageAsync=a.addImage,a=null},cc.ALIGN_CENTER=51,cc.ALIGN_TOP=19,cc.ALIGN_TOP_RIGHT=18,cc.ALIGN_RIGHT=50,cc.ALIGN_BOTTOM_RIGHT=34,cc.ALIGN_BOTTOM=35,cc.ALIGN_BOTTOM_LEFT=33,cc.ALIGN_LEFT=49,cc.ALIGN_TOP_LEFT=17,cc.PVRHaveAlphaPremultiplied_=!1,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var a={_contentSize:null,_textureLoaded:!1,_htmlElementObj:null,url:null,_pattern:null,ctor:function(){this._contentSize=cc.size(0,0),this._textureLoaded=!1,this._htmlElementObj=null,this._pattern=""},getPixelsWide:function(){return this._contentSize.width},getPixelsHigh:function(){return this._contentSize.height},getContentSize:function(){var a=cc.contentScaleFactor();return cc.size(this._contentSize.width/a,this._contentSize.height/a)},_getWidth:function(){return this._contentSize.width/cc.contentScaleFactor()},_getHeight:function(){return this._contentSize.height/cc.contentScaleFactor()},getContentSizeInPixels:function(){return this._contentSize},initWithElement:function(a){a&&(this._htmlElementObj=a,this._contentSize.width=a.width,this._contentSize.height=a.height,this._textureLoaded=!0)},getHtmlElementObj:function(){return this._htmlElementObj},isLoaded:function(){return this._textureLoaded},handleLoadedTexture:function(){var a=this;if(!a._textureLoaded){if(!a._htmlElementObj){var b=cc.loader.getRes(a.url);if(!b)return;a.initWithElement(b)}var c=a._htmlElementObj;a._contentSize.width=c.width,a._contentSize.height=c.height,a.dispatchEvent("load")}},description:function(){return"<cc.Texture2D | width = "+this._contentSize.width+" height "+this._contentSize.height+">"},initWithData:function(a,b,c,d,e){return!1},initWithImage:function(a){return!1},initWithString:function(a,b,c,d,e,f){return!1},releaseTexture:function(){cc.loader.release(this.url)},getName:function(){return null},getMaxS:function(){return 1},setMaxS:function(a){},getMaxT:function(){return 1},setMaxT:function(a){},getPixelFormat:function(){return null},getShaderProgram:function(){return null},setShaderProgram:function(a){},hasPremultipliedAlpha:function(){return!1},hasMipmaps:function(){return!1},releaseData:function(a){a=null},keepData:function(a,b){return a},drawAtPoint:function(a){},drawInRect:function(a){},initWithETCFile:function(a){return cc.log(cc._LogInfos.Texture2D_initWithETCFile),!1},initWithPVRFile:function(a){return cc.log(cc._LogInfos.Texture2D_initWithPVRFile),!1},initWithPVRTCData:function(a,b,c,d,e,f){return cc.log(cc._LogInfos.Texture2D_initWithPVRTCData),!1},setTexParameters:function(a,b,c,d){return void 0!==b&&(a={
minFilter:a,magFilter:b,wrapS:c,wrapT:d}),a.wrapS===cc.REPEAT&&a.wrapT===cc.REPEAT?void(this._pattern="repeat"):a.wrapS===cc.REPEAT?void(this._pattern="repeat-x"):a.wrapT===cc.REPEAT?void(this._pattern="repeat-y"):void(this._pattern="")},setAntiAliasTexParameters:function(){},setAliasTexParameters:function(){},generateMipmap:function(){},stringForFormat:function(){return""},bitsPerPixelForFormat:function(a){return-1},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},removeLoadedEventListener:function(a){this.removeEventTarget("load",a)},_generateColorTexture:function(){},_generateTextureCacheForColor:function(){if(this.channelCache)return this.channelCache;var a=[document.createElement("canvas"),document.createElement("canvas"),document.createElement("canvas"),document.createElement("canvas")];return b(this._htmlElementObj,a),this.channelCache=a},_grayElementObj:null,_backupElement:null,_isGray:!1,_switchToGray:function(a){this._textureLoaded&&this._isGray!==a&&(this._isGray=a,this._isGray?(this._backupElement=this._htmlElementObj,this._grayElementObj||(this._grayElementObj=cc.Texture2D._generateGrayTexture(this._htmlElementObj)),this._htmlElementObj=this._grayElementObj):null!==this._backupElement&&(this._htmlElementObj=this._backupElement))}},b=function(a,b){var c=a.width,d=a.height;b[0].width=c,b[0].height=d,b[1].width=c,b[1].height=d,b[2].width=c,b[2].height=d,b[3].width=c,b[3].height=d;var e=b[3].getContext("2d");e.drawImage(a,0,0);for(var f,g=e.getImageData(0,0,c,d).data,h=0;h<4;h++){f=b[h].getContext("2d");for(var i=f.getImageData(0,0,c,d),j=i.data,k=0;k<g.length;k+=4)j[k]=0===h?g[k]:0,j[k+1]=1===h?g[k+1]:0,j[k+2]=2===h?g[k+2]:0,j[k+3]=g[k+3];f.putImageData(i,0,0)}a.onload=null};cc.sys._supportCanvasNewBlendModes?a._generateColorTexture=function(a,b,c,d,e){var f=!1;e?f=!0:e=document.createElement("canvas");var g=this._htmlElementObj;d||(d=cc.rect(0,0,g.width,g.height)),e.width=d.width,e.height=d.height;var h=e.getContext("2d");if(h.globalCompositeOperation="source-over",h.fillStyle="rgb("+(0|a)+","+(0|b)+","+(0|c)+")",h.fillRect(0,0,d.width,d.height),h.globalCompositeOperation="multiply",h.drawImage(g,d.x,d.y,d.width,d.height,0,0,d.width,d.height),h.globalCompositeOperation="destination-atop",h.drawImage(g,d.x,d.y,d.width,d.height,0,0,d.width,d.height),f)return e;var i=new cc.Texture2D;return i.initWithElement(e),i.handleLoadedTexture(),i}:a._generateColorTexture=function(a,b,c,d,e){var f=!1;e?f=!0:e=document.createElement("canvas");var g=this._htmlElementObj;d||(d=cc.rect(0,0,g.width,g.height));var h,i,j,k;if(h=d.x,i=d.y,j=d.width,k=d.height,j&&k){e.width=j,e.height=k;var l=e.getContext("2d"),m=cc.textureCache.getTextureColors(this);if(l.globalCompositeOperation="lighter",l.drawImage(m[3],h,i,j,k,0,0,j,k),a>0&&(l.globalAlpha=a/255,l.drawImage(m[0],h,i,j,k,0,0,j,k)),b>0&&(l.globalAlpha=b/255,l.drawImage(m[1],h,i,j,k,0,0,j,k)),c>0&&(l.globalAlpha=c/255,l.drawImage(m[2],h,i,j,k,0,0,j,k)),f)return e;var n=new cc.Texture2D;return n.initWithElement(e),n.handleLoadedTexture(),n}},cc.Texture2D=cc.Class.extend(a),cc.Texture2D._generateGrayTexture=function(a,b,c){if(null===a)return null;c=c||document.createElement("canvas"),b=b||cc.rect(0,0,a.width,a.height),c.width=b.width,c.height=b.height;var d=c.getContext("2d");d.drawImage(a,b.x,b.y,b.width,b.height,0,0,b.width,b.height);for(var e=d.getImageData(0,0,b.width,b.height),f=e.data,g=0,h=f.length;g<h;g+=4)f[g]=f[g+1]=f[g+2]=.34*f[g]+.5*f[g+1]+.16*f[g+2];return d.putImageData(e,0,0),c}}else cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTexture2D),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTexture2D(),delete cc._tmp.WebGLTexture2D);cc.EventHelper.prototype.apply(cc.Texture2D.prototype),cc.assert(cc.isFunction(cc._tmp.PrototypeTexture2D),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js"),cc._tmp.PrototypeTexture2D(),delete cc._tmp.PrototypeTexture2D}),cc.textureCache={_textures:{},_textureColorsCache:{},_textureKeySeq:0|1e3*Math.random(),_loadedTexturesBefore:{},_initializingRenderer:function(){var a,b=this._loadedTexturesBefore,c=this._textures;for(a in b){var d=b[a];d.handleLoadedTexture(),c[a]=d}this._loadedTexturesBefore={}},addPVRTCImage:function(a){cc.log(cc._LogInfos.textureCache_addPVRTCImage)},addETCImage:function(a){cc.log(cc._LogInfos.textureCache_addETCImage)},description:function(){return"<TextureCache | Number of textures = "+this._textures.length+">"},textureForKey:function(a){return cc.log(cc._LogInfos.textureCache_textureForKey),this.getTextureForKey(a)},getTextureForKey:function(a){return this._textures[a]||this._textures[cc.loader._getAliase(a)]},getKeyByTexture:function(a){for(var b in this._textures)if(this._textures[b]===a)return b;return null},_generalTextureKey:function(a){return"_textureKey_"+a},getTextureColors:function(a){var b=a._htmlElementObj,c=this.getKeyByTexture(b);return c||(c=b instanceof HTMLImageElement?b.src:this._generalTextureKey(a.__instanceId)),this._textureColorsCache[c]||(this._textureColorsCache[c]=a._generateTextureCacheForColor()),this._textureColorsCache[c]},addPVRImage:function(a){cc.log(cc._LogInfos.textureCache_addPVRImage)},removeAllTextures:function(){var a=this._textures;for(var b in a)a[b]&&a[b].releaseTexture();this._textures={}},removeTexture:function(a){if(a){var b=this._textures;for(var c in b)b[c]===a&&(b[c].releaseTexture(),delete b[c])}},removeTextureForKey:function(a){null!=a&&this._textures[a]&&delete this._textures[a]},cacheImage:function(a,b){if(b instanceof cc.Texture2D)return void(this._textures[a]=b);var c=new cc.Texture2D;c.initWithElement(b),c.handleLoadedTexture(),this._textures[a]=c},addUIImage:function(a,b){if(cc.assert(a,cc._LogInfos.textureCache_addUIImage_2),b&&this._textures[b])return this._textures[b];var c=new cc.Texture2D;return c.initWithImage(a),null!=b?this._textures[b]=c:cc.log(cc._LogInfos.textureCache_addUIImage),c},dumpCachedTextureInfo:function(){var a=0,b=0,c=this._textures;for(var d in c){var e=c[d];a++,e.getHtmlElementObj()instanceof HTMLImageElement?cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo,d,e.getHtmlElementObj().src,e.pixelsWidth,e.pixelsHeight):cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,d,e.pixelsWidth,e.pixelsHeight),b+=e.pixelsWidth*e.pixelsHeight*4}var f=this._textureColorsCache;for(d in f){var g=f[d];for(var h in g){var i=g[h];a++,cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_2,d,i.width,i.height),b+=i.width*i.height*4}}cc.log(cc._LogInfos.textureCache_dumpCachedTextureInfo_3,a,b/1024,(b/1048576).toFixed(2))},_clear:function(){this._textures={},this._textureColorsCache={},this._textureKeySeq=0|1e3*Math.random(),this._loadedTexturesBefore={}}},cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var a=cc.textureCache;a.handleLoadedTexture=function(a){var b=this._textures,c=b[a];c||(c=b[a]=new cc.Texture2D,c.url=a),c.handleLoadedTexture()},a.addImage=function(a,b,c){cc.assert(a,cc._LogInfos.Texture2D_addImage);var d=this._textures,e=d[a]||d[cc.loader._getAliase(a)];if(e)return e.isLoaded()?(b&&b.call(c,e),e):(e.addEventListener("load",function(){b&&b.call(c,e)},c),e);e=d[a]=new cc.Texture2D,e.url=a;var f=cc.loader.getBasePath?cc.loader.getBasePath():cc.loader.resPath;return cc.loader.loadImg(cc.path.join(f||"",a),function(e,f){if(e)return b&&b.call(c,e);cc.loader.cache[a]||(cc.loader.cache[a]=f),cc.textureCache.handleLoadedTexture(a);var g=d[a];b&&b.call(c,g)}),e},a.addImageAsync=a.addImage,a=null}else cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTextureCache),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTextureCache(),delete cc._tmp.WebGLTextureCache)}),cc.Scene=cc.Node.extend({_className:"Scene",ctor:function(){cc.Node.prototype.ctor.call(this),this._ignoreAnchorPointForPosition=!0,this.setAnchorPoint(.5,.5),this.setContentSize(cc.director.getWinSize())}}),cc.Scene.create=function(){return new cc.Scene},cc.LoaderScene=cc.Scene.extend({_interval:null,_label:null,_className:"LoaderScene",cb:null,target:null,init:function(){var a=this,b=160,c=200,d=a._bgLayer=new cc.LayerColor(cc.color(32,32,32,255));a.addChild(d,0);var e=24,f=-c/2+100;cc._loaderImage&&(cc.loader.loadImg(cc._loaderImage,{isCrossOrigin:!1},function(d,e){b=e.width,c=e.height,a._initStage(e,cc.visibleRect.center)}),e=14,f=-c/2-10);var g=a._label=new cc.LabelTTF("Loading... 0%","Arial",e);return g.setPosition(cc.pAdd(cc.visibleRect.center,cc.p(0,f))),g.setColor(cc.color(180,180,180)),d.addChild(this._label,10),!0},_initStage:function(a,b){var c=this,d=c._texture2d=new cc.Texture2D;d.initWithElement(a),d.handleLoadedTexture();var e=c._logo=new cc.Sprite(d);e.setScale(cc.contentScaleFactor()),e.x=b.x,e.y=b.y,c._bgLayer.addChild(e,10)},onEnter:function(){var a=this;cc.Node.prototype.onEnter.call(a),a.schedule(a._startLoading,.3)},onExit:function(){cc.Node.prototype.onExit.call(this);var a="Loading... 0%";this._label.setString(a)},initWithResources:function(a,b,c){cc.isString(a)&&(a=[a]),this.resources=a||[],this.cb=b,this.target=c},_startLoading:function(){var a=this;a.unschedule(a._startLoading);var b=a.resources;cc.loader.load(b,function(b,c,d){var e=d/c*100|0;e=Math.min(e,100),a._label.setString("Loading... "+e+"%")},function(){a.cb&&a.cb.call(a.target)})},_updateTransform:function(){this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._bgLayer._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._label._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._logo._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)}}),cc.LoaderScene.preload=function(a,b,c){var d=cc;return d.loaderScene||(d.loaderScene=new cc.LoaderScene,d.loaderScene.init(),cc.eventManager.addCustomListener(cc.Director.EVENT_PROJECTION_CHANGED,function(){d.loaderScene._updateTransform()})),d.loaderScene.initWithResources(a,b,c),cc.director.runScene(d.loaderScene),d.loaderScene},cc.Layer=cc.Node.extend({_className:"Layer",ctor:function(){cc.Node.prototype.ctor.call(this),this._ignoreAnchorPointForPosition=!0,this.setAnchorPoint(.5,.5),this.setContentSize(cc.winSize)},init:function(){var a=this;return a._ignoreAnchorPointForPosition=!0,a.setAnchorPoint(.5,.5),a.setContentSize(cc.winSize),a._cascadeColorEnabled=!1,a._cascadeOpacityEnabled=!1,!0},bake:function(){this._renderCmd.bake()},unbake:function(){this._renderCmd.unbake()},isBaked:function(){return this._renderCmd._isBaked},addChild:function(a,b,c){cc.Node.prototype.addChild.call(this,a,b,c),this._renderCmd._bakeForAddChild(a)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Layer.CanvasRenderCmd(this):new cc.Layer.WebGLRenderCmd(this)}}),cc.Layer.create=function(){return new cc.Layer},cc.LayerColor=cc.Layer.extend({_blendFunc:null,_className:"LayerColor",getBlendFunc:function(){return this._blendFunc},changeWidthAndHeight:function(a,b){this.width=a,this.height=b},changeWidth:function(a){this.width=a},changeHeight:function(a){this.height=a},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},ctor:function(a,b,c){cc.Layer.prototype.ctor.call(this),this._blendFunc=cc.BlendFunc._alphaNonPremultiplied(),cc.LayerColor.prototype.init.call(this,a,b,c)},init:function(a,b,c){var d=cc.director.getWinSize();a=a||cc.color(0,0,0,255),b=void 0===b?d.width:b,c=void 0===c?d.height:c;var e=this._realColor;return e.r=a.r,e.g=a.g,e.b=a.b,this._realOpacity=a.a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty),cc.LayerColor.prototype.setContentSize.call(this,b,c),!0},setBlendFunc:function(a,b){var c=this._blendFunc;void 0===b?(c.src=a.src,c.dst=a.dst):(c.src=a,c.dst=b),this._renderCmd.updateBlendFunc(c)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.LayerColor.CanvasRenderCmd(this):new cc.LayerColor.WebGLRenderCmd(this)}}),cc.LayerColor.create=function(a,b,c){return new cc.LayerColor(a,b,c)},function(){var a=cc.LayerColor.prototype;cc.defineGetterSetter(a,"width",a._getWidth,a._setWidth),cc.defineGetterSetter(a,"height",a._getHeight,a._setHeight)}(),cc.LayerGradient=cc.LayerColor.extend({_endColor:null,_startOpacity:255,_endOpacity:255,_alongVector:null,_compressedInterpolation:!1,_className:"LayerGradient",_colorStops:[],ctor:function(a,b,c,d){cc.LayerColor.prototype.ctor.call(this),this._endColor=cc.color(0,0,0,255),this._alongVector=cc.p(0,-1),this._startOpacity=255,this._endOpacity=255,d&&d instanceof Array?(this._colorStops=d,d.splice(0,0,{p:0,color:a||cc.color.BLACK}),d.push({p:1,color:b||cc.color.BLACK})):this._colorStops=[{p:0,color:a||cc.color.BLACK},{p:1,color:b||cc.color.BLACK}],cc.LayerGradient.prototype.init.call(this,a,b,c,d)},init:function(a,b,c,d){a=a||cc.color(0,0,0,255),b=b||cc.color(0,0,0,255),c=c||cc.p(0,-1);var e=this,f=e._endColor;return e._startOpacity=a.a,f.r=b.r,f.g=b.g,f.b=b.b,e._endOpacity=b.a,e._alongVector=c,e._compressedInterpolation=!0,cc.LayerColor.prototype.init.call(e,cc.color(a.r,a.g,a.b,255)),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty|cc.Node._dirtyFlags.gradientDirty),!0},setContentSize:function(a,b){cc.LayerColor.prototype.setContentSize.call(this,a,b),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},_setWidth:function(a){cc.LayerColor.prototype._setWidth.call(this,a),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},_setHeight:function(a){cc.LayerColor.prototype._setHeight.call(this,a),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getStartColor:function(){return cc.color(this._realColor)},setStartColor:function(a){this.color=a;var b=this._colorStops;if(b&&b.length>0){var c=b[0].color;c.r=a.r,c.g=a.g,c.b=a.b}},setEndColor:function(a){var b=this._endColor;b.r=a.r,b.g=a.g,b.b=a.b;var c=this._colorStops;if(c&&c.length>0){var d=c[c.length-1].color;d.r=a.r,d.g=a.g,d.b=a.b}this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},getEndColor:function(){return cc.color(this._endColor)},setStartOpacity:function(a){this._startOpacity=a;var b=this._colorStops;b&&b.length>0&&(b[0].color.a=a),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getStartOpacity:function(){return this._startOpacity},setEndOpacity:function(a){this._endOpacity=a;var b=this._colorStops;b&&b.length>0&&(b[b.length-1].color.a=a),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getEndOpacity:function(){return this._endOpacity},setVector:function(a){this._alongVector.x=a.x,this._alongVector.y=a.y,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getVector:function(){return cc.p(this._alongVector.x,this._alongVector.y)},isCompressedInterpolation:function(){return this._compressedInterpolation},setCompressedInterpolation:function(a){this._compressedInterpolation=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.gradientDirty)},getColorStops:function(){return this._colorStops},setColorStops:function(a){this._colorStops=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty|cc.Node._dirtyFlags.gradientDirty)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.LayerGradient.CanvasRenderCmd(this):new cc.LayerGradient.WebGLRenderCmd(this)}}),cc.LayerGradient.create=function(a,b,c,d){return new cc.LayerGradient(a,b,c,d)},function(){var a=cc.LayerGradient.prototype;a.startColor,cc.defineGetterSetter(a,"startColor",a.getStartColor,a.setStartColor),a.endColor,cc.defineGetterSetter(a,"endColor",a.getEndColor,a.setEndColor),a.startOpacity,cc.defineGetterSetter(a,"startOpacity",a.getStartOpacity,a.setStartOpacity),a.endOpacity,cc.defineGetterSetter(a,"endOpacity",a.getEndOpacity,a.setEndOpacity),a.vector,cc.defineGetterSetter(a,"vector",a.getVector,a.setVector),a.colorStops,cc.defineGetterSetter(a,"colorStops",a.getColorStops,a.setColorStops)}(),cc.LayerMultiplex=cc.Layer.extend({_enabledLayer:0,_layers:null,_className:"LayerMultiplex",ctor:function(a){cc.Layer.prototype.ctor.call(this),a instanceof Array?cc.LayerMultiplex.prototype.initWithLayers.call(this,a):cc.LayerMultiplex.prototype.initWithLayers.call(this,Array.prototype.slice.call(arguments))},initWithLayers:function(a){return a.length>0&&null==a[a.length-1]&&cc.log(cc._LogInfos.LayerMultiplex_initWithLayers),this._layers=a,this._enabledLayer=0,this.addChild(this._layers[this._enabledLayer]),!0},switchTo:function(a){return a>=this._layers.length?void cc.log(cc._LogInfos.LayerMultiplex_switchTo):(this.removeChild(this._layers[this._enabledLayer],!0),this._enabledLayer=a,void this.addChild(this._layers[a]))},switchToAndReleaseMe:function(a){return a>=this._layers.length?void cc.log(cc._LogInfos.LayerMultiplex_switchToAndReleaseMe):(this.removeChild(this._layers[this._enabledLayer],!0),this._layers[this._enabledLayer]=null,this._enabledLayer=a,void this.addChild(this._layers[a]))},addLayer:function(a){return a?void this._layers.push(a):void cc.log(cc._LogInfos.LayerMultiplex_addLayer)}}),cc.LayerMultiplex.create=function(){return new cc.LayerMultiplex(Array.prototype.slice.call(arguments))},function(){cc.Layer.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._isBaked=!1,this._bakeSprite=null,this._canUseDirtyRegion=!0,this._updateCache=2};var a=cc.Layer.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.Layer.CanvasRenderCmd,a._setCacheDirty=function(a){if(a&&0===this._updateCache&&(this._updateCache=2),this._cacheDirty===!1){this._cacheDirty=!0;var b=this._cachedParent;b&&b!==this&&b._setNodeDirtyForCache&&b._setNodeDirtyForCache()}},a.updateStatus=function(){var a=cc.Node._dirtyFlags,b=this._dirtyFlag;b&a.orderDirty&&(this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2),this._dirtyFlag=b&a.orderDirty^b),cc.Node.RenderCmd.prototype.updateStatus.call(this)},a._syncStatus=function(a){var b=cc.Node._dirtyFlags,c=this._dirtyFlag;c&b.orderDirty&&(this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2),this._dirtyFlag=c&b.orderDirty^c),cc.Node.RenderCmd.prototype._syncStatus.call(this,a)},a.transform=function(a,b){var c=this._worldTransform,d=c.a,e=c.b,f=c.c,g=c.d;c.tx,c.ty;cc.Node.CanvasRenderCmd.prototype.transform.call(this,a,b),c.a===d&&c.b===e&&c.c===f&&c.d===g||0!==this._updateCache||(this._updateCache=2)},a.bake=function(){if(!this._isBaked){this._needDraw=!0,cc.renderer.childrenOrderDirty=!0,this._isBaked=this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2);for(var a=this._node._children,b=0,c=a.length;b<c;b++)a[b]._renderCmd._setCachedParent(this);this._bakeSprite||(this._bakeSprite=new cc.BakeSprite,this._bakeSprite.setAnchorPoint(0,0))}},a.unbake=function(){if(this._isBaked){cc.renderer.childrenOrderDirty=!0,this._needDraw=!1,this._isBaked=!1,this._cacheDirty=!0,0===this._updateCache&&(this._updateCache=2);for(var a=this._node._children,b=0,c=a.length;b<c;b++)a[b]._renderCmd._setCachedParent(null)}},a.isBaked=function(){return this._isBaked},a.rendering=function(){if(this._cacheDirty){var a=this._node,b=a._children,c=this._bakeSprite;this.transform(this.getParentRenderCmd(),!0);var d=this._getBoundingBoxForBake();d.width=0|d.width+.5,d.height=0|d.height+.5;var e=c.getCacheContext(),f=e.getContext();if(c.setPosition(d.x,d.y),this._updateCache>0){c.resetCanvasSize(d.width,d.height),e.setOffset(0-d.x,f.canvas.height-d.height+d.y),a.sortAllChildren(),cc.renderer._turnToCacheMode(this.__instanceId);for(var g=0,h=b.length;g<h;g++)b[g].visit(this);cc.renderer._renderingToCacheCanvas(e,this.__instanceId),c.transform(),this._updateCache--}this._cacheDirty=!1}},a.visit=function(a){if(!this._isBaked)return void this.originVisit(a);var b=this._node,c=b._children,d=c.length;b._visible&&0!==d&&(this._syncStatus(a),cc.renderer.pushRenderCommand(this),this._bakeSprite.visit(this),this._dirtyFlag=0)},a._bakeForAddChild=function(a){a._parent===this._node&&this._isBaked&&a._renderCmd._setCachedParent(this)},a._getBoundingBoxForBake=function(){var a=null,b=this._node;if(!b._children||0===b._children.length)return cc.rect(0,0,10,10);for(var c=b.getNodeToWorldTransform(),d=b._children,e=0,f=d.length;e<f;e++){var g=d[e];if(g&&g._visible)if(a){var h=g._getBoundingBoxToCurrentNode(c);h&&(a=cc.rectUnion(a,h))}else a=g._getBoundingBoxToCurrentNode(c)}return a}}(),function(){cc.LayerColor.CanvasRenderCmd=function(a){cc.Layer.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._blendFuncStr="source-over",this._bakeRenderCmd=new cc.CustomRenderCmd(this,this._bakeRendering)};var a=cc.LayerColor.CanvasRenderCmd.prototype=Object.create(cc.Layer.CanvasRenderCmd.prototype);a.constructor=cc.LayerColor.CanvasRenderCmd,a.unbake=function(){cc.Layer.CanvasRenderCmd.prototype.unbake.call(this),this._needDraw=!0},a.rendering=function(a,b,c){var d=a||cc._renderContext,e=d.getContext(),f=this._node,g=this._displayedColor,h=this._displayedOpacity/255,i=f._contentSize.width,j=f._contentSize.height;0!==h&&(d.setCompositeOperation(this._blendFuncStr),d.setGlobalAlpha(h),d.setFillStyle("rgba("+(0|g.r)+","+(0|g.g)+","+(0|g.b)+", 1)"),d.setTransform(this._worldTransform,b,c),e.fillRect(0,0,i,-j),cc.g_NumberOfDraws++)},a.updateBlendFunc=function(a){this._blendFuncStr=cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(a)},a._updateSquareVertices=a._updateSquareVerticesWidth=a._updateSquareVerticesHeight=function(){},a._bakeRendering=function(){if(this._cacheDirty){var a,b=this._node,c=this._bakeSprite,d=b._children,e=d.length;this.transform(this.getParentRenderCmd(),!0);var f=this._getBoundingBoxForBake();f.width=0|f.width+.5,f.height=0|f.height+.5;var g=c.getCacheContext(),h=g.getContext();if(c.setPosition(f.x,f.y),this._updateCache>0){h.fillStyle=g._currentFillStyle,c.resetCanvasSize(f.width,f.height),g.setOffset(0-f.x,h.canvas.height-f.height+f.y);var i;if(cc.renderer._turnToCacheMode(this.__instanceId),e>0){for(b.sortAllChildren(),a=0;a<e&&(i=d[a],i._localZOrder<0);a++)i._renderCmd.visit(this);for(cc.renderer.pushRenderCommand(this);a<e;a++)d[a]._renderCmd.visit(this)}else cc.renderer.pushRenderCommand(this);cc.renderer._renderingToCacheCanvas(g,this.__instanceId),c.transform(),this._updateCache--}this._cacheDirty=!1}},a.visit=function(a){if(!this._isBaked)return void this.originVisit();var b=this._node;b._visible&&(this._syncStatus(a),cc.renderer.pushRenderCommand(this._bakeRenderCmd),this._bakeSprite._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),this._bakeSprite.visit(this),this._dirtyFlag=0)},a._getBoundingBoxForBake=function(){var a=this._node,b=cc.rect(0,0,a._contentSize.width,a._contentSize.height),c=a.getNodeToWorldTransform();if(b=cc.rectApplyAffineTransform(b,a.getNodeToWorldTransform()),!a._children||0===a._children.length)return b;for(var d=a._children,e=0;e<d.length;e++){var f=d[e];if(f&&f._visible){var g=f._getBoundingBoxToCurrentNode(c);b=cc.rectUnion(b,g)}}return b}}(),function(){cc.LayerGradient.CanvasRenderCmd=function(a){cc.LayerColor.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._startPoint=cc.p(0,0),this._endPoint=cc.p(0,0),this._startStopStr=null,this._endStopStr=null};var a=cc.LayerGradient.CanvasRenderCmd.prototype=Object.create(cc.LayerColor.CanvasRenderCmd.prototype);a.constructor=cc.LayerGradient.CanvasRenderCmd,a.rendering=function(a,b,c){var d=a||cc._renderContext,e=d.getContext(),f=this._node,g=this._displayedOpacity/255;if(0!==g){var h=f._contentSize.width,i=f._contentSize.height;d.setCompositeOperation(this._blendFuncStr),d.setGlobalAlpha(g);var j=e.createLinearGradient(this._startPoint.x,this._startPoint.y,this._endPoint.x,this._endPoint.y);if(f._colorStops)for(var k=0;k<f._colorStops.length;k++){var l=f._colorStops[k];j.addColorStop(l.p,this._colorStopsStr[k])}else j.addColorStop(0,this._startStopStr),j.addColorStop(1,this._endStopStr);d.setFillStyle(j),d.setTransform(this._worldTransform,b,c),e.fillRect(0,0,h,-i),cc.g_NumberOfDraws++}},a.updateStatus=function(){var a=cc.Node._dirtyFlags,b=this._dirtyFlag;b&a.gradientDirty&&(this._dirtyFlag|=a.colorDirty,this._dirtyFlag=b&a.gradientDirty^b),cc.Node.RenderCmd.prototype.updateStatus.call(this)},a._syncStatus=function(a){var b=cc.Node._dirtyFlags,c=this._dirtyFlag;c&b.gradientDirty&&(this._dirtyFlag|=b.colorDirty,this._dirtyFlag=c&b.gradientDirty^c),cc.Node.RenderCmd.prototype._syncStatus.call(this,a)},a._updateColor=function(){var a=this._node,b=a._contentSize,c=.5*b.width,d=.5*b.height,e=cc.pAngleSigned(cc.p(0,-1),a._alongVector),f=cc.pRotateByAngle(cc.p(0,-1),cc.p(0,0),e),g=Math.min(Math.abs(1/f.x),Math.abs(1/f.y));this._startPoint.x=c*(-f.x*g)+c,this._startPoint.y=d*(f.y*g)-d,this._endPoint.x=c*(f.x*g)+c,this._endPoint.y=d*(-f.y*g)-d;var h=this._displayedColor,i=a._endColor,j=a._startOpacity/255,k=a._endOpacity/255;if(this._startStopStr="rgba("+Math.round(h.r)+","+Math.round(h.g)+","+Math.round(h.b)+","+j.toFixed(4)+")",this._endStopStr="rgba("+Math.round(i.r)+","+Math.round(i.g)+","+Math.round(i.b)+","+k.toFixed(4)+")",a._colorStops){this._startOpacity=0,this._endOpacity=0,this._colorStopsStr=[];for(var l=0;l<a._colorStops.length;l++){var m=a._colorStops[l].color,n=null==m.a?1:m.a/255;this._colorStopsStr.push("rgba("+Math.round(m.r)+","+Math.round(m.g)+","+Math.round(m.b)+","+n.toFixed(4)+")")}}}}(),cc._tmp.PrototypeSprite=function(){var a=cc.Sprite.prototype;cc.defineGetterSetter(a,"opacityModifyRGB",a.isOpacityModifyRGB,a.setOpacityModifyRGB),cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity),cc.defineGetterSetter(a,"color",a.getColor,a.setColor),a.dirty,a.flippedX,cc.defineGetterSetter(a,"flippedX",a.isFlippedX,a.setFlippedX),a.flippedY,cc.defineGetterSetter(a,"flippedY",a.isFlippedY,a.setFlippedY),a.offsetX,cc.defineGetterSetter(a,"offsetX",a._getOffsetX),a.offsetY,cc.defineGetterSetter(a,"offsetY",a._getOffsetY),a.atlasIndex,a.texture,cc.defineGetterSetter(a,"texture",a.getTexture,a.setTexture),a.textureRectRotated,cc.defineGetterSetter(a,"textureRectRotated",a.isTextureRectRotated),a.textureAtlas,a.batchNode,cc.defineGetterSetter(a,"batchNode",a.getBatchNode,a.setBatchNode),a.quad,cc.defineGetterSetter(a,"quad",a.getQuad)},cc.Sprite=cc.Node.extend({dirty:!1,atlasIndex:0,textureAtlas:null,_batchNode:null,_recursiveDirty:null,_hasChildren:null,_shouldBeHidden:!1,_transformToBatch:null,_blendFunc:null,_texture:null,_rect:null,_rectRotated:!1,_offsetPosition:null,_unflippedOffsetPositionFromCenter:null,_opacityModifyRGB:!1,_flippedX:!1,_flippedY:!1,_textureLoaded:!1,_className:"Sprite",ctor:function(a,b,c){var d=this;cc.Node.prototype.ctor.call(d),this.setAnchorPoint(.5,.5),d._loader=new cc.Sprite.LoadManager,d._shouldBeHidden=!1,d._offsetPosition=cc.p(0,0),d._unflippedOffsetPositionFromCenter=cc.p(0,0),d._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},d._rect=cc.rect(0,0,0,0),d._softInit(a,b,c)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},isDirty:function(){return this.dirty},setDirty:function(a){this.dirty=a},isTextureRectRotated:function(){return this._rectRotated},getAtlasIndex:function(){return this.atlasIndex},setAtlasIndex:function(a){this.atlasIndex=a},getTextureRect:function(){return cc.rect(this._rect)},getTextureAtlas:function(){return this.textureAtlas},setTextureAtlas:function(a){this.textureAtlas=a},getOffsetPosition:function(){return cc.p(this._offsetPosition)},_getOffsetX:function(){return this._offsetPosition.x},_getOffsetY:function(){return this._offsetPosition.y},getBlendFunc:function(){return this._blendFunc},initWithSpriteFrame:function(a){return cc.assert(a,cc._LogInfos.Sprite_initWithSpriteFrame),this.setSpriteFrame(a)},initWithSpriteFrameName:function(a){cc.assert(a,cc._LogInfos.Sprite_initWithSpriteFrameName);var b=cc.spriteFrameCache.getSpriteFrame(a);return cc.assert(b,a+cc._LogInfos.Sprite_initWithSpriteFrameName1),this.initWithSpriteFrame(b)},useBatchNode:function(a){this.textureAtlas=a.getTextureAtlas(),this._batchNode=a},setVertexRect:function(a){var b=this._rect;b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},sortAllChildren:function(){if(this._reorderChildDirty){var a=this._children;cc.Node.prototype.sortAllChildren.call(this),this._batchNode&&this._arrayMakeObjectsPerformSelector(a,cc.Node._stateCallbackType.sortAllChildren),this._reorderChildDirty=!1}},reorderChild:function(a,b){return cc.assert(a,cc._LogInfos.Sprite_reorderChild_2),this._children.indexOf(a)===-1?void cc.log(cc._LogInfos.Sprite_reorderChild):void(b!==a.zIndex&&(this._batchNode&&!this._reorderChildDirty&&(this._setReorderChildDirtyRecursively(),this._batchNode.reorderBatch(!0)),cc.Node.prototype.reorderChild.call(this,a,b)))},removeChild:function(a,b){this._batchNode&&this._batchNode.removeSpriteFromAtlas(a),cc.Node.prototype.removeChild.call(this,a,b)},setVisible:function(a){cc.Node.prototype.setVisible.call(this,a),this._renderCmd.setDirtyRecursively(!0)},removeAllChildren:function(a){var b=this._children,c=this._batchNode;if(c&&null!=b)for(var d=0,e=b.length;d<e;d++)c.removeSpriteFromAtlas(b[d]);cc.Node.prototype.removeAllChildren.call(this,a),this._hasChildren=!1},ignoreAnchorPointForPosition:function(a){return this._batchNode?void cc.log(cc._LogInfos.Sprite_ignoreAnchorPointForPosition):void cc.Node.prototype.ignoreAnchorPointForPosition.call(this,a)},setFlippedX:function(a){this._flippedX!==a&&(this._flippedX=a,this.setTextureRect(this._rect,this._rectRotated,this._contentSize),this.setNodeDirty(!0))},setFlippedY:function(a){this._flippedY!==a&&(this._flippedY=a,this.setTextureRect(this._rect,this._rectRotated,this._contentSize),this.setNodeDirty(!0))},isFlippedX:function(){return this._flippedX},isFlippedY:function(){return this._flippedY},setOpacityModifyRGB:function(a){this._opacityModifyRGB!==a&&(this._opacityModifyRGB=a,this._renderCmd._setColorDirty())},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setDisplayFrameWithAnimationName:function(a,b){cc.assert(a,cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_3);var c=cc.animationCache.getAnimation(a);if(!c)return void cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName);var d=c.getFrames()[b];return d?void this.setSpriteFrame(d.getSpriteFrame()):void cc.log(cc._LogInfos.Sprite_setDisplayFrameWithAnimationName_2)},getBatchNode:function(){return this._batchNode},_setReorderChildDirtyRecursively:function(){if(!this._reorderChildDirty){this._reorderChildDirty=!0;for(var a=this._parent;a&&a!==this._batchNode;)a._setReorderChildDirtyRecursively(),a=a.parent}},getTexture:function(){return this._texture},_softInit:function(a,b,c){if(void 0===a)cc.Sprite.prototype.init.call(this);else if(cc.isString(a))if("#"===a[0]){var d=a.substr(1,a.length-1),e=cc.spriteFrameCache.getSpriteFrame(d);e?this.initWithSpriteFrame(e):cc.log("%s does not exist",a)}else cc.Sprite.prototype.init.call(this,a,b);else if("object"==typeof a)if(a instanceof cc.Texture2D)this.initWithTexture(a,b,c);else if(a instanceof cc.SpriteFrame)this.initWithSpriteFrame(a);else if(a instanceof HTMLImageElement||a instanceof HTMLCanvasElement){var f=new cc.Texture2D;f.initWithElement(a),f.handleLoadedTexture(),this.initWithTexture(f)}},getQuad:function(){return null},setBlendFunc:function(a,b){var c=this._blendFunc;void 0===b?(c.src=a.src,c.dst=a.dst):(c.src=a,c.dst=b),this._renderCmd.updateBlendFunc(c)},init:function(){var a=this;return arguments.length>0?a.initWithFile(arguments[0],arguments[1]):(cc.Node.prototype.init.call(a),a.dirty=a._recursiveDirty=!1,a._blendFunc.src=cc.BLEND_SRC,a._blendFunc.dst=cc.BLEND_DST,a.texture=null,a._flippedX=a._flippedY=!1,a.anchorX=.5,a.anchorY=.5,a._offsetPosition.x=0,a._offsetPosition.y=0,a._hasChildren=!1,a.setTextureRect(cc.rect(0,0,0,0),!1,cc.size(0,0)),!0)},initWithFile:function(a,b){cc.assert(a,cc._LogInfos.Sprite_initWithFile);var c=cc.textureCache.getTextureForKey(a);if(c||(c=cc.textureCache.addImage(a)),!c.isLoaded())return this._loader.clear(),
this._loader.once(c,function(){this.initWithFile(a,b),this.dispatchEvent("load")},this),!1;if(!b){var d=c.getContentSize();b=cc.rect(0,0,d.width,d.height)}return this.initWithTexture(c,b)},initWithTexture:function(a,b,c,d){var e=this;return cc.assert(0!==arguments.length,cc._LogInfos.CCSpriteBatchNode_initWithTexture),this._loader.clear(),e._textureLoaded=a.isLoaded(),e._textureLoaded?(c=c||!1,a=this._renderCmd._handleTextureForRotatedTexture(a,b,c,d),!!cc.Node.prototype.init.call(e)&&(e._batchNode=null,e._recursiveDirty=!1,e.dirty=!1,e._opacityModifyRGB=!0,e._blendFunc.src=cc.BLEND_SRC,e._blendFunc.dst=cc.BLEND_DST,e._flippedX=e._flippedY=!1,e._offsetPosition.x=0,e._offsetPosition.y=0,e._hasChildren=!1,e._rectRotated=c,b&&(e._rect.x=b.x,e._rect.y=b.y,e._rect.width=b.width,e._rect.height=b.height),b||(b=cc.rect(0,0,a.width,a.height)),this._renderCmd._checkTextureBoundary(a,b,c),e.setTexture(a),e.setTextureRect(b,c),e.setBatchNode(null),!0)):(this._loader.once(a,function(){this.initWithTexture(a,b,c,d),this.dispatchEvent("load")},this),!1)},setTextureRect:function(a,b,c,d){var e=this;e._rectRotated=b||!1,e.setContentSize(c||a),e.setVertexRect(a),e._renderCmd._setTextureCoords(a,d);var f=e._unflippedOffsetPositionFromCenter.x,g=e._unflippedOffsetPositionFromCenter.y;e._flippedX&&(f=-f),e._flippedY&&(g=-g);var h=e._rect;e._offsetPosition.x=f+(e._contentSize.width-h.width)/2,e._offsetPosition.y=g+(e._contentSize.height-h.height)/2},addChild:function(a,b,c){cc.assert(a,cc._LogInfos.CCSpriteBatchNode_addChild_2),null==b&&(b=a._localZOrder),null==c&&(c=a.tag),this._renderCmd._setBatchNodeForAddChild(a)&&(cc.Node.prototype.addChild.call(this,a,b,c),this._hasChildren=!0)},setSpriteFrame:function(a){var b=this;cc.isString(a)&&(a=cc.spriteFrameCache.getSpriteFrame(a),cc.assert(a,cc._LogInfos.Sprite_setSpriteFrame)),this._loader.clear(),this.setNodeDirty(!0);var c=a.getTexture();if(b._textureLoaded=a.textureLoaded(),this._loader.clear(),!b._textureLoaded)return this._loader.once(c,function(){this.setSpriteFrame(a),this.dispatchEvent("load")},this),!1;var d=a.getOffset();b._unflippedOffsetPositionFromCenter.x=d.x,b._unflippedOffsetPositionFromCenter.y=d.y,c!==b._texture&&(this._renderCmd._setTexture(c),b.setColor(b._realColor)),b.setTextureRect(a.getRect(),a.isRotated(),a.getOriginalSize())},setDisplayFrame:function(a){cc.log(cc._LogInfos.Sprite_setDisplayFrame),this.setSpriteFrame(a)},isFrameDisplayed:function(a){return this._renderCmd.isFrameDisplayed(a)},displayFrame:function(){return this.getSpriteFrame()},getSpriteFrame:function(){return new cc.SpriteFrame(this._texture,cc.rectPointsToPixels(this._rect),this._rectRotated,cc.pointPointsToPixels(this._unflippedOffsetPositionFromCenter),cc.sizePointsToPixels(this._contentSize))},setBatchNode:function(a){var b=this;b._batchNode=a,b._batchNode?(b._transformToBatch=cc.affineTransformIdentity(),b.textureAtlas=b._batchNode.getTextureAtlas()):(b.atlasIndex=cc.Sprite.INDEX_NOT_INITIALIZED,b.textureAtlas=null,b._recursiveDirty=!1,b.dirty=!1)},setTexture:function(a){if(!a)return this._renderCmd._setTexture(null);var b=cc.isString(a);return b&&(a=cc.textureCache.addImage(a)),this._loader.clear(),a._textureLoaded?(this._renderCmd._setTexture(a),b&&this._changeRectWithTexture(a),this.setColor(this._realColor),void(this._textureLoaded=!0)):(this._loader.once(a,function(){this.setTexture(a),this.dispatchEvent("load")},this),!1)},_changeRectWithTexture:function(a){var b=a._contentSize,c=cc.rect(0,0,b.width,b.height);this.setTextureRect(c)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.Sprite.CanvasRenderCmd(this):new cc.Sprite.WebGLRenderCmd(this)}}),cc.Sprite.create=function(a,b,c){return new cc.Sprite(a,b,c)},cc.Sprite.createWithTexture=cc.Sprite.create,cc.Sprite.createWithSpriteFrameName=cc.Sprite.create,cc.Sprite.createWithSpriteFrame=cc.Sprite.create,cc.Sprite.INDEX_NOT_INITIALIZED=-1,cc.EventHelper.prototype.apply(cc.Sprite.prototype),cc.assert(cc.isFunction(cc._tmp.PrototypeSprite),cc._LogInfos.MissingFile,"SpritesPropertyDefine.js"),cc._tmp.PrototypeSprite(),delete cc._tmp.PrototypeSprite,function(){var a=cc.Sprite.LoadManager=function(){this.list=[]};a.prototype.add=function(a,b,c){a&&a.addEventListener&&(a.addEventListener("load",b,c),this.list.push({source:a,listener:b,target:c}))},a.prototype.once=function(a,b,c){if(a&&a.addEventListener){var d=function(e){a.removeEventListener("load",d,c),b.call(c,e)};a.addEventListener("load",d,c),this.list.push({source:a,listener:d,target:c})}},a.prototype.clear=function(){for(;this.list.length>0;){var a=this.list.pop();a.source.removeEventListener("load",a.listener,a.target)}}}(),function(){cc.Sprite.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._textureCoord={renderX:0,renderY:0,x:0,y:0,width:0,height:0,validRect:!1},this._blendFuncStr="source-over",this._colorized=!1,this._canUseDirtyRegion=!0,this._textureToRender=null};var a=cc.Sprite.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.Sprite.CanvasRenderCmd,a.setDirtyRecursively=function(a){},a._setTexture=function(a){var b=this._node;b._texture!==a&&(a?b._textureLoaded=a._textureLoaded:b._textureLoaded=!1,b._texture=a,this._updateColor())},a._setColorDirty=function(){this.setDirtyFlag(cc.Node._dirtyFlags.colorDirty|cc.Node._dirtyFlags.opacityDirty)},a.isFrameDisplayed=function(a){var b=this._node;return a.getTexture()===b._texture&&cc.rectEqualToRect(a.getRect(),b._rect)},a.updateBlendFunc=function(a){this._blendFuncStr=cc.Node.CanvasRenderCmd._getCompositeOperationByBlendFunc(a)},a._setBatchNodeForAddChild=function(a){return!0},a._handleTextureForRotatedTexture=function(a,b,c,d){if(c&&a.isLoaded()){var e=a.getHtmlElementObj();e=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(e,b,d);var f=new cc.Texture2D;f.initWithElement(e),f.handleLoadedTexture(),a=f,b.x=b.y=0,this._node._rect=cc.rect(0,0,b.width,b.height)}return a},a._checkTextureBoundary=function(a,b,c){if(a&&a.url){var d=b.x+b.width,e=b.y+b.height;d>a.width&&cc.error(cc._LogInfos.RectWidth,a.url),e>a.height&&cc.error(cc._LogInfos.RectHeight,a.url)}},a.rendering=function(a,b,c){var d=this._node,e=this._textureCoord,f=this._displayedOpacity/255,g=this._textureToRender||d._texture;if((!g||0!==e.width&&0!==e.height&&g._textureLoaded)&&0!==f){var h,i=a||cc._renderContext,j=i.getContext(),k=d._offsetPosition.x,l=d._rect.height,m=d._rect.width,n=-d._offsetPosition.y-l;i.setTransform(this._worldTransform,b,c),i.setCompositeOperation(this._blendFuncStr),i.setGlobalAlpha(f),(d._flippedX||d._flippedY)&&i.save(),d._flippedX&&(k=-k-m,j.scale(-1,1)),d._flippedY&&(n=d._offsetPosition.y,j.scale(1,-1));var o,p,q,r,s,t,u,v;if(this._colorized?(o=0,p=0):(o=e.renderX,p=e.renderY),q=e.width,r=e.height,s=k,t=n,u=m,v=l,g&&g._htmlElementObj)h=g._htmlElementObj,""!==g._pattern?(i.setFillStyle(j.createPattern(h,g._pattern)),j.fillRect(s,t,u,v)):j.drawImage(h,o,p,q,r,s,t,u,v);else{var w=d._contentSize;if(e.validRect){var x=this._displayedColor;i.setFillStyle("rgba("+x.r+","+x.g+","+x.b+",1)"),j.fillRect(s,t,w.width*b,w.height*c)}}(d._flippedX||d._flippedY)&&i.restore(),cc.g_NumberOfDraws++}},a._updateColor=function(){var a=this._node,b=a._texture,c=this._textureCoord,d=this._displayedColor;b&&(255!==d.r||255!==d.g||255!==d.b?(this._textureToRender=b._generateColorTexture(d.r,d.g,d.b,c),this._colorized=!0):b&&(this._textureToRender=b,this._colorized=!1))},a._textureLoadedCallback=function(a){var b=this;if(!b._textureLoaded){b._textureLoaded=!0;var c=b._rect,d=this._renderCmd;c?cc._rectEqualToZero(c)&&(c.width=a.width,c.height=a.height):c=cc.rect(0,0,a.width,a.height),b.texture=a,b.setTextureRect(c,b._rectRotated);var e=d._displayedColor;255===e.r&&255===e.g&&255===e.b||d._updateColor(),b.setBatchNode(b._batchNode),b.dispatchEvent("load")}},a._setTextureCoords=function(a,b){void 0===b&&(b=!0);var c=this._textureCoord,d=b?cc.contentScaleFactor():1;c.renderX=c.x=0|a.x*d,c.renderY=c.y=0|a.y*d,c.width=0|a.width*d,c.height=0|a.height*d,c.validRect=!(0===c.width||0===c.height||c.x<0||c.y<0)},cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas=function(a,b,c){if(!a)return null;if(!b)return a;c=null==c||c;var d=document.createElement("canvas");d.width=b.width,d.height=b.height;var e=d.getContext("2d");return e.translate(d.width/2,d.height/2),c?e.rotate(-1.5707963267948966):e.rotate(1.5707963267948966),e.drawImage(a,b.x,b.y,b.height,b.width,-b.height/2,-b.width/2,b.height,b.width),d}}(),cc.BakeSprite=cc.Sprite.extend({_cacheCanvas:null,_cacheContext:null,ctor:function(){cc.Sprite.prototype.ctor.call(this);var a=document.createElement("canvas");a.width=a.height=10,this._cacheCanvas=a,this._cacheContext=new cc.CanvasContextWrapper(a.getContext("2d"));var b=new cc.Texture2D;b.initWithElement(a),b.handleLoadedTexture(),this.setTexture(b)},getCacheContext:function(){return this._cacheContext},getCacheCanvas:function(){return this._cacheCanvas},resetCanvasSize:function(a,b){var c=this._cacheCanvas,d=this._cacheContext,e=d._context.strokeStyle,f=d._context.fillStyle;void 0===b&&(b=a.height,a=a.width),c.width=a,c.height=b,e!==d._context.strokeStyle&&(d._context.strokeStyle=e),f!==d._context.fillStyle&&(d._context.fillStyle=f),this.getTexture().handleLoadedTexture(),this.setTextureRect(cc.rect(0,0,a,b),!1,null,!1)}}),cc.AnimationFrame=cc.Class.extend({_spriteFrame:null,_delayPerUnit:0,_userInfo:null,ctor:function(a,b,c){this._spriteFrame=a||null,this._delayPerUnit=b||0,this._userInfo=c||null},clone:function(){var a=new cc.AnimationFrame;return a.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo),a},copyWithZone:function(a){return cc.clone(this)},copy:function(a){var b=new cc.AnimationFrame;return b.initWithSpriteFrame(this._spriteFrame.clone(),this._delayPerUnit,this._userInfo),b},initWithSpriteFrame:function(a,b,c){return this._spriteFrame=a,this._delayPerUnit=b,this._userInfo=c,!0},getSpriteFrame:function(){return this._spriteFrame},setSpriteFrame:function(a){this._spriteFrame=a},getDelayUnits:function(){return this._delayPerUnit},setDelayUnits:function(a){this._delayPerUnit=a},getUserInfo:function(){return this._userInfo},setUserInfo:function(a){this._userInfo=a}}),cc.AnimationFrame.create=function(a,b,c){return new cc.AnimationFrame(a,b,c)},cc.Animation=cc.Class.extend({_frames:null,_loops:0,_restoreOriginalFrame:!1,_duration:0,_delayPerUnit:0,_totalDelayUnits:0,ctor:function(a,b,c){if(this._frames=[],void 0===a)this.initWithSpriteFrames(null,0);else{var d=a[0];d&&(d instanceof cc.SpriteFrame?this.initWithSpriteFrames(a,b,c):d instanceof cc.AnimationFrame&&this.initWithAnimationFrames(a,b,c))}},getFrames:function(){return this._frames},setFrames:function(a){this._frames=a},addSpriteFrame:function(a){var b=new cc.AnimationFrame;b.initWithSpriteFrame(a,1,null),this._frames.push(b),this._totalDelayUnits++},addSpriteFrameWithFile:function(a){var b=cc.textureCache.addImage(a),c=cc.rect(0,0,0,0);c.width=b.width,c.height=b.height;var d=new cc.SpriteFrame(b,c);this.addSpriteFrame(d)},addSpriteFrameWithTexture:function(a,b){var c=new cc.SpriteFrame(a,b);this.addSpriteFrame(c)},initWithAnimationFrames:function(a,b,c){cc.arrayVerifyType(a,cc.AnimationFrame),this._delayPerUnit=b,this._loops=void 0===c?1:c,this._totalDelayUnits=0;var d=this._frames;d.length=0;for(var e=0;e<a.length;e++){var f=a[e];d.push(f),this._totalDelayUnits+=f.getDelayUnits()}return!0},clone:function(){var a=new cc.Animation;return a.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops),a.setRestoreOriginalFrame(this._restoreOriginalFrame),a},copyWithZone:function(a){var b=new cc.Animation;return b.initWithAnimationFrames(this._copyFrames(),this._delayPerUnit,this._loops),b.setRestoreOriginalFrame(this._restoreOriginalFrame),b},_copyFrames:function(){for(var a=[],b=0;b<this._frames.length;b++)a.push(this._frames[b].clone());return a},copy:function(a){return this.copyWithZone(null)},getLoops:function(){return this._loops},setLoops:function(a){this._loops=a},setRestoreOriginalFrame:function(a){this._restoreOriginalFrame=a},getRestoreOriginalFrame:function(){return this._restoreOriginalFrame},getDuration:function(){return this._totalDelayUnits*this._delayPerUnit},getDelayPerUnit:function(){return this._delayPerUnit},setDelayPerUnit:function(a){this._delayPerUnit=a},getTotalDelayUnits:function(){return this._totalDelayUnits},initWithSpriteFrames:function(a,b,c){cc.arrayVerifyType(a,cc.SpriteFrame),this._loops=void 0===c?1:c,this._delayPerUnit=b||0,this._totalDelayUnits=0;var d=this._frames;if(d.length=0,a){for(var e=0;e<a.length;e++){var f=a[e],g=new cc.AnimationFrame;g.initWithSpriteFrame(f,1,null),d.push(g)}this._totalDelayUnits+=a.length}return!0},retain:function(){},release:function(){}}),cc.Animation.create=function(a,b,c){return new cc.Animation(a,b,c)},cc.Animation.createWithAnimationFrames=cc.Animation.create,cc.animationCache={_animations:{},addAnimation:function(a,b){this._animations[b]=a},removeAnimation:function(a){a&&this._animations[a]&&delete this._animations[a]},getAnimation:function(a){return this._animations[a]?this._animations[a]:null},_addAnimationsWithDictionary:function(a,b){var c=a.animations;if(!c)return void cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary);var d=1,e=a.properties;if(e){d=null!=e.format?parseInt(e.format):d;for(var f=e.spritesheets,g=cc.spriteFrameCache,h=cc.path,i=0;i<f.length;i++)g.addSpriteFrames(h.changeBasename(b,f[i]))}switch(d){case 1:this._parseVersion1(c);break;case 2:this._parseVersion2(c);break;default:cc.log(cc._LogInfos.animationCache__addAnimationsWithDictionary_2)}},addAnimations:function(a){cc.assert(a,cc._LogInfos.animationCache_addAnimations_2);var b=cc.loader.getRes(a);return b?void this._addAnimationsWithDictionary(b,a):void cc.log(cc._LogInfos.animationCache_addAnimations)},_parseVersion1:function(a){var b=cc.spriteFrameCache;for(var c in a){var d=a[c],e=d.frames,f=parseFloat(d.delay)||0,g=null;if(e){for(var h=[],i=0;i<e.length;i++){var j=b.getSpriteFrame(e[i]);if(j){var k=new cc.AnimationFrame;k.initWithSpriteFrame(j,1,null),h.push(k)}else cc.log(cc._LogInfos.animationCache__parseVersion1_2,c,e[i])}0!==h.length?(h.length!==e.length&&cc.log(cc._LogInfos.animationCache__parseVersion1_4,c),g=new cc.Animation(h,f,1),cc.animationCache.addAnimation(g,c)):cc.log(cc._LogInfos.animationCache__parseVersion1_3,c)}else cc.log(cc._LogInfos.animationCache__parseVersion1,c)}},_parseVersion2:function(a){var b=cc.spriteFrameCache;for(var c in a){var d=a[c],e=d.loop,f=parseInt(d.loops),g=e?cc.REPEAT_FOREVER:isNaN(f)?1:f,h=!(!d.restoreOriginalFrame||1!=d.restoreOriginalFrame),i=d.frames;if(i){for(var j=[],k=0;k<i.length;k++){var l=i[k],m=l.spriteframe,n=b.getSpriteFrame(m);if(n){var o=parseFloat(l.delayUnits)||0,p=l.notification,q=new cc.AnimationFrame;q.initWithSpriteFrame(n,o,p),j.push(q)}else cc.log(cc._LogInfos.animationCache__parseVersion2_2,c,m)}var r=parseFloat(d.delayPerUnit)||0,s=new cc.Animation;s.initWithAnimationFrames(j,r,g),s.setRestoreOriginalFrame(h),cc.animationCache.addAnimation(s,c)}else cc.log(cc._LogInfos.animationCache__parseVersion2,c)}},_clear:function(){this._animations={}}};cc.SpriteFrame=cc.Class.extend({_offset:null,_originalSize:null,_rectInPixels:null,_rotated:!1,_rect:null,_offsetInPixels:null,_originalSizeInPixels:null,_texture:null,_textureFilename:"",_textureLoaded:!1,ctor:function(a,b,c,d,e){this._offset=cc.p(0,0),this._offsetInPixels=cc.p(0,0),this._originalSize=cc.size(0,0),this._rotated=!1,this._originalSizeInPixels=cc.size(0,0),this._textureFilename="",this._texture=null,this._textureLoaded=!1,void 0!==a&&void 0!==b&&(void 0===c||void 0===d||void 0===e?this.initWithTexture(a,b):this.initWithTexture(a,b,c,d,e))},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},getRectInPixels:function(){var a=this._rectInPixels;return cc.rect(a.x,a.y,a.width,a.height)},setRectInPixels:function(a){this._rectInPixels||(this._rectInPixels=cc.rect(0,0,0,0)),this._rectInPixels.x=a.x,this._rectInPixels.y=a.y,this._rectInPixels.width=a.width,this._rectInPixels.height=a.height,this._rect=cc.rectPixelsToPoints(a)},isRotated:function(){return this._rotated},setRotated:function(a){this._rotated=a},getRect:function(){var a=this._rect;return cc.rect(a.x,a.y,a.width,a.height)},setRect:function(a){this._rect||(this._rect=cc.rect(0,0,0,0)),this._rect.x=a.x,this._rect.y=a.y,this._rect.width=a.width,this._rect.height=a.height,this._rectInPixels=cc.rectPointsToPixels(this._rect)},getOffsetInPixels:function(){return cc.p(this._offsetInPixels)},setOffsetInPixels:function(a){this._offsetInPixels.x=a.x,this._offsetInPixels.y=a.y,cc._pointPixelsToPointsOut(this._offsetInPixels,this._offset)},getOriginalSizeInPixels:function(){return cc.size(this._originalSizeInPixels)},setOriginalSizeInPixels:function(a){this._originalSizeInPixels.width=a.width,this._originalSizeInPixels.height=a.height},getOriginalSize:function(){return cc.size(this._originalSize)},setOriginalSize:function(a){this._originalSize.width=a.width,this._originalSize.height=a.height},getTexture:function(){if(this._texture)return this._texture;if(""!==this._textureFilename){var a=cc.textureCache.addImage(this._textureFilename);return a&&(this._textureLoaded=a.isLoaded()),a}return null},setTexture:function(a){if(this._texture!==a){var b=a.isLoaded();this._textureLoaded=b,this._texture=a,b||a.addEventListener("load",function(a){if(this._textureLoaded=!0,this._rotated&&cc._renderType===cc.game.RENDER_TYPE_CANVAS){var b=a.getHtmlElementObj();b=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(b,this.getRect());var c=new cc.Texture2D;c.initWithElement(b),c.handleLoadedTexture(),this.setTexture(c);var d=this.getRect();this.setRect(cc.rect(0,0,d.width,d.height))}var e=this._rect;if(0===e.width&&0===e.height){var f=a.width,g=a.height;this._rect.width=f,this._rect.height=g,this._rectInPixels=cc.rectPointsToPixels(this._rect),this._originalSizeInPixels.width=this._rectInPixels.width,this._originalSizeInPixels.height=this._rectInPixels.height,this._originalSize.width=f,this._originalSize.height=g}this.dispatchEvent("load")},this)}},getOffset:function(){return cc.p(this._offset)},setOffset:function(a){this._offset.x=a.x,this._offset.y=a.y},clone:function(){var a=new cc.SpriteFrame;return a.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels),a.setTexture(this._texture),a},copyWithZone:function(){var a=new cc.SpriteFrame;return a.initWithTexture(this._textureFilename,this._rectInPixels,this._rotated,this._offsetInPixels,this._originalSizeInPixels),a.setTexture(this._texture),a},copy:function(){return this.copyWithZone()},initWithTexture:function(a,b,c,d,e){if(2===arguments.length&&(b=cc.rectPointsToPixels(b)),d=d||cc.p(0,0),e=e||b,c=c||!1,cc.isString(a)?(this._texture=null,this._textureFilename=a):a instanceof cc.Texture2D&&this.setTexture(a),a=this.getTexture(),this._rectInPixels=b,this._rect=cc.rectPixelsToPoints(b),a&&a.url&&a.isLoaded()){var f,g;c?(f=b.x+b.height,g=b.y+b.width):(f=b.x+b.width,g=b.y+b.height),f>a.getPixelsWide()&&cc.error(cc._LogInfos.RectWidth,a.url),g>a.getPixelsHigh()&&cc.error(cc._LogInfos.RectHeight,a.url)}return this._offsetInPixels.x=d.x,this._offsetInPixels.y=d.y,cc._pointPixelsToPointsOut(d,this._offset),this._originalSizeInPixels.width=e.width,this._originalSizeInPixels.height=e.height,cc._sizePixelsToPointsOut(e,this._originalSize),this._rotated=c,!0}});cc.EventHelper.prototype.apply(cc.SpriteFrame.prototype),cc.SpriteFrame.create=function(a,b,c,d,e){return new cc.SpriteFrame(a,b,c,d,e)},cc.SpriteFrame.createWithTexture=cc.SpriteFrame.create,cc.SpriteFrame._frameWithTextureForCanvas=function(a,b,c,d,e){var f=new cc.SpriteFrame;return f._texture=a,f._rectInPixels=b,f._rect=cc.rectPixelsToPoints(b),f._offsetInPixels.x=d.x,f._offsetInPixels.y=d.y,cc._pointPixelsToPointsOut(f._offsetInPixels,f._offset),f._originalSizeInPixels.width=e.width,f._originalSizeInPixels.height=e.height,cc._sizePixelsToPointsOut(f._originalSizeInPixels,f._originalSize),f._rotated=c,f},cc.spriteFrameCache={_CCNS_REG1:/^\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*$/,_CCNS_REG2:/^\s*\{\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*,\s*\{\s*([\-]?\d+[.]?\d*)\s*,\s*([\-]?\d+[.]?\d*)\s*\}\s*\}\s*$/,_spriteFrames:{},_spriteFramesAliases:{},_frameConfigCache:{},_rectFromString:function(a){var b=this._CCNS_REG2.exec(a);return b?cc.rect(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3]),parseFloat(b[4])):cc.rect(0,0,0,0)},_pointFromString:function(a){var b=this._CCNS_REG1.exec(a);return b?cc.p(parseFloat(b[1]),parseFloat(b[2])):cc.p(0,0)},_sizeFromString:function(a){var b=this._CCNS_REG1.exec(a);return b?cc.size(parseFloat(b[1]),parseFloat(b[2])):cc.size(0,0)},_getFrameConfig:function(a){var b=cc.loader.getRes(a);return cc.assert(b,cc._LogInfos.spriteFrameCache__getFrameConfig_2,a),cc.loader.release(a),b._inited?(this._frameConfigCache[a]=b,b):(this._frameConfigCache[a]=this._parseFrameConfig(b),this._frameConfigCache[a])},_getFrameConfigByJsonObject:function(a,b){return cc.assert(b,cc._LogInfos.spriteFrameCache__getFrameConfig_2,a),this._frameConfigCache[a]=this._parseFrameConfig(b),this._frameConfigCache[a]},_parseFrameConfig:function(a){var b=a.frames,c=a.metadata||a.meta,d={},e={},f=0;if(c){var g=c.format;f=g.length<=1?parseInt(g):g,e.image=c.textureFileName||c.textureFileName||c.image}for(var h in b){var i=b[h];if(i){var j={};if(0==f){j.rect=cc.rect(i.x,i.y,i.width,i.height),j.rotated=!1,j.offset=cc.p(i.offsetX,i.offsetY);var k=i.originalWidth,l=i.originalHeight;k&&l||cc.log(cc._LogInfos.spriteFrameCache__getFrameConfig),k=Math.abs(k),l=Math.abs(l),j.size=cc.size(k,l)}else if(1==f||2==f)j.rect=this._rectFromString(i.frame),j.rotated=i.rotated||!1,j.offset=this._pointFromString(i.offset),j.size=this._sizeFromString(i.sourceSize);else if(3==f){var m=this._sizeFromString(i.spriteSize),n=this._rectFromString(i.textureRect);m&&(n=cc.rect(n.x,n.y,m.width,m.height)),j.rect=n,j.rotated=i.textureRotated||!1,j.offset=this._pointFromString(i.spriteOffset),j.size=this._sizeFromString(i.spriteSourceSize),j.aliases=i.aliases}else{var o=i.frame,p=i.sourceSize;h=i.filename||h,j.rect=cc.rect(o.x,o.y,o.w,o.h),j.rotated=i.rotated||!1,j.offset=cc.p(0,0),j.size=cc.size(p.w,p.h)}d[h]=j}}return{_inited:!0,frames:d,meta:e}},_addSpriteFramesByObject:function(a,b,c){if(cc.assert(a,cc._LogInfos.spriteFrameCache_addSpriteFrames_2),b&&b.frames){var d=this._frameConfigCache[a]||this._getFrameConfigByJsonObject(a,b);this._createSpriteFrames(a,d,c)}},_createSpriteFrames:function(a,b,c){var d=b.frames,e=b.meta;if(c)c instanceof cc.Texture2D||(cc.isString(c)?c=cc.textureCache.addImage(c):cc.assert(0,cc._LogInfos.spriteFrameCache_addSpriteFrames_3));else{var f=cc.path.changeBasename(a,e.image||".png");c=cc.textureCache.addImage(f)}var g=this._spriteFramesAliases,h=this._spriteFrames;for(var i in d){var j=d[i],k=h[i];if(!k){k=new cc.SpriteFrame(c,j.rect,j.rotated,j.offset,j.size);var l=j.aliases;if(l)for(var m=0,n=l.length;m<n;m++){var o=l[m];g[o]&&cc.log(cc._LogInfos.spriteFrameCache_addSpriteFrames,o),g[o]=i}if(cc._renderType===cc.game.RENDER_TYPE_CANVAS&&k.isRotated()){var p=k.getTexture();if(p.isLoaded()){var q=k.getTexture().getHtmlElementObj();q=cc.Sprite.CanvasRenderCmd._cutRotateImageToCanvas(q,k.getRectInPixels());var r=new cc.Texture2D;r.initWithElement(q),r.handleLoadedTexture(),k.setTexture(r);var s=k._rect;k.setRect(cc.rect(0,0,s.width,s.height))}}h[i]=k}}},addSpriteFrames:function(a,b){cc.assert(a,cc._LogInfos.spriteFrameCache_addSpriteFrames_2);var c=this._frameConfigCache[a]||cc.loader.getRes(a);if(c&&c.frames){var d=this._frameConfigCache[a]||this._getFrameConfig(a);this._createSpriteFrames(a,d,b)}},_checkConflict:function(a){var b=a.frames;for(var c in b)this._spriteFrames[c]&&cc.log(cc._LogInfos.spriteFrameCache__checkConflict,c)},addSpriteFrame:function(a,b){this._spriteFrames[b]=a},removeSpriteFrames:function(){this._spriteFrames={},this._spriteFramesAliases={}},removeSpriteFrameByName:function(a){a&&(this._spriteFramesAliases[a]&&delete this._spriteFramesAliases[a],this._spriteFrames[a]&&delete this._spriteFrames[a])},removeSpriteFramesFromFile:function(a){var b=this,c=b._spriteFrames,d=b._spriteFramesAliases,e=b._frameConfigCache[a];if(e){var f=e.frames;for(var g in f)if(c[g]){delete c[g];for(var h in d)d[h]===g&&delete d[h]}}},removeSpriteFramesFromTexture:function(a){var b=this,c=b._spriteFrames,d=b._spriteFramesAliases;for(var e in c){var f=c[e];if(f&&f.getTexture()===a){delete c[e];for(var g in d)d[g]===e&&delete d[g]}}},getSpriteFrame:function(a){var b=this,c=b._spriteFrames[a];if(!c){var d=b._spriteFramesAliases[a];d&&(c=b._spriteFrames[d.toString()],c||delete b._spriteFramesAliases[a])}return c},_clear:function(){this._spriteFrames={},this._spriteFramesAliases={},this._frameConfigCache={}}},cc.g_NumberOfDraws=0,cc.Director=cc.Class.extend({_landscape:!1,_nextDeltaTimeZero:!1,_paused:!1,_purgeDirectorInNextLoop:!1,_sendCleanupToScene:!1,_animationInterval:0,_oldAnimationInterval:0,_projection:0,_contentScaleFactor:1,_deltaTime:0,_winSizeInPoints:null,_lastUpdate:null,_nextScene:null,_notificationNode:null,_openGLView:null,_scenesStack:null,_projectionDelegate:null,_runningScene:null,_totalFrames:0,_secondsPerFrame:0,_dirtyRegion:null,_scheduler:null,_actionManager:null,_eventProjectionChanged:null,_eventAfterUpdate:null,_eventAfterVisit:null,_eventAfterDraw:null,ctor:function(){var a=this;a._lastUpdate=Date.now(),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){a._lastUpdate=Date.now()})},init:function(){return this._oldAnimationInterval=this._animationInterval=1/cc.defaultFPS,this._scenesStack=[],this._projection=cc.Director.PROJECTION_DEFAULT,this._projectionDelegate=null,this._totalFrames=0,this._lastUpdate=Date.now(),this._paused=!1,this._purgeDirectorInNextLoop=!1,this._winSizeInPoints=cc.size(0,0),this._openGLView=null,this._contentScaleFactor=1,this._scheduler=new cc.Scheduler,cc.ActionManager?(this._actionManager=new cc.ActionManager,this._scheduler.scheduleUpdate(this._actionManager,cc.Scheduler.PRIORITY_SYSTEM,!1)):this._actionManager=null,this._eventAfterUpdate=new cc.EventCustom(cc.Director.EVENT_AFTER_UPDATE),this._eventAfterUpdate.setUserData(this),this._eventAfterVisit=new cc.EventCustom(cc.Director.EVENT_AFTER_VISIT),this._eventAfterVisit.setUserData(this),this._eventAfterDraw=new cc.EventCustom(cc.Director.EVENT_AFTER_DRAW),this._eventAfterDraw.setUserData(this),this._eventProjectionChanged=new cc.EventCustom(cc.Director.EVENT_PROJECTION_CHANGED),this._eventProjectionChanged.setUserData(this),!0},calculateDeltaTime:function(){var a=Date.now();this._nextDeltaTimeZero?(this._deltaTime=0,this._nextDeltaTimeZero=!1):this._deltaTime=(a-this._lastUpdate)/1e3,cc.game.config[cc.game.CONFIG_KEY.debugMode]>0&&this._deltaTime>.2&&(this._deltaTime=1/60),this._lastUpdate=a},convertToGL:function(a){var b=document.documentElement,c=cc.view,d=element.getBoundingClientRect();d.left+=window.pageXOffset-b.clientLeft,d.top+=window.pageYOffset-b.clientTop;var e=c._devicePixelRatio*(a.x-d.left),f=c._devicePixelRatio*(d.top+d.height-a.y);return c._isRotated?{x:c._viewPortRect.width-f,y:e}:{x:e,y:f}},convertToUI:function(a){var b=document.documentElement,c=cc.view,d=element.getBoundingClientRect();d.left+=window.pageXOffset-b.clientLeft,d.top+=window.pageYOffset-b.clientTop;var e={x:0,y:0};return c._isRotated?(e.x=d.left+a.y/c._devicePixelRatio,e.y=d.top+d.height-(c._viewPortRect.width-a.x)/c._devicePixelRatio):(e.x=d.left+a.x/c._devicePixelRatio,e.y=d.top+d.height-a.y/c._devicePixelRatio),e},drawScene:function(){var a=cc.renderer;this.calculateDeltaTime(),this._paused||(this._scheduler.update(this._deltaTime),cc.eventManager.dispatchEvent(this._eventAfterUpdate)),this._nextScene&&this.setNextScene(),this._beforeVisitScene&&this._beforeVisitScene(),this._runningScene&&(a.childrenOrderDirty?(cc.renderer.clearRenderCommands(),cc.renderer.assignedZ=0,this._runningScene._renderCmd._curLevel=0,this._runningScene.visit(),a.resetFlag()):a.transformDirty()&&a.transform()),a.clear(),this._notificationNode&&this._notificationNode.visit(),cc.eventManager.dispatchEvent(this._eventAfterVisit),cc.g_NumberOfDraws=0,this._afterVisitScene&&this._afterVisitScene(),a.rendering(cc._renderContext),this._totalFrames++,cc.eventManager.dispatchEvent(this._eventAfterDraw),this._calculateMPF()},_beforeVisitScene:null,_afterVisitScene:null,end:function(){this._purgeDirectorInNextLoop=!0},getContentScaleFactor:function(){return this._contentScaleFactor},getNotificationNode:function(){return this._notificationNode},getWinSize:function(){return cc.size(this._winSizeInPoints)},getWinSizeInPixels:function(){return cc.size(this._winSizeInPoints.width*this._contentScaleFactor,this._winSizeInPoints.height*this._contentScaleFactor)},getVisibleSize:null,getVisibleOrigin:null,getZEye:null,pause:function(){this._paused||(this._oldAnimationInterval=this._animationInterval,this.setAnimationInterval(.25),this._paused=!0)},popScene:function(){cc.assert(this._runningScene,cc._LogInfos.Director_popScene),this._scenesStack.pop();var a=this._scenesStack.length;0===a?this.end():(this._sendCleanupToScene=!0,this._nextScene=this._scenesStack[a-1])},purgeCachedData:function(){cc.animationCache._clear(),cc.spriteFrameCache._clear(),cc.textureCache._clear()},purgeDirector:function(){this.getScheduler().unscheduleAll(),cc.eventManager&&cc.eventManager.setEnabled(!1),this._runningScene&&(this._runningScene.onExitTransitionDidStart(),this._runningScene.onExit(),this._runningScene.cleanup()),this._runningScene=null,this._nextScene=null,this._scenesStack.length=0,this.stopAnimation(),this.purgeCachedData(),cc.checkGLErrorDebug()},pushScene:function(a){cc.assert(a,cc._LogInfos.Director_pushScene),this._sendCleanupToScene=!1,this._scenesStack.push(a),this._nextScene=a},runScene:function(a){if(cc.assert(a,cc._LogInfos.Director_pushScene),this._runningScene){var b=this._scenesStack.length;0===b?(this._sendCleanupToScene=!0,this._scenesStack[b]=a,this._nextScene=a):(this._sendCleanupToScene=!0,this._scenesStack[b-1]=a,this._nextScene=a)}else this.pushScene(a),this.startAnimation()},resume:function(){this._paused&&(this.setAnimationInterval(this._oldAnimationInterval),this._lastUpdate=Date.now(),this._lastUpdate||cc.log(cc._LogInfos.Director_resume),this._paused=!1,this._deltaTime=0)},setContentScaleFactor:function(a){a!==this._contentScaleFactor&&(this._contentScaleFactor=a)},setDepthTest:null,setClearColor:null,setDefaultValues:function(){},setNextDeltaTimeZero:function(a){this._nextDeltaTimeZero=a},setNextScene:function(){var a=!1,b=!1;if(cc.TransitionScene&&(a=!!this._runningScene&&this._runningScene instanceof cc.TransitionScene,b=!!this._nextScene&&this._nextScene instanceof cc.TransitionScene),!b){var c=this._runningScene;c&&(c.onExitTransitionDidStart(),c.onExit()),this._sendCleanupToScene&&c&&c.cleanup()}this._runningScene=this._nextScene,cc.renderer.childrenOrderDirty=!0,this._nextScene=null,a||null===this._runningScene||(this._runningScene.onEnter(),this._runningScene.onEnterTransitionDidFinish())},setNotificationNode:function(a){cc.renderer.childrenOrderDirty=!0,this._notificationNode&&(this._notificationNode.onExitTransitionDidStart(),this._notificationNode.onExit(),this._notificationNode.cleanup()),this._notificationNode=a,a&&(this._notificationNode.onEnter(),this._notificationNode.onEnterTransitionDidFinish())},getDelegate:function(){return this._projectionDelegate},setDelegate:function(a){this._projectionDelegate=a},setOpenGLView:null,setProjection:null,setViewport:null,getOpenGLView:null,getProjection:null,setAlphaBlending:null,isSendCleanupToScene:function(){return this._sendCleanupToScene},getRunningScene:function(){return this._runningScene},getAnimationInterval:function(){return this._animationInterval;
},isDisplayStats:function(){return!!cc.profiler&&cc.profiler.isShowingStats()},setDisplayStats:function(a){cc.profiler&&(a?cc.profiler.showStats():cc.profiler.hideStats())},getSecondsPerFrame:function(){return this._secondsPerFrame},isNextDeltaTimeZero:function(){return this._nextDeltaTimeZero},isPaused:function(){return this._paused},getTotalFrames:function(){return this._totalFrames},popToRootScene:function(){this.popToSceneStackLevel(1)},popToSceneStackLevel:function(a){cc.assert(this._runningScene,cc._LogInfos.Director_popToSceneStackLevel_2);var b=this._scenesStack,c=b.length;if(0===a)return void this.end();if(!(a>=c)){for(;c>a;){var d=b.pop();d.running&&(d.onExitTransitionDidStart(),d.onExit()),d.cleanup(),c--}this._nextScene=b[b.length-1],this._sendCleanupToScene=!0}},getScheduler:function(){return this._scheduler},setScheduler:function(a){this._scheduler!==a&&(this._scheduler=a)},getActionManager:function(){return this._actionManager},setActionManager:function(a){this._actionManager!==a&&(this._actionManager=a)},getDeltaTime:function(){return this._deltaTime},_calculateMPF:function(){var a=Date.now();this._secondsPerFrame=(a-this._lastUpdate)/1e3}}),cc.Director.EVENT_PROJECTION_CHANGED="director_projection_changed",cc.Director.EVENT_AFTER_UPDATE="director_after_update",cc.Director.EVENT_AFTER_VISIT="director_after_visit",cc.Director.EVENT_AFTER_DRAW="director_after_draw",cc.DisplayLinkDirector=cc.Director.extend({invalid:!1,startAnimation:function(){this._nextDeltaTimeZero=!0,this.invalid=!1},mainLoop:function(){this._purgeDirectorInNextLoop?(this._purgeDirectorInNextLoop=!1,this.purgeDirector()):this.invalid||this.drawScene()},stopAnimation:function(){this.invalid=!0},setAnimationInterval:function(a){this._animationInterval=a,this.invalid||(this.stopAnimation(),this.startAnimation())}}),cc.Director.sharedDirector=null,cc.Director.firstUseDirector=!0,cc.Director._getInstance=function(){return cc.Director.firstUseDirector&&(cc.Director.firstUseDirector=!1,cc.Director.sharedDirector=new cc.DisplayLinkDirector,cc.Director.sharedDirector.init()),cc.Director.sharedDirector},cc.defaultFPS=60,cc.Director.PROJECTION_2D=0,cc.Director.PROJECTION_3D=1,cc.Director.PROJECTION_CUSTOM=3,cc.Director.PROJECTION_DEFAULT=cc.Director.PROJECTION_2D,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){var a=cc.Director.prototype;a.getProjection=function(a){return this._projection},a.setProjection=function(a){this._projection=a,cc.eventManager.dispatchEvent(this._eventProjectionChanged)},a.setDepthTest=function(){},a.setClearColor=function(a){cc.renderer._clearColor=a,cc.renderer._clearFillStyle="rgb("+a.r+","+a.g+","+a.b+")"},a.setOpenGLView=function(a){this._winSizeInPoints.width=cc._canvas.width,this._winSizeInPoints.height=cc._canvas.height,this._openGLView=a||cc.view,cc.eventManager&&cc.eventManager.setEnabled(!0)},a.getVisibleSize=function(){return this.getWinSize()},a.getVisibleOrigin=function(){return cc.p(0,0)}}else cc.Director._fpsImage=new Image,cc.Director._fpsImage.addEventListener("load",function(){cc.Director._fpsImageLoaded=!0}),cc._fpsImage&&(cc.Director._fpsImage.src=cc._fpsImage)}),cc.PRIORITY_NON_SYSTEM=cc.PRIORITY_SYSTEM+1,cc.ListEntry=function(a,b,c,d,e,f,g){this.prev=a,this.next=b,this.callback=c,this.target=d,this.priority=e,this.paused=f,this.markedForDeletion=g},cc.HashUpdateEntry=function(a,b,c,d,e){this.list=a,this.entry=b,this.target=c,this.callback=d,this.hh=e},cc.HashTimerEntry=cc.hashSelectorEntry=function(a,b,c,d,e,f,g){var h=this;h.timers=a,h.target=b,h.timerIndex=c,h.currentTimer=d,h.currentTimerSalvaged=e,h.paused=f,h.hh=g},cc.Timer=cc.Class.extend({_scheduler:null,_elapsed:0,_runForever:!1,_useDelay:!1,_timesExecuted:0,_repeat:0,_delay:0,_interval:0,getInterval:function(){return this._interval},setInterval:function(a){this._interval=a},setupTimerWithInterval:function(a,b,c){this._elapsed=-1,this._interval=a,this._delay=c,this._useDelay=this._delay>0,this._repeat=b,this._runForever=this._repeat===cc.REPEAT_FOREVER},trigger:function(){return 0},cancel:function(){return 0},ctor:function(){this._scheduler=null,this._elapsed=-1,this._runForever=!1,this._useDelay=!1,this._timesExecuted=0,this._repeat=0,this._delay=0,this._interval=0},update:function(a){this._elapsed===-1?(this._elapsed=0,this._timesExecuted=0):(this._elapsed+=a,this._runForever&&!this._useDelay?this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0):(this._useDelay?this._elapsed>=this._delay&&(this.trigger(),this._elapsed-=this._delay,this._timesExecuted+=1,this._useDelay=!1):this._elapsed>=this._interval&&(this.trigger(),this._elapsed=0,this._timesExecuted+=1),!this._runForever&&this._timesExecuted>this._repeat&&this.cancel()))}}),cc.TimerTargetSelector=cc.Timer.extend({_target:null,_selector:null,ctor:function(){this._target=null,this._selector=null},initWithSelector:function(a,b,c,d,e,f){return this._scheduler=a,this._target=c,this._selector=b,this.setupTimerWithInterval(d,e,f),!0},getSelector:function(){return this._selector},trigger:function(){this._target&&this._selector&&this._target.call(this._selector,this._elapsed)},cancel:function(){this._scheduler.unschedule(this._selector,this._target)}}),cc.TimerTargetCallback=cc.Timer.extend({_target:null,_callback:null,_key:null,ctor:function(){this._target=null,this._callback=null},initWithCallback:function(a,b,c,d,e,f,g){return this._scheduler=a,this._target=c,this._callback=b,this._key=d,this.setupTimerWithInterval(e,f,g),!0},getCallback:function(){return this._callback},getKey:function(){return this._key},trigger:function(){this._callback&&this._callback.call(this._target,this._elapsed)},cancel:function(){this._scheduler.unschedule(this._callback,this._target)}}),cc.Scheduler=cc.Class.extend({_timeScale:1,_updatesNegList:null,_updates0List:null,_updatesPosList:null,_hashForTimers:null,_arrayForTimers:null,_hashForUpdates:null,_currentTarget:null,_currentTargetSalvaged:!1,_updateHashLocked:!1,ctor:function(){this._timeScale=1,this._updatesNegList=[],this._updates0List=[],this._updatesPosList=[],this._hashForUpdates={},this._hashForTimers={},this._currentTarget=null,this._currentTargetSalvaged=!1,this._updateHashLocked=!1,this._arrayForTimers=[]},_schedulePerFrame:function(a,b,c,d){var e=this._hashForUpdates[b.__instanceId];if(e&&e.entry){if(e.entry.priority===c)return e.entry.markedForDeletion=!1,void(e.entry.paused=d);if(this._updateHashLocked)return cc.log("warning: you CANNOT change update priority in scheduled function"),e.entry.markedForDeletion=!1,void(e.entry.paused=d);this.unscheduleUpdate(b)}0===c?this._appendIn(this._updates0List,a,b,d):c<0?this._priorityIn(this._updatesNegList,a,b,c,d):this._priorityIn(this._updatesPosList,a,b,c,d)},_removeHashElement:function(a){delete this._hashForTimers[a.target.__instanceId],cc.arrayRemoveObject(this._arrayForTimers,a),a.Timer=null,a.target=null,a=null},_removeUpdateFromHash:function(a){var b=this,c=b._hashForUpdates[a.target.__instanceId];c&&(cc.arrayRemoveObject(c.list,c.entry),delete b._hashForUpdates[c.target.__instanceId],c.entry=null,c.target=null)},_priorityIn:function(a,b,c,d,e){var f=this,g=new cc.ListEntry(null,null,b,c,d,e,!1);if(a){for(var h=a.length-1,i=0;i<=h;i++)if(d<a[i].priority){h=i;break}a.splice(i,0,g)}else a=[],a.push(g);return f._hashForUpdates[c.__instanceId]=new cc.HashUpdateEntry(a,g,c,null),a},_appendIn:function(a,b,c,d){var e=this,f=new cc.ListEntry(null,null,b,c,0,d,!1);a.push(f),e._hashForUpdates[c.__instanceId]=new cc.HashUpdateEntry(a,f,c,null,null)},setTimeScale:function(a){this._timeScale=a},getTimeScale:function(){return this._timeScale},update:function(a){this._updateHashLocked=!0,1!==this._timeScale&&(a*=this._timeScale);var b,c,d,e;for(b=0,c=this._updatesNegList,d=c.length;b<d;b++)e=c[b],e.paused||e.markedForDeletion||e.callback(a);for(b=0,c=this._updates0List,d=c.length;b<d;b++)e=c[b],e.paused||e.markedForDeletion||e.callback(a);for(b=0,c=this._updatesPosList,d=c.length;b<d;b++)e=c[b],e.paused||e.markedForDeletion||e.callback(a);var f,g=this._arrayForTimers;for(b=0;b<g.length;b++){if(f=g[b],this._currentTarget=f,this._currentTargetSalvaged=!1,!f.paused)for(f.timerIndex=0;f.timerIndex<f.timers.length;++f.timerIndex)f.currentTimer=f.timers[f.timerIndex],f.currentTimerSalvaged=!1,f.currentTimer.update(a),f.currentTimer=null;this._currentTargetSalvaged&&0===this._currentTarget.timers.length&&this._removeHashElement(this._currentTarget)}for(b=0,c=this._updatesNegList;b<c.length;)e=c[b],e.markedForDeletion?this._removeUpdateFromHash(e):b++;for(b=0,c=this._updates0List;b<c.length;)e=c[b],e.markedForDeletion?this._removeUpdateFromHash(e):b++;for(b=0,c=this._updatesPosList;b<c.length;)e=c[b],e.markedForDeletion?this._removeUpdateFromHash(e):b++;this._updateHashLocked=!1,this._currentTarget=null},scheduleCallbackForTarget:function(a,b,c,d,e,f){this.schedule(b,a,c,d,e,f,a.__instanceId+"")},schedule:function(a,b,c,d,e,f,g){var h=!1;if("function"!=typeof a){var i=a;h=!0}h===!1?4!==arguments.length&&5!==arguments.length||(g=e,f=d,e=0,d=cc.REPEAT_FOREVER):4===arguments.length&&(f=d,d=cc.REPEAT_FOREVER,e=0),void 0===g&&(g=b.__instanceId+""),cc.assert(b,cc._LogInfos.Scheduler_scheduleCallbackForTarget_3);var j=this._hashForTimers[b.__instanceId];j?cc.assert(j.paused===f,""):(j=new cc.HashTimerEntry(null,b,0,null,null,f,null),this._arrayForTimers.push(j),this._hashForTimers[b.__instanceId]=j);var k,l;if(null==j.timers)j.timers=[];else if(h===!1){for(l=0;l<j.timers.length;l++)if(k=j.timers[l],a===k._callback)return cc.log(cc._LogInfos.Scheduler_scheduleCallbackForTarget,k.getInterval().toFixed(4),c.toFixed(4)),void(k._interval=c)}else for(l=0;l<j.timers.length;++l)if(k=j.timers[l],k&&i===k.getSelector())return cc.log("CCScheduler#scheduleSelector. Selector already scheduled. Updating interval from: %.4f to %.4f",k.getInterval(),c),void k.setInterval(c);h===!1?(k=new cc.TimerTargetCallback,k.initWithCallback(this,a,b,g,c,d,e),j.timers.push(k)):(k=new cc.TimerTargetSelector,k.initWithSelector(this,i,b,c,d,e),j.timers.push(k))},scheduleUpdate:function(a,b,c){this._schedulePerFrame(function(b){a.update(b)},a,b,c)},_getUnscheduleMark:function(a,b){switch(typeof a){case"number":case"string":return a===b.getKey();case"function":return a===b._callback;default:return a===b.getSelector()}},unschedule:function(a,b){if(b&&a){var c=this,d=c._hashForTimers[b.__instanceId];if(d)for(var e=d.timers,f=0,g=e.length;f<g;f++){var h=e[f];if(this._getUnscheduleMark(a,h))return h!==d.currentTimer||d.currentTimerSalvaged||(d.currentTimerSalvaged=!0),e.splice(f,1),d.timerIndex>=f&&d.timerIndex--,void(0===e.length&&(c._currentTarget===d?c._currentTargetSalvaged=!0:c._removeHashElement(d)))}}},unscheduleUpdate:function(a){if(null!=a){var b=this._hashForUpdates[a.__instanceId];b&&(this._updateHashLocked?b.entry.markedForDeletion=!0:this._removeUpdateFromHash(b.entry))}},unscheduleAllForTarget:function(a){if(null!=a){var b=this._hashForTimers[a.__instanceId];b&&(b.timers.indexOf(b.currentTimer)>-1&&!b.currentTimerSalvaged&&(b.currentTimerSalvaged=!0),b.timers.length=0,this._currentTarget===b?this._currentTargetSalvaged=!0:this._removeHashElement(b)),this.unscheduleUpdate(a)}},unscheduleAll:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllWithMinPriority:function(a){var b,c,d=this._arrayForTimers;for(b=d.length-1;b>=0;b--)c=d[b],this.unscheduleAllForTarget(c.target);var e,f=0;if(a<0)for(b=0;b<this._updatesNegList.length;)f=this._updatesNegList.length,e=this._updatesNegList[b],e&&e.priority>=a&&this.unscheduleUpdate(e.target),f==this._updatesNegList.length&&b++;if(a<=0)for(b=0;b<this._updates0List.length;)f=this._updates0List.length,e=this._updates0List[b],e&&this.unscheduleUpdate(e.target),f==this._updates0List.length&&b++;for(b=0;b<this._updatesPosList.length;)f=this._updatesPosList.length,e=this._updatesPosList[b],e&&e.priority>=a&&this.unscheduleUpdate(e.target),f==this._updatesPosList.length&&b++},isScheduled:function(a,b){cc.assert(a,"Argument key must not be empty"),cc.assert(b,"Argument target must be non-nullptr");var c=this._hashForUpdates[b.__instanceId];if(!c)return!1;if(null==c.timers)return!1;for(var d=c.timers,e=0;e<d.length;++e){var f=d[e];if(a===f.getKey())return!0}return!1},pauseAllTargets:function(){return this.pauseAllTargetsWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},pauseAllTargetsWithMinPriority:function(a){var b,c,d,e=[],f=this,g=f._arrayForTimers;for(c=0,d=g.length;c<d;c++)b=g[c],b&&(b.paused=!0,e.push(b.target));var h;if(a<0)for(c=0;c<this._updatesNegList.length;c++)h=this._updatesNegList[c],h&&h.priority>=a&&(h.paused=!0,e.push(h.target));if(a<=0)for(c=0;c<this._updates0List.length;c++)h=this._updates0List[c],h&&(h.paused=!0,e.push(h.target));for(c=0;c<this._updatesPosList.length;c++)h=this._updatesPosList[c],h&&h.priority>=a&&(h.paused=!0,e.push(h.target));return e},resumeTargets:function(a){if(a)for(var b=0;b<a.length;b++)this.resumeTarget(a[b])},pauseTarget:function(a){cc.assert(a,cc._LogInfos.Scheduler_pauseTarget);var b=this,c=b._hashForTimers[a.__instanceId];c&&(c.paused=!0);var d=b._hashForUpdates[a.__instanceId];d&&(d.entry.paused=!0)},resumeTarget:function(a){cc.assert(a,cc._LogInfos.Scheduler_resumeTarget);var b=this,c=b._hashForTimers[a.__instanceId];c&&(c.paused=!1);var d=b._hashForUpdates[a.__instanceId];d&&(d.entry.paused=!1)},isTargetPaused:function(a){cc.assert(a,cc._LogInfos.Scheduler_isTargetPaused);var b=this._hashForTimers[a.__instanceId];if(b)return b.paused;var c=this._hashForUpdates[a.__instanceId];return!!c&&c.entry.paused},scheduleUpdateForTarget:function(a,b,c){this.scheduleUpdate(a,b,c)},unscheduleCallbackForTarget:function(a,b){this.unschedule(b,a)},unscheduleUpdateForTarget:function(a){this.unscheduleUpdate(a)},unscheduleAllCallbacksForTarget:function(a){this.unschedule(a.__instanceId+"",a)},unscheduleAllCallbacks:function(){this.unscheduleAllWithMinPriority(cc.Scheduler.PRIORITY_SYSTEM)},unscheduleAllCallbacksWithMinPriority:function(a){this.unscheduleAllWithMinPriority(a)}}),cc.Scheduler.PRIORITY_SYSTEM=-2147483648,cc._tmp.PrototypeLabelTTF=function(){var a=cc.LabelTTF.prototype;cc.defineGetterSetter(a,"color",a.getColor,a.setColor),cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity),a.string,cc.defineGetterSetter(a,"string",a.getString,a.setString),a.textAlign,cc.defineGetterSetter(a,"textAlign",a.getHorizontalAlignment,a.setHorizontalAlignment),a.verticalAlign,cc.defineGetterSetter(a,"verticalAlign",a.getVerticalAlignment,a.setVerticalAlignment),a.fontSize,cc.defineGetterSetter(a,"fontSize",a.getFontSize,a.setFontSize),a.fontName,cc.defineGetterSetter(a,"fontName",a.getFontName,a.setFontName),a.font,cc.defineGetterSetter(a,"font",a._getFont,a._setFont),a.boundingSize,a.boundingWidth,cc.defineGetterSetter(a,"boundingWidth",a._getBoundingWidth,a._setBoundingWidth),a.boundingHeight,cc.defineGetterSetter(a,"boundingHeight",a._getBoundingHeight,a._setBoundingHeight),a.fillStyle,cc.defineGetterSetter(a,"fillStyle",a._getFillStyle,a.setFontFillColor),a.strokeStyle,cc.defineGetterSetter(a,"strokeStyle",a._getStrokeStyle,a._setStrokeStyle),a.lineWidth,cc.defineGetterSetter(a,"lineWidth",a._getLineWidth,a._setLineWidth),a.shadowOffset,a.shadowOffsetX,cc.defineGetterSetter(a,"shadowOffsetX",a._getShadowOffsetX,a._setShadowOffsetX),a.shadowOffsetY,cc.defineGetterSetter(a,"shadowOffsetY",a._getShadowOffsetY,a._setShadowOffsetY),a.shadowOpacity,cc.defineGetterSetter(a,"shadowOpacity",a._getShadowOpacity,a._setShadowOpacity),a.shadowBlur,cc.defineGetterSetter(a,"shadowBlur",a._getShadowBlur,a._setShadowBlur)},cc.LabelTTF=cc.Sprite.extend({_dimensions:null,_hAlignment:cc.TEXT_ALIGNMENT_CENTER,_vAlignment:cc.VERTICAL_TEXT_ALIGNMENT_TOP,_fontName:null,_fontSize:0,_string:"",_originalText:null,_onCacheCanvasMode:!0,_shadowEnabled:!1,_shadowOffset:null,_shadowOpacity:0,_shadowBlur:0,_shadowColor:null,_strokeEnabled:!1,_strokeColor:null,_strokeSize:0,_textFillColor:null,_strokeShadowOffsetX:0,_strokeShadowOffsetY:0,_needUpdateTexture:!1,_lineWidths:null,_className:"LabelTTF",_fontStyle:"normal",_fontWeight:"normal",_lineHeight:"normal",initWithString:function(a,b,c,d,e,f){var g;return g=a?a+"":"",c=c||16,d=d||cc.size(0,0),e=e||cc.TEXT_ALIGNMENT_LEFT,f=f||cc.VERTICAL_TEXT_ALIGNMENT_TOP,this._opacityModifyRGB=!1,this._dimensions=cc.size(d.width,d.height),this._fontName=b||"Arial",this._hAlignment=e,this._vAlignment=f,this._fontSize=c,this._renderCmd._setFontStyle(this._fontName,c,this._fontStyle,this._fontWeight),this.string=g,this._renderCmd._setColorsString(),this._renderCmd._updateTexture(),this._setUpdateTextureDirty(),this._scaleX=this._scaleY=1/cc.view.getDevicePixelRatio(),!0},_setUpdateTextureDirty:function(){this._needUpdateTexture=!0,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.textDirty)},ctor:function(a,b,c,d,e,f){cc.Sprite.prototype.ctor.call(this),this._dimensions=cc.size(0,0),this._hAlignment=cc.TEXT_ALIGNMENT_LEFT,this._vAlignment=cc.VERTICAL_TEXT_ALIGNMENT_TOP,this._opacityModifyRGB=!1,this._fontName="Arial",this._shadowEnabled=!1,this._shadowOffset=cc.p(0,0),this._shadowOpacity=0,this._shadowBlur=0,this._strokeEnabled=!1,this._strokeColor=cc.color(255,255,255,255),this._strokeSize=0,this._textFillColor=cc.color(255,255,255,255),this._strokeShadowOffsetX=0,this._strokeShadowOffsetY=0,this._needUpdateTexture=!1,this._lineWidths=[],this._renderCmd._setColorsString(),this._textureLoaded=!0,b&&b instanceof cc.FontDefinition?this.initWithStringAndTextDefinition(a,b):cc.LabelTTF.prototype.initWithString.call(this,a,b,c,d,e,f)},init:function(){return this.initWithString(" ",this._fontName,this._fontSize)},description:function(){return"<cc.LabelTTF | FontName ="+this._fontName+" FontSize = "+this._fontSize.toFixed(1)+">"},getLineHeight:function(){return!this._lineHeight||this._lineHeight.charAt?this._renderCmd._getFontClientHeight():this._lineHeight||this._renderCmd._getFontClientHeight()},setLineHeight:function(a){this._lineHeight=a},getString:function(){return this._string},getHorizontalAlignment:function(){return this._hAlignment},getVerticalAlignment:function(){return this._vAlignment},getDimensions:function(){return cc.size(this._dimensions)},getFontSize:function(){return this._fontSize},getFontName:function(){return this._fontName},initWithStringAndTextDefinition:function(a,b){return this._updateWithTextDefinition(b,!1),this.string=a,!0},setTextDefinition:function(a){a&&this._updateWithTextDefinition(a,!0)},getTextDefinition:function(){return this._prepareTextDefinition(!1)},enableShadow:function(a,b,c,d){null!=a.r&&null!=a.g&&null!=a.b&&null!=a.a?this._enableShadow(a,b,c):this._enableShadowNoneColor(a,b,c,d)},_enableShadowNoneColor:function(a,b,c,d){c=c||.5,!1===this._shadowEnabled&&(this._shadowEnabled=!0);var e=this._shadowOffset;(e&&e.x!==a||e._y!==b)&&(e.x=a,e.y=b),this._shadowOpacity!==c&&(this._shadowOpacity=c),this._renderCmd._setColorsString(),this._shadowBlur!==d&&(this._shadowBlur=d),this._setUpdateTextureDirty()},_enableShadow:function(a,b,c){this._shadowColor||(this._shadowColor=cc.color(255,255,255,128)),this._shadowColor.r=a.r,this._shadowColor.g=a.g,this._shadowColor.b=a.b;var d,e,f,g;d=b.width||b.x||0,e=b.height||b.y||0,f=null!=a.a?a.a/255:.5,g=c,this._enableShadowNoneColor(d,e,f,g)},_getShadowOffsetX:function(){return this._shadowOffset.x},_setShadowOffsetX:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOffset.x!==a&&(this._shadowOffset.x=a,this._setUpdateTextureDirty())},_getShadowOffsetY:function(){return this._shadowOffset._y},_setShadowOffsetY:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOffset._y!==a&&(this._shadowOffset._y=a,this._setUpdateTextureDirty())},_getShadowOffset:function(){return cc.p(this._shadowOffset.x,this._shadowOffset.y)},_setShadowOffset:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOffset.x===a.x&&this._shadowOffset.y===a.y||(this._shadowOffset.x=a.x,this._shadowOffset.y=a.y,this._setUpdateTextureDirty())},_getShadowOpacity:function(){return this._shadowOpacity},_setShadowOpacity:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowOpacity!==a&&(this._shadowOpacity=a,this._renderCmd._setColorsString(),this._setUpdateTextureDirty())},_getShadowBlur:function(){return this._shadowBlur},_setShadowBlur:function(a){!1===this._shadowEnabled&&(this._shadowEnabled=!0),this._shadowBlur!==a&&(this._shadowBlur=a,this._setUpdateTextureDirty())},disableShadow:function(){this._shadowEnabled&&(this._shadowEnabled=!1,this._setUpdateTextureDirty())},enableStroke:function(a,b){this._strokeEnabled===!1&&(this._strokeEnabled=!0);var c=this._strokeColor;c.r===a.r&&c.g===a.g&&c.b===a.b||(c.r=a.r,c.g=a.g,c.b=a.b,this._renderCmd._setColorsString()),this._strokeSize!==b&&(this._strokeSize=b||0),this._setUpdateTextureDirty()},_getStrokeStyle:function(){return this._strokeColor},_setStrokeStyle:function(a){this._strokeEnabled===!1&&(this._strokeEnabled=!0);var b=this._strokeColor;b.r===a.r&&b.g===a.g&&b.b===a.b||(b.r=a.r,b.g=a.g,b.b=a.b,this._renderCmd._setColorsString(),this._setUpdateTextureDirty())},_getLineWidth:function(){return this._strokeSize},_setLineWidth:function(a){this._strokeEnabled===!1&&(this._strokeEnabled=!0),this._strokeSize!==a&&(this._strokeSize=a||0,this._setUpdateTextureDirty())},disableStroke:function(){this._strokeEnabled&&(this._strokeEnabled=!1,this._setUpdateTextureDirty())},setFontFillColor:function(a){var b=this._textFillColor;b.r===a.r&&b.g===a.g&&b.b===a.b||(b.r=a.r,b.g=a.g,b.b=a.b,this._renderCmd._setColorsString(),this._needUpdateTexture=!0)},_getFillStyle:function(){return this._textFillColor},_updateWithTextDefinition:function(a,b){a.fontDimensions?(this._dimensions.width=a.boundingWidth,this._dimensions.height=a.boundingHeight):(this._dimensions.width=0,this._dimensions.height=0),this._hAlignment=a.textAlign,this._vAlignment=a.verticalAlign,this._fontName=a.fontName,this._fontSize=a.fontSize||12,a.lineHeight?this._lineHeight=a.lineHeight:this._lineHeight=this._fontSize,this._renderCmd._setFontStyle(a),a.shadowEnabled&&this.enableShadow(a.shadowOffsetX,a.shadowOffsetY,a.shadowOpacity,a.shadowBlur),a.strokeEnabled&&this.enableStroke(a.strokeStyle,a.lineWidth),this.setFontFillColor(a.fillStyle),b&&this._renderCmd._updateTexture();var c=cc.Node._dirtyFlags;this._renderCmd.setDirtyFlag(c.colorDirty|c.opacityDirty|c.textDirty)},_prepareTextDefinition:function(a){var b=new cc.FontDefinition;if(a?(b.fontSize=this._fontSize,b.boundingWidth=cc.contentScaleFactor()*this._dimensions.width,b.boundingHeight=cc.contentScaleFactor()*this._dimensions.height):(b.fontSize=this._fontSize,b.boundingWidth=this._dimensions.width,b.boundingHeight=this._dimensions.height),b.fontName=this._fontName,b.textAlign=this._hAlignment,b.verticalAlign=this._vAlignment,this._strokeEnabled){b.strokeEnabled=!0;var c=this._strokeColor;b.strokeStyle=cc.color(c.r,c.g,c.b),b.lineWidth=this._strokeSize}else b.strokeEnabled=!1;this._shadowEnabled?(b.shadowEnabled=!0,b.shadowBlur=this._shadowBlur,b.shadowOpacity=this._shadowOpacity,b.shadowOffsetX=(a?cc.contentScaleFactor():1)*this._shadowOffset.x,b.shadowOffsetY=(a?cc.contentScaleFactor():1)*this._shadowOffset.y):b._shadowEnabled=!1;var d=this._textFillColor;return b.fillStyle=cc.color(d.r,d.g,d.b),b},getScale:function(){return this._scaleX!==this._scaleY&&cc.log(cc._LogInfos.Node_getScale),this._scaleX*cc.view.getDevicePixelRatio()},setScale:function(a,b){this._scaleX=a/cc.view.getDevicePixelRatio(),this._scaleY=(b||0===b?b:a)/cc.view.getDevicePixelRatio(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleX:function(){return this._scaleX*cc.view.getDevicePixelRatio()},setScaleX:function(a){this._scaleX=a/cc.view.getDevicePixelRatio(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getScaleY:function(){return this._scaleY*cc.view.getDevicePixelRatio()},setScaleY:function(a){this._scaleY=a/cc.view.getDevicePixelRatio(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},setString:function(a){a=String(a),this._originalText!==a&&(this._originalText=a+"",this._updateString(),this._setUpdateTextureDirty(),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty))},_updateString:function(){this._string&&""!==this._string||this._string===this._originalText||(cc.renderer.childrenOrderDirty=!0),this._string=this._originalText},setHorizontalAlignment:function(a){a!==this._hAlignment&&(this._hAlignment=a,this._setUpdateTextureDirty())},setVerticalAlignment:function(a){a!==this._vAlignment&&(this._vAlignment=a,this._setUpdateTextureDirty())},setDimensions:function(a,b){var c;void 0===b?(c=a.width,b=a.height):c=a,c===this._dimensions.width&&b===this._dimensions.height||(this._dimensions.width=c,this._dimensions.height=b,this._updateString(),this._setUpdateTextureDirty())},_getBoundingWidth:function(){return this._dimensions.width},_setBoundingWidth:function(a){a!==this._dimensions.width&&(this._dimensions.width=a,this._updateString(),this._setUpdateTextureDirty())},_getBoundingHeight:function(){return this._dimensions.height},_setBoundingHeight:function(a){a!==this._dimensions.height&&(this._dimensions.height=a,this._updateString(),this._setUpdateTextureDirty())},setFontSize:function(a){this._fontSize!==a&&(this._fontSize=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},setFontName:function(a){this._fontName&&this._fontName!==a&&(this._fontName=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFont:function(){return this._renderCmd._getFontStyle()},_setFont:function(a){var b=cc.LabelTTF._fontStyleRE.exec(a);b&&(this._fontSize=parseInt(b[1]),this._fontName=b[2],this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},getContentSize:function(){return this._needUpdateTexture&&this._renderCmd._updateTTF(),cc.size(this._contentSize)},_getWidth:function(){return this._needUpdateTexture&&this._renderCmd._updateTTF(),this._contentSize.width},_getHeight:function(){return this._needUpdateTexture&&this._renderCmd._updateTTF(),this._contentSize.height},setTextureRect:function(a,b,c){cc.Sprite.prototype.setTextureRect.call(this,a,b,c,!1)},setDrawMode:function(a){this._onCacheCanvasMode=a},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelTTF.WebGLRenderCmd(this):this._onCacheCanvasMode?new cc.LabelTTF.CacheCanvasRenderCmd(this):new cc.LabelTTF.CanvasRenderCmd(this)},_setFontStyle:function(a){this._fontStyle!==a&&(this._fontStyle=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFontStyle:function(){return this._fontStyle},_setFontWeight:function(a){this._fontWeight!==a&&(this._fontWeight=a,this._renderCmd._setFontStyle(this._fontName,this._fontSize,this._fontStyle,this._fontWeight),this._setUpdateTextureDirty())},_getFontWeight:function(){return this._fontWeight}}),cc.assert(cc.isFunction(cc._tmp.PrototypeLabelTTF),cc._LogInfos.MissingFile,"LabelTTFPropertyDefine.js"),cc._tmp.PrototypeLabelTTF(),delete cc._tmp.PrototypeLabelTTF,cc.LabelTTF._fontStyleRE=/^(\d+)px\s+['"]?([\w\s\d]+)['"]?$/,cc.LabelTTF.create=function(a,b,c,d,e,f){return new cc.LabelTTF(a,b,c,d,e,f)},cc.LabelTTF.createWithFontDefinition=cc.LabelTTF.create,cc.LabelTTF.__labelHeightDiv=document.createElement("div"),cc.LabelTTF.__labelHeightDiv.style.fontFamily="Arial",cc.LabelTTF.__labelHeightDiv.style.position="absolute",cc.LabelTTF.__labelHeightDiv.style.left="-100px",cc.LabelTTF.__labelHeightDiv.style.top="-100px",cc.LabelTTF.__labelHeightDiv.style.lineHeight="normal",document.body?document.body.appendChild(cc.LabelTTF.__labelHeightDiv):window.addEventListener("load",function(){this.removeEventListener("load",arguments.callee,!1),document.body.appendChild(cc.LabelTTF.__labelHeightDiv)},!1),cc.LabelTTF.__getFontHeightByDiv=function(a,b){var c,d=cc.LabelTTF.__labelHeightDiv;if(a instanceof cc.FontDefinition){var e=a;if(c=cc.LabelTTF.__fontHeightCache[e._getCanvasFontStr()],c>0)return c;d.innerHTML="ajghl~!",d.style.fontFamily=e.fontName,d.style.fontSize=e.fontSize+"px",d.style.fontStyle=e.fontStyle,d.style.fontWeight=e.fontWeight,c=d.clientHeight,cc.LabelTTF.__fontHeightCache[e._getCanvasFontStr()]=c,d.innerHTML=""}else{if(c=cc.LabelTTF.__fontHeightCache[a+"."+b],c>0)return c;d.innerHTML="ajghl~!",d.style.fontFamily=a,d.style.fontSize=b+"px",c=d.clientHeight,cc.LabelTTF.__fontHeightCache[a+"."+b]=c,d.innerHTML=""}return c},cc.LabelTTF.__fontHeightCache={},cc.LabelTTF._textAlign=["left","center","right"],cc.LabelTTF._textBaseline=["top","middle","bottom"],cc.LabelTTF.wrapInspection=!0,cc.LabelTTF._wordRex=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]+|\S)/,cc.LabelTTF._symbolRex=/^[!,.:;}\]%\?>、‘“》？。，！]/,cc.LabelTTF._lastWordRex=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]+|\S)$/,cc.LabelTTF._lastEnglish=/[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]+$/,cc.LabelTTF._firsrEnglish=/^[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]/,function(){cc.LabelTTF.RenderCmd=function(){this._fontClientHeight=18,this._fontStyleStr="",this._shadowColorStr="rgba(128, 128, 128, 0.5)",this._strokeColorStr="",this._fillColorStr="rgba(255,255,255,1)",this._labelCanvas=null,this._labelContext=null,this._lineWidths=[],this._strings=[],this._isMultiLine=!1,this._status=[],this._renderingIndex=0,this._texRect=cc.rect(),this._canUseDirtyRegion=!0};var a=cc.LabelTTF.RenderCmd.prototype;a.constructor=cc.LabelTTF.RenderCmd,a._setFontStyle=function(a,b,c,d){if(a instanceof cc.FontDefinition)this._fontStyleStr=a._getCanvasFontStr(),this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(a);else{var e=b*cc.view.getDevicePixelRatio();this._fontStyleStr=c+" "+d+" "+e+"px '"+a+"'",this._fontClientHeight=cc.LabelTTF.__getFontHeightByDiv(a,b)}},a._getFontStyle=function(){return this._fontStyleStr},a._getFontClientHeight=function(){return this._fontClientHeight},a._updateColor=function(){this._setColorsString(),this._updateTexture()},a._setColorsString=function(){var a=this._displayedColor,b=this._node,c=b._shadowColor||this._displayedColor,d=b._strokeColor,e=b._textFillColor,f=a.r/255,g=a.g/255,h=a.b/255;this._shadowColorStr="rgba("+(0|f*c.r)+","+(0|g*c.g)+","+(0|h*c.b)+","+b._shadowOpacity+")",this._fillColorStr="rgba("+(0|f*e.r)+","+(0|g*e.g)+","+(0|h*e.b)+", 1)",this._strokeColorStr="rgba("+(0|f*d.r)+","+(0|g*d.g)+","+(0|h*d.b)+", 1)"};var b=new cc.Rect;a.getLocalBB=function(){var a=this._node;b.x=b.y=0;var c=cc.view.getDevicePixelRatio();return b.width=a._getWidth()*c,b.height=a._getHeight()*c,b},a._updateTTF=function(){var a,b,c=this._node,d=cc.view.getDevicePixelRatio(),e=c._dimensions.width*d,f=this._lineWidths;if(f.length=0,this._isMultiLine=!1,this._measureConfig(),0!==e)for(this._strings=c._string.split("\n"),a=0;a<this._strings.length;a++)this._checkWarp(this._strings,a,e);else for(this._strings=c._string.split("\n"),a=0,b=this._strings.length;a<b;a++)f.push(this._measure(this._strings[a]));this._strings.length>1&&(this._isMultiLine=!0);var g,h=0,i=0;if(c._strokeEnabled&&(h=i=2*c._strokeSize),c._shadowEnabled){var j=c._shadowOffset;h+=2*Math.abs(j.x),i+=2*Math.abs(j.y)}g=0===e?this._isMultiLine?cc.size(Math.ceil(Math.max.apply(Math,f)+h),Math.ceil(this._fontClientHeight*d*this._strings.length+i)):cc.size(Math.ceil(this._measure(c._string)+h),Math.ceil(this._fontClientHeight*d+i)):0===c._dimensions.height?this._isMultiLine?cc.size(Math.ceil(e+h),Math.ceil(c.getLineHeight()*d*this._strings.length+i)):cc.size(Math.ceil(e+h),Math.ceil(c.getLineHeight()*d+i)):cc.size(Math.ceil(e+h),Math.ceil(c._dimensions.height*d+i)),"normal"!==c._getFontStyle()&&(g.width=Math.ceil(g.width+.3*c._fontSize)),0===this._strings.length?(this._texRect.width=1,this._texRect.height=g.height||1):(this._texRect.width=g.width,this._texRect.height=g.height);
var k=g.width/d,l=g.height/d;c.setContentSize(k,l),c._strokeShadowOffsetX=h,c._strokeShadowOffsetY=i;var m=c._anchorPoint;this._anchorPointInPoints.x=.5*h+(g.width-h)*m.x,this._anchorPointInPoints.y=.5*i+(g.height-i)*m.y},a._saveStatus=function(){var a=this._node,b=cc.view.getDevicePixelRatio(),c=a._strokeShadowOffsetX,d=a._strokeShadowOffsetY,e=a._contentSize.height*b-d,f=a._vAlignment,g=a._hAlignment,h=.5*c,i=e+.5*d,j=0,k=0,l=[],m=a._contentSize.width*b-c,n=a.getLineHeight()*b,o=(n-this._fontClientHeight*b)/2;if(j+=g===cc.TEXT_ALIGNMENT_RIGHT?m:g===cc.TEXT_ALIGNMENT_CENTER?m/2:0,this._isMultiLine){var p=this._strings.length;f===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM?k=n-2*o+e-n*p:f===cc.VERTICAL_TEXT_ALIGNMENT_CENTER&&(k=(n-2*o)/2+(e-n*p)/2);for(var q=0;q<p;q++){var r=-e+(n*q+o)+k;l.push(r)}}else f===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM||(k-=f===cc.VERTICAL_TEXT_ALIGNMENT_TOP?e:.5*e),l.push(k);var s={contextTransform:cc.p(h,i),xOffset:j,OffsetYArray:l};this._status.push(s)},a._drawTTFInCanvas=function(a){if(a){var b=this._status.pop();a.setTransform(1,0,0,1,b.contextTransform.x,b.contextTransform.y);var c=b.xOffset,d=b.OffsetYArray;this.drawLabels(a,c,d)}},a._checkWarp=function(a,b,c){var d=a[b],e=this._measure(d);if(e>c&&d.length>1){for(var f,g=d.length*(c/e)|0,h=d.substr(g),i=e-this._measure(h),j=0,k=0;i>c&&k++<100;)g*=c/i,g|=0,h=d.substr(g),i=e-this._measure(h);for(k=0;i<c&&k++<100;){if(h){var l=cc.LabelTTF._wordRex.exec(h);j=l?l[0].length:1,f=h}g+=j,h=d.substr(g),i=e-this._measure(h)}g-=j,0===g&&(g=1,f=f.substr(1));var m,n=d.substr(0,g);cc.LabelTTF.wrapInspection&&cc.LabelTTF._symbolRex.test(f||h)&&(m=cc.LabelTTF._lastWordRex.exec(n),g-=m?m[0].length:0,0===g&&(g=1),f=d.substr(g),n=d.substr(0,g)),cc.LabelTTF._firsrEnglish.test(f)&&(m=cc.LabelTTF._lastEnglish.exec(n),m&&n!==m[0]&&(g-=m[0].length,f=d.substr(g),n=d.substr(0,g))),a[b]=f||h,a.splice(b,0,n)}},a.updateStatus=function(){var a=cc.Node._dirtyFlags,b=this._dirtyFlag;b&a.textDirty&&this._updateTexture(),cc.Node.RenderCmd.prototype.updateStatus.call(this),this._dirtyFlag&a.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.transformDirty^this._dirtyFlag)},a._syncStatus=function(a){var b=cc.Node._dirtyFlags,c=this._dirtyFlag;c&b.textDirty&&this._updateTexture(),cc.Node.RenderCmd.prototype._syncStatus.call(this,a),(cc._renderType===cc.game.RENDER_TYPE_WEBGL||c&b.transformDirty)&&this.transform(a)},a.drawLabels=function(a,b,c){var d=this._node;if(d._shadowEnabled){var e=d._shadowOffset;a.shadowColor=this._shadowColorStr,a.shadowOffsetX=e.x,a.shadowOffsetY=-e.y,a.shadowBlur=d._shadowBlur}var f=d._hAlignment,g=d._vAlignment,h=d._strokeSize;a.font!==this._fontStyleStr&&(a.font=this._fontStyleStr),a.fillStyle=this._fillColorStr;var i=d._strokeEnabled;i&&(a.lineWidth=2*h,a.strokeStyle=this._strokeColorStr),a.textBaseline=cc.LabelTTF._textBaseline[g],a.textAlign=cc.LabelTTF._textAlign[f];for(var j=this._strings.length,k=0;k<j;k++){var l=this._strings[k];i&&a.strokeText(l,b,c[k]),a.fillText(l,b,c[k])}cc.g_NumberOfDraws++}}(),function(){cc.LabelTTF.CacheRenderCmd=function(a){cc.LabelTTF.RenderCmd.call(this,a);var b=this._labelCanvas=document.createElement("canvas");b.width=1,b.height=1,this._labelContext=b.getContext("2d"),this._texRect=cc.rect()},cc.LabelTTF.CacheRenderCmd.prototype=Object.create(cc.LabelTTF.RenderCmd.prototype),cc.inject(cc.LabelTTF.RenderCmd.prototype,cc.LabelTTF.CacheRenderCmd.prototype);var a=cc.LabelTTF.CacheRenderCmd.prototype;a.constructor=cc.LabelTTF.CacheRenderCmd,a._updateTexture=function(){this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.textDirty^this._dirtyFlag;var a=this._node;this._updateTTF();var b=this._texRect.width,c=this._texRect.height,d=this._labelContext,e=this._labelCanvas;if(!a._texture){var f=new cc.Texture2D;f.initWithElement(this._labelCanvas),a.setTexture(f)}if(0===a._string.length)return e.width=b,e.height=c,a._texture&&a._texture.handleLoadedTexture(),a.setTextureRect(this._texRect),!0;d.font=this._fontStyleStr;var g=e.width===b&&e.height===c;return e.width=this._texRect.width,e.height=this._texRect.height,g&&d.clearRect(0,0,b,c),this._saveStatus(),this._drawTTFInCanvas(d),a._texture&&a._texture.handleLoadedTexture(),a.setTextureRect(this._texRect),!0},a._measureConfig=function(){this._labelContext.font=this._fontStyleStr},a._measure=function(a){return this._labelContext.measureText(a).width}}(),function(){cc.LabelTTF.CacheCanvasRenderCmd=function(a){cc.Sprite.CanvasRenderCmd.call(this,a),cc.LabelTTF.CacheRenderCmd.call(this)};var a=cc.LabelTTF.CacheCanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype);cc.inject(cc.LabelTTF.CacheRenderCmd.prototype,a),a.constructor=cc.LabelTTF.CacheCanvasRenderCmd}(),function(){cc.LabelTTF.CanvasRenderCmd=function(a){cc.Sprite.CanvasRenderCmd.call(this,a),cc.LabelTTF.RenderCmd.call(this)},cc.LabelTTF.CanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype),cc.inject(cc.LabelTTF.RenderCmd.prototype,cc.LabelTTF.CanvasRenderCmd.prototype);var a=cc.LabelTTF.CanvasRenderCmd.prototype;a.constructor=cc.LabelTTF.CanvasRenderCmd,a._measureConfig=function(){},a._measure=function(a){var b=cc._renderContext.getContext();return b.font=this._fontStyleStr,b.measureText(a).width},a._updateTexture=function(){this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.textDirty^this._dirtyFlag;var a=this._node;cc.view.getDevicePixelRatio();return this._updateTTF(),0===a._string.length?(a.setTextureRect(this._texRect),!0):(this._saveStatus(),a.setTextureRect(this._texRect),!0)},a.rendering=function(a){var b=cc.view.getScaleX(),c=cc.view.getScaleY(),d=a||cc._renderContext,e=d.getContext();if(e){var f=this._node;if(d.computeRealOffsetY(),!(this._status.length<=0)){var g=this._renderingIndex>=this._status.length?this._renderingIndex-this._status.length:this._renderingIndex,h=this._status[g];this._renderingIndex=g+1;var i=f._rect.height,j=f._offsetPosition.x,k=-f._offsetPosition.y-i,l=this._displayedOpacity/255;d.setTransform(this._worldTransform,b,c),d.setCompositeOperation(this._blendFuncStr),d.setGlobalAlpha(l),d.save(),f._flippedX&&(j=-j-f._rect.width,e.scale(-1,1)),f._flippedY&&(k=f._offsetPosition.y,e.scale(1,-1));for(var m=h.xOffset+h.contextTransform.x+j*b,n=[],o=this._strings.length,p=0;p<o;p++)n.push(h.OffsetYArray[p]+h.contextTransform.y+k*c);this.drawLabels(e,m,n),d.restore()}}}}();var cc=cc||{};cc._tmp=cc._tmp||{},cc.associateWithNative=function(a,b){},cc.KEY={none:0,back:6,menu:18,backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,select:41,insert:45,Delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,num0:96,num1:97,num2:98,num3:99,num4:100,num5:101,num6:102,num7:103,num8:104,num9:105,"*":106,"+":107,"-":109,numdel:110,"/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,";":186,semicolon:186,equal:187,"=":187,",":188,comma:188,dash:189,".":190,period:190,forwardslash:191,grave:192,"[":219,openbracket:219,backslash:220,"]":221,closebracket:221,quote:222,dpadLeft:1e3,dpadRight:1001,dpadUp:1003,dpadDown:1004,dpadCenter:1005},cc.FMT_JPG=0,cc.FMT_PNG=1,cc.FMT_TIFF=2,cc.FMT_RAWDATA=3,cc.FMT_WEBP=4,cc.FMT_UNKNOWN=5,cc.getImageFormatByData=function(a){return a.length>8&&137===a[0]&&80===a[1]&&78===a[2]&&71===a[3]&&13===a[4]&&10===a[5]&&26===a[6]&&10===a[7]?cc.FMT_PNG:a.length>2&&(73===a[0]&&73===a[1]||77===a[0]&&77===a[1]||255===a[0]&&216===a[1])?cc.FMT_TIFF:cc.FMT_UNKNOWN},cc.inherits=function(a,b){function c(){}c.prototype=b.prototype,a.superClass_=b.prototype,a.prototype=new c,a.prototype.constructor=a},cc.base=function(a,b,c){var d=arguments.callee.caller;if(d.superClass_)return ret=d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1)),ret;for(var e=Array.prototype.slice.call(arguments,2),f=!1,g=a.constructor;g;g=g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("cc.base called from a method of one name to a method of a different name")};var GlobalVertexBuffer=function(){var a=888,b=function(b){this.gl=b,this.vertexBuffer=b.createBuffer(),this.size=a,this.byteLength=4*a*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,this.data=new ArrayBuffer(this.byteLength),this.dataArray=new Float32Array(this.data),b.bindBuffer(b.ARRAY_BUFFER,this.vertexBuffer),b.bufferData(b.ARRAY_BUFFER,this.dataArray,b.DYNAMIC_DRAW),this._dirty=!1,this._spaces={0:this.byteLength}};return b.prototype={constructor:b,allocBuffer:function(a,b){var c=this._spaces[a];if(c&&c>=b){if(delete this._spaces[a],c>b){var d=a+b;this._spaces[d]=c-b}return!0}return!1},requestBuffer:function(a){var b,c,d;for(b in this._spaces)if(c=parseInt(b),d=this._spaces[b],d>=a&&this.allocBuffer(c,a))return{buffer:this,offset:c,size:a};return null},freeBuffer:function(a,b){var c,d,e,f=this._spaces;for(d in f){if(c=parseInt(d),c>a)break;if(c+f[d]>=a){b=b+a-c,a=c;break}}e=a+b,this._spaces[e]&&(b+=this._spaces[e],delete this._spaces[e]),this._spaces[a]=b},setDirty:function(){this._dirty=!0},update:function(){this._dirty&&(this.gl.bindBuffer(gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferSubData(gl.ARRAY_BUFFER,0,this.dataArray),this._dirty=!1)},destroy:function(){this.gl.deleteBuffer(this.vertexBuffer),this.data=null,this.positions=null,this.colors=null,this.texCoords=null,this.vertexBuffer=null}},b}();cc.rendererCanvas={childrenOrderDirty:!0,assignedZ:0,assignedZStep:1e-4,_transformNodePool:[],_renderCmds:[],_isCacheToCanvasOn:!1,_cacheToCanvasCmds:{},_cacheInstanceIds:[],_currentID:0,_clearColor:cc.color(),_clearFillStyle:"rgb(0, 0, 0)",_dirtyRegion:null,_allNeedDraw:!0,_enableDirtyRegion:!1,_debugDirtyRegion:!1,_canUseDirtyRegion:!1,_dirtyRegionCountThreshold:10,getRenderCmd:function(a){return a._createRenderCmd()},enableDirtyRegion:function(a){this._enableDirtyRegion=a},isDirtyRegionEnabled:function(){return this._enableDirtyRegion},setDirtyRegionCountThreshold:function(a){this._dirtyRegionCountThreshold=a},_collectDirtyRegion:function(){var a,b,c=this._renderCmds,d=this._dirtyRegion,e=0,f=!0,g=cc.Node.CanvasRenderCmd.RegionStatus;for(a=0,b=c.length;a<b;a++){var h=c[a],i=h._regionFlag,j=h._oldRegion,k=h._currentRegion;i>g.NotDirty&&(++e,e>this._dirtyRegionCountThreshold&&(f=!1),f&&(!k.isEmpty()&&d.addRegion(k),h._regionFlag>g.Dirty&&!j.isEmpty()&&d.addRegion(j)),h._regionFlag=g.NotDirty)}return f},_beginDrawDirtyRegion:function(a){var b=a.getContext(),c=this._dirtyRegion.getDirtyRegions();b.save();var d=a._scaleX,e=a._scaleY;a.setTransform({a:1,b:0,c:0,d:1,tx:0,ty:0},d,e),b.beginPath();for(var f=0,g=c.length;f<g;++f){var h=c[f];b.rect(h._minX,-h._maxY,h._width,h._height)}b.clip()},_endDrawDirtyRegion:function(a){a.restore()},_debugDrawDirtyRegion:function(a){if(this._debugDirtyRegion){var b=a.getContext(),c=this._dirtyRegion.getDirtyRegions(),d=a._scaleX,e=a._scaleY;a.setTransform({a:1,b:0,c:0,d:1,tx:0,ty:0},d,e),b.beginPath();for(var f=0,g=c.length;f<g;++f){var h=c[f];b.rect(h._minX,-h._maxY,h._width,h._height)}var i=b.fillStyle;b.fillStyle="green",b.fill(),b.fillStyle=i}},rendering:function(a){var b=this._dirtyRegion=this._dirtyRegion||new cc.DirtyRegion,c=cc._canvas,d=a||cc._renderContext,e=d.getContext(),f=cc.view.getScaleX(),g=cc.view.getScaleY();d.setViewScale(f,g),d.computeRealOffsetY();var h,i,j=this._dirtyRegion.getDirtyRegions(),k=this._renderCmds,l=this._allNeedDraw||!this._enableDirtyRegion||!this._canUseDirtyRegion,m=!0;for(l||(m=this._collectDirtyRegion()),l=l||!m,l||this._beginDrawDirtyRegion(d),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,c.width,c.height),0===this._clearColor.r&&0===this._clearColor.g&&0===this._clearColor.b||(d.setFillStyle(this._clearFillStyle),d.setGlobalAlpha(this._clearColor.a),e.fillRect(0,0,c.width,c.height)),h=0,i=k.length;h<i;h++){var n=k[h],o=!1,p=n._currentRegion;if(!p||l)o=!0;else for(var q=0,r=j.length;q<r;++q)if(j[q].intersects(p)){o=!0;break}o&&n.rendering(d,f,g)}l||(this._debugDrawDirtyRegion(d),this._endDrawDirtyRegion(e)),b.clear(),this._allNeedDraw=!1},_renderingToCacheCanvas:function(a,b,c,d){a||cc.log("The context of RenderTexture is invalid."),c=cc.isUndefined(c)?1:c,d=cc.isUndefined(d)?1:d,b=b||this._currentID;var e,f,g=this._cacheToCanvasCmds[b];for(a.computeRealOffsetY(),e=0,f=g.length;e<f;e++)g[e].rendering(a,c,d);this._removeCache(b);var h=this._cacheInstanceIds;0===h.length?this._isCacheToCanvasOn=!1:this._currentID=h[h.length-1]},_turnToCacheMode:function(a){this._isCacheToCanvasOn=!0,a=a||0,this._cacheToCanvasCmds[a]=[],this._cacheInstanceIds.indexOf(a)===-1&&this._cacheInstanceIds.push(a),this._currentID=a},_turnToNormalMode:function(){this._isCacheToCanvasOn=!1},_removeCache:function(a){a=a||this._currentID;var b=this._cacheToCanvasCmds[a];b&&(b.length=0,delete this._cacheToCanvasCmds[a]);var c=this._cacheInstanceIds;cc.arrayRemoveObject(c,a)},resetFlag:function(){this.childrenOrderDirty=!1,this._transformNodePool.length=0},transform:function(){var a=this._transformNodePool;a.sort(this._sortNodeByLevelAsc);for(var b=0,c=a.length;b<c;b++)0!==a[b]._dirtyFlag&&a[b].updateStatus();a.length=0},transformDirty:function(){return this._transformNodePool.length>0},_sortNodeByLevelAsc:function(a,b){return a._curLevel-b._curLevel},pushDirtyNode:function(a){this._transformNodePool.push(a)},clear:function(){},clearRenderCommands:function(){this._renderCmds.length=0,this._cacheInstanceIds.length=0,this._isCacheToCanvasOn=!1,this._allNeedDraw=!0,this._canUseDirtyRegion=!0},pushRenderCommand:function(a){if(a.needDraw())if(a._canUseDirtyRegion||(this._canUseDirtyRegion=!1),this._isCacheToCanvasOn){var b=this._currentID,c=this._cacheToCanvasCmds,d=c[b];d.indexOf(a)===-1&&d.push(a)}else this._renderCmds.indexOf(a)===-1&&this._renderCmds.push(a)}},function(){cc.CanvasContextWrapper=function(a){this._context=a,this._saveCount=0,this._currentAlpha=a.globalAlpha,this._currentCompositeOperation=a.globalCompositeOperation,this._currentFillStyle=a.fillStyle,this._currentStrokeStyle=a.strokeStyle,this._offsetX=0,this._offsetY=0,this._realOffsetY=this.height,this._armatureMode=0};var a=cc.CanvasContextWrapper.prototype;a.resetCache=function(){var a=this._context;this._currentAlpha=a.globalAlpha,this._currentCompositeOperation=a.globalCompositeOperation,this._currentFillStyle=a.fillStyle,this._currentStrokeStyle=a.strokeStyle,this._realOffsetY=this._context.canvas.height+this._offsetY},a.setOffset=function(a,b){this._offsetX=a,this._offsetY=b,this._realOffsetY=this._context.canvas.height+this._offsetY},a.computeRealOffsetY=function(){this._realOffsetY=this._context.canvas.height+this._offsetY},a.setViewScale=function(a,b){this._scaleX=a,this._scaleY=b},a.getContext=function(){return this._context},a.save=function(){this._context.save(),this._saveCount++},a.restore=function(){this._context.restore(),this._saveCount--},a.setGlobalAlpha=function(a){this._saveCount>0?this._context.globalAlpha=a:this._currentAlpha!==a&&(this._currentAlpha=a,this._context.globalAlpha=a)},a.setCompositeOperation=function(a){this._saveCount>0?this._context.globalCompositeOperation=a:this._currentCompositeOperation!==a&&(this._currentCompositeOperation=a,this._context.globalCompositeOperation=a)},a.setFillStyle=function(a){this._saveCount>0?this._context.fillStyle=a:this._currentFillStyle!==a&&(this._currentFillStyle=a,this._context.fillStyle=a)},a.setStrokeStyle=function(a){this._saveCount>0?this._context.strokeStyle=a:this._currentStrokeStyle!==a&&(this._currentStrokeStyle=a,this._context.strokeStyle=a)},a.setTransform=function(a,b,c){this._armatureMode>0?(this.restore(),this.save(),this._context.transform(a.a*b,-a.b*c,-a.c*b,a.d*c,a.tx*b,-(a.ty*c))):this._context.setTransform(a.a*b,-a.b*c,-a.c*b,a.d*c,this._offsetX+a.tx*b,this._realOffsetY-a.ty*c)},a._switchToArmatureMode=function(a,b,c,d){a?(this._armatureMode++,this._context.setTransform(b.a,b.c,b.b,b.d,this._offsetX+b.tx*c,this._realOffsetY-b.ty*d),this.save()):(this._armatureMode--,this.restore())}}();var Region=function(){this._minX=0,this._minY=0,this._maxX=0,this._maxY=0,this._width=0,this._height=0,this._area=0},regionProto=Region.prototype,regionPool=[];regionProto.setTo=function(a,b,c,d){return this._minX=a,this._minY=b,this._maxX=c,this._maxY=d,this.updateArea(),this},regionProto.intValues=function(){this._minX=Math.floor(this._minX),this._minY=Math.floor(this._minY),this._maxX=Math.ceil(this._maxX),this._maxY=Math.ceil(this._maxY),this.updateArea()},regionProto.updateArea=function(){this._width=this._maxX-this._minX,this._height=this._maxY-this._minY,this._area=this._width*this._height},regionProto.union=function(a){return this._width<=0||this._height<=0?void this.setTo(a._minX,a._minY,a._maxX,a._maxY):(this._minX>a._minX&&(this._minX=a._minX),this._minY>a._minY&&(this._minY=a._minY),this._maxX<a._maxX&&(this._maxX=a._maxX),this._maxY<a._maxY&&(this._maxY=a._maxY),void this.updateArea())},regionProto.setEmpty=function(){this._minX=0,this._minY=0,this._maxX=0,this._maxY=0,this._width=0,this._height=0,this._area=0},regionProto.isEmpty=function(){return this._width<=0||this._height<=0},regionProto.intersects=function(a){if(this._width<=0||this._height<=0||a._width<=0||a._height<=0)return!1;var b=this._minX>a._minX?this._minX:a._minX,c=this._maxX<a._maxX?this._maxX:a._maxX;return!(b>c)&&(b=this._minY>a._minY?this._minY:a._minY,c=this._maxY<a._maxY?this._maxY:a._maxY,b<=c)},regionProto.updateRegion=function(a,b){if(0==a.width||0==a.height)return void this.setEmpty();var c,d,e,f,g=b,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,n=a.x,o=a.y,p=n+a.width,q=o+a.height;if(1==h&&0==i&&0==j&&1==k)c=n+l-1,d=o+m-1,e=p+l+1,f=q+m+1;else{var r=h*n+j*o+l,s=i*n+k*o+m,t=h*p+j*o+l,u=i*p+k*o+m,v=h*p+j*q+l,w=i*p+k*q+m,x=h*n+j*q+l,y=i*n+k*q+m,z=0;r>t&&(z=r,r=t,t=z),v>x&&(z=v,v=x,x=z),c=(r<v?r:v)-1,e=(t>x?t:x)+1,s>u&&(z=s,s=u,u=z),w>y&&(z=w,w=y,y=z),d=(s<w?s:w)-1,f=(u>y?u:y)+1}this._minX=c,this._minY=d,this._maxX=e,this._maxY=f,this._width=e-c,this._height=f-d,this._area=this._width*this._height};var DirtyRegion=function(){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1},dirtyRegionProto=DirtyRegion.prototype;dirtyRegionProto.setClipRect=function(a,b){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(a),this.clipHeight=Math.ceil(b),this.clipArea=this.clipWidth*this.clipHeight},dirtyRegionProto.addRegion=function(a){var b=a._minX,c=a._minY,d=a._maxX,e=a._maxY;if(this.hasClipRect&&(b<0&&(b=0),c<0&&(c=0),d>this.clipWidth&&(d=this.clipWidth),e>this.clipHeight&&(e=this.clipHeight)),b>=d||c>=e)return!1;if(this.clipRectChanged)return!0;var f=this.dirtyList,g=regionCreate();return f.push(g.setTo(b,c,d,e)),this.mergeDirtyList(f),!0},dirtyRegionProto.clear=function(){for(var a=this.dirtyList,b=a.length,c=0;c<b;c++)regionRelease(a[c]);a.length=0},dirtyRegionProto.getDirtyRegions=function(){var a=this.dirtyList;if(this.clipRectChanged){this.clipRectChanged=!1,this.clear();var b=regionCreate();a.push(b.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(a););var c=this.dirtyList.length;if(c>0)for(var d=0;d<c;d++)this.dirtyList[d].intValues();return this.dirtyList},dirtyRegionProto.mergeDirtyList=function(a){var b=a.length;if(b<2)return!1;for(var c=this.hasClipRect,d=b>3?Number.POSITIVE_INFINITY:0,e=0,f=0,g=0,h=0;h<b-1;h++){var i=a[h];c&&(g+=i.area);for(var j=h+1;j<b;j++){var k=a[j],l=unionArea(i,k)-i.area-k.area;d>l&&(e=h,f=j,d=l)}}if(c&&g/this.clipArea>.95&&(this.clipRectChanged=!0),e!=f){var m=a[f];return a[e].union(m),regionRelease(m),a.splice(f,1),!0}return!1},cc.Region=Region,cc.DirtyRegion=DirtyRegion,cc.profiler=function(){var a=!1,b=!1,c=0,d=0,e=0,f=0,g=null,h=document.createElement("div"),i=document.createElement("div"),j=document.createElement("div"),k=document.createElement("div"),l=.6,m=10,n=[0,10,20,30],o=[0,0,0,0],p=3,q=0,r=0;k.id="fps",k.style.position="absolute",k.style.padding="3px",k.style.textAlign="left",k.style.backgroundColor="rgb(0, 0, 34)",k.style.bottom=cc.DIRECTOR_STATS_POSITION.y+"0px",k.style.left=cc.DIRECTOR_STATS_POSITION.x+"px",k.style.width="45px",k.style.height="60px";for(var s=[j,i,h],t=0;t<3;++t){var u=s[t].style;u.color="rgb(0, 255, 255)",u.font="bold 12px Helvetica, Arial",u.lineHeight="20px",u.width="100%",k.appendChild(s[t])}var v=function(a){var b,c=n.length-1,d=c,e=0;for(q++,r+=a;d>=0;d--)if(a>=n[d]){o[d]++;break}if(q>=m){for(e=r/m,d=c;d>0;d--)if(b=o[d]/m,b>=l&&e>=n[d]){d!=p&&(p=d,x.onFrameRateChange&&x.onFrameRateChange(e.toFixed(2)));break}for(_changeCount=0,q=0,r=0,d=c;d>0;d--)o[d]=0}},w=function(){e=cc.director.getSecondsPerFrame(),c++,f+=cc.director.getDeltaTime(),f>cc.DIRECTOR_FPS_INTERVAL&&(d=c/f,c=0,f=0,x.onFrameRateChange&&v(d),a&&(i.innerText=e.toFixed(3),h.innerText=d.toFixed(1),j.innerText=(0|cc.g_NumberOfDraws).toString()))},x={onFrameRateChange:null,getSecondsPerFrame:function(){return e},getFrameRate:function(){return d},setProfileDuration:function(a){!isNaN(a)&&a>0&&(m=a/cc.DIRECTOR_FPS_INTERVAL)},resumeProfiling:function(){cc.eventManager.addListener(g,1)},stopProfiling:function(){cc.eventManager.removeListener(g)},isShowingStats:function(){return a},showStats:function(){b||this.init(),null===k.parentElement&&cc.container.appendChild(k),a=!0},hideStats:function(){a=!1,k.parentElement===cc.container&&cc.container.removeChild(k)},init:function(){b||(g=cc.eventManager.addCustomListener(cc.Director.EVENT_AFTER_VISIT,w),b=!0)}};return x}();var _p=cc.inputManager;_p.setAccelerometerEnabled=function(a){var b=this;if(b._accelEnabled!==a){b._accelEnabled=a;var c=cc.director.getScheduler();b._accelEnabled?(b._accelCurTime=0,c.scheduleUpdate(b)):(b._accelCurTime=0,c.scheduleUpdate(b))}},_p.setAccelerometerInterval=function(a){this._accelInterval!==a&&(this._accelInterval=a)},_p._registerKeyboardEvent=function(){cc._canvas.addEventListener("keydown",function(a){cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode,!0)),a.stopPropagation(),a.preventDefault()},!1),cc._canvas.addEventListener("keyup",function(a){cc.eventManager.dispatchEvent(new cc.EventKeyboard(a.keyCode,!1)),a.stopPropagation(),a.preventDefault()},!1)},_p._registerAccelerometerEvent=function(){var a=window,b=this;b._acceleration=new cc.Acceleration,b._accelDeviceEvent=a.DeviceMotionEvent||a.DeviceOrientationEvent,cc.sys.browserType===cc.sys.BROWSER_TYPE_MOBILE_QQ&&(b._accelDeviceEvent=window.DeviceOrientationEvent);var c=b._accelDeviceEvent===a.DeviceMotionEvent?"devicemotion":"deviceorientation",d=navigator.userAgent;(/Android/.test(d)||/Adr/.test(d)&&cc.sys.browserType===cc.BROWSER_TYPE_UC)&&(b._minus=-1),a.addEventListener(c,b.didAccelerate.bind(b),!1)},_p.didAccelerate=function(a){var b=this,c=window;if(b._accelEnabled){var d,e,f,g=b._acceleration;if(b._accelDeviceEvent===window.DeviceMotionEvent){var h=a.accelerationIncludingGravity;d=b._accelMinus*h.x*.1,e=b._accelMinus*h.y*.1,f=.1*h.z}else d=a.gamma/90*.981,e=.981*-(a.beta/90),f=a.alpha/90*.981;g.x=d,g.y=e,g.z=f,g.timestamp=a.timeStamp||Date.now();var i=g.x;c.orientation===cc.UIInterfaceOrientationLandscapeRight?(g.x=-g.y,g.y=i):c.orientation===cc.UIInterfaceOrientationLandscapeLeft?(g.x=g.y,g.y=-i):c.orientation===cc.UIInterfaceOrientationPortraitUpsideDown&&(g.x=-g.x,g.y=-g.y)}},delete _p,cc.vertexLineToPolygon=function(a,b,c,d,e){if(e+=d,!(e<=1)){b*=.5;for(var f,g=e-1,h=d;h<e;h++){f=2*h;var i,j=cc.p(a[2*h],a[2*h+1]);if(0===h)i=cc.pPerp(cc.pNormalize(cc.pSub(j,cc.p(a[2*(h+1)],a[2*(h+1)+1]))));else if(h===g)i=cc.pPerp(cc.pNormalize(cc.pSub(cc.p(a[2*(h-1)],a[2*(h-1)+1]),j)));else{var k=cc.p(a[2*(h-1)],a[2*(h-1)+1]),l=cc.p(a[2*(h+1)],a[2*(h+1)+1]),m=cc.pNormalize(cc.pSub(l,j)),n=cc.pNormalize(cc.pSub(k,j)),o=Math.acos(cc.pDot(m,n));i=o<cc.degreesToRadians(70)?cc.pPerp(cc.pNormalize(cc.pMidpoint(m,n))):o<cc.degreesToRadians(170)?cc.pNormalize(cc.pMidpoint(m,n)):cc.pPerp(cc.pNormalize(cc.pSub(l,k)))}i=cc.pMult(i,b),c[2*f]=j.x+i.x,c[2*f+1]=j.y+i.y,c[2*(f+1)]=j.x-i.x,c[2*(f+1)+1]=j.y-i.y}for(d=0===d?0:d-1,h=d;h<g;h++){f=2*h;var p=f+2,q=cc.vertex2(c[2*f],c[2*f+1]),r=cc.vertex2(c[2*(f+1)],c[2*(f+1)+1]),s=cc.vertex2(c[2*p],c[2*p]),t=cc.vertex2(c[2*(p+1)],c[2*(p+1)+1]),u=!cc.vertexLineIntersect(q.x,q.y,t.x,t.y,r.x,r.y,s.x,s.y);u.isSuccess||(u.value<0||u.value>1)&&(u.isSuccess=!0),u.isSuccess&&(c[2*p]=t.x,c[2*p+1]=t.y,c[2*(p+1)]=s.x,c[2*(p+1)+1]=s.y)}}},cc.vertexLineIntersect=function(a,b,c,d,e,f,g,h){var i,j,k,l;if(a===c&&b===d||e===g&&f===h)return{isSuccess:!1,value:0};if(c-=a,d-=b,e-=a,f-=b,g-=a,h-=b,i=Math.sqrt(c*c+d*d),j=c/i,k=d/i,l=e*j+f*k,f=f*j-e*k,e=l,l=g*j+h*k,h=h*j-g*k,g=l,f===h)return{isSuccess:!1,value:0};var m=(g+(e-g)*h/(h-f))/i;return{isSuccess:!0,value:m}},cc.vertexListIsClockwise=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b],e=a[(b+1)%c],f=a[(b+2)%c];if(cc.pCross(cc.pSub(e,d),cc.pSub(f,e))>0)return!1}return!0},cc.CGAffineToGL=function(a,b){b[2]=b[3]=b[6]=b[7]=b[8]=b[9]=b[11]=b[14]=0,b[10]=b[15]=1,b[0]=a.a,b[4]=a.c,b[12]=a.tx,b[1]=a.b,b[5]=a.d,b[13]=a.ty},cc.GLToCGAffine=function(a,b){b.a=a[0],b.c=a[4],b.tx=a[12],b.b=a[1],b.d=a[5],b.ty=a[13]},cc.EventAcceleration=cc.Event.extend({_acc:null,ctor:function(a){cc.Event.prototype.ctor.call(this,cc.Event.ACCELERATION),this._acc=a}}),cc.EventKeyboard=cc.Event.extend({_keyCode:0,_isPressed:!1,ctor:function(a,b){cc.Event.prototype.ctor.call(this,cc.Event.KEYBOARD),this._keyCode=a,this._isPressed=b}}),cc._EventListenerAcceleration=cc.EventListener.extend({_onAccelerationEvent:null,ctor:function(a){this._onAccelerationEvent=a;var b=this,c=function(a){b._onAccelerationEvent(a._acc,a)};cc.EventListener.prototype.ctor.call(this,cc.EventListener.ACCELERATION,cc._EventListenerAcceleration.LISTENER_ID,c)},checkAvailable:function(){return cc.assert(this._onAccelerationEvent,cc._LogInfos._EventListenerAcceleration_checkAvailable),!0},clone:function(){return new cc._EventListenerAcceleration(this._onAccelerationEvent)}}),cc._EventListenerAcceleration.LISTENER_ID="__cc_acceleration",cc._EventListenerAcceleration.create=function(a){return new cc._EventListenerAcceleration(a)},cc._EventListenerKeyboard=cc.EventListener.extend({onKeyPressed:null,onKeyReleased:null,ctor:function(){var a=this,b=function(b){b._isPressed?a.onKeyPressed&&a.onKeyPressed(b._keyCode,b):a.onKeyReleased&&a.onKeyReleased(b._keyCode,b)};cc.EventListener.prototype.ctor.call(this,cc.EventListener.KEYBOARD,cc._EventListenerKeyboard.LISTENER_ID,b)},clone:function(){var a=new cc._EventListenerKeyboard;return a.onKeyPressed=this.onKeyPressed,a.onKeyReleased=this.onKeyReleased,a},checkAvailable:function(){return null!==this.onKeyPressed||null!==this.onKeyReleased||(cc.log(cc._LogInfos._EventListenerKeyboard_checkAvailable),!1)}}),cc._EventListenerKeyboard.LISTENER_ID="__cc_keyboard",cc._EventListenerKeyboard.create=function(){return new cc._EventListenerKeyboard},cc.AtlasNode=cc.Node.extend({textureAtlas:null,quadsToDraw:0,_itemsPerRow:0,_itemsPerColumn:0,_itemWidth:0,_itemHeight:0,_opacityModifyRGB:!1,_blendFunc:null,_ignoreContentScaleFactor:!1,_className:"AtlasNode",_texture:null,_textureForCanvas:null,ctor:function(a,b,c,d){cc.Node.prototype.ctor.call(this),this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},this._ignoreContentScaleFactor=!1,void 0!==d&&this.initWithTileFile(a,b,c,d)},_createRenderCmd:function(){cc._renderType===cc.game.RENDER_TYPE_CANVAS?this._renderCmd=new cc.AtlasNode.CanvasRenderCmd(this):this._renderCmd=new cc.AtlasNode.WebGLRenderCmd(this)},updateAtlasValues:function(){cc.log(cc._LogInfos.AtlasNode_updateAtlasValues)},getColor:function(){return this._opacityModifyRGB?this._renderCmd._colorUnmodified:cc.Node.prototype.getColor.call(this)},setOpacityModifyRGB:function(a){var b=this.color;this._opacityModifyRGB=a,this.setColor(b)},isOpacityModifyRGB:function(){return this._opacityModifyRGB},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a,b){void 0===b?this._blendFunc=a:this._blendFunc={src:a,dst:b}},setTextureAtlas:function(a){this.textureAtlas=a},getTextureAtlas:function(){return this.textureAtlas},getQuadsToDraw:function(){return this.quadsToDraw},setQuadsToDraw:function(a){this.quadsToDraw=a},initWithTileFile:function(a,b,c,d){if(!a)throw new Error("cc.AtlasNode.initWithTileFile(): title should not be null");var e=cc.textureCache.addImage(a);return this.initWithTexture(e,b,c,d)},initWithTexture:function(a,b,c,d){return this._renderCmd.initWithTexture(a,b,c,d)},setColor:function(a){this._renderCmd.setColor(a)},setOpacity:function(a){this._renderCmd.setOpacity(a)},getTexture:function(){return this._texture},setTexture:function(a){this._texture=a},_setIgnoreContentScaleFactor:function(a){this._ignoreContentScaleFactor=a}});var _p=cc.AtlasNode.prototype;cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity),cc.defineGetterSetter(_p,"color",_p.getColor,_p.setColor),_p.texture,cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),_p.textureAtlas,_p.quadsToDraw,cc.EventHelper.prototype.apply(_p),cc.AtlasNode.create=function(a,b,c,d){return new cc.AtlasNode(a,b,c,d)},function(){cc.AtlasNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!1,this._colorUnmodified=cc.color.WHITE,this._textureToRender=null};var a=cc.AtlasNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.AtlasNode.CanvasRenderCmd,a.initWithTexture=function(a,b,c,d){var e=this._node;return e._itemWidth=b,e._itemHeight=c,e._opacityModifyRGB=!0,e._texture=a,e._texture?(this._textureToRender=a,this._calculateMaxItems(),e.quadsToDraw=d,!0):(cc.log(cc._LogInfos.AtlasNode__initWithTexture),!1)},a.setColor=function(a){var b=this._node,c=b._realColor;c.r===a.r&&c.g===a.g&&c.b===a.b||(this._colorUnmodified=a,this._changeTextureColor())},a._changeTextureColor=function(){var a=this._node,b=a._texture,c=this._colorUnmodified,d=b.getHtmlElementObj(),e=cc.rect(0,0,d.width,d.height);b===this._textureToRender?this._textureToRender=b._generateColorTexture(c.r,c.g,c.b,e):b._generateColorTexture(c.r,c.g,c.b,e,this._textureToRender.getHtmlElementObj())},a.setOpacity=function(a){var b=this._node;cc.Node.prototype.setOpacity.call(b,a)},a._calculateMaxItems=function(){var a=this._node,b=a._texture,c=b.getContentSize();a._itemsPerColumn=0|c.height/a._itemHeight,a._itemsPerRow=0|c.width/a._itemWidth}}(),cc.TextureAtlas=cc.Class.extend({dirty:!1,texture:null,_indices:null,_buffersVBO:null,_capacity:0,_quads:null,_quadsArrayBuffer:null,_quadsWebBuffer:null,_quadsReader:null,ctor:function(a,b){this._buffersVBO=[],cc.isString(a)?this.initWithFile(a,b):a instanceof cc.Texture2D&&this.initWithTexture(a,b)},getTotalQuads:function(){return this._totalQuads},getCapacity:function(){return this._capacity},getTexture:function(){return this.texture},setTexture:function(a){this.texture=a},setDirty:function(a){this.dirty=a},isDirty:function(){return this.dirty},getQuads:function(){return this._quads},setQuads:function(a){this._quads=a},_copyQuadsToTextureAtlas:function(a,b){if(a)for(var c=0;c<a.length;c++)this._setQuadToArray(a[c],b+c)},_setQuadToArray:function(a,b){var c=this._quads;return c[b]?(c[b].bl=a.bl,c[b].br=a.br,c[b].tl=a.tl,void(c[b].tr=a.tr)):void(c[b]=new cc.V3F_C4B_T2F_Quad(a.tl,a.bl,a.tr,a.br,this._quadsArrayBuffer,b*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT))},description:function(){return"<cc.TextureAtlas | totalQuads ="+this._totalQuads+">"},_setupIndices:function(){if(0!==this._capacity)for(var a=this._indices,b=this._capacity,c=0;c<b;c++)cc.TEXTURE_ATLAS_USE_TRIANGLE_STRIP?(a[6*c+0]=4*c+0,a[6*c+1]=4*c+0,a[6*c+2]=4*c+2,a[6*c+3]=4*c+1,a[6*c+4]=4*c+3,a[6*c+5]=4*c+3):(a[6*c+0]=4*c+0,a[6*c+1]=4*c+1,a[6*c+2]=4*c+2,a[6*c+3]=4*c+3,a[6*c+4]=4*c+2,a[6*c+5]=4*c+1)},_setupVBO:function(){var a=cc._renderContext;this._buffersVBO[0]=a.createBuffer(),this._buffersVBO[1]=a.createBuffer(),this._quadsWebBuffer=a.createBuffer(),this._mapBuffers()},_mapBuffers:function(){var a=cc._renderContext;a.bindBuffer(a.ARRAY_BUFFER,this._quadsWebBuffer),a.bufferData(a.ARRAY_BUFFER,this._quadsArrayBuffer,a.DYNAMIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this._buffersVBO[1]),a.bufferData(a.ELEMENT_ARRAY_BUFFER,this._indices,a.STATIC_DRAW)},initWithFile:function(a,b){var c=cc.textureCache.addImage(a);return c?this.initWithTexture(c,b):(cc.log(cc._LogInfos.TextureAtlas_initWithFile,a),!1)},initWithTexture:function(a,b){cc.assert(a,cc._LogInfos.TextureAtlas_initWithTexture),b|=0,this._capacity=b,this._totalQuads=0,this.texture=a,this._quads=[],this._indices=new Uint16Array(6*b);var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;if(this._quadsArrayBuffer=new ArrayBuffer(c*b),this._quadsReader=new Uint8Array(this._quadsArrayBuffer),(!this._quads||!this._indices)&&b>0)return!1;for(var d=this._quads,e=0;e<b;e++)d[e]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,e*c);return this._setupIndices(),this._setupVBO(),this.dirty=!0,!0},updateQuad:function(a,b){cc.assert(a,cc._LogInfos.TextureAtlas_updateQuad),cc.assert(b>=0&&b<this._capacity,cc._LogInfos.TextureAtlas_updateQuad_2),this._totalQuads=Math.max(b+1,this._totalQuads),this._setQuadToArray(a,b),this.dirty=!0},insertQuad:function(a,b){if(cc.assert(b<this._capacity,cc._LogInfos.TextureAtlas_insertQuad_2),this._totalQuads++,this._totalQuads>this._capacity)return void cc.log(cc._LogInfos.TextureAtlas_insertQuad);var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,d=this._totalQuads-1-b,e=b*c,f=d*c;this._quads[this._totalQuads-1]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,(this._totalQuads-1)*c),this._quadsReader.set(this._quadsReader.subarray(e,e+f),e+c),this._setQuadToArray(a,b),this.dirty=!0},insertQuads:function(a,b,c){c=c||a.length,cc.assert(b+c<=this._capacity,cc._LogInfos.TextureAtlas_insertQuads);var d=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;if(this._totalQuads+=c,this._totalQuads>this._capacity)return void cc.log(cc._LogInfos.TextureAtlas_insertQuad);var e,f=this._totalQuads-1-b-c,g=b*d,h=f*d,i=this._totalQuads-1-c;for(e=0;e<c;e++)this._quads[i+e]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,(this._totalQuads-1)*d);for(this._quadsReader.set(this._quadsReader.subarray(g,g+h),g+d*c),e=0;e<c;e++)this._setQuadToArray(a[e],b+e);this.dirty=!0},insertQuadFromIndex:function(a,b){if(a!==b){cc.assert(b>=0||b<this._totalQuads,cc._LogInfos.TextureAtlas_insertQuadFromIndex),cc.assert(a>=0||a<this._totalQuads,cc._LogInfos.TextureAtlas_insertQuadFromIndex_2);var c,d,e=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,f=this._quadsReader,g=f.subarray(a*e,e);a>b?(c=b*e,d=(a-b)*e,f.set(f.subarray(c,c+d),c+e),f.set(g,c)):(c=(a+1)*e,d=(b-a)*e,f.set(f.subarray(c,c+d),c-e),f.set(g,b*e)),this.dirty=!0}},removeQuadAtIndex:function(a){cc.assert(a<this._totalQuads,cc._LogInfos.TextureAtlas_removeQuadAtIndex);var b=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT;if(this._totalQuads--,this._quads.length=this._totalQuads,a!==this._totalQuads){var c=(a+1)*b,d=(this._totalQuads-a)*b;this._quadsReader.set(this._quadsReader.subarray(c,c+d),c-b)}this.dirty=!0},removeQuadsAtIndex:function(a,b){if(cc.assert(a+b<=this._totalQuads,cc._LogInfos.TextureAtlas_removeQuadsAtIndex),this._totalQuads-=b,a!==this._totalQuads){var c=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,d=(a+b)*c,e=(this._totalQuads-a)*c,f=a*c;this._quadsReader.set(this._quadsReader.subarray(d,d+e),f)}this.dirty=!0},removeAllQuads:function(){this._quads.length=0,this._totalQuads=0},_setDirty:function(a){this.dirty=a},resizeCapacity:function(a){if(a===this._capacity)return!0;var b=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,c=this._capacity;this._totalQuads=Math.min(this._totalQuads,a),this._capacity=0|a;var d,e=this._capacity,f=this._totalQuads;if(null===this._quads)for(this._quads=[],this._quadsArrayBuffer=new ArrayBuffer(b*e),this._quadsReader=new Uint8Array(this._quadsArrayBuffer),d=0;d<e;d++)this._quads=new cc.V3F_C4B_T2F_Quad(null,null,null,null,this._quadsArrayBuffer,d*b);else{var g,h,i=this._quads;if(e>c){for(g=[],h=new ArrayBuffer(b*e),d=0;d<f;d++)g[d]=new cc.V3F_C4B_T2F_Quad(i[d].tl,i[d].bl,i[d].tr,i[d].br,h,d*b);for(;d<e;d++)g[d]=new cc.V3F_C4B_T2F_Quad(null,null,null,null,h,d*b);this._quadsReader=new Uint8Array(h),this._quads=g,this._quadsArrayBuffer=h}else{var j=Math.max(f,e);for(g=[],h=new ArrayBuffer(b*e),d=0;d<j;d++)g[d]=new cc.V3F_C4B_T2F_Quad(i[d].tl,i[d].bl,i[d].tr,i[d].br,h,d*b);this._quadsReader=new Uint8Array(h),this._quads=g,this._quadsArrayBuffer=h}}if(null===this._indices)this._indices=new Uint16Array(6*e);else if(e>c){var k=new Uint16Array(6*e);k.set(this._indices,0),this._indices=k}else this._indices=this._indices.subarray(0,6*e);return this._setupIndices(),this._mapBuffers(),this.dirty=!0,!0},increaseTotalQuadsWith:function(a){this._totalQuads+=a},moveQuadsFromIndex:function(a,b,c){if(void 0===c){if(c=b,b=this._totalQuads-a,cc.assert(c+(this._totalQuads-a)<=this._capacity,cc._LogInfos.TextureAtlas_moveQuadsFromIndex),0===b)return}else if(cc.assert(c+b<=this._totalQuads,cc._LogInfos.TextureAtlas_moveQuadsFromIndex_2),cc.assert(a<this._totalQuads,cc._LogInfos.TextureAtlas_moveQuadsFromIndex_3),a===c)return;var d,e,f=cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,g=a*f,h=b*f,i=this._quadsReader,j=i.subarray(g,g+h),k=c*f;c<a?(d=(a-c)*f,e=c*f,i.set(i.subarray(e,e+d),e+h)):(d=(c-a)*f,e=(a+b)*f,i.set(i.subarray(e,e+d),g)),i.set(j,k),this.dirty=!0},fillWithEmptyQuadsFromIndex:function(a,b){for(var c=b*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,d=new Uint8Array(this._quadsArrayBuffer,a*cc.V3F_C4B_T2F_Quad.BYTES_PER_ELEMENT,c),e=0;e<c;e++)d[e]=0},drawQuads:function(){this.drawNumberOfQuads(this._totalQuads,0)},_releaseBuffer:function(){var a=cc._renderContext;this._buffersVBO&&(this._buffersVBO[0]&&a.deleteBuffer(this._buffersVBO[0]),this._buffersVBO[1]&&a.deleteBuffer(this._buffersVBO[1])),this._quadsWebBuffer&&a.deleteBuffer(this._quadsWebBuffer)}});var _p=cc.TextureAtlas.prototype;_p.totalQuads,cc.defineGetterSetter(_p,"totalQuads",_p.getTotalQuads),_p.capacity,cc.defineGetterSetter(_p,"capacity",_p.getCapacity),_p.quads,cc.defineGetterSetter(_p,"quads",_p.getQuads,_p.setQuads),cc.TextureAtlas.create=function(a,b){return new cc.TextureAtlas(a,b)},cc.TextureAtlas.createWithTexture=cc.TextureAtlas.create,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(cc.assert(cc.isFunction(cc._tmp.WebGLTextureAtlas),cc._LogInfos.MissingFile,"TexturesWebGL.js"),cc._tmp.WebGLTextureAtlas(),delete cc._tmp.WebGLTextureAtlas)}),cc.assert(cc.isFunction(cc._tmp.PrototypeTextureAtlas),cc._LogInfos.MissingFile,"TexturesPropertyDefine.js"),cc._tmp.PrototypeTextureAtlas(),delete cc._tmp.PrototypeTextureAtlas,cc.PI2=2*Math.PI,cc.DrawingPrimitiveCanvas=cc.Class.extend({_cacheArray:[],_renderContext:null,ctor:function(a){this._renderContext=a},drawPoint:function(a,b){b||(b=1);var c=cc.view.getScaleX(),d=cc.view.getScaleY(),e=cc.p(a.x*c,a.y*d),f=this._renderContext.getContext();f.beginPath(),f.arc(e.x,-e.y,b*c,0,2*Math.PI,!1),f.closePath(),f.fill()},drawPoints:function(a,b,c){if(null!=a){c||(c=1);var d=this._renderContext.getContext(),e=cc.view.getScaleX(),f=cc.view.getScaleY();d.beginPath();for(var g=0,h=a.length;g<h;g++)d.arc(a[g].x*e,-a[g].y*f,c*e,0,2*Math.PI,!1);d.closePath(),d.fill()}},drawLine:function(a,b){var c=this._renderContext.getContext();cc.view.getScaleX(),cc.view.getScaleY();c.beginPath(),c.moveTo(a.x,-a.y),c.lineTo(b.x,-b.y),c.closePath(),c.stroke()},drawRect:function(a,b){this.drawLine(cc.p(a.x,a.y),cc.p(b.x,a.y)),this.drawLine(cc.p(b.x,a.y),cc.p(b.x,b.y)),this.drawLine(cc.p(b.x,b.y),cc.p(a.x,b.y)),this.drawLine(cc.p(a.x,b.y),cc.p(a.x,a.y))},drawSolidRect:function(a,b,c){var d=[a,cc.p(b.x,a.y),b,cc.p(a.x,b.y)];this.drawSolidPoly(d,4,c)},drawPoly:function(a,b,c,d){if(d=d||!1,null!=a){if(a.length<3)throw new Error("Polygon's point must greater than 2");var e=a[0],f=this._renderContext.getContext();cc.view.getScaleX(),cc.view.getScaleY();f.beginPath(),f.moveTo(e.x,-e.y);for(var g=1,h=a.length;g<h;g++)f.lineTo(a[g].x,-a[g].y);c&&f.closePath(),d?f.fill():f.stroke()}},drawSolidPoly:function(a,b,c){this.setDrawColor(c.r,c.g,c.b,c.a),this.drawPoly(a,b,!0,!0)},drawCircle:function(a,b,c,d,e){e=e||!1;var f=this._renderContext.getContext();cc.view.getScaleX(),cc.view.getScaleY();f.beginPath();var g=c-2*Math.PI;f.arc(0|a.x,0|-a.y,b,-c,-g,!1),e&&f.lineTo(0|a.x,0|-a.y),f.stroke()},drawQuadBezier:function(a,b,c,d){var e=this._cacheArray;e.length=0;for(var f=0,g=0;g<d;g++){var h=Math.pow(1-f,2)*a.x+2*(1-f)*f*b.x+f*f*c.x,i=Math.pow(1-f,2)*a.y+2*(1-f)*f*b.y+f*f*c.y;e.push(cc.p(h,i)),f+=1/d}e.push(cc.p(c.x,c.y)),this.drawPoly(e,d+1,!1,!1)},drawCubicBezier:function(a,b,c,d,e){var f=this._cacheArray;f.length=0;for(var g=0,h=0;h<e;h++){var i=Math.pow(1-g,3)*a.x+3*Math.pow(1-g,2)*g*b.x+3*(1-g)*g*g*c.x+g*g*g*d.x,j=Math.pow(1-g,3)*a.y+3*Math.pow(1-g,2)*g*b.y+3*(1-g)*g*g*c.y+g*g*g*d.y;f.push(cc.p(i,j)),g+=1/e}f.push(cc.p(d.x,d.y)),this.drawPoly(f,e+1,!1,!1)},drawCatmullRom:function(a,b){this.drawCardinalSpline(a,.5,b)},drawCardinalSpline:function(a,b,c){cc._renderContext.setStrokeStyle("rgba(255,255,255,1)");var d=this._cacheArray;d.length=0;for(var e,f,g=1/a.length,h=0;h<c+1;h++){var i=h/c;1===i?(e=a.length-1,f=1):(e=0|i/g,f=(i-g*e)/g);var j=cc.CardinalSplineAt(cc.getControlPointAt(a,e-1),cc.getControlPointAt(a,e-0),cc.getControlPointAt(a,e+1),cc.getControlPointAt(a,e+2),b,f);d.push(j)}this.drawPoly(d,c+1,!1,!1)},drawImage:function(a,b,c,d,e){var f=arguments.length,g=this._renderContext.getContext();switch(f){case 2:var h=a.height;g.drawImage(a,b.x,-(b.y+h));break;case 3:g.drawImage(a,b.x,-(b.y+c.height),c.width,c.height);break;case 5:g.drawImage(a,b.x,b.y,c.width,c.height,d.x,-(d.y+e.height),e.width,e.height);break;default:throw new Error("Argument must be non-nil")}},drawStar:function(a,b,c){var d=a||this._renderContext,e=d.getContext(),f="rgba("+(0|c.r)+","+(0|c.g)+","+(0|c.b);d.setFillStyle(f+",1)");var g=b/10;e.beginPath(),e.moveTo(-b,b),e.lineTo(0,g),e.lineTo(b,b),e.lineTo(g,0),e.lineTo(b,-b),e.lineTo(0,-g),e.lineTo(-b,-b),e.lineTo(-g,0),e.lineTo(-b,b),e.closePath(),e.fill();var h=e.createRadialGradient(0,0,g,0,0,b);h.addColorStop(0,f+", 1)"),h.addColorStop(.3,f+", 0.8)"),h.addColorStop(1,f+", 0.0)"),d.setFillStyle(h),e.beginPath();var i=0,j=cc.PI2;e.arc(0,0,b-g,i,j,!1),e.closePath(),e.fill()},drawColorBall:function(a,b,c){var d=a||this._renderContext,e=d.getContext();b*=cc.view.getScaleX();var f="rgba("+(0|c.r)+","+(0|c.g)+","+(0|c.b),g=b/10,h=e.createRadialGradient(0,0,g,0,0,b);h.addColorStop(0,f+", 1)"),h.addColorStop(.3,f+", 0.8)"),h.addColorStop(.6,f+", 0.4)"),h.addColorStop(1,f+", 0.0)"),d.setFillStyle(h),e.beginPath();var i=0,j=cc.PI2;e.arc(0,0,b,i,j,!1),e.closePath(),e.fill()},fillText:function(a,b,c){this._renderContext.getContext().fillText(a,b,-c)},setDrawColor:function(a,b,c,d){this._renderContext.setFillStyle("rgba("+a+","+b+","+c+","+d/255+")"),this._renderContext.setStrokeStyle("rgba("+a+","+b+","+c+","+d/255+")")},setPointSize:function(a){},setLineWidth:function(a){this._renderContext.getContext().lineWidth=a*cc.view.getScaleX()}});cc._LogInfos={ActionManager_addAction:"cc.ActionManager.addAction(): action must be non-null",ActionManager_removeAction:"cocos2d: removeAction: Target not found",ActionManager_removeActionByTag:"cc.ActionManager.removeActionByTag(): an invalid tag",ActionManager_removeActionByTag_2:"cc.ActionManager.removeActionByTag(): target must be non-null",ActionManager_getActionByTag:"cc.ActionManager.getActionByTag(): an invalid tag",ActionManager_getActionByTag_2:"cocos2d : getActionByTag(tag = %s): Action not found",configuration_dumpInfo:"cocos2d: **** WARNING **** CC_ENABLE_PROFILERS is defined. Disable it when you finish profiling (from ccConfig.js)",configuration_loadConfigFile:"Expected 'data' dict, but not found. Config file: %s",configuration_loadConfigFile_2:"Please load the resource first : %s",Director_resume:"cocos2d: Director: Error in gettimeofday",Director_setProjection:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel:"cocos2d: Director: unrecognized projection",Director_popToSceneStackLevel_2:"cocos2d: Director: Error in gettimeofday",Director_popScene:"running scene should not null",Director_pushScene:"the scene should not null",arrayVerifyType:"element type is wrong!",Scheduler_scheduleCallbackForTarget:"CCSheduler#scheduleCallback. Callback already scheduled. Updating interval from:%s to %s",Scheduler_scheduleCallbackForTarget_2:"cc.scheduler.scheduleCallbackForTarget(): callback_fn should be non-null.",Scheduler_scheduleCallbackForTarget_3:"cc.scheduler.scheduleCallbackForTarget(): target should be non-null.",Scheduler_pauseTarget:"cc.Scheduler.pauseTarget():target should be non-null",Scheduler_resumeTarget:"cc.Scheduler.resumeTarget():target should be non-null",Scheduler_isTargetPaused:"cc.Scheduler.isTargetPaused():target should be non-null",Node_getZOrder:"getZOrder is deprecated. Please use getLocalZOrder instead.",Node_setZOrder:"setZOrder is deprecated. Please use setLocalZOrder instead.",Node_getRotation:"RotationX != RotationY. Don't know which one to return",Node_getScale:"ScaleX != ScaleY. Don't know which one to return",Node_addChild:"An Node can't be added as a child of itself.",Node_addChild_2:"child already added. It can't be added again",Node_addChild_3:"child must be non-null",Node_removeFromParentAndCleanup:"removeFromParentAndCleanup is deprecated. Use removeFromParent instead",Node_boundingBox:"boundingBox is deprecated. Use getBoundingBox instead",Node_removeChildByTag:"argument tag is an invalid tag",Node_removeChildByTag_2:"cocos2d: removeChildByTag(tag = %s): child not found!",Node_removeAllChildrenWithCleanup:"removeAllChildrenWithCleanup is deprecated. Use removeAllChildren instead",Node_stopActionByTag:"cc.Node.stopActionBy(): argument tag an invalid tag",Node_getActionByTag:"cc.Node.getActionByTag(): argument tag is an invalid tag",Node_resumeSchedulerAndActions:"resumeSchedulerAndActions is deprecated, please use resume instead.",Node_pauseSchedulerAndActions:"pauseSchedulerAndActions is deprecated, please use pause instead.",Node__arrayMakeObjectsPerformSelector:"Unknown callback function",Node_reorderChild:"child must be non-null",Node_runAction:"cc.Node.runAction(): action must be non-null",Node_schedule:"callback function must be non-null",Node_schedule_2:"interval must be positive",Node_initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",AtlasNode_updateAtlasValues:"cc.AtlasNode.updateAtlasValues(): Shall be overridden in subclasses",AtlasNode_initWithTileFile:"",AtlasNode__initWithTexture:"cocos2d: Could not initialize cc.AtlasNode. Invalid Texture.",_EventListenerKeyboard_checkAvailable:"cc._EventListenerKeyboard.checkAvailable(): Invalid EventListenerKeyboard!",_EventListenerTouchOneByOne_checkAvailable:"cc._EventListenerTouchOneByOne.checkAvailable(): Invalid EventListenerTouchOneByOne!",_EventListenerTouchAllAtOnce_checkAvailable:"cc._EventListenerTouchAllAtOnce.checkAvailable(): Invalid EventListenerTouchAllAtOnce!",_EventListenerAcceleration_checkAvailable:"cc._EventListenerAcceleration.checkAvailable(): _onAccelerationEvent must be non-nil",EventListener_create:"Invalid parameter.",__getListenerID:"Don't call this method if the event is for touch.",eventManager__forceAddEventListener:"Invalid scene graph priority!",eventManager_addListener:"0 priority is forbidden for fixed priority since it's used for scene graph based priority.",eventManager_removeListeners:"Invalid listener type!",eventManager_setPriority:"Can't set fixed priority with scene graph based listener.",eventManager_addListener_2:"Invalid parameters.",eventManager_addListener_3:"listener must be a cc.EventListener object when adding a fixed priority listener",eventManager_addListener_4:"The listener has been registered, please don't register it again.",LayerMultiplex_initWithLayers:"parameters should not be ending with null in Javascript",LayerMultiplex_switchTo:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_switchToAndReleaseMe:"Invalid index in MultiplexLayer switchTo message",LayerMultiplex_addLayer:"cc.Layer.addLayer(): layer should be non-null",EGLView_setDesignResolutionSize:"Resolution not valid",EGLView_setDesignResolutionSize_2:"should set resolutionPolicy",inputManager_handleTouchesBegin:"The touches is more than MAX_TOUCHES, nUnusedIndex = %s",swap:"cc.swap is being modified from original macro, please check usage",checkGLErrorDebug:"WebGL error %s",animationCache__addAnimationsWithDictionary:"cocos2d: cc.AnimationCache: No animations were found in provided dictionary.",animationCache__addAnimationsWithDictionary_2:"cc.AnimationCache. Invalid animation format",animationCache_addAnimations:"cc.AnimationCache.addAnimations(): File could not be found",animationCache__parseVersion1:"cocos2d: cc.AnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",animationCache__parseVersion1_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache__parseVersion1_3:"cocos2d: cc.AnimationCache: None of the frames for animation '%s' were found in the cc.SpriteFrameCache. Animation is not being added to the Animation Cache.",animationCache__parseVersion1_4:"cocos2d: cc.AnimationCache: An animation in your dictionary refers to a frame which is not in the cc.SpriteFrameCache. Some or all of the frames for the animation '%s' may be missing.",animationCache__parseVersion2:"cocos2d: CCAnimationCache: Animation '%s' found in dictionary without any frames - cannot add to animation cache.",animationCache__parseVersion2_2:"cocos2d: cc.AnimationCache: Animation '%s' refers to frame '%s' which is not currently in the cc.SpriteFrameCache. This frame will not be added to the animation.",animationCache_addAnimations_2:"cc.AnimationCache.addAnimations(): Invalid texture file name",Sprite_reorderChild:"cc.Sprite.reorderChild(): this child is not in children list",Sprite_ignoreAnchorPointForPosition:"cc.Sprite.ignoreAnchorPointForPosition(): it is invalid in cc.Sprite when using SpriteBatchNode",Sprite_setDisplayFrameWithAnimationName:"cc.Sprite.setDisplayFrameWithAnimationName(): Frame not found",Sprite_setDisplayFrameWithAnimationName_2:"cc.Sprite.setDisplayFrameWithAnimationName(): Invalid frame index",Sprite_setDisplayFrame:"setDisplayFrame is deprecated, please use setSpriteFrame instead.",Sprite__updateBlendFunc:"cc.Sprite._updateBlendFunc(): _updateBlendFunc doesn't work when the sprite is rendered using a cc.CCSpriteBatchNode",Sprite_initWithSpriteFrame:"cc.Sprite.initWithSpriteFrame(): spriteFrame should be non-null",Sprite_initWithSpriteFrameName:"cc.Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null",Sprite_initWithSpriteFrameName1:" is null, please check.",Sprite_initWithFile:"cc.Sprite.initWithFile(): filename should be non-null",Sprite_setDisplayFrameWithAnimationName_3:"cc.Sprite.setDisplayFrameWithAnimationName(): animationName must be non-null",Sprite_reorderChild_2:"cc.Sprite.reorderChild(): child should be non-null",Sprite_addChild:"cc.Sprite.addChild(): cc.Sprite only supports cc.Sprites as children when using cc.SpriteBatchNode",Sprite_addChild_2:"cc.Sprite.addChild(): cc.Sprite only supports a sprite using same texture as children when using cc.SpriteBatchNode",Sprite_addChild_3:"cc.Sprite.addChild(): child should be non-null",Sprite_setTexture:"cc.Sprite.texture setter: Batched sprites should use the same texture as the batchnode",Sprite_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_4:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",Sprite_addChild_5:"cc.SpriteBatchNode.addChild(): cc.Sprite is not using the same texture",Sprite_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",Sprite_setSpriteFrame:"Invalid spriteFrameName",Sprite_setTexture_2:"Invalid argument: cc.Sprite.texture setter expects a CCTexture2D.",Sprite_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",Sprite_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",SpriteBatchNode_addSpriteWithoutQuad:"cc.SpriteBatchNode.addQuadFromSprite(): SpriteBatchNode only supports cc.Sprites as children",SpriteBatchNode_increaseAtlasCapacity:"cocos2d: CCSpriteBatchNode: resizing TextureAtlas capacity from %s to %s.",SpriteBatchNode_increaseAtlasCapacity_2:"cocos2d: WARNING: Not enough memory to resize the atlas",SpriteBatchNode_reorderChild:"cc.SpriteBatchNode.addChild(): Child doesn't belong to Sprite",SpriteBatchNode_removeChild:"cc.SpriteBatchNode.addChild(): sprite batch node should contain the child",SpriteBatchNode_addSpriteWithoutQuad_2:"cc.SpriteBatchNode.addQuadFromSprite(): child should be non-null",SpriteBatchNode_reorderChild_2:"cc.SpriteBatchNode.addChild(): child should be non-null",spriteFrameCache__getFrameConfig:"cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist",spriteFrameCache_addSpriteFrames:"cocos2d: WARNING: an alias with name %s already exists",spriteFrameCache__checkConflict:"cocos2d: WARNING: Sprite frame: %s has already been added by another source, please fix name conflit",spriteFrameCache_getSpriteFrame:"cocos2d: cc.SpriteFrameCahce: Frame %s not found",spriteFrameCache__getFrameConfig_2:"Please load the resource first : %s",spriteFrameCache_addSpriteFrames_2:"cc.SpriteFrameCache.addSpriteFrames(): plist should be non-null",spriteFrameCache_addSpriteFrames_3:"Argument must be non-nil",CCSpriteBatchNode_updateQuadFromSprite:"cc.SpriteBatchNode.updateQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_insertQuadFromSprite:"cc.SpriteBatchNode.insertQuadFromSprite(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_addChild:"cc.SpriteBatchNode.addChild(): cc.SpriteBatchNode only supports cc.Sprites as children",CCSpriteBatchNode_initWithTexture:"Sprite.initWithTexture(): Argument must be non-nil ",CCSpriteBatchNode_addChild_2:"cc.Sprite.addChild(): child should be non-null",CCSpriteBatchNode_setSpriteFrame:"Invalid spriteFrameName",CCSpriteBatchNode_setTexture:"Invalid argument: cc.Sprite texture setter expects a CCTexture2D.",CCSpriteBatchNode_updateQuadFromSprite_2:"cc.SpriteBatchNode.updateQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_insertQuadFromSprite_2:"cc.SpriteBatchNode.insertQuadFromSprite(): sprite should be non-null",CCSpriteBatchNode_addChild_3:"cc.SpriteBatchNode.addChild(): child should be non-null",TextureAtlas_initWithFile:"cocos2d: Could not open file: %s",TextureAtlas_insertQuad:"cc.TextureAtlas.insertQuad(): invalid totalQuads",TextureAtlas_initWithTexture:"cc.TextureAtlas.initWithTexture():texture should be non-null",TextureAtlas_updateQuad:"cc.TextureAtlas.updateQuad(): quad should be non-null",TextureAtlas_updateQuad_2:"cc.TextureAtlas.updateQuad(): Invalid index",TextureAtlas_insertQuad_2:"cc.TextureAtlas.insertQuad(): Invalid index",TextureAtlas_insertQuads:"cc.TextureAtlas.insertQuad(): Invalid index + amount",TextureAtlas_insertQuadFromIndex:"cc.TextureAtlas.insertQuadFromIndex(): Invalid newIndex",TextureAtlas_insertQuadFromIndex_2:"cc.TextureAtlas.insertQuadFromIndex(): Invalid fromIndex",TextureAtlas_removeQuadAtIndex:"cc.TextureAtlas.removeQuadAtIndex(): Invalid index",TextureAtlas_removeQuadsAtIndex:"cc.TextureAtlas.removeQuadsAtIndex(): index + amount out of bounds",TextureAtlas_moveQuadsFromIndex:"cc.TextureAtlas.moveQuadsFromIndex(): move is out of bounds",TextureAtlas_moveQuadsFromIndex_2:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid newIndex",TextureAtlas_moveQuadsFromIndex_3:"cc.TextureAtlas.moveQuadsFromIndex(): Invalid oldIndex",textureCache_addPVRTCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_addETCImage:"TextureCache:addPVRTCImage does not support on HTML5",textureCache_textureForKey:"textureForKey is deprecated. Please use getTextureForKey instead.",textureCache_addPVRImage:"addPVRImage does not support on HTML5",textureCache_addUIImage:"cocos2d: Couldn't add UIImage in TextureCache",textureCache_dumpCachedTextureInfo:"cocos2d: '%s' id=%s %s x %s",textureCache_dumpCachedTextureInfo_2:"cocos2d: '%s' id= HTMLCanvasElement %s x %s",textureCache_dumpCachedTextureInfo_3:"cocos2d: TextureCache dumpDebugInfo: %s textures, HTMLCanvasElement for %s KB (%s MB)",textureCache_addUIImage_2:"cc.Texture.addUIImage(): image should be non-null",Texture2D_initWithETCFile:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData:"initWithPVRTCData does not support on HTML5",Texture2D_addImage:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithImage:"cocos2d: cc.Texture2D. Can't create Texture. UIImage is nil",Texture2D_initWithImage_2:"cocos2d: WARNING: Image (%s x %s) is bigger than the supported %s x %s",Texture2D_initWithString:"initWithString isn't supported on cocos2d-html5",Texture2D_initWithETCFile_2:"initWithETCFile does not support on HTML5",Texture2D_initWithPVRFile_2:"initWithPVRFile does not support on HTML5",Texture2D_initWithPVRTCData_2:"initWithPVRTCData does not support on HTML5",Texture2D_bitsPerPixelForFormat:"bitsPerPixelForFormat: %s, cannot give useful result, it's a illegal pixel format",Texture2D__initPremultipliedATextureWithImage:"cocos2d: cc.Texture2D: Using RGB565 texture since image has no alpha",Texture2D_addImage_2:"cc.Texture.addImage(): path should be non-null",Texture2D_initWithData:"NSInternalInconsistencyException",MissingFile:"Missing file: %s",radiansToDegress:"cc.radiansToDegress() should be called cc.radiansToDegrees()",RectWidth:"Rect width exceeds maximum margin: %s",RectHeight:"Rect height exceeds maximum margin: %s",EventManager__updateListeners:"If program goes here, there should be event in dispatch.",EventManager__updateListeners_2:"_inDispatch should be 1 here."},cc._logToWebPage=function(a){if(cc._canvas){var b=cc._logList,c=document;if(!b){var d=c.createElement("Div"),e=d.style;d.setAttribute("id","logInfoDiv"),cc._canvas.parentNode.appendChild(d),d.setAttribute("width","200"),d.setAttribute("height",cc._canvas.height),e.zIndex="99999",e.position="absolute",e.top="0",e.left="0",b=cc._logList=c.createElement("textarea");var f=b.style;b.setAttribute("rows","20"),b.setAttribute("cols","30"),b.setAttribute("disabled",!0),d.appendChild(b),f.backgroundColor="transparent",f.borderBottom="1px solid #cccccc",f.borderRightWidth="0px",f.borderLeftWidth="0px",f.borderTopWidth="0px",f.borderTopStyle="none",f.borderRightStyle="none",f.borderLeftStyle="none",f.padding="0px",f.margin=0}b.value=b.value+a+"\r\n",b.scrollTop=b.scrollHeight}},cc._formatString=function(a){if(!cc.isObject(a))return a;try{return JSON.stringify(a)}catch(a){return""}},cc._initDebugSetting=function(a){var b=cc.game;if(a!==b.DEBUG_MODE_NONE){var c;a>b.DEBUG_MODE_ERROR?(c=cc._logToWebPage.bind(cc),cc.error=function(){c("ERROR :  "+cc.formatStr.apply(cc,arguments))},cc.assert=function(a,b){if(!a&&b){for(var d=2;d<arguments.length;d++)b=b.replace(/(%s)|(%d)/,cc._formatString(arguments[d]));c("Assert: "+b)}},a!==b.DEBUG_MODE_ERROR_FOR_WEB_PAGE&&(cc.warn=function(){c("WARN :  "+cc.formatStr.apply(cc,arguments))}),a===b.DEBUG_MODE_INFO_FOR_WEB_PAGE&&(cc.log=function(){c(cc.formatStr.apply(cc,arguments))})):console&&console.log.apply&&(cc.error=Function.prototype.bind.call(console.error,console),console.assert?cc.assert=Function.prototype.bind.call(console.assert,console):cc.assert=function(a,b){if(!a&&b){for(var c=2;c<arguments.length;c++)b=b.replace(/(%s)|(%d)/,cc._formatString(arguments[c]));throw new Error(b)}},a!==b.DEBUG_MODE_ERROR&&(cc.warn=Function.prototype.bind.call(console.warn,console)),a===b.DEBUG_MODE_INFO&&(cc.log=Function.prototype.bind.call(console.log,console)))}};cc.HashElement=cc.Class.extend({actions:null,target:null,actionIndex:0,currentAction:null,currentActionSalvaged:!1,paused:!1,hh:null,ctor:function(){this.actions=[],this.target=null,this.actionIndex=0,this.currentAction=null,this.currentActionSalvaged=!1,this.paused=!1,this.hh=null}}),cc.ActionManager=cc.Class.extend({_hashTargets:null,_arrayTargets:null,_currentTarget:null,_currentTargetSalvaged:!1,_searchElementByTarget:function(a,b){for(var c=0;c<a.length;c++)if(b===a[c].target)return a[c];return null},ctor:function(){this._hashTargets={},this._arrayTargets=[],this._currentTarget=null,this._currentTargetSalvaged=!1},addAction:function(a,b,c){if(!a)throw new Error("cc.ActionManager.addAction(): action must be non-null");if(!b)throw new Error("cc.ActionManager.addAction(): action must be non-null");var d=this._hashTargets[b.__instanceId];d||(d=new cc.HashElement,d.paused=c,d.target=b,this._hashTargets[b.__instanceId]=d,this._arrayTargets.push(d)),this._actionAllocWithHashElement(d),d.actions.push(a),a.startWithTarget(b)},removeAllActions:function(){for(var a=this._arrayTargets,b=0;b<a.length;b++){var c=a[b];c&&this.removeAllActionsFromTarget(c.target,!0)}},removeAllActionsFromTarget:function(a,b){if(null!=a){var c=this._hashTargets[a.__instanceId];c&&(c.actions.indexOf(c.currentAction)===-1||c.currentActionSalvaged||(c.currentActionSalvaged=!0),c.actions.length=0,this._currentTarget!==c||b?this._deleteHashElement(c):this._currentTargetSalvaged=!0)}},removeAction:function(a){if(null!=a){var b=a.getOriginalTarget(),c=this._hashTargets[b.__instanceId];if(c){for(var d=0;d<c.actions.length;d++)if(c.actions[d]===a){c.actions.splice(d,1);break}}else cc.log(cc._LogInfos.ActionManager_removeAction)}},removeActionByTag:function(a,b){a===cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_addAction),cc.assert(b,cc._LogInfos.ActionManager_addAction);var c=this._hashTargets[b.__instanceId];if(c)for(var d=c.actions.length,e=0;e<d;++e){var f=c.actions[e];if(f&&f.getTag()===a&&f.getOriginalTarget()===b){this._removeActionAtIndex(e,c);break}}},getActionByTag:function(a,b){a===cc.ACTION_TAG_INVALID&&cc.log(cc._LogInfos.ActionManager_getActionByTag);var c=this._hashTargets[b.__instanceId];if(c){if(null!=c.actions)for(var d=0;d<c.actions.length;++d){var e=c.actions[d];if(e&&e.getTag()===a)return e}cc.log(cc._LogInfos.ActionManager_getActionByTag_2,a)}return null},numberOfRunningActionsInTarget:function(a){var b=this._hashTargets[a.__instanceId];return b&&b.actions?b.actions.length:0},pauseTarget:function(a){var b=this._hashTargets[a.__instanceId];b&&(b.paused=!0)},resumeTarget:function(a){var b=this._hashTargets[a.__instanceId];b&&(b.paused=!1)},pauseAllRunningActions:function(){for(var a=[],b=this._arrayTargets,c=0;c<b.length;c++){var d=b[c];d&&!d.paused&&(d.paused=!0,a.push(d.target))}return a},resumeTargets:function(a){if(a)for(var b=0;b<a.length;b++)a[b]&&this.resumeTarget(a[b])},purgeSharedManager:function(){cc.director.getScheduler().unscheduleUpdate(this)},_removeActionAtIndex:function(a,b){var c=b.actions[a];c!==b.currentAction||b.currentActionSalvaged||(b.currentActionSalvaged=!0),b.actions.splice(a,1),b.actionIndex>=a&&b.actionIndex--,0===b.actions.length&&(this._currentTarget===b?this._currentTargetSalvaged=!0:this._deleteHashElement(b))},_deleteHashElement:function(a){var b=!1;return a&&(this._hashTargets[a.target.__instanceId]&&(delete this._hashTargets[a.target.__instanceId],cc.arrayRemoveObject(this._arrayTargets,a),b=!0),a.actions=null,a.target=null),b},_actionAllocWithHashElement:function(a){null==a.actions&&(a.actions=[])},update:function(a){for(var b,c=this._arrayTargets,d=0;d<c.length;d++){if(this._currentTarget=c[d],b=this._currentTarget,!b.paused)for(b.actionIndex=0;b.actionIndex<(b.actions?b.actions.length:0);b.actionIndex++)if(b.currentAction=b.actions[b.actionIndex],b.currentAction){if(b.currentActionSalvaged=!1,b.currentAction.step(a*(b.currentAction._speedMethod?b.currentAction._speed:1)),b.currentActionSalvaged)b.currentAction=null;else if(b.currentAction.isDone()){b.currentAction.stop();var e=b.currentAction;b.currentAction=null,this.removeAction(e)}b.currentAction=null}this._currentTargetSalvaged&&0===b.actions.length&&this._deleteHashElement(b)&&d--}}}),cc.ACTION_TAG_INVALID=-1,cc.Action=cc.Class.extend({originalTarget:null,target:null,tag:cc.ACTION_TAG_INVALID,ctor:function(){this.originalTarget=null,this.target=null,this.tag=cc.ACTION_TAG_INVALID},copy:function(){return cc.log("copy is deprecated. Please use clone instead."),this.clone()},clone:function(){var a=new cc.Action;return a.originalTarget=null,a.target=null,a.tag=this.tag,a},isDone:function(){return!0},startWithTarget:function(a){this.originalTarget=a,this.target=a},stop:function(){this.target=null},step:function(a){cc.log("[Action step]. override me")},update:function(a){cc.log("[Action update]. override me")},getTarget:function(){return this.target},setTarget:function(a){this.target=a},getOriginalTarget:function(){return this.originalTarget},setOriginalTarget:function(a){this.originalTarget=a},getTag:function(){return this.tag},setTag:function(a){this.tag=a},retain:function(){},release:function(){}}),cc.action=function(){return new cc.Action},cc.Action.create=cc.action,cc.FiniteTimeAction=cc.Action.extend({_duration:0,ctor:function(){cc.Action.prototype.ctor.call(this),this._duration=0},getDuration:function(){return this._duration*(this._timesForRepeat||1)},setDuration:function(a){this._duration=a},reverse:function(){return cc.log("cocos2d: FiniteTimeAction#reverse: Implement me"),null},clone:function(){return new cc.FiniteTimeAction}}),cc.Speed=cc.Action.extend({_speed:0,_innerAction:null,ctor:function(a,b){cc.Action.prototype.ctor.call(this),this._speed=0,this._innerAction=null,a&&this.initWithAction(a,b)},getSpeed:function(){return this._speed},setSpeed:function(a){this._speed=a},initWithAction:function(a,b){if(!a)throw new Error("cc.Speed.initWithAction(): action must be non nil");return this._innerAction=a,this._speed=b,!0},clone:function(){var a=new cc.Speed;return a.initWithAction(this._innerAction.clone(),this._speed),a},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,a),this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},step:function(a){this._innerAction.step(a*this._speed)},isDone:function(){return this._innerAction.isDone()},reverse:function(){return new cc.Speed(this._innerAction.reverse(),this._speed)},setInnerAction:function(a){this._innerAction!==a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}}),cc.speed=function(a,b){return new cc.Speed(a,b)},cc.Speed.create=cc.speed,cc.Follow=cc.Action.extend({_followedNode:null,_boundarySet:!1,_boundaryFullyCovered:!1,_halfScreenSize:null,_fullScreenSize:null,_worldRect:null,leftBoundary:0,rightBoundary:0,topBoundary:0,bottomBoundary:0,ctor:function(a,b){cc.Action.prototype.ctor.call(this),this._followedNode=null,this._boundarySet=!1,this._boundaryFullyCovered=!1,this._halfScreenSize=null,this._fullScreenSize=null,this.leftBoundary=0,this.rightBoundary=0,this.topBoundary=0,this.bottomBoundary=0,this._worldRect=cc.rect(0,0,0,0),a&&(b?this.initWithTarget(a,b):this.initWithTarget(a))},clone:function(){var a=new cc.Follow,b=this._worldRect,c=new cc.Rect(b.x,b.y,b.width,b.height);return a.initWithTarget(this._followedNode,c),a},isBoundarySet:function(){return this._boundarySet},setBoudarySet:function(a){this._boundarySet=a},initWithTarget:function(a,b){if(!a)throw new Error("cc.Follow.initWithAction(): followedNode must be non nil");var c=this;b=b||cc.rect(0,0,0,0),c._followedNode=a,c._worldRect=b,c._boundarySet=!cc._rectEqualToZero(b),c._boundaryFullyCovered=!1;var d=cc.director.getWinSize();return c._fullScreenSize=cc.p(d.width,d.height),c._halfScreenSize=cc.pMult(c._fullScreenSize,.5),c._boundarySet&&(c.leftBoundary=-(b.x+b.width-c._fullScreenSize.x),c.rightBoundary=-b.x,c.topBoundary=-b.y,c.bottomBoundary=-(b.y+b.height-c._fullScreenSize.y),c.rightBoundary<c.leftBoundary&&(c.rightBoundary=c.leftBoundary=(c.leftBoundary+c.rightBoundary)/2),c.topBoundary<c.bottomBoundary&&(c.topBoundary=c.bottomBoundary=(c.topBoundary+c.bottomBoundary)/2),c.topBoundary===c.bottomBoundary&&c.leftBoundary===c.rightBoundary&&(c._boundaryFullyCovered=!0)),!0},step:function(a){var b=this._followedNode.x,c=this._followedNode.y;if(b=this._halfScreenSize.x-b,c=this._halfScreenSize.y-c,this.target._renderCmd._dirtyFlag=0,this._boundarySet){if(this._boundaryFullyCovered)return;this.target.setPosition(cc.clampf(b,this.leftBoundary,this.rightBoundary),cc.clampf(c,this.bottomBoundary,this.topBoundary))}else this.target.setPosition(b,c)},isDone:function(){return!this._followedNode.running},stop:function(){this.target=null,cc.Action.prototype.stop.call(this)}}),cc.follow=function(a,b){return new cc.Follow(a,b)},cc.Follow.create=cc.follow,cc.ActionInterval=cc.FiniteTimeAction.extend({_elapsed:0,_firstTick:!1,_easeList:null,_timesForRepeat:1,_repeatForever:!1,_repeatMethod:!1,_speed:1,_speedMethod:!1,ctor:function(a){this._speed=1,this._timesForRepeat=1,this._repeatForever=!1,this.MAX_VALUE=2,this._repeatMethod=!1,this._speedMethod=!1,cc.FiniteTimeAction.prototype.ctor.call(this),void 0!==a&&this.initWithDuration(a)},getElapsed:function(){return this._elapsed},initWithDuration:function(a){return this._duration=0===a?cc.FLT_EPSILON:a,this._elapsed=0,this._firstTick=!0,!0},isDone:function(){return this._elapsed>=this._duration},_cloneDecoration:function(a){a._repeatForever=this._repeatForever,a._speed=this._speed,a._timesForRepeat=this._timesForRepeat,a._easeList=this._easeList,a._speedMethod=this._speedMethod,a._repeatMethod=this._repeatMethod},_reverseEaseList:function(a){if(this._easeList){a._easeList=[];for(var b=0;b<this._easeList.length;b++)a._easeList.push(this._easeList[b].reverse())}},clone:function(){var a=new cc.ActionInterval(this._duration);return this._cloneDecoration(a),a},easing:function(a){this._easeList?this._easeList.length=0:this._easeList=[];for(var b=0;b<arguments.length;b++)this._easeList.push(arguments[b]);return this},_computeEaseTime:function(a){var b=this._easeList;if(!b||0===b.length)return a;for(var c=0,d=b.length;c<d;c++)a=b[c].easing(a);return a},step:function(a){this._firstTick?(this._firstTick=!1,this._elapsed=0):this._elapsed+=a;var b=this._elapsed/(this._duration>1.192092896e-7?this._duration:1.192092896e-7);b=1>b?b:1,this.update(b>0?b:0),this._repeatMethod&&this._timesForRepeat>1&&this.isDone()&&(this._repeatForever||this._timesForRepeat--,this.startWithTarget(this.target),this.step(this._elapsed-this._duration))},startWithTarget:function(a){cc.Action.prototype.startWithTarget.call(this,a),this._elapsed=0,this._firstTick=!0},reverse:function(){return cc.log("cc.IntervalAction: reverse not implemented."),null},setAmplitudeRate:function(a){cc.log("cc.ActionInterval.setAmplitudeRate(): it should be overridden in subclass.")},getAmplitudeRate:function(){return cc.log("cc.ActionInterval.getAmplitudeRate(): it should be overridden in subclass."),0},speed:function(a){return a<=0?(cc.log("The speed parameter error"),this):(this._speedMethod=!0,this._speed*=a,this)},getSpeed:function(){return this._speed},setSpeed:function(a){return this._speed=a,this},repeat:function(a){return a=Math.round(a),isNaN(a)||a<1?(cc.log("The repeat parameter error"),this):(this._repeatMethod=!0,this._timesForRepeat*=a,this)},repeatForever:function(){return this._repeatMethod=!0,this._timesForRepeat=this.MAX_VALUE,this._repeatForever=!0,this}}),cc.actionInterval=function(a){return new cc.ActionInterval(a)},cc.ActionInterval.create=cc.actionInterval,cc.Sequence=cc.ActionInterval.extend({_actions:null,_split:null,_last:0,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this),this._actions=[];var b=a instanceof Array?a:arguments,c=b.length-1;if(c>=0&&null==b[c]&&cc.log("parameters should not be ending with null in Javascript"),c>=0){for(var d,e=b[0],f=1;f<c;f++)b[f]&&(d=e,e=cc.Sequence._actionOneTwo(d,b[f]));this.initWithTwoActions(e,b[c])}},initWithTwoActions:function(a,b){if(!a||!b)throw new Error("cc.Sequence.initWithTwoActions(): arguments must all be non nil");var c=a._duration+b._duration;return this.initWithDuration(c),this._actions[0]=a,this._actions[1]=b,!0},clone:function(){var a=new cc.Sequence;return this._cloneDecoration(a),a.initWithTwoActions(this._actions[0].clone(),this._actions[1].clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._split=this._actions[0]._duration/this._duration,this._last=-1},stop:function(){this._last!==-1&&this._actions[this._last].stop(),cc.Action.prototype.stop.call(this)},update:function(a){var b,c,d=0,e=this._split,f=this._actions,g=this._last;a=this._computeEaseTime(a),a<e?(b=0!==e?a/e:1,0===d&&1===g&&(f[1].update(0),f[1].stop())):(d=1,b=1===e?1:(a-e)/(1-e),g===-1&&(f[0].startWithTarget(this.target),f[0].update(1),f[0].stop()),g||(f[0].update(1),f[0].stop())),c=f[d],g===d&&c.isDone()||(g!==d&&c.startWithTarget(this.target),b*=c._timesForRepeat,c.update(b>1?b%1:b),this._last=d)},reverse:function(){var a=cc.Sequence._actionOneTwo(this._actions[1].reverse(),this._actions[0].reverse());return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.sequence=function(a){var b=a instanceof Array?a:arguments;b.length>0&&null==b[b.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var c,d,e,f;b&&b.length>0;)for(d=Array.prototype.shift.call(b),f=d._timesForRepeat||1,d._repeatMethod=!1,d._timesForRepeat=1,e=0,c||(c=d,e=1),e;e<f;e++)c=cc.Sequence._actionOneTwo(c,d);return c},cc.Sequence.create=cc.sequence,cc.Sequence._actionOneTwo=function(a,b){var c=new cc.Sequence;return c.initWithTwoActions(a,b),c},cc.Repeat=cc.ActionInterval.extend({_times:0,_total:0,_nextDt:0,_actionInstant:!1,_innerAction:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this),void 0!==b&&this.initWithAction(a,b)},initWithAction:function(a,b){var c=a._duration*b;return!!this.initWithDuration(c)&&(this._times=b,this._innerAction=a,a instanceof cc.ActionInstant&&(this._actionInstant=!0,this._times-=1),this._total=0,!0)},clone:function(){var a=new cc.Repeat;return this._cloneDecoration(a),a.initWithAction(this._innerAction.clone(),this._times),a},startWithTarget:function(a){this._total=0,this._nextDt=this._innerAction._duration/this._duration,cc.ActionInterval.prototype.startWithTarget.call(this,a),this._innerAction.startWithTarget(a)},stop:function(){this._innerAction.stop(),cc.Action.prototype.stop.call(this)},update:function(a){a=this._computeEaseTime(a);var b=this._innerAction,c=this._duration,d=this._times,e=this._nextDt;if(a>=e){for(;a>e&&this._total<d;)b.update(1),this._total++,b.stop(),b.startWithTarget(this.target),e+=b._duration/c,this._nextDt=e;a>=1&&this._total<d&&this._total++,this._actionInstant||(this._total===d?(b.update(1),b.stop()):b.update(a-(e-b._duration/c)))}else b.update(a*d%1)},isDone:function(){return this._total===this._times},reverse:function(){var a=new cc.Repeat(this._innerAction.reverse(),this._times);return this._cloneDecoration(a),this._reverseEaseList(a),a},setInnerAction:function(a){this._innerAction!==a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}}),cc.repeat=function(a,b){return new cc.Repeat(a,b)},cc.Repeat.create=cc.repeat,cc.RepeatForever=cc.ActionInterval.extend({_innerAction:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this),this._innerAction=null,a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw new Error("cc.RepeatForever.initWithAction(): action must be non null");return this._innerAction=a,!0},clone:function(){var a=new cc.RepeatForever;return this._cloneDecoration(a),a.initWithAction(this._innerAction.clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._innerAction.startWithTarget(a)},step:function(a){var b=this._innerAction;b.step(a),b.isDone()&&(b.startWithTarget(this.target),b.step(b.getElapsed()-b._duration))},isDone:function(){return!1},reverse:function(){var a=new cc.RepeatForever(this._innerAction.reverse());return this._cloneDecoration(a),this._reverseEaseList(a),a},setInnerAction:function(a){this._innerAction!==a&&(this._innerAction=a)},getInnerAction:function(){return this._innerAction}}),cc.repeatForever=function(a){return new cc.RepeatForever(a)},cc.RepeatForever.create=cc.repeatForever,cc.Spawn=cc.ActionInterval.extend({_one:null,_two:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this),this._one=null,this._two=null;var b=a instanceof Array?a:arguments,c=b.length-1;if(c>=0&&null==b[c]&&cc.log("parameters should not be ending with null in Javascript"),c>=0){for(var d,e=b[0],f=1;f<c;f++)b[f]&&(d=e,e=cc.Spawn._actionOneTwo(d,b[f]));this.initWithTwoActions(e,b[c])}},initWithTwoActions:function(a,b){if(!a||!b)throw new Error("cc.Spawn.initWithTwoActions(): arguments must all be non null");var c=!1,d=a._duration,e=b._duration;return this.initWithDuration(Math.max(d,e))&&(this._one=a,this._two=b,d>e?this._two=cc.Sequence._actionOneTwo(b,cc.delayTime(d-e)):d<e&&(this._one=cc.Sequence._actionOneTwo(a,cc.delayTime(e-d))),c=!0),c},clone:function(){var a=new cc.Spawn;return this._cloneDecoration(a),a.initWithTwoActions(this._one.clone(),this._two.clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._one.startWithTarget(a),this._two.startWithTarget(a)},stop:function(){this._one.stop(),this._two.stop(),cc.Action.prototype.stop.call(this)},update:function(a){a=this._computeEaseTime(a),this._one&&this._one.update(a),this._two&&this._two.update(a)},reverse:function(){var a=cc.Spawn._actionOneTwo(this._one.reverse(),this._two.reverse());return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.spawn=function(a){var b=a instanceof Array?a:arguments;b.length>0&&null==b[b.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var c=b[0],d=1;d<b.length;d++)null!=b[d]&&(c=cc.Spawn._actionOneTwo(c,b[d]));return c},cc.Spawn.create=cc.spawn,cc.Spawn._actionOneTwo=function(a,b){var c=new cc.Spawn;return c.initWithTwoActions(a,b),c},cc.RotateTo=cc.ActionInterval.extend({_dstAngleX:0,_startAngleX:0,_diffAngleX:0,_dstAngleY:0,_startAngleY:0,_diffAngleY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._dstAngleX=b||0,this._dstAngleY=c||this._dstAngleX,!0)},clone:function(){var a=new cc.RotateTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._dstAngleX,this._dstAngleY),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.rotationX%360,c=this._dstAngleX-b;c>180&&(c-=360),c<-180&&(c+=360),this._startAngleX=b,this._diffAngleX=c,this._startAngleY=a.rotationY%360;var d=this._dstAngleY-this._startAngleY;d>180&&(d-=360),d<-180&&(d+=360),this._diffAngleY=d},reverse:function(){cc.log("cc.RotateTo.reverse(): it should be overridden in subclass.")},update:function(a){a=this._computeEaseTime(a),this.target&&(this.target.rotationX=this._startAngleX+this._diffAngleX*a,this.target.rotationY=this._startAngleY+this._diffAngleY*a)}}),cc.rotateTo=function(a,b,c){return new cc.RotateTo(a,b,c)},cc.RotateTo.create=cc.rotateTo,cc.RotateBy=cc.ActionInterval.extend({_angleX:0,_startAngleX:0,_angleY:0,_startAngleY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._angleX=b||0,this._angleY=c||this._angleX,!0)},clone:function(){var a=new cc.RotateBy;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._angleX,this._angleY),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._startAngleX=a.rotationX,this._startAngleY=a.rotationY},update:function(a){a=this._computeEaseTime(a),this.target&&(this.target.rotationX=this._startAngleX+this._angleX*a,this.target.rotationY=this._startAngleY+this._angleY*a)},reverse:function(){var a=new cc.RotateBy(this._duration,-this._angleX,-this._angleY);return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.rotateBy=function(a,b,c){return new cc.RotateBy(a,b,c)},cc.RotateBy.create=cc.rotateBy,cc.MoveBy=cc.ActionInterval.extend({_positionDelta:null,_startPosition:null,_previousPosition:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),this._positionDelta=cc.p(0,0),this._startPosition=cc.p(0,0),this._previousPosition=cc.p(0,0),void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(void 0!==b.x&&(c=b.y,b=b.x),this._positionDelta.x=b,this._positionDelta.y=c,!0)},clone:function(){var a=new cc.MoveBy;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._positionDelta),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX(),c=a.getPositionY();this._previousPosition.x=b,this._previousPosition.y=c,this._startPosition.x=b,this._startPosition.y=c},update:function(a){if(a=this._computeEaseTime(a),this.target){var b=this._positionDelta.x*a,c=this._positionDelta.y*a,d=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var e=this.target.getPositionX(),f=this.target.getPositionY(),g=this._previousPosition;d.x=d.x+e-g.x,d.y=d.y+f-g.y,b+=d.x,c+=d.y,g.x=b,g.y=c,this.target.setPosition(b,c)}else this.target.setPosition(d.x+b,d.y+c)}},reverse:function(){var a=new cc.MoveBy(this._duration,cc.p(-this._positionDelta.x,-this._positionDelta.y));return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.moveBy=function(a,b,c){return new cc.MoveBy(a,b,c)},cc.MoveBy.create=cc.moveBy,cc.MoveTo=cc.MoveBy.extend({_endPosition:null,ctor:function(a,b,c){cc.MoveBy.prototype.ctor.call(this),this._endPosition=cc.p(0,0),void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return!!cc.MoveBy.prototype.initWithDuration.call(this,a,b,c)&&(void 0!==b.x&&(c=b.y,b=b.x),this._endPosition.x=b,this._endPosition.y=c,!0)},clone:function(){var a=new cc.MoveTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._endPosition),a},startWithTarget:function(a){cc.MoveBy.prototype.startWithTarget.call(this,a),this._positionDelta.x=this._endPosition.x-a.getPositionX(),this._positionDelta.y=this._endPosition.y-a.getPositionY()}}),cc.moveTo=function(a,b,c){return new cc.MoveTo(a,b,c)},cc.MoveTo.create=cc.moveTo,cc.SkewTo=cc.ActionInterval.extend({_skewX:0,_skewY:0,_startSkewX:0,_startSkewY:0,_endSkewX:0,_endSkewY:0,_deltaX:0,_deltaY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){var d=!1;return cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._endSkewX=b,this._endSkewY=c,d=!0),d},clone:function(){var a=new cc.SkewTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._endSkewX,this._endSkewY),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._startSkewX=a.skewX%180,this._deltaX=this._endSkewX-this._startSkewX,this._deltaX>180&&(this._deltaX-=360),this._deltaX<-180&&(this._deltaX+=360),this._startSkewY=a.skewY%360,this._deltaY=this._endSkewY-this._startSkewY,this._deltaY>180&&(this._deltaY-=360),this._deltaY<-180&&(this._deltaY+=360)},update:function(a){a=this._computeEaseTime(a),this.target.skewX=this._startSkewX+this._deltaX*a,this.target.skewY=this._startSkewY+this._deltaY*a}}),cc.skewTo=function(a,b,c){return new cc.SkewTo(a,b,c)},cc.SkewTo.create=cc.skewTo,cc.SkewBy=cc.SkewTo.extend({ctor:function(a,b,c){cc.SkewTo.prototype.ctor.call(this),void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){var d=!1;return cc.SkewTo.prototype.initWithDuration.call(this,a,b,c)&&(this._skewX=b,this._skewY=c,d=!0),d},clone:function(){var a=new cc.SkewBy;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._skewX,this._skewY),a},startWithTarget:function(a){cc.SkewTo.prototype.startWithTarget.call(this,a),this._deltaX=this._skewX,this._deltaY=this._skewY,this._endSkewX=this._startSkewX+this._deltaX,this._endSkewY=this._startSkewY+this._deltaY},reverse:function(){var a=new cc.SkewBy(this._duration,-this._skewX,-this._skewY);return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.skewBy=function(a,b,c){return new cc.SkewBy(a,b,c)},cc.SkewBy.create=cc.skewBy,cc.JumpBy=cc.ActionInterval.extend({_startPosition:null,_delta:null,_height:0,_jumps:0,_previousPosition:null,ctor:function(a,b,c,d,e){cc.ActionInterval.prototype.ctor.call(this),this._startPosition=cc.p(0,0),this._previousPosition=cc.p(0,0),this._delta=cc.p(0,0),void 0!==d&&this.initWithDuration(a,b,c,d,e)},initWithDuration:function(a,b,c,d,e){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(void 0===e&&(e=d,d=c,c=b.y,b=b.x),this._delta.x=b,this._delta.y=c,this._height=d,this._jumps=e,!0)},clone:function(){var a=new cc.JumpBy;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._delta,this._height,this._jumps),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX(),c=a.getPositionY();this._previousPosition.x=b,this._previousPosition.y=c,this._startPosition.x=b,this._startPosition.y=c},update:function(a){if(a=this._computeEaseTime(a),this.target){var b=a*this._jumps%1,c=4*this._height*b*(1-b);c+=this._delta.y*a;var d=this._delta.x*a,e=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var f=this.target.getPositionX(),g=this.target.getPositionY(),h=this._previousPosition;e.x=e.x+f-h.x,e.y=e.y+g-h.y,d+=e.x,c+=e.y,h.x=d,h.y=c,this.target.setPosition(d,c)}else this.target.setPosition(e.x+d,e.y+c)}},reverse:function(){var a=new cc.JumpBy(this._duration,cc.p(-this._delta.x,-this._delta.y),this._height,this._jumps);return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.jumpBy=function(a,b,c,d,e){return new cc.JumpBy(a,b,c,d,e)},cc.JumpBy.create=cc.jumpBy,cc.JumpTo=cc.JumpBy.extend({_endPosition:null,ctor:function(a,b,c,d,e){cc.JumpBy.prototype.ctor.call(this),this._endPosition=cc.p(0,0),void 0!==d&&this.initWithDuration(a,b,c,d,e)},initWithDuration:function(a,b,c,d,e){return!!cc.JumpBy.prototype.initWithDuration.call(this,a,b,c,d,e)&&(void 0===e&&(c=b.y,b=b.x),this._endPosition.x=b,this._endPosition.y=c,!0)},startWithTarget:function(a){cc.JumpBy.prototype.startWithTarget.call(this,a),this._delta.x=this._endPosition.x-this._startPosition.x,this._delta.y=this._endPosition.y-this._startPosition.y},clone:function(){var a=new cc.JumpTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._endPosition,this._height,this._jumps),a}}),cc.jumpTo=function(a,b,c,d,e){return new cc.JumpTo(a,b,c,d,e)},cc.JumpTo.create=cc.jumpTo,cc.bezierAt=function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d},cc.BezierBy=cc.ActionInterval.extend({_config:null,_startPosition:null,_previousPosition:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this),this._config=[],this._startPosition=cc.p(0,0),this._previousPosition=cc.p(0,0),b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._config=b,!0)},clone:function(){var a=new cc.BezierBy;this._cloneDecoration(a);for(var b=[],c=0;c<this._config.length;c++){var d=this._config[c];b.push(cc.p(d.x,d.y))}return a.initWithDuration(this._duration,b),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.getPositionX(),c=a.getPositionY();this._previousPosition.x=b,this._previousPosition.y=c,this._startPosition.x=b,this._startPosition.y=c},update:function(a){if(a=this._computeEaseTime(a),this.target){var b=this._config,c=0,d=b[0].x,e=b[1].x,f=b[2].x,g=0,h=b[0].y,i=b[1].y,j=b[2].y,k=cc.bezierAt(c,d,e,f,a),l=cc.bezierAt(g,h,i,j,a),m=this._startPosition;if(cc.ENABLE_STACKABLE_ACTIONS){var n=this.target.getPositionX(),o=this.target.getPositionY(),p=this._previousPosition;m.x=m.x+n-p.x,m.y=m.y+o-p.y,k+=m.x,l+=m.y,p.x=k,p.y=l,this.target.setPosition(k,l)}else this.target.setPosition(m.x+k,m.y+l)}},reverse:function(){var a=this._config,b=[cc.pAdd(a[1],cc.pNeg(a[2])),cc.pAdd(a[0],cc.pNeg(a[2])),cc.pNeg(a[2])],c=new cc.BezierBy(this._duration,b);return this._cloneDecoration(c),this._reverseEaseList(c),c}}),cc.bezierBy=function(a,b){return new cc.BezierBy(a,b)},cc.BezierBy.create=cc.bezierBy,cc.BezierTo=cc.BezierBy.extend({_toConfig:null,ctor:function(a,b){cc.BezierBy.prototype.ctor.call(this),this._toConfig=[],b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._toConfig=b,!0)},clone:function(){var a=new cc.BezierTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._toConfig),a},startWithTarget:function(a){cc.BezierBy.prototype.startWithTarget.call(this,a);var b=this._startPosition,c=this._toConfig,d=this._config;d[0]=cc.pSub(c[0],b),d[1]=cc.pSub(c[1],b),d[2]=cc.pSub(c[2],b)}}),cc.bezierTo=function(a,b){return new cc.BezierTo(a,b)},cc.BezierTo.create=cc.bezierTo,cc.ScaleTo=cc.ActionInterval.extend({_scaleX:1,_scaleY:1,_startScaleX:1,_startScaleY:1,_endScaleX:0,_endScaleY:0,_deltaX:0,_deltaY:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),void 0!==b&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._endScaleX=b,this._endScaleY=null!=c?c:b,!0)},clone:function(){var a=new cc.ScaleTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._endScaleX,this._endScaleY),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._startScaleX=a.scaleX,this._startScaleY=a.scaleY,this._deltaX=this._endScaleX-this._startScaleX,this._deltaY=this._endScaleY-this._startScaleY},update:function(a){a=this._computeEaseTime(a),this.target&&(this.target.scaleX=this._startScaleX+this._deltaX*a,this.target.scaleY=this._startScaleY+this._deltaY*a)}}),cc.scaleTo=function(a,b,c){return new cc.ScaleTo(a,b,c)},cc.ScaleTo.create=cc.scaleTo,cc.ScaleBy=cc.ScaleTo.extend({startWithTarget:function(a){cc.ScaleTo.prototype.startWithTarget.call(this,a),this._deltaX=this._startScaleX*this._endScaleX-this._startScaleX,this._deltaY=this._startScaleY*this._endScaleY-this._startScaleY},reverse:function(){var a=new cc.ScaleBy(this._duration,1/this._endScaleX,1/this._endScaleY);return this._cloneDecoration(a),this._reverseEaseList(a),a},clone:function(){var a=new cc.ScaleBy;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._endScaleX,this._endScaleY),a}}),cc.scaleBy=function(a,b,c){return new cc.ScaleBy(a,b,c)},cc.ScaleBy.create=cc.scaleBy,cc.Blink=cc.ActionInterval.extend({_times:0,_originalState:!1,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this),void 0!==b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._times=b,!0)},clone:function(){var a=new cc.Blink;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._times),a},update:function(a){if(a=this._computeEaseTime(a),this.target&&!this.isDone()){var b=1/this._times,c=a%b;this.target.visible=c>b/2}},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._originalState=a.visible},stop:function(){this.target.visible=this._originalState,cc.ActionInterval.prototype.stop.call(this)},reverse:function(){var a=new cc.Blink(this._duration,this._times);return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.blink=function(a,b){return new cc.Blink(a,b);
},cc.Blink.create=cc.blink,cc.FadeTo=cc.ActionInterval.extend({_toOpacity:0,_fromOpacity:0,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this),void 0!==b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._toOpacity=b,!0)},clone:function(){var a=new cc.FadeTo;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._toOpacity),a},update:function(a){a=this._computeEaseTime(a);var b=void 0!==this._fromOpacity?this._fromOpacity:255;this.target.opacity=b+(this._toOpacity-b)*a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._fromOpacity=a.opacity}}),cc.fadeTo=function(a,b){return new cc.FadeTo(a,b)},cc.FadeTo.create=cc.fadeTo,cc.FadeIn=cc.FadeTo.extend({_reverseAction:null,ctor:function(a){cc.FadeTo.prototype.ctor.call(this),null==a&&(a=0),this.initWithDuration(a,255)},reverse:function(){var a=new cc.FadeOut;return a.initWithDuration(this._duration,0),this._cloneDecoration(a),this._reverseEaseList(a),a},clone:function(){var a=new cc.FadeIn;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._toOpacity),a},startWithTarget:function(a){this._reverseAction&&(this._toOpacity=this._reverseAction._fromOpacity),cc.FadeTo.prototype.startWithTarget.call(this,a)}}),cc.fadeIn=function(a){return new cc.FadeIn(a)},cc.FadeIn.create=cc.fadeIn,cc.FadeOut=cc.FadeTo.extend({ctor:function(a){cc.FadeTo.prototype.ctor.call(this),null==a&&(a=0),this.initWithDuration(a,0)},reverse:function(){var a=new cc.FadeIn;return a._reverseAction=this,a.initWithDuration(this._duration,255),this._cloneDecoration(a),this._reverseEaseList(a),a},clone:function(){var a=new cc.FadeOut;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._toOpacity),a}}),cc.fadeOut=function(a){return new cc.FadeOut(a)},cc.FadeOut.create=cc.fadeOut,cc.TintTo=cc.ActionInterval.extend({_to:null,_from:null,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this),this._to=cc.color(0,0,0),this._from=cc.color(0,0,0),void 0!==d&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._to=cc.color(b,c,d),!0)},clone:function(){var a=new cc.TintTo;this._cloneDecoration(a);var b=this._to;return a.initWithDuration(this._duration,b.r,b.g,b.b),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._from=this.target.color},update:function(a){a=this._computeEaseTime(a);var b=this._from,c=this._to;b&&this.target.setColor(cc.color(b.r+(c.r-b.r)*a,b.g+(c.g-b.g)*a,b.b+(c.b-b.b)*a))}}),cc.tintTo=function(a,b,c,d){return new cc.TintTo(a,b,c,d)},cc.TintTo.create=cc.tintTo,cc.TintBy=cc.ActionInterval.extend({_deltaR:0,_deltaG:0,_deltaB:0,_fromR:0,_fromG:0,_fromB:0,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this),void 0!==d&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._deltaR=b,this._deltaG=c,this._deltaB=d,!0)},clone:function(){var a=new cc.TintBy;return this._cloneDecoration(a),a.initWithDuration(this._duration,this._deltaR,this._deltaG,this._deltaB),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a);var b=a.color;this._fromR=b.r,this._fromG=b.g,this._fromB=b.b},update:function(a){a=this._computeEaseTime(a),this.target.color=cc.color(this._fromR+this._deltaR*a,this._fromG+this._deltaG*a,this._fromB+this._deltaB*a)},reverse:function(){var a=new cc.TintBy(this._duration,-this._deltaR,-this._deltaG,-this._deltaB);return this._cloneDecoration(a),this._reverseEaseList(a),a}}),cc.tintBy=function(a,b,c,d){return new cc.TintBy(a,b,c,d)},cc.TintBy.create=cc.tintBy,cc.DelayTime=cc.ActionInterval.extend({update:function(a){},reverse:function(){var a=new cc.DelayTime(this._duration);return this._cloneDecoration(a),this._reverseEaseList(a),a},clone:function(){var a=new cc.DelayTime;return this._cloneDecoration(a),a.initWithDuration(this._duration),a}}),cc.delayTime=function(a){return new cc.DelayTime(a)},cc.DelayTime.create=cc.delayTime,cc.ReverseTime=cc.ActionInterval.extend({_other:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this),this._other=null,a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw new Error("cc.ReverseTime.initWithAction(): action must be non null");if(a===this._other)throw new Error("cc.ReverseTime.initWithAction(): the action was already passed in.");return!!cc.ActionInterval.prototype.initWithDuration.call(this,a._duration)&&(this._other=a,!0)},clone:function(){var a=new cc.ReverseTime;return this._cloneDecoration(a),a.initWithAction(this._other.clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._other.startWithTarget(a)},update:function(a){a=this._computeEaseTime(a),this._other&&this._other.update(1-a)},reverse:function(){return this._other.clone()},stop:function(){this._other.stop(),cc.Action.prototype.stop.call(this)}}),cc.reverseTime=function(a){return new cc.ReverseTime(a)},cc.ReverseTime.create=cc.reverseTime,cc.Animate=cc.ActionInterval.extend({_animation:null,_nextFrame:0,_origFrame:null,_executedLoops:0,_splitTimes:null,_currFrameIndex:0,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this),this._splitTimes=[],a&&this.initWithAnimation(a)},getAnimation:function(){return this._animation},setAnimation:function(a){this._animation=a},getCurrentFrameIndex:function(){return this._currFrameIndex},initWithAnimation:function(a){if(!a)throw new Error("cc.Animate.initWithAnimation(): animation must be non-NULL");var b=a.getDuration();if(this.initWithDuration(b*a.getLoops())){this._nextFrame=0,this.setAnimation(a),this._origFrame=null,this._executedLoops=0;var c=this._splitTimes;c.length=0;var d=0,e=b/a.getTotalDelayUnits(),f=a.getFrames();cc.arrayVerifyType(f,cc.AnimationFrame);for(var g=0;g<f.length;g++){var h=f[g],i=d*e/b;d+=h.getDelayUnits(),c.push(i)}return!0}return!1},clone:function(){var a=new cc.Animate;return this._cloneDecoration(a),a.initWithAnimation(this._animation.clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._animation.getRestoreOriginalFrame()&&(this._origFrame=a.displayFrame()),this._nextFrame=0,this._executedLoops=0},update:function(a){if(a=this._computeEaseTime(a),a<1){a*=this._animation.getLoops();var b=0|a;b>this._executedLoops&&(this._nextFrame=0,this._executedLoops++),a%=1}for(var c=this._animation.getFrames(),d=c.length,e=this._splitTimes,f=this._nextFrame;f<d&&e[f]<=a;f++)_currFrameIndex=f,this.target.setSpriteFrame(c[_currFrameIndex].getSpriteFrame()),this._nextFrame=f+1},reverse:function(){var a=this._animation,b=a.getFrames(),c=[];if(cc.arrayVerifyType(b,cc.AnimationFrame),b.length>0)for(var d=b.length-1;d>=0;d--){var e=b[d];if(!e)break;c.push(e.clone())}var f=new cc.Animation(c,a.getDelayPerUnit(),a.getLoops());f.setRestoreOriginalFrame(a.getRestoreOriginalFrame());var g=new cc.Animate(f);return this._cloneDecoration(g),this._reverseEaseList(g),g},stop:function(){this._animation.getRestoreOriginalFrame()&&this.target&&this.target.setSpriteFrame(this._origFrame),cc.Action.prototype.stop.call(this)}}),cc.animate=function(a){return new cc.Animate(a)},cc.Animate.create=cc.animate,cc.TargetedAction=cc.ActionInterval.extend({_action:null,_forcedTarget:null,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this),b&&this.initWithTarget(a,b)},initWithTarget:function(a,b){return!!this.initWithDuration(b._duration)&&(this._forcedTarget=a,this._action=b,!0)},clone:function(){var a=new cc.TargetedAction;return this._cloneDecoration(a),a.initWithTarget(this._forcedTarget,this._action.clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._action.startWithTarget(this._forcedTarget)},stop:function(){this._action.stop()},update:function(a){a=this._computeEaseTime(a),this._action.update(a)},getForcedTarget:function(){return this._forcedTarget},setForcedTarget:function(a){this._forcedTarget!==a&&(this._forcedTarget=a)}}),cc.targetedAction=function(a,b){return new cc.TargetedAction(a,b)},cc.TargetedAction.create=cc.targetedAction,cc.ActionInstant=cc.FiniteTimeAction.extend({isDone:function(){return!0},step:function(a){this.update(1)},update:function(a){},reverse:function(){return this.clone()},clone:function(){return new cc.ActionInstant}}),cc.Show=cc.ActionInstant.extend({update:function(a){this.target.visible=!0},reverse:function(){return new cc.Hide},clone:function(){return new cc.Show}}),cc.show=function(){return new cc.Show},cc.Show.create=cc.show,cc.Hide=cc.ActionInstant.extend({update:function(a){this.target.visible=!1},reverse:function(){return new cc.Show},clone:function(){return new cc.Hide}}),cc.hide=function(){return new cc.Hide},cc.Hide.create=cc.hide,cc.ToggleVisibility=cc.ActionInstant.extend({update:function(a){this.target.visible=!this.target.visible},reverse:function(){return new cc.ToggleVisibility},clone:function(){return new cc.ToggleVisibility}}),cc.toggleVisibility=function(){return new cc.ToggleVisibility},cc.ToggleVisibility.create=cc.toggleVisibility,cc.RemoveSelf=cc.ActionInstant.extend({_isNeedCleanUp:!0,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this),void 0!==a&&this.init(a)},update:function(a){this.target.removeFromParent(this._isNeedCleanUp)},init:function(a){return this._isNeedCleanUp=a,!0},reverse:function(){return new cc.RemoveSelf(this._isNeedCleanUp)},clone:function(){return new cc.RemoveSelf(this._isNeedCleanUp)}}),cc.removeSelf=function(a){return new cc.RemoveSelf(a)},cc.RemoveSelf.create=cc.removeSelf,cc.FlipX=cc.ActionInstant.extend({_flippedX:!1,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this),this._flippedX=!1,void 0!==a&&this.initWithFlipX(a)},initWithFlipX:function(a){return this._flippedX=a,!0},update:function(a){this.target.flippedX=this._flippedX},reverse:function(){return new cc.FlipX(!this._flippedX)},clone:function(){var a=new cc.FlipX;return a.initWithFlipX(this._flippedX),a}}),cc.flipX=function(a){return new cc.FlipX(a)},cc.FlipX.create=cc.flipX,cc.FlipY=cc.ActionInstant.extend({_flippedY:!1,ctor:function(a){cc.FiniteTimeAction.prototype.ctor.call(this),this._flippedY=!1,void 0!==a&&this.initWithFlipY(a)},initWithFlipY:function(a){return this._flippedY=a,!0},update:function(a){this.target.flippedY=this._flippedY},reverse:function(){return new cc.FlipY(!this._flippedY)},clone:function(){var a=new cc.FlipY;return a.initWithFlipY(this._flippedY),a}}),cc.flipY=function(a){return new cc.FlipY(a)},cc.FlipY.create=cc.flipY,cc.Place=cc.ActionInstant.extend({_x:0,_y:0,ctor:function(a,b){cc.FiniteTimeAction.prototype.ctor.call(this),this._x=0,this._y=0,void 0!==a&&(void 0!==a.x&&(b=a.y,a=a.x),this.initWithPosition(a,b))},initWithPosition:function(a,b){return this._x=a,this._y=b,!0},update:function(a){this.target.setPosition(this._x,this._y)},clone:function(){var a=new cc.Place;return a.initWithPosition(this._x,this._y),a}}),cc.place=function(a,b){return new cc.Place(a,b)},cc.Place.create=cc.place,cc.CallFunc=cc.ActionInstant.extend({_selectorTarget:null,_function:null,_data:null,ctor:function(a,b,c){cc.FiniteTimeAction.prototype.ctor.call(this),this.initWithFunction(a,b,c)},initWithFunction:function(a,b,c){return a&&(this._function=a),b&&(this._selectorTarget=b),void 0!==c&&(this._data=c),!0},execute:function(){this._function&&this._function.call(this._selectorTarget,this.target,this._data)},update:function(a){this.execute()},getTargetCallback:function(){return this._selectorTarget},setTargetCallback:function(a){a!==this._selectorTarget&&(this._selectorTarget&&(this._selectorTarget=null),this._selectorTarget=a)},clone:function(){var a=new cc.CallFunc;return a.initWithFunction(this._function,this._selectorTarget,this._data),a}}),cc.callFunc=function(a,b,c){return new cc.CallFunc(a,b,c)},cc.CallFunc.create=cc.callFunc,cc.ActionEase=cc.ActionInterval.extend({_inner:null,ctor:function(a){cc.ActionInterval.prototype.ctor.call(this),a&&this.initWithAction(a)},initWithAction:function(a){if(!a)throw new Error("cc.ActionEase.initWithAction(): action must be non nil");return!!this.initWithDuration(a.getDuration())&&(this._inner=a,!0)},clone:function(){var a=new cc.ActionEase;return a.initWithAction(this._inner.clone()),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._inner.startWithTarget(this.target)},stop:function(){this._inner.stop(),cc.ActionInterval.prototype.stop.call(this)},update:function(a){this._inner.update(a)},reverse:function(){return new cc.ActionEase(this._inner.reverse())},getInnerAction:function(){return this._inner}}),cc.actionEase=function(a){return new cc.ActionEase(a)},cc.ActionEase.create=cc.actionEase,cc.EaseRateAction=cc.ActionEase.extend({_rate:0,ctor:function(a,b){cc.ActionEase.prototype.ctor.call(this),void 0!==b&&this.initWithAction(a,b)},setRate:function(a){this._rate=a},getRate:function(){return this._rate},initWithAction:function(a,b){return!!cc.ActionEase.prototype.initWithAction.call(this,a)&&(this._rate=b,!0)},clone:function(){var a=new cc.EaseRateAction;return a.initWithAction(this._inner.clone(),this._rate),a},reverse:function(){return new cc.EaseRateAction(this._inner.reverse(),1/this._rate)}}),cc.easeRateAction=function(a,b){return new cc.EaseRateAction(a,b)},cc.EaseRateAction.create=cc.easeRateAction,cc.EaseIn=cc.EaseRateAction.extend({update:function(a){this._inner.update(Math.pow(a,this._rate))},reverse:function(){return new cc.EaseIn(this._inner.reverse(),1/this._rate)},clone:function(){var a=new cc.EaseIn;return a.initWithAction(this._inner.clone(),this._rate),a}}),cc.EaseIn.create=function(a,b){return new cc.EaseIn(a,b)},cc.easeIn=function(a){return{_rate:a,easing:function(a){return Math.pow(a,this._rate)},reverse:function(){return cc.easeIn(1/this._rate)}}},cc.EaseOut=cc.EaseRateAction.extend({update:function(a){this._inner.update(Math.pow(a,1/this._rate))},reverse:function(){return new cc.EaseOut(this._inner.reverse(),1/this._rate)},clone:function(){var a=new cc.EaseOut;return a.initWithAction(this._inner.clone(),this._rate),a}}),cc.EaseOut.create=function(a,b){return new cc.EaseOut(a,b)},cc.easeOut=function(a){return{_rate:a,easing:function(a){return Math.pow(a,1/this._rate)},reverse:function(){return cc.easeOut(1/this._rate)}}},cc.EaseInOut=cc.EaseRateAction.extend({update:function(a){a*=2,a<1?this._inner.update(.5*Math.pow(a,this._rate)):this._inner.update(1-.5*Math.pow(2-a,this._rate))},clone:function(){var a=new cc.EaseInOut;return a.initWithAction(this._inner.clone(),this._rate),a},reverse:function(){return new cc.EaseInOut(this._inner.reverse(),this._rate)}}),cc.EaseInOut.create=function(a,b){return new cc.EaseInOut(a,b)},cc.easeInOut=function(a){return{_rate:a,easing:function(a){return a*=2,a<1?.5*Math.pow(a,this._rate):1-.5*Math.pow(2-a,this._rate)},reverse:function(){return cc.easeInOut(this._rate)}}},cc.EaseExponentialIn=cc.ActionEase.extend({update:function(a){this._inner.update(0===a?0:Math.pow(2,10*(a-1)))},reverse:function(){return new cc.EaseExponentialOut(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialIn;return a.initWithAction(this._inner.clone()),a}}),cc.EaseExponentialIn.create=function(a){return new cc.EaseExponentialIn(a)},cc._easeExponentialInObj={easing:function(a){return 0===a?0:Math.pow(2,10*(a-1))},reverse:function(){return cc._easeExponentialOutObj}},cc.easeExponentialIn=function(){return cc._easeExponentialInObj},cc.EaseExponentialOut=cc.ActionEase.extend({update:function(a){this._inner.update(1===a?1:-Math.pow(2,-10*a)+1)},reverse:function(){return new cc.EaseExponentialIn(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialOut;return a.initWithAction(this._inner.clone()),a}}),cc.EaseExponentialOut.create=function(a){return new cc.EaseExponentialOut(a)},cc._easeExponentialOutObj={easing:function(a){return 1===a?1:-Math.pow(2,-10*a)+1},reverse:function(){return cc._easeExponentialInObj}},cc.easeExponentialOut=function(){return cc._easeExponentialOutObj},cc.EaseExponentialInOut=cc.ActionEase.extend({update:function(a){1!==a&&0!==a&&(a*=2,a=a<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)),this._inner.update(a)},reverse:function(){return new cc.EaseExponentialInOut(this._inner.reverse())},clone:function(){var a=new cc.EaseExponentialInOut;return a.initWithAction(this._inner.clone()),a}}),cc.EaseExponentialInOut.create=function(a){return new cc.EaseExponentialInOut(a)},cc._easeExponentialInOutObj={easing:function(a){return 1!==a&&0!==a?(a*=2,a<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*(a-1))+2)):a},reverse:function(){return cc._easeExponentialInOutObj}},cc.easeExponentialInOut=function(){return cc._easeExponentialInOutObj},cc.EaseSineIn=cc.ActionEase.extend({update:function(a){a=0===a||1===a?a:-1*Math.cos(a*Math.PI/2)+1,this._inner.update(a)},reverse:function(){return new cc.EaseSineOut(this._inner.reverse())},clone:function(){var a=new cc.EaseSineIn;return a.initWithAction(this._inner.clone()),a}}),cc.EaseSineIn.create=function(a){return new cc.EaseSineIn(a)},cc._easeSineInObj={easing:function(a){return 0===a||1===a?a:-1*Math.cos(a*Math.PI/2)+1},reverse:function(){return cc._easeSineOutObj}},cc.easeSineIn=function(){return cc._easeSineInObj},cc.EaseSineOut=cc.ActionEase.extend({update:function(a){a=0===a||1===a?a:Math.sin(a*Math.PI/2),this._inner.update(a)},reverse:function(){return new cc.EaseSineIn(this._inner.reverse())},clone:function(){var a=new cc.EaseSineOut;return a.initWithAction(this._inner.clone()),a}}),cc.EaseSineOut.create=function(a){return new cc.EaseSineOut(a)},cc._easeSineOutObj={easing:function(a){return 0===a||1===a?a:Math.sin(a*Math.PI/2)},reverse:function(){return cc._easeSineInObj}},cc.easeSineOut=function(){return cc._easeSineOutObj},cc.EaseSineInOut=cc.ActionEase.extend({update:function(a){a=0===a||1===a?a:-.5*(Math.cos(Math.PI*a)-1),this._inner.update(a)},clone:function(){var a=new cc.EaseSineInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseSineInOut(this._inner.reverse())}}),cc.EaseSineInOut.create=function(a){return new cc.EaseSineInOut(a)},cc._easeSineInOutObj={easing:function(a){return 0===a||1===a?a:-.5*(Math.cos(Math.PI*a)-1)},reverse:function(){return cc._easeSineInOutObj}},cc.easeSineInOut=function(){return cc._easeSineInOutObj},cc.EaseElastic=cc.ActionEase.extend({_period:.3,ctor:function(a,b){cc.ActionEase.prototype.ctor.call(this),a&&this.initWithAction(a,b)},getPeriod:function(){return this._period},setPeriod:function(a){this._period=a},initWithAction:function(a,b){return cc.ActionEase.prototype.initWithAction.call(this,a),this._period=null==b?.3:b,!0},reverse:function(){return cc.log("cc.EaseElastic.reverse(): it should be overridden in subclass."),null},clone:function(){var a=new cc.EaseElastic;return a.initWithAction(this._inner.clone(),this._period),a}}),cc.EaseElastic.create=function(a,b){return new cc.EaseElastic(a,b)},cc.EaseElasticIn=cc.EaseElastic.extend({update:function(a){var b=0;if(0===a||1===a)b=a;else{var c=this._period/4;a-=1,b=-Math.pow(2,10*a)*Math.sin((a-c)*Math.PI*2/this._period)}this._inner.update(b)},reverse:function(){return new cc.EaseElasticOut(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticIn;return a.initWithAction(this._inner.clone(),this._period),a}}),cc.EaseElasticIn.create=function(a,b){return new cc.EaseElasticIn(a,b)},cc._easeElasticInObj={easing:function(a){return 0===a||1===a?a:(a-=1,-Math.pow(2,10*a)*Math.sin((a-.075)*Math.PI*2/.3))},reverse:function(){return cc._easeElasticOutObj}},cc.easeElasticIn=function(a){return a&&.3!==a?{_period:a,easing:function(a){return 0===a||1===a?a:(a-=1,-Math.pow(2,10*a)*Math.sin((a-this._period/4)*Math.PI*2/this._period))},reverse:function(){return cc.easeElasticOut(this._period)}}:cc._easeElasticInObj},cc.EaseElasticOut=cc.EaseElastic.extend({update:function(a){var b=0;if(0===a||1===a)b=a;else{var c=this._period/4;b=Math.pow(2,-10*a)*Math.sin((a-c)*Math.PI*2/this._period)+1}this._inner.update(b)},reverse:function(){return new cc.EaseElasticIn(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticOut;return a.initWithAction(this._inner.clone(),this._period),a}}),cc.EaseElasticOut.create=function(a,b){return new cc.EaseElasticOut(a,b)},cc._easeElasticOutObj={easing:function(a){return 0===a||1===a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*Math.PI*2/.3)+1},reverse:function(){return cc._easeElasticInObj}},cc.easeElasticOut=function(a){return a&&.3!==a?{_period:a,easing:function(a){return 0===a||1===a?a:Math.pow(2,-10*a)*Math.sin((a-this._period/4)*Math.PI*2/this._period)+1},reverse:function(){return cc.easeElasticIn(this._period)}}:cc._easeElasticOutObj},cc.EaseElasticInOut=cc.EaseElastic.extend({update:function(a){var b=0,c=this._period;if(0===a||1===a)b=a;else{a*=2,c||(c=this._period=.3*1.5);var d=c/4;a-=1,b=a<0?-.5*Math.pow(2,10*a)*Math.sin((a-d)*Math.PI*2/c):Math.pow(2,-10*a)*Math.sin((a-d)*Math.PI*2/c)*.5+1}this._inner.update(b)},reverse:function(){return new cc.EaseElasticInOut(this._inner.reverse(),this._period)},clone:function(){var a=new cc.EaseElasticInOut;return a.initWithAction(this._inner.clone(),this._period),a}}),cc.EaseElasticInOut.create=function(a,b){return new cc.EaseElasticInOut(a,b)},cc.easeElasticInOut=function(a){return a=a||.3,{_period:a,easing:function(a){var b=0,c=this._period;if(0===a||1===a)b=a;else{a*=2,c||(c=this._period=.3*1.5);var d=c/4;a-=1,b=a<0?-.5*Math.pow(2,10*a)*Math.sin((a-d)*Math.PI*2/c):Math.pow(2,-10*a)*Math.sin((a-d)*Math.PI*2/c)*.5+1}return b},reverse:function(){return cc.easeElasticInOut(this._period)}}},cc.EaseBounce=cc.ActionEase.extend({bounceTime:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?(a-=1.5/2.75,7.5625*a*a+.75):a<2.5/2.75?(a-=2.25/2.75,7.5625*a*a+.9375):(a-=2.625/2.75,7.5625*a*a+.984375)},clone:function(){var a=new cc.EaseBounce;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseBounce(this._inner.reverse())}}),cc.EaseBounce.create=function(a){return new cc.EaseBounce(a)},cc.EaseBounceIn=cc.EaseBounce.extend({update:function(a){var b=1-this.bounceTime(1-a);this._inner.update(b)},reverse:function(){return new cc.EaseBounceOut(this._inner.reverse())},clone:function(){var a=new cc.EaseBounceIn;return a.initWithAction(this._inner.clone()),a}}),cc.EaseBounceIn.create=function(a){return new cc.EaseBounceIn(a)},cc._bounceTime=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?(a-=1.5/2.75,7.5625*a*a+.75):a<2.5/2.75?(a-=2.25/2.75,7.5625*a*a+.9375):(a-=2.625/2.75,7.5625*a*a+.984375)},cc._easeBounceInObj={easing:function(a){return 1-cc._bounceTime(1-a)},reverse:function(){return cc._easeBounceOutObj}},cc.easeBounceIn=function(){return cc._easeBounceInObj},cc.EaseBounceOut=cc.EaseBounce.extend({update:function(a){var b=this.bounceTime(a);this._inner.update(b)},reverse:function(){return new cc.EaseBounceIn(this._inner.reverse())},clone:function(){var a=new cc.EaseBounceOut;return a.initWithAction(this._inner.clone()),a}}),cc.EaseBounceOut.create=function(a){return new cc.EaseBounceOut(a)},cc._easeBounceOutObj={easing:function(a){return cc._bounceTime(a)},reverse:function(){return cc._easeBounceInObj}},cc.easeBounceOut=function(){return cc._easeBounceOutObj},cc.EaseBounceInOut=cc.EaseBounce.extend({update:function(a){var b=0;a<.5?(a*=2,b=.5*(1-this.bounceTime(1-a))):b=.5*this.bounceTime(2*a-1)+.5,this._inner.update(b)},clone:function(){var a=new cc.EaseBounceInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseBounceInOut(this._inner.reverse())}}),cc.EaseBounceInOut.create=function(a){return new cc.EaseBounceInOut(a)},cc._easeBounceInOutObj={easing:function(a){var b;return a<.5?(a*=2,b=.5*(1-cc._bounceTime(1-a))):b=.5*cc._bounceTime(2*a-1)+.5,b},reverse:function(){return cc._easeBounceInOutObj}},cc.easeBounceInOut=function(){return cc._easeBounceInOutObj},cc.EaseBackIn=cc.ActionEase.extend({update:function(a){var b=1.70158;a=0===a||1===a?a:a*a*((b+1)*a-b),this._inner.update(a)},reverse:function(){return new cc.EaseBackOut(this._inner.reverse())},clone:function(){var a=new cc.EaseBackIn;return a.initWithAction(this._inner.clone()),a}}),cc.EaseBackIn.create=function(a){return new cc.EaseBackIn(a)},cc._easeBackInObj={easing:function(a){var b=1.70158;return 0===a||1===a?a:a*a*((b+1)*a-b)},reverse:function(){return cc._easeBackOutObj}},cc.easeBackIn=function(){return cc._easeBackInObj},cc.EaseBackOut=cc.ActionEase.extend({update:function(a){var b=1.70158;a-=1,this._inner.update(a*a*((b+1)*a+b)+1)},reverse:function(){return new cc.EaseBackIn(this._inner.reverse())},clone:function(){var a=new cc.EaseBackOut;return a.initWithAction(this._inner.clone()),a}}),cc.EaseBackOut.create=function(a){return new cc.EaseBackOut(a)},cc._easeBackOutObj={easing:function(a){var b=1.70158;return a-=1,a*a*((b+1)*a+b)+1},reverse:function(){return cc._easeBackInObj}},cc.easeBackOut=function(){return cc._easeBackOutObj},cc.EaseBackInOut=cc.ActionEase.extend({update:function(a){var b=2.5949095;a*=2,a<1?this._inner.update(a*a*((b+1)*a-b)/2):(a-=2,this._inner.update(a*a*((b+1)*a+b)/2+1))},clone:function(){var a=new cc.EaseBackInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseBackInOut(this._inner.reverse())}}),cc.EaseBackInOut.create=function(a){return new cc.EaseBackInOut(a)},cc._easeBackInOutObj={easing:function(a){var b=2.5949095;return a*=2,a<1?a*a*((b+1)*a-b)/2:(a-=2,a*a*((b+1)*a+b)/2+1)},reverse:function(){return cc._easeBackInOutObj}};cc.easeBackInOut=function(){return cc._easeBackInOutObj};cc.EaseBezierAction=cc.ActionEase.extend({_p0:null,_p1:null,_p2:null,_p3:null,ctor:function(a){cc.ActionEase.prototype.ctor.call(this,a)},_updateTime:function(a,b,c,d,e){return Math.pow(1-e,3)*a+3*e*Math.pow(1-e,2)*b+3*Math.pow(e,2)*(1-e)*c+Math.pow(e,3)*d},update:function(a){var b=this._updateTime(this._p0,this._p1,this._p2,this._p3,a);this._inner.update(b)},clone:function(){var a=new cc.EaseBezierAction;return a.initWithAction(this._inner.clone()),a.setBezierParamer(this._p0,this._p1,this._p2,this._p3),a},reverse:function(){var a=new cc.EaseBezierAction(this._inner.reverse());return a.setBezierParamer(this._p3,this._p2,this._p1,this._p0),a},setBezierParamer:function(a,b,c,d){this._p0=a||0,this._p1=b||0,this._p2=c||0,this._p3=d||0}}),cc.EaseBezierAction.create=function(a){return new cc.EaseBezierAction(a)},cc.easeBezierAction=function(a,b,c,d){return{easing:function(e){return cc.EaseBezierAction.prototype._updateTime(a,b,c,d,e)},reverse:function(){return cc.easeBezierAction(d,c,b,a)}}},cc.EaseQuadraticActionIn=cc.ActionEase.extend({_updateTime:function(a){return Math.pow(a,2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionIn;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuadraticActionIn(this._inner.reverse())}}),cc.EaseQuadraticActionIn.create=function(a){return new cc.EaseQuadraticActionIn(a)},cc._easeQuadraticActionIn={easing:cc.EaseQuadraticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionIn}},cc.easeQuadraticActionIn=function(){return cc._easeQuadraticActionIn},cc.EaseQuadraticActionOut=cc.ActionEase.extend({_updateTime:function(a){return-a*(a-2)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionOut;return a.initWithAction(),a},reverse:function(){return new cc.EaseQuadraticActionOut(this._inner.reverse())}}),cc.EaseQuadraticActionOut.create=function(a){return new cc.EaseQuadraticActionOut(a)},cc._easeQuadraticActionOut={easing:cc.EaseQuadraticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionOut}},cc.easeQuadraticActionOut=function(){return cc._easeQuadraticActionOut},cc.EaseQuadraticActionInOut=cc.ActionEase.extend({_updateTime:function(a){var b=a;return a*=2,a<1?b=a*a*.5:(--a,b=-.5*(a*(a-2)-1)),b},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuadraticActionInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuadraticActionInOut(this._inner.reverse())}}),cc.EaseQuadraticActionInOut.create=function(a){return new cc.EaseQuadraticActionInOut(a)},cc._easeQuadraticActionInOut={easing:cc.EaseQuadraticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuadraticActionInOut}},cc.easeQuadraticActionInOut=function(){return cc._easeQuadraticActionInOut},cc.EaseQuarticActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionIn;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuarticActionIn(this._inner.reverse())}}),cc.EaseQuarticActionIn.create=function(a){return new cc.EaseQuarticActionIn(a)},cc._easeQuarticActionIn={easing:cc.EaseQuarticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuarticActionIn}},cc.easeQuarticActionIn=function(){return cc._easeQuarticActionIn},cc.EaseQuarticActionOut=cc.ActionEase.extend({_updateTime:function(a){return a-=1,-(a*a*a*a-1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuarticActionOut(this._inner.reverse())}}),cc.EaseQuarticActionOut.create=function(a){return new cc.EaseQuarticActionOut(a)},cc._easeQuarticActionOut={easing:cc.EaseQuarticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionOut}},cc.easeQuarticActionOut=function(){return cc._easeQuarticActionOut},cc.EaseQuarticActionInOut=cc.ActionEase.extend({_updateTime:function(a){return a*=2,a<1?.5*a*a*a*a:(a-=2,-.5*(a*a*a*a-2))},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuarticActionInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuarticActionInOut(this._inner.reverse())}}),cc.EaseQuarticActionInOut.create=function(a){return new cc.EaseQuarticActionInOut(a)},cc._easeQuarticActionInOut={easing:cc.EaseQuarticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuarticActionInOut}},cc.easeQuarticActionInOut=function(){return cc._easeQuarticActionInOut},cc.EaseQuinticActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionIn;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuinticActionIn(this._inner.reverse())}}),cc.EaseQuinticActionIn.create=function(a){return new cc.EaseQuinticActionIn(a)},cc._easeQuinticActionIn={easing:cc.EaseQuinticActionIn.prototype._updateTime,reverse:function(){return cc._easeQuinticActionIn}},cc.easeQuinticActionIn=function(){return cc._easeQuinticActionIn},cc.EaseQuinticActionOut=cc.ActionEase.extend({_updateTime:function(a){return a-=1,a*a*a*a*a+1},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseQuinticActionOut(this._inner.reverse())}}),cc.EaseQuinticActionOut.create=function(a){return new cc.EaseQuinticActionOut(a)},cc._easeQuinticActionOut={easing:cc.EaseQuinticActionOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionOut}},cc.easeQuinticActionOut=function(){return cc._easeQuinticActionOut},cc.EaseQuinticActionInOut=cc.ActionEase.extend({_updateTime:function(a){return a*=2,a<1?.5*a*a*a*a*a:(a-=2,.5*(a*a*a*a*a+2))},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseQuinticActionInOut;return a.initWithAction(this._inner.clone()),
a},reverse:function(){return new cc.EaseQuinticActionInOut(this._inner.reverse())}}),cc.EaseQuinticActionInOut.create=function(a){return new cc.EaseQuinticActionInOut(a)},cc._easeQuinticActionInOut={easing:cc.EaseQuinticActionInOut.prototype._updateTime,reverse:function(){return cc._easeQuinticActionInOut}},cc.easeQuinticActionInOut=function(){return cc._easeQuinticActionInOut},cc.EaseCircleActionIn=cc.ActionEase.extend({_updateTime:function(a){return-1*(Math.sqrt(1-a*a)-1)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionIn;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseCircleActionIn(this._inner.reverse())}}),cc.EaseCircleActionIn.create=function(a){return new cc.EaseCircleActionIn(a)},cc._easeCircleActionIn={easing:cc.EaseCircleActionIn.prototype._updateTime,reverse:function(){return cc._easeCircleActionIn}},cc.easeCircleActionIn=function(){return cc._easeCircleActionIn},cc.EaseCircleActionOut=cc.ActionEase.extend({_updateTime:function(a){return a-=1,Math.sqrt(1-a*a)},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseCircleActionOut(this._inner.reverse())}}),cc.EaseCircleActionOut.create=function(a){return new cc.EaseCircleActionOut(a)},cc._easeCircleActionOut={easing:cc.EaseCircleActionOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionOut}},cc.easeCircleActionOut=function(){return cc._easeCircleActionOut},cc.EaseCircleActionInOut=cc.ActionEase.extend({_updateTime:function(a){return a*=2,a<1?-.5*(Math.sqrt(1-a*a)-1):(a-=2,.5*(Math.sqrt(1-a*a)+1))},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCircleActionInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseCircleActionInOut(this._inner.reverse())}}),cc.EaseCircleActionInOut.create=function(a){return new cc.EaseCircleActionInOut(a)},cc._easeCircleActionInOut={easing:cc.EaseCircleActionInOut.prototype._updateTime,reverse:function(){return cc._easeCircleActionInOut}},cc.easeCircleActionInOut=function(){return cc._easeCircleActionInOut},cc.EaseCubicActionIn=cc.ActionEase.extend({_updateTime:function(a){return a*a*a},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionIn;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseCubicActionIn(this._inner.reverse())}}),cc.EaseCubicActionIn.create=function(a){return new cc.EaseCubicActionIn(a)},cc._easeCubicActionIn={easing:cc.EaseCubicActionIn.prototype._updateTime,reverse:function(){return cc._easeCubicActionIn}},cc.easeCubicActionIn=function(){return cc._easeCubicActionIn},cc.EaseCubicActionOut=cc.ActionEase.extend({_updateTime:function(a){return a-=1,a*a*a+1},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseCubicActionOut(this._inner.reverse())}}),cc.EaseCubicActionOut.create=function(a){return new cc.EaseCubicActionOut(a)},cc._easeCubicActionOut={easing:cc.EaseCubicActionOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionOut}},cc.easeCubicActionOut=function(){return cc._easeCubicActionOut},cc.EaseCubicActionInOut=cc.ActionEase.extend({_updateTime:function(a){return a*=2,a<1?.5*a*a*a:(a-=2,.5*(a*a*a+2))},update:function(a){this._inner.update(this._updateTime(a))},clone:function(){var a=new cc.EaseCubicActionInOut;return a.initWithAction(this._inner.clone()),a},reverse:function(){return new cc.EaseCubicActionInOut(this._inner.reverse())}}),cc.EaseCubicActionInOut.create=function(a){return new cc.EaseCubicActionInOut(a)},cc._easeCubicActionInOut={easing:cc.EaseCubicActionInOut.prototype._updateTime,reverse:function(){return cc._easeCubicActionInOut}},cc.easeCubicActionInOut=function(){return cc._easeCubicActionInOut},cc.cardinalSplineAt=function(a,b,c,d,e,f){var g=f*f,h=g*f,i=(1-e)/2,j=i*(-h+2*g-f),k=i*(-h+g)+(2*h-3*g+1),l=i*(h-2*g+f)+(-2*h+3*g),m=i*(h-g),n=a.x*j+b.x*k+c.x*l+d.x*m,o=a.y*j+b.y*k+c.y*l+d.y*m;return cc.p(n,o)},cc.reverseControlPoints=function(a){for(var b=[],c=a.length-1;c>=0;c--)b.push(cc.p(a[c].x,a[c].y));return b},cc.cloneControlPoints=function(a){for(var b=[],c=0;c<a.length;c++)b.push(cc.p(a[c].x,a[c].y));return b},cc.copyControlPoints=cc.cloneControlPoints,cc.getControlPointAt=function(a,b){var c=Math.min(a.length-1,Math.max(b,0));return a[c]},cc.reverseControlPointsInline=function(a){for(var b=a.length,c=0|b/2,d=0;d<c;++d){var e=a[d];a[d]=a[b-d-1],a[b-d-1]=e}},cc.CardinalSplineTo=cc.ActionInterval.extend({_points:null,_deltaT:0,_tension:0,_previousPosition:null,_accumulatedDiff:null,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),this._points=[],void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){if(!b||0===b.length)throw new Error("Invalid configuration. It must at least have one control point");return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this.setPoints(b),this._tension=c,!0)},clone:function(){var a=new cc.CardinalSplineTo;return a.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension),a},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._deltaT=1/(this._points.length-1),this._previousPosition=cc.p(this.target.getPositionX(),this.target.getPositionY()),this._accumulatedDiff=cc.p(0,0)},update:function(a){a=this._computeEaseTime(a);var b,c,d=this._points;if(1===a)b=d.length-1,c=1;else{var e=this._deltaT;b=0|a/e,c=(a-e*b)/e}var f=cc.cardinalSplineAt(cc.getControlPointAt(d,b-1),cc.getControlPointAt(d,b-0),cc.getControlPointAt(d,b+1),cc.getControlPointAt(d,b+2),this._tension,c);if(cc.ENABLE_STACKABLE_ACTIONS){var g,h;if(g=this.target.getPositionX()-this._previousPosition.x,h=this.target.getPositionY()-this._previousPosition.y,0!==g||0!==h){var i=this._accumulatedDiff;g=i.x+g,h=i.y+h,i.x=g,i.y=h,f.x+=g,f.y+=h}}this.updatePosition(f)},reverse:function(){var a=cc.reverseControlPoints(this._points);return cc.cardinalSplineTo(this._duration,a,this._tension)},updatePosition:function(a){this.target.setPosition(a),this._previousPosition=a},getPoints:function(){return this._points},setPoints:function(a){this._points=a}}),cc.cardinalSplineTo=function(a,b,c){return new cc.CardinalSplineTo(a,b,c)},cc.CardinalSplineTo.create=cc.cardinalSplineTo,cc.CardinalSplineBy=cc.CardinalSplineTo.extend({_startPosition:null,ctor:function(a,b,c){cc.CardinalSplineTo.prototype.ctor.call(this),this._startPosition=cc.p(0,0),void 0!==c&&this.initWithDuration(a,b,c)},startWithTarget:function(a){cc.CardinalSplineTo.prototype.startWithTarget.call(this,a),this._startPosition.x=a.getPositionX(),this._startPosition.y=a.getPositionY()},reverse:function(){for(var a,b=this._points.slice(),c=b[0],d=1;d<b.length;++d)a=b[d],b[d]=cc.pSub(a,c),c=a;var e=cc.reverseControlPoints(b);c=e[e.length-1],e.pop(),c.x=-c.x,c.y=-c.y,e.unshift(c);for(var d=1;d<e.length;++d)a=e[d],a.x=-a.x,a.y=-a.y,a.x+=c.x,a.y+=c.y,e[d]=a,c=a;return cc.cardinalSplineBy(this._duration,e,this._tension)},updatePosition:function(a){var b=this._startPosition,c=a.x+b.x,d=a.y+b.y;this._previousPosition.x=c,this._previousPosition.y=d,this.target.setPosition(c,d)},clone:function(){var a=new cc.CardinalSplineBy;return a.initWithDuration(this._duration,cc.copyControlPoints(this._points),this._tension),a}}),cc.cardinalSplineBy=function(a,b,c){return new cc.CardinalSplineBy(a,b,c)},cc.CardinalSplineBy.create=cc.cardinalSplineBy,cc.CatmullRomTo=cc.CardinalSplineTo.extend({ctor:function(a,b){b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,a,b,.5)},clone:function(){var a=new cc.CatmullRomTo;return a.initWithDuration(this._duration,cc.copyControlPoints(this._points)),a}}),cc.catmullRomTo=function(a,b){return new cc.CatmullRomTo(a,b)},cc.CatmullRomTo.create=cc.catmullRomTo,cc.CatmullRomBy=cc.CardinalSplineBy.extend({ctor:function(a,b){cc.CardinalSplineBy.prototype.ctor.call(this),b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return cc.CardinalSplineTo.prototype.initWithDuration.call(this,a,b,.5)},clone:function(){var a=new cc.CatmullRomBy;return a.initWithDuration(this._duration,cc.copyControlPoints(this._points)),a}}),cc.catmullRomBy=function(a,b){return new cc.CatmullRomBy(a,b)},cc.CatmullRomBy.create=cc.catmullRomBy,cc.ActionTweenDelegate=cc.Class.extend({updateTweenAction:function(a,b){}}),cc.ActionTween=cc.ActionInterval.extend({key:"",from:0,to:0,delta:0,ctor:function(a,b,c,d){cc.ActionInterval.prototype.ctor.call(this),this.key="",void 0!==d&&this.initWithDuration(a,b,c,d)},initWithDuration:function(a,b,c,d){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this.key=b,this.to=d,this.from=c,!0)},startWithTarget:function(a){if(!a||!a.updateTweenAction)throw new Error("cc.ActionTween.startWithTarget(): target must be non-null, and target must implement updateTweenAction function");cc.ActionInterval.prototype.startWithTarget.call(this,a),this.delta=this.to-this.from},update:function(a){this.target.updateTweenAction(this.to-this.delta*(1-a),this.key)},reverse:function(){return new cc.ActionTween(this.duration,this.key,this.to,this.from)},clone:function(){var a=new cc.ActionTween;return a.initWithDuration(this._duration,this.key,this.from,this.to),a}}),cc.actionTween=function(a,b,c,d){return new cc.ActionTween(a,b,c,d)},cc.ActionTween.create=cc.actionTween;!function(){var a=!1,b=cc.sys,c=b.browserVersion,d=!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),e={ONLY_ONE:!1,WEB_AUDIO:d,DELAY_CREATE_CTX:!1,ONE_SOURCE:!1};b.browserType===b.BROWSER_TYPE_FIREFOX&&(e.DELAY_CREATE_CTX=!0,e.USE_LOADER_EVENT="canplay"),b.os===b.OS_IOS&&(e.USE_LOADER_EVENT="loadedmetadata"),b.os===b.OS_ANDROID&&b.browserType===b.BROWSER_TYPE_UC&&(e.ONE_SOURCE=!0),window.__audioSupport=e,a&&setTimeout(function(){cc.log("browse type: "+b.browserType),cc.log("browse version: "+c),cc.log("MULTI_CHANNEL: "+window.__audioSupport.MULTI_CHANNEL),cc.log("WEB_AUDIO: "+window.__audioSupport.WEB_AUDIO),cc.log("AUTOPLAY: "+window.__audioSupport.AUTOPLAY)},0)}(),cc.Audio=cc.Class.extend({src:null,_element:null,_AUDIO_TYPE:"AUDIO",ctor:function(a){this.src=a},setBuffer:function(a){this._AUDIO_TYPE="WEBAUDIO",this._element=new cc.Audio.WebAudio(a)},setElement:function(a){this._AUDIO_TYPE="AUDIO",this._element=a,a.addEventListener("ended",function(){a.loop||(a.paused=!0)})},play:function(a,b){this._element&&(this._element.loop=b,this._element.play(),"AUDIO"===this._AUDIO_TYPE&&this._element.paused&&(this.stop(),cc.Audio.touchPlayList.push({loop:b,offset:a,audio:this._element})),cc.Audio.bindTouch===!1&&(cc.Audio.bindTouch=!0,cc.game.canvas.addEventListener("touchstart",cc.Audio.touchStart)))},getPlaying:function(){return!this._element||!this._element.paused},stop:function(){if(this._element){this._element.pause();try{this._element.currentTime=0}catch(a){}}},pause:function(){this._element&&this._element.pause()},resume:function(){this._element&&this._element.play()},setVolume:function(a){this._element&&(this._element.volume=a)},getVolume:function(){if(this._element)return this._element.volume},cloneNode:function(){var a=new cc.Audio(this.src);if("AUDIO"===this._AUDIO_TYPE){for(var b=document.createElement("audio"),c=b.getElementsByTagName("source"),d=0;d<c.length;d++)b.appendChild(c[d]);b.src=this.src,a.setElement(b)}else a.setBuffer(this._element.buffer);return a}}),cc.Audio.touchPlayList=[],cc.Audio.bindTouch=!1,cc.Audio.touchStart=function(){for(var a=cc.Audio.touchPlayList,b=null;b=a.pop();)b.audio.loop=!!b.loop,b.audio.play(b.offset)},cc.Audio.WebAudio=function(a){this.buffer=a,this.context=cc.Audio._context;var b=this.context.createGain();b.gain.value=1,b.connect(this.context.destination),this._volume=b,this._loop=!1,this._startTime=-1,this._currentSource=null,this.playedLength=0,this._currextTimer=null},cc.Audio.WebAudio.prototype={constructor:cc.Audio.WebAudio,get paused(){return(!this._currentSource||!this._currentSource.loop)&&(this._startTime===-1||this.context.currentTime-this._startTime>this.buffer.duration)},set paused(a){},get loop(){return this._loop},set loop(a){return this._loop=a},get volume(){return this._volume.gain.value},set volume(a){return this._volume.gain.value=a},get currentTime(){return this.playedLength},set currentTime(a){return this.playedLength=a},play:function(a){this._currentSource&&!this.paused&&(this._currentSource.stop(0),this.playedLength=0);var b=this.context.createBufferSource();b.buffer=this.buffer,b.connect(this._volume),b.loop=this._loop,this._startTime=this.context.currentTime,a=a||this.playedLength;var c=this.buffer.duration;if(this._loop?b.start?b.start(0):b.notoGrainOn?b.noteGrainOn(0):b.noteOn(0):b.start?b.start(0,a,c-a):b.notoGrainOn?b.noteGrainOn(0,a,c-a):b.noteOn(0,a,c-a),this._currentSource=b,0===this.context.currentTime){var d=this;clearTimeout(this._currextTimer),this._currextTimer=setTimeout(function(){0===d.context.currentTime&&cc.Audio.touchPlayList.push({offset:a,audio:d})},10)}},pause:function(){this.playedLength=this.context.currentTime-this._startTime,this.playedLength%=this.buffer.duration;var a=this._currentSource;this._currentSource=null,this._startTime=-1,a&&a.stop(0)}},function(a){var b=a.WEB_AUDIO,c=a.ONLY_ONE,d=[];!function(){var a=document.createElement("audio");if(a.canPlayType){var b=a.canPlayType('audio/ogg; codecs="vorbis"');b&&""!==b&&d.push(".ogg");var c=a.canPlayType("audio/mpeg");c&&""!==c&&d.push(".mp3");var e=a.canPlayType('audio/wav; codecs="1"');e&&""!==e&&d.push(".wav");var f=a.canPlayType("audio/mp4");f&&""!==f&&d.push(".mp4");var g=a.canPlayType("audio/x-m4a");g&&""!==g&&d.push(".m4a")}}();try{if(b){var e=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext);cc.Audio._context=e,a.DELAY_CREATE_CTX&&setTimeout(function(){e=new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext),cc.Audio._context=e},0)}}catch(a){b=!1,cc.log("browser don't support web audio")}var f={cache:{},useWebAudio:!1,loadBuffer:function(a,c){if(b){var d=new XMLHttpRequest;d.open("GET",a,!0),d.responseType="arraybuffer",d.onload=function(){e.decodeAudioData(d.response,function(a){c(null,a)},function(){c("decode error - "+a)})},d.onerror=function(){c("request error - "+a)},d.send()}},load:function(a,b,c,e){if(0===d.length)return e("can not support audio!");var f=cc.loader.getRes(b);if(f)return e(null,f);var g;cc.loader.audioPath&&(a=cc.path.join(cc.loader.audioPath,a));var h=cc.path.extname(a),i=[h];for(g=0;g<d.length;g++)h!==d[g]&&i.push(d[g]);return f=new cc.Audio(a),cc.loader.cache[b]=f,this.loadAudioFromExtList(a,i,f,e),f},loadAudioFromExtList:function(c,e,f,g){if(0===e.length){var h="can not found the resource of audio! Last match url is : ";return h+=c.replace(/\.(.*)?$/,"("),d.forEach(function(a){h+=a+"|"}),h=h.replace(/\|$/,")"),g({status:520,errorMessage:h},null)}if(b&&this.useWebAudio)return void this.loadBuffer(c,function(a,b){a&&cc.log(a),b&&f.setBuffer(b),g(null,f)});for(var i=a.ONE_SOURCE?1:e.length,j=document.createElement("audio"),k=0;k<i;k++){var l=document.createElement("source");l.src=cc.path.changeExtname(c,e[k]),j.appendChild(l)}f.setElement(j);var m=setTimeout(function(){0===j.readyState?o():n()},8e3),n=function(){j.removeEventListener("canplaythrough",n,!1),j.removeEventListener("error",o,!1),j.removeEventListener("emptied",n,!1),a.USE_LOADER_EVENT&&j.removeEventListener(a.USE_LOADER_EVENT,n,!1),clearTimeout(m),g(null,f)},o=function(){cc.log("load audio failure - "+c),n()};j.addEventListener("canplaythrough",n,!1),j.addEventListener("error",o,!1),a.USE_LOADER_EVENT&&j.addEventListener(a.USE_LOADER_EVENT,n,!1)}};cc.loader.register(["mp3","ogg","wav","mp4","m4a"],f),cc.audioEngine={_currMusic:null,_musicVolume:1,features:a,willPlayMusic:function(){return!1},playMusic:function(a,b){var c=this._currMusic;c&&c.getPlaying()&&c.stop();var d=cc.loader.getRes(a);d||(cc.loader.load(a),d=cc.loader.getRes(a)),d.setVolume(this._musicVolume),d.play(0,b||!1),this._currMusic=d},stopMusic:function(a){var b=this._currMusic;b&&(b.stop(),this._currMusic=null,a&&cc.loader.release(b.src))},pauseMusic:function(){var a=this._currMusic;a&&a.pause()},resumeMusic:function(){var a=this._currMusic;a&&a.resume()},rewindMusic:function(){var a=this._currMusic;a&&(a.stop(),a.play())},getMusicVolume:function(){return this._musicVolume},setMusicVolume:function(a){a-=0,isNaN(a)&&(a=1),a>1&&(a=1),a<0&&(a=0),this._musicVolume=a;var b=this._currMusic;b&&b.setVolume(a)},isMusicPlaying:function(){var a=this._currMusic;return!!a&&a.getPlaying()},_audioPool:{},_maxAudioInstance:10,_effectVolume:1,playEffect:function(a,d){if(c&&this._currMusic&&this._currMusic.getPlaying())return cc.log("Browser is only allowed to play one audio"),null;var e=this._audioPool[a];e||(e=this._audioPool[a]=[]);var g;for(g=0;g<e.length&&e[g].getPlaying();g++);if(!b&&g>this._maxAudioInstance){var h=e.shift();h.stop(),e.push(h),g=e.length-1}var i;if(e[g])return i=e[g],i.setVolume(this._effectVolume),i.play(0,d||!1),i;if(i=cc.loader.getRes(a),i&&b&&"AUDIO"===i._AUDIO_TYPE&&(cc.loader.release(a),i=null),i){if(!b||"AUDIO"!==i._AUDIO_TYPE)return i=i.cloneNode(),i.setVolume(this._effectVolume),i.play(0,d||!1),e.push(i),i;f.loadBuffer(a,function(a,b){i.setBuffer(b),i.setVolume(cc.audioEngine._effectVolume),i.getPlaying()||i.play(0,d||!1)})}return f.useWebAudio=!0,cc.loader.load(a,function(b){b=cc.loader.getRes(a),b=b.cloneNode(),b.setVolume(cc.audioEngine._effectVolume),b.play(0,d||!1),e.push(b)}),f.useWebAudio=!1,i},setEffectsVolume:function(a){a-=0,isNaN(a)&&(a=1),a>1&&(a=1),a<0&&(a=0),this._effectVolume=a;var b=this._audioPool;for(var c in b){var d=b[c];if(Array.isArray(d))for(var e=0;e<d.length;e++)d[e].setVolume(a)}},getEffectsVolume:function(){return this._effectVolume},pauseEffect:function(a){a&&a.pause()},pauseAllEffects:function(){var a=this._audioPool;for(var b in a)for(var c=a[b],d=0;d<a[b].length;d++)c[d].getPlaying()&&c[d].pause()},resumeEffect:function(a){a&&a.resume()},resumeAllEffects:function(){var a=this._audioPool;for(var b in a)for(var c=a[b],d=0;d<a[b].length;d++)c[d].resume()},stopEffect:function(a){a&&a.stop()},stopAllEffects:function(){var a=this._audioPool;for(var b in a){for(var c=a[b],d=0;d<c.length;d++)c[d].stop();c.length=0}},unloadEffect:function(a){if(a){cc.loader.release(a);var b=this._audioPool[a];b&&(b.length=0),delete this._audioPool[a]}},end:function(){this.stopMusic(),this.stopAllEffects()},_pauseCache:[],_pausePlaying:function(){var a=this._currMusic;a&&a.getPlaying()&&(a.pause(),this._pauseCache.push(a));var b=this._audioPool;for(var c in b)for(var d=b[c],e=0;e<b[c].length;e++)d[e].getPlaying()&&(d[e].pause(),this._pauseCache.push(d[e]))},_resumePlaying:function(){for(var a=this._pauseCache,b=0;b<a.length;b++)a[b].resume();a.length=0}}}(window.__audioSupport);cc._globalFontSize=cc.ITEM_SIZE,cc._globalFontName="Arial",cc._globalFontNameRelease=!1,cc.MenuItem=cc.Node.extend({_enabled:!1,_target:null,_callback:null,_isSelected:!1,_className:"MenuItem",ctor:function(a,b){var c=cc.Node.prototype;c.ctor.call(this),this._target=null,this._callback=null,this._isSelected=!1,this._enabled=!1,c.setAnchorPoint.call(this,.5,.5),this._target=b||null,this._callback=a||null,this._callback&&(this._enabled=!0)},isSelected:function(){return this._isSelected},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},setTarget:function(a,b){this._target=b,this._callback=a},isEnabled:function(){return this._enabled},setEnabled:function(a){this._enabled=a},initWithCallback:function(a,b){return this.anchorX=.5,this.anchorY=.5,this._target=b,this._callback=a,this._enabled=!0,this._isSelected=!1,!0},rect:function(){var a=this._position,b=this._contentSize,c=this._anchorPoint;return cc.rect(a.x-b.width*c.x,a.y-b.height*c.y,b.width,b.height)},selected:function(){this._isSelected=!0},unselected:function(){this._isSelected=!1},setCallback:function(a,b){this._target=b,this._callback=a},activate:function(){if(this._enabled){var a=this._target,b=this._callback;if(!b)return;a&&cc.isString(b)?a[b](this):a&&cc.isFunction(b)?b.call(a,this):b(this)}}});var _p=cc.MenuItem.prototype;_p.enabled,cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),cc.MenuItem.create=function(a,b){return new cc.MenuItem(a,b)},cc.MenuItemLabel=cc.MenuItem.extend({_disabledColor:null,_label:null,_originalScale:0,_colorBackup:null,ctor:function(a,b,c){cc.MenuItem.prototype.ctor.call(this,b,c),this._disabledColor=null,this._label=null,this._colorBackup=null,a&&(this._originalScale=1,this._colorBackup=cc.color.WHITE,this._disabledColor=cc.color(126,126,126),this.setLabel(a),a.textureLoaded&&!a.textureLoaded()&&a.addEventListener("load",function(a){this.width=a.width,this.height=a.height,this.parent instanceof cc.Menu&&this.parent.updateAlign()},this),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0))},getDisabledColor:function(){return this._disabledColor},setDisabledColor:function(a){this._disabledColor=a},getLabel:function(){return this._label},setLabel:function(a){a&&(this.addChild(a),a.anchorX=0,a.anchorY=0,this.width=a.width,this.height=a.height,a.setCascadeColorEnabled(!0)),this._label&&this.removeChild(this._label,!0),this._label=a},setEnabled:function(a){this._enabled!==a&&(a?this.setColor(this._colorBackup):(this._colorBackup=this.color,this.setColor(this._disabledColor))),cc.MenuItem.prototype.setEnabled.call(this,a)},initWithLabel:function(a,b,c){return this.initWithCallback(b,c),this._originalScale=1,this._colorBackup=cc.color.WHITE,this._disabledColor=cc.color(126,126,126),this.setLabel(a),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},setString:function(a){this._label.string=a,this.width=this._label.width,this.height=this._label.height},getString:function(){return this._label.string},activate:function(){this._enabled&&(this.stopAllActions(),this.scale=this._originalScale,cc.MenuItem.prototype.activate.call(this))},selected:function(){if(this._enabled){cc.MenuItem.prototype.selected.call(this);var a=this.getActionByTag(cc.ZOOM_ACTION_TAG);a?this.stopAction(a):this._originalScale=this.scale;var b=cc.scaleTo(.1,1.2*this._originalScale);b.setTag(cc.ZOOM_ACTION_TAG),this.runAction(b)}},unselected:function(){if(this._enabled){cc.MenuItem.prototype.unselected.call(this),this.stopActionByTag(cc.ZOOM_ACTION_TAG);var a=cc.scaleTo(.1,this._originalScale);a.setTag(cc.ZOOM_ACTION_TAG),this.runAction(a)}}});var _p=cc.MenuItemLabel.prototype;_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p.disabledColor,cc.defineGetterSetter(_p,"disabledColor",_p.getDisabledColor,_p.setDisabledColor),_p.label,cc.defineGetterSetter(_p,"label",_p.getLabel,_p.setLabel),cc.MenuItemLabel.create=function(a,b,c){return new cc.MenuItemLabel(a,b,c)},cc.MenuItemAtlasFont=cc.MenuItemLabel.extend({ctor:function(a,b,c,d,e,f,g){var h;a&&a.length>0&&(h=new cc.LabelAtlas(a,b,c,d,e)),cc.MenuItemLabel.prototype.ctor.call(this,h,f,g)},initWithString:function(a,b,c,d,e,f,g){if(!a||0===a.length)throw new Error("cc.MenuItemAtlasFont.initWithString(): value should be non-null and its length should be greater than 0");var h=new cc.LabelAtlas;return h.initWithString(a,b,c,d,e),this.initWithLabel(h,f,g),!0}}),cc.MenuItemAtlasFont.create=function(a,b,c,d,e,f,g){return new cc.MenuItemAtlasFont(a,b,c,d,e,f,g)},cc.MenuItemFont=cc.MenuItemLabel.extend({_fontSize:null,_fontName:null,ctor:function(a,b,c){var d;a&&a.length>0?(this._fontName=cc._globalFontName,this._fontSize=cc._globalFontSize,d=new cc.LabelTTF(a,this._fontName,this._fontSize)):(this._fontSize=0,this._fontName=""),cc.MenuItemLabel.prototype.ctor.call(this,d,b,c)},initWithString:function(a,b,c){if(!a||0===a.length)throw new Error("Value should be non-null and its length should be greater than 0");this._fontName=cc._globalFontName,this._fontSize=cc._globalFontSize;var d=new cc.LabelTTF(a,this._fontName,this._fontSize);return this.initWithLabel(d,b,c),!0},setFontSize:function(a){this._fontSize=a,this._recreateLabel()},getFontSize:function(){return this._fontSize},setFontName:function(a){this._fontName=a,this._recreateLabel()},getFontName:function(){return this._fontName},_recreateLabel:function(){var a=new cc.LabelTTF(this._label.string,this._fontName,this._fontSize);this.setLabel(a)}}),cc.MenuItemFont.setFontSize=function(a){cc._globalFontSize=a},cc.MenuItemFont.fontSize=function(){return cc._globalFontSize},cc.MenuItemFont.setFontName=function(a){cc._globalFontNameRelease&&(cc._globalFontName=""),cc._globalFontName=a,cc._globalFontNameRelease=!0};var _p=cc.MenuItemFont.prototype;_p.fontSize,cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),_p.fontName,cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),cc.MenuItemFont.fontName=function(){return cc._globalFontName},cc.MenuItemFont.create=function(a,b,c){return new cc.MenuItemFont(a,b,c)},cc.MenuItemSprite=cc.MenuItem.extend({_normalImage:null,_selectedImage:null,_disabledImage:null,ctor:function(a,b,c,d,e){if(cc.MenuItem.prototype.ctor.call(this),this._normalImage=null,this._selectedImage=null,this._disabledImage=null,this._loader=new cc.Sprite.LoadManager,void 0!==a){b=b||null;var f,g,h;return void 0!==e?(f=c,h=d,g=e):void 0!==d&&cc.isFunction(d)?(f=c,h=d):void 0!==d&&cc.isFunction(c)?(g=d,h=c,f=null):void 0===c&&(f=null),this._loader.clear(),a.textureLoaded&&!a.textureLoaded()?(this._loader.once(a,function(){this.initWithNormalSprite(a,b,f,h,g)},this),!1):(this.initWithNormalSprite(a,b,f,h,g),!0)}},getNormalImage:function(){return this._normalImage},setNormalImage:function(a){this._normalImage!==a&&(a&&(this.addChild(a,0,cc.NORMAL_TAG),a.anchorX=0,a.anchorY=0),this._normalImage&&this.removeChild(this._normalImage,!0),this._normalImage=a,this._normalImage&&(this.width=this._normalImage.width,this.height=this._normalImage.height,this._updateImagesVisibility(),a.textureLoaded&&!a.textureLoaded()&&a.addEventListener("load",function(a){this.width=a.width,this.height=a.height,this.parent instanceof cc.Menu&&this.parent.updateAlign()},this)))},getSelectedImage:function(){return this._selectedImage},setSelectedImage:function(a){this._selectedImage!==a&&(a&&(this.addChild(a,0,cc.SELECTED_TAG),a.anchorX=0,a.anchorY=0),this._selectedImage&&this.removeChild(this._selectedImage,!0),this._selectedImage=a,this._updateImagesVisibility())},getDisabledImage:function(){return this._disabledImage},setDisabledImage:function(a){this._disabledImage!==a&&(a&&(this.addChild(a,0,cc.DISABLE_TAG),a.anchorX=0,a.anchorY=0),this._disabledImage&&this.removeChild(this._disabledImage,!0),this._disabledImage=a,this._updateImagesVisibility())},initWithNormalSprite:function(a,b,c,d,e){if(this._loader.clear(),a.textureLoaded&&!a.textureLoaded())return this._loader.once(a,function(){this.initWithNormalSprite(a,b,c,d,e)},this),!1;this.initWithCallback(d,e),this.setNormalImage(a),this.setSelectedImage(b),this.setDisabledImage(c);var f=this._normalImage;return f&&(this.width=f.width,this.height=f.height),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},selected:function(){cc.MenuItem.prototype.selected.call(this),this._normalImage&&(this._disabledImage&&(this._disabledImage.visible=!1),this._selectedImage?(this._normalImage.visible=!1,this._selectedImage.visible=!0):this._normalImage.visible=!0)},unselected:function(){cc.MenuItem.prototype.unselected.call(this),this._normalImage&&(this._normalImage.visible=!0,this._selectedImage&&(this._selectedImage.visible=!1),this._disabledImage&&(this._disabledImage.visible=!1))},setEnabled:function(a){this._enabled!==a&&(cc.MenuItem.prototype.setEnabled.call(this,a),this._updateImagesVisibility())},_updateImagesVisibility:function(){var a=this._normalImage,b=this._selectedImage,c=this._disabledImage;this._enabled?(a&&(a.visible=!0),b&&(b.visible=!1),c&&(c.visible=!1)):c?(a&&(a.visible=!1),b&&(b.visible=!1),c&&(c.visible=!0)):(a&&(a.visible=!0),b&&(b.visible=!1))}});var _p=cc.MenuItemSprite.prototype;_p.normalImage,cc.defineGetterSetter(_p,"normalImage",_p.getNormalImage,_p.setNormalImage),_p.selectedImage,cc.defineGetterSetter(_p,"selectedImage",_p.getSelectedImage,_p.setSelectedImage),_p.disabledImage,cc.defineGetterSetter(_p,"disabledImage",_p.getDisabledImage,_p.setDisabledImage),cc.MenuItemSprite.create=function(a,b,c,d,e){return new cc.MenuItemSprite(a,b,c,d,e||void 0)},cc.MenuItemImage=cc.MenuItemSprite.extend({ctor:function(a,b,c,d,e){var f=null,g=null,h=null,i=null,j=null;void 0===a||null===a?cc.MenuItemSprite.prototype.ctor.call(this):(f=new cc.Sprite(a),b&&(g=new cc.Sprite(b)),void 0===d?i=c:void 0===e?(i=c,j=d):e&&(h=new cc.Sprite(c),i=d,j=e),cc.MenuItemSprite.prototype.ctor.call(this,f,g,h,i,j))},setNormalSpriteFrame:function(a){this.setNormalImage(new cc.Sprite(a))},setSelectedSpriteFrame:function(a){this.setSelectedImage(new cc.Sprite(a))},setDisabledSpriteFrame:function(a){this.setDisabledImage(new cc.Sprite(a))},initWithNormalImage:function(a,b,c,d,e){var f=null,g=null,h=null;return a&&(f=new cc.Sprite(a)),b&&(g=new cc.Sprite(b)),c&&(h=new cc.Sprite(c)),this.initWithNormalSprite(f,g,h,d,e)}}),cc.MenuItemImage.create=function(a,b,c,d,e){return new cc.MenuItemImage(a,b,c,d,e)},cc.MenuItemToggle=cc.MenuItem.extend({subItems:null,_selectedIndex:0,_opacity:null,_color:null,ctor:function(){cc.MenuItem.prototype.ctor.call(this),this._selectedIndex=0,this.subItems=[],this._opacity=0,this._color=cc.color.WHITE,arguments.length>0&&this.initWithItems(Array.prototype.slice.apply(arguments))},getOpacity:function(){return this._opacity},setOpacity:function(a){if(this._opacity=a,this.subItems&&this.subItems.length>0)for(var b=0;b<this.subItems.length;b++)this.subItems[b].opacity=a;this._color.a=a},getColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},setColor:function(a){var b=this._color;if(b.r=a.r,b.g=a.g,b.b=a.b,this.subItems&&this.subItems.length>0)for(var c=0;c<this.subItems.length;c++)this.subItems[c].setColor(a);void 0===a.a||a.a_undefined||this.setOpacity(a.a)},getSelectedIndex:function(){return this._selectedIndex},setSelectedIndex:function(a){if(a!==this._selectedIndex){this._selectedIndex=a;var b=this.getChildByTag(cc.CURRENT_ITEM);b&&b.removeFromParent(!1);var c=this.subItems[this._selectedIndex];this.addChild(c,0,cc.CURRENT_ITEM);var d=c.width,e=c.height;this.width=d,this.height=e,c.setPosition(d/2,e/2)}},getSubItems:function(){return this.subItems},setSubItems:function(a){this.subItems=a},initWithItems:function(a){var b=a.length;cc.isFunction(a[a.length-2])?(this.initWithCallback(a[a.length-2],a[a.length-1]),b-=2):cc.isFunction(a[a.length-1])?(this.initWithCallback(a[a.length-1],null),b-=1):this.initWithCallback(null,null);var c=this.subItems;c.length=0;for(var d=0;d<b;d++)a[d]&&c.push(a[d]);return this._selectedIndex=cc.UINT_MAX,this.setSelectedIndex(0),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),!0},addSubItem:function(a){this.subItems.push(a)},activate:function(){if(this._enabled){var a=(this._selectedIndex+1)%this.subItems.length;this.setSelectedIndex(a)}cc.MenuItem.prototype.activate.call(this)},selected:function(){cc.MenuItem.prototype.selected.call(this),this.subItems[this._selectedIndex].selected()},unselected:function(){cc.MenuItem.prototype.unselected.call(this),this.subItems[this._selectedIndex].unselected()},setEnabled:function(a){if(this._enabled!==a){cc.MenuItem.prototype.setEnabled.call(this,a);var b=this.subItems;if(b&&b.length>0)for(var c=0;c<b.length;c++)b[c].enabled=a}},selectedItem:function(){return this.subItems[this._selectedIndex]},getSelectedItem:function(){return this.subItems[this._selectedIndex]},onEnter:function(){cc.Node.prototype.onEnter.call(this),this.setSelectedIndex(this._selectedIndex)}});var _p=cc.MenuItemToggle.prototype;_p.selectedIndex,cc.defineGetterSetter(_p,"selectedIndex",_p.getSelectedIndex,_p.setSelectedIndex),cc.MenuItemToggle.create=function(){arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var a=new cc.MenuItemToggle;return a.initWithItems(Array.prototype.slice.apply(arguments)),a},cc.MENU_STATE_WAITING=0,cc.MENU_STATE_TRACKING_TOUCH=1,cc.MENU_HANDLER_PRIORITY=-128,cc.DEFAULT_PADDING=5,cc.Menu=cc.Layer.extend({enabled:!1,_selectedItem:null,_state:-1,_touchListener:null,_className:"Menu",ctor:function(a){cc.Layer.prototype.ctor.call(this),this._color=cc.color.WHITE,this.enabled=!1,this._opacity=255,this._selectedItem=null,this._state=-1,this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this._onTouchBegan,onTouchMoved:this._onTouchMoved,onTouchEnded:this._onTouchEnded,onTouchCancelled:this._onTouchCancelled}),arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var b,c=arguments.length;if(0===c)b=[];else if(1===c)b=a instanceof Array?a:[a];else if(c>1){b=[];for(var d=0;d<c;d++)arguments[d]&&b.push(arguments[d])}this.initWithArray(b)},onEnter:function(){var a=this._touchListener;a._isRegistered()||cc.eventManager.addListener(a,this),cc.Node.prototype.onEnter.call(this)},isEnabled:function(){return this.enabled},setEnabled:function(a){this.enabled=a},initWithItems:function(a){var b=[];if(a)for(var c=0;c<a.length;c++)a[c]&&b.push(a[c]);return this.initWithArray(b)},initWithArray:function(a){if(cc.Layer.prototype.init.call(this)){this.enabled=!0;var b=cc.winSize;if(this.setPosition(b.width/2,b.height/2),this.setContentSize(b),this.setAnchorPoint(.5,.5),this.ignoreAnchorPointForPosition(!0),a)for(var c=0;c<a.length;c++)this.addChild(a[c],c);return this._selectedItem=null,this._state=cc.MENU_STATE_WAITING,this.cascadeColor=!0,this.cascadeOpacity=!0,!0}return!1},addChild:function(a,b,c){if(!(a instanceof cc.MenuItem))throw new Error("cc.Menu.addChild() : Menu only supports MenuItem objects as children");cc.Layer.prototype.addChild.call(this,a,b,c)},updateAlign:function(){switch(this._align){case"vertically":this.alignItemsVertically();break;case"horizontally":this.alignItemsHorizontally()}},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(a){this._align="vertically";var b,c,d,e,f,g=-a,h=this._children;if(h&&h.length>0){for(c=0,b=h.length;c<b;c++)g+=h[c].height*h[c].scaleY+a;var i=g/2;for(c=0,b=h.length;c<b;c++)f=h[c],e=f.height,d=f.scaleY,f.setPosition(0,i-e*d/2),i-=e*d+a}},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(a){this._align="horizontally";var b,c,d,e,f,g=-a,h=this._children;if(h&&h.length>0){for(b=0,c=h.length;b<c;b++)g+=h[b].width*h[b].scaleX+a;var i=-g/2;for(b=0,c=h.length;b<c;b++)f=h[b],d=f.scaleX,e=h[b].width,f.setPosition(i+e*d/2,0),i+=e*d+a}},alignItemsInColumns:function(){arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);var c,d,e,f=-5,g=0,h=0,i=0,j=this._children;if(j&&j.length>0)for(b=0,e=j.length;b<e;b++)g>=a.length||(c=a[g],c&&(d=j[b].height,h=h>=d||isNaN(d)?h:d,++i,i>=c&&(f+=h+5,i=0,h=0,++g)));var k=cc.director.getWinSize();g=0,h=0,c=0;var l=0,m=0,n=f/2;if(j&&j.length>0)for(b=0,e=j.length;b<e;b++){var o=j[b];0===c&&(c=a[g],l=k.width/(1+c),m=l),d=o._getHeight(),h=h>=d||isNaN(d)?h:d,o.setPosition(m-k.width/2,n-d/2),m+=l,++i,i>=c&&(n-=h+5,i=0,c=0,h=0,++g)}},alignItemsInRows:function(){arguments.length>0&&null==arguments[arguments.length-1]&&cc.log("parameters should not be ending with null in Javascript");var a,b=[];for(a=0;a<arguments.length;a++)b.push(arguments[a]);var c,d,e,f,g=[],h=[],i=-10,j=-5,k=0,l=0,m=0,n=this._children;if(n&&n.length>0)for(a=0,e=n.length;a<e;a++)d=n[a],k>=b.length||(c=b[k],c&&(f=d.width,l=l>=f||isNaN(f)?l:f,j+=d.height+5,++m,m>=c&&(g.push(l),h.push(j),i+=l+10,m=0,l=0,j=-5,++k)));var o=cc.director.getWinSize();k=0,l=0,c=0;var p=-i/2,q=0;if(n&&n.length>0)for(a=0,e=n.length;a<e;a++)d=n[a],0===c&&(c=b[k],q=h[k]),f=d._getWidth(),l=l>=f||isNaN(f)?l:f,d.setPosition(p+g[k]/2,q-o.height/2),q-=d.height+10,++m,m>=c&&(p+=l+5,m=0,c=0,l=0,++k)},removeChild:function(a,b){if(null!=a){if(!(a instanceof cc.MenuItem))return void cc.log("cc.Menu.removeChild():Menu only supports MenuItem objects as children");this._selectedItem===a&&(this._selectedItem=null),cc.Node.prototype.removeChild.call(this,a,b)}},_onTouchBegan:function(a,b){var c=b.getCurrentTarget();if(c._state!==cc.MENU_STATE_WAITING||!c._visible||!c.enabled)return!1;for(var d=c.parent;null!=d;d=d.parent)if(!d.isVisible())return!1;return c._selectedItem=c._itemForTouch(a),!!c._selectedItem&&(c._state=cc.MENU_STATE_TRACKING_TOUCH,c._selectedItem.selected(),c._selectedItem.setNodeDirty(),!0)},_onTouchEnded:function(a,b){var c=b.getCurrentTarget();return c._state!==cc.MENU_STATE_TRACKING_TOUCH?void cc.log("cc.Menu.onTouchEnded(): invalid state"):(c._selectedItem&&(c._selectedItem.unselected(),c._selectedItem.setNodeDirty(),c._selectedItem.activate()),void(c._state=cc.MENU_STATE_WAITING))},_onTouchCancelled:function(a,b){var c=b.getCurrentTarget();return c._state!==cc.MENU_STATE_TRACKING_TOUCH?void cc.log("cc.Menu.onTouchCancelled(): invalid state"):(c._selectedItem&&(c._selectedItem.unselected(),c._selectedItem.setNodeDirty()),void(c._state=cc.MENU_STATE_WAITING))},_onTouchMoved:function(a,b){var c=b.getCurrentTarget();if(c._state!==cc.MENU_STATE_TRACKING_TOUCH)return void cc.log("cc.Menu.onTouchMoved(): invalid state");var d=c._itemForTouch(a);d!==c._selectedItem&&(c._selectedItem&&(c._selectedItem.unselected(),c._selectedItem.setNodeDirty()),c._selectedItem=d,c._selectedItem&&(c._selectedItem.selected(),c._selectedItem.setNodeDirty()))},onExit:function(){this._state===cc.MENU_STATE_TRACKING_TOUCH&&(this._selectedItem&&(this._selectedItem.unselected(),this._selectedItem=null),this._state=cc.MENU_STATE_WAITING),cc.Node.prototype.onExit.call(this)},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},_itemForTouch:function(a){var b,c=a.getLocation(),d=this._children;if(d&&d.length>0)for(var e=d.length-1;e>=0;e--)if(b=d[e],b.isVisible()&&b.isEnabled()){var f=b.convertToNodeSpace(c),g=b.rect();if(g.x=0,g.y=0,cc.rectContainsPoint(g,f))return b}return null}});var _p=cc.Menu.prototype;_p.enabled,cc.Menu.create=function(a){var b=arguments.length;b>0&&null==arguments[b-1]&&cc.log("parameters should not be ending with null in Javascript");var c;return c=0===b?new cc.Menu:1===b?new cc.Menu(a):new cc.Menu(Array.prototype.slice.call(arguments,0))};cc.IMAGE_FORMAT_JPEG=0,cc.IMAGE_FORMAT_PNG=1,cc.IMAGE_FORMAT_RAWDATA=9,cc.NextPOT=function(a){return a-=1,a|=a>>1,a|=a>>2,a|=a>>4,a|=a>>8,a|=a>>16,a+1},cc.RenderTexture=cc.Node.extend({sprite:null,clearFlags:0,clearDepthVal:0,autoDraw:!1,_texture:null,_pixelFormat:0,clearStencilVal:0,_clearColor:null,_className:"RenderTexture",ctor:function(a,b,c,d){cc.Node.prototype.ctor.call(this),this._cascadeColorEnabled=!0,this._cascadeOpacityEnabled=!0,this._pixelFormat=cc.Texture2D.PIXEL_FORMAT_RGBA8888,this._clearColor=new cc.Color(0,0,0,255),void 0!==a&&void 0!==b&&(c=c||cc.Texture2D.PIXEL_FORMAT_RGBA8888,d=d||0,this.initWithWidthAndHeight(a,b,c,d)),this.setAnchorPoint(0,0)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.RenderTexture.CanvasRenderCmd(this):new cc.RenderTexture.WebGLRenderCmd(this)},cleanup:function(){cc.Node.prototype.onExit.call(this),this._renderCmd.cleanup()},getSprite:function(){return this.sprite},setSprite:function(a){this.sprite=a},setVirtualViewport:function(a,b,c){this._renderCmd.setVirtualViewport(a,b,c)},initWithWidthAndHeight:function(a,b,c,d){return this._renderCmd.initWithWidthAndHeight(a,b,c,d)},begin:function(){cc.renderer._turnToCacheMode(this.__instanceId),this._renderCmd.begin()},beginWithClear:function(a,b,c,d,e,f){var g=cc._renderContext;e=e||g.COLOR_BUFFER_BIT,f=f||g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT,this._beginWithClear(a,b,c,d,e,f,g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT|g.STENCIL_BUFFER_BIT)},_beginWithClear:function(a,b,c,d,e,f,g){this.begin(),this._renderCmd._beginWithClear(a,b,c,d,e,f,g)},end:function(){this._renderCmd.end()},clear:function(a,b,c,d){this.beginWithClear(a,b,c,d),this.end()},clearRect:function(a,b,c,d){this._renderCmd.clearRect(a,b,c,d)},clearDepth:function(a){this._renderCmd.clearDepth(a)},clearStencil:function(a){this._renderCmd.clearStencil(a)},getClearFlags:function(){return this.clearFlags},setClearFlags:function(a){this.clearFlags=a},getClearColor:function(){return this._clearColor},setClearColor:function(a){var b=this._clearColor;b.r=a.r,b.g=a.g,b.b=a.b,b.a=a.a,this._renderCmd.updateClearColor(a)},getClearDepth:function(){return this.clearDepthVal},setClearDepth:function(a){this.clearDepthVal=a},getClearStencil:function(){return this.clearStencilVal},setClearStencil:function(a){this.clearStencilVal=a},isAutoDraw:function(){return this.autoDraw},setAutoDraw:function(a){this.autoDraw=a},saveToFile:function(a,b){cc.log("saveToFile isn't supported on Cocos2d-Html5")},newCCImage:function(a){return cc.log("saveToFile isn't supported on cocos2d-html5"),null},listenToBackground:function(a){},listenToForeground:function(a){}});var _p=cc.RenderTexture.prototype;_p.clearColorVal,cc.defineGetterSetter(_p,"clearColorVal",_p.getClearColor,_p.setClearColor),cc.RenderTexture.create=function(a,b,c,d){return new cc.RenderTexture(a,b,c,d)},function(){cc.RenderTexture.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._clearColorStr="rgba(255,255,255,1)",this._cacheCanvas=document.createElement("canvas"),this._cacheContext=new cc.CanvasContextWrapper(this._cacheCanvas.getContext("2d"))};var a=cc.RenderTexture.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.RenderTexture.CanvasRenderCmd,a.cleanup=function(){this._cacheContext=null,this._cacheCanvas=null},a.clearStencil=function(a){},a.setVirtualViewport=function(a,b,c){},a.updateClearColor=function(a){this._clearColorStr="rgba("+(0|a.r)+","+(0|a.g)+","+(0|a.b)+","+a.a/255+")"},a.initWithWidthAndHeight=function(a,b,c,d){var e=this._node,f=this._cacheCanvas,g=cc.contentScaleFactor();f.width=0|a*g,f.height=0|b*g;var h=new cc.Texture2D;h.initWithElement(f),h.handleLoadedTexture();var i=e.sprite=new cc.Sprite(h);return i.setBlendFunc(cc.ONE,cc.ONE_MINUS_SRC_ALPHA),e.autoDraw=!1,e.addChild(i),!0},a.begin=function(){},a._beginWithClear=function(a,b,c,d,e,f,g){a=a||0,b=b||0,c=c||0,d=isNaN(d)?255:d;var h=this._cacheContext.getContext(),i=this._cacheCanvas;h.setTransform(1,0,0,1,0,0),this._cacheContext.setFillStyle("rgba("+(0|a)+","+(0|b)+","+(0|c)+","+d/255+")"),h.clearRect(0,0,i.width,i.height),h.fillRect(0,0,i.width,i.height)},a.end=function(){var a=this._node,b=cc.contentScaleFactor();cc.renderer._renderingToCacheCanvas(this._cacheContext,a.__instanceId,b,b);var c=a.sprite._renderCmd;c._notifyRegionStatus&&c._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty)},a.clearRect=function(a,b,c,d){this._cacheContext.clearRect(a,b,c,-d)},a.clearDepth=function(a){cc.log("clearDepth isn't supported on Cocos2d-Html5")},a.visit=function(a){var b=this._node;this._syncStatus(a),b.sprite.visit(this),this._dirtyFlag=0}}();cc.SpriteBatchNode=cc.Node.extend({_blendFunc:null,_texture:null,_className:"SpriteBatchNode",ctor:function(a){cc.Node.prototype.ctor.call(this),this._blendFunc=new cc.BlendFunc(cc.BLEND_SRC,cc.BLEND_DST);var b;cc.isString(a)?(b=cc.textureCache.getTextureForKey(a),b||(b=cc.textureCache.addImage(a))):a instanceof cc.Texture2D&&(b=a),b&&this.initWithTexture(b)},addSpriteWithoutQuad:function(a,b,c){return this.addChild(a,b,c),this},getTextureAtlas:function(){return null},setTextureAtlas:function(a){},getDescendants:function(){return this._children},initWithFile:function(a,b){var c=cc.textureCache.getTextureForKey(a);return c||(c=cc.textureCache.addImage(a)),this.initWithTexture(c,b)},init:function(a,b){var c=cc.textureCache.getTextureForKey(a);return c||(c=cc.textureCache.addImage(a)),this.initWithTexture(c,b)},increaseAtlasCapacity:function(){},removeChildAtIndex:function(a,b){this.removeChild(this._children[a],b)},rebuildIndexInOrder:function(a,b){return b},highestAtlasIndexInChild:function(a){var b=a.children;return b&&0!==b.length?this.highestAtlasIndexInChild(b[b.length-1]):a.zIndex},lowestAtlasIndexInChild:function(a){var b=a.children;return b&&0!==b.length?this.lowestAtlasIndexInChild(b[b.length-1]):a.zIndex},atlasIndexForChild:function(a){return a.zIndex},reorderBatch:function(a){this._reorderChildDirty=a},setBlendFunc:function(a,b){void 0===b?this._blendFunc=a:this._blendFunc={src:a,dst:b}},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},updateQuadFromSprite:function(a,b){return cc.assert(a,cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite_2),a instanceof cc.Sprite?(a.dirty=!0,void a._renderCmd.transform(this._renderCmd,!0)):void cc.log(cc._LogInfos.CCSpriteBatchNode_updateQuadFromSprite)},insertQuadFromSprite:function(a,b){this.addChild(a,b)},insertChild:function(a,b){this.addChild(a,b)},appendChild:function(a){this.sortAllChildren();this._children[this._children.length-1]._localZOrder;this.addChild(a.lastLocalZOrder+1)},removeSpriteFromAtlas:function(a,b){this.removeChild(a,b)},initWithTexture:function(a){return this.setTexture(a),!0},getTexture:function(){return this._texture},setTexture:function(a){if(this._texture=a,a._textureLoaded){var b,c=this._children,d=c.length;for(b=0;b<d;++b)c[b].setTexture(a)}else a.addEventListener("load",function(){var b,c=this._children,d=c.length;for(b=0;b<d;++b)c[b].setTexture(a)},this)},setShaderProgram:function(a){this._renderCmd.setShaderProgram(a);var b,c=this._children,d=c.length;for(b=0;b<d;++b)c[b].setShaderProgram(a)},addChild:function(a,b,c){cc.assert(void 0!==a,cc._LogInfos.CCSpriteBatchNode_addChild_3),this._isValidChild(a)&&(b=void 0===b?a.zIndex:b,c=void 0===c?a.tag:c,cc.Node.prototype.addChild.call(this,a,b,c),this._renderCmd._shaderProgram&&(a.shaderProgram=this._renderCmd._shaderProgram))},_isValidChild:function(a){return a instanceof cc.Sprite?a.texture===this._texture||(cc.log(cc._LogInfos.Sprite_addChild_5),!1):(cc.log(cc._LogInfos.Sprite_addChild_4),!1)}});var _p=cc.SpriteBatchNode.prototype;cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.defineGetterSetter(_p,"shaderProgram",_p.getShaderProgram,_p.setShaderProgram),cc.SpriteBatchNode.create=function(a){return new cc.SpriteBatchNode(a)},cc.SpriteBatchNode.createWithTexture=cc.SpriteBatchNode.create;cc.LabelAtlas=cc.AtlasNode.extend({_string:null,_mapStartChar:null,_textureLoaded:!1,_className:"LabelAtlas",ctor:function(a,b,c,d,e){cc.AtlasNode.prototype.ctor.call(this),this._renderCmd.setCascade(),b&&cc.LabelAtlas.prototype.initWithString.call(this,a,b,c,d,e)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelAtlas.WebGLRenderCmd(this):new cc.LabelAtlas.CanvasRenderCmd(this)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},initWithString:function(a,b,c,d,e){var f,g,h,i,j=a+"";if(void 0===c){var k=cc.loader.getRes(b);if(1!==parseInt(k.version,10))return cc.log("cc.LabelAtlas.initWithString(): Unsupported version. Upgrade cocos2d version"),!1;f=cc.path.changeBasename(b,k.textureFilename);var l=cc.contentScaleFactor();g=parseInt(k.itemWidth,10)/l,h=parseInt(k.itemHeight,10)/l,i=String.fromCharCode(parseInt(k.firstChar,10))}else f=b,g=c||0,h=d||0,i=e||" ";var m=null;m=f instanceof cc.Texture2D?f:cc.textureCache.addImage(f);var n=m.isLoaded();return this._textureLoaded=n,n||(this._string=j,m.addEventListener("load",function(a){this.initWithTexture(m,g,h,j.length),this.string=this._string,this.setColor(this._renderCmd._displayedColor),this.dispatchEvent("load")},this)),!!this.initWithTexture(m,g,h,j.length)&&(this._mapStartChar=i,this.string=j,!0)},setColor:function(a){cc.AtlasNode.prototype.setColor.call(this,a),this._renderCmd.updateAtlasValues()},getString:function(){return this._string},addChild:function(a,b,c){this._renderCmd._addChild(a),cc.Node.prototype.addChild.call(this,a,b,c)},updateAtlasValues:function(){this._renderCmd.updateAtlasValues()},setString:function(a){a=String(a);var b=a.length;this._string=a,this.setContentSize(b*this._itemWidth,this._itemHeight),this._renderCmd.setString(a),this._renderCmd.updateAtlasValues(),this.quadsToDraw=b}}),function(){var a=cc.LabelAtlas.prototype;cc.defineGetterSetter(a,"opacity",a.getOpacity,a.setOpacity),cc.defineGetterSetter(a,"color",a.getColor,a.setColor),a.string,cc.defineGetterSetter(a,"string",a.getString,a.setString)}(),cc.LabelAtlas.create=function(a,b,c,d,e){return new cc.LabelAtlas(a,b,c,d,e)},function(){cc.LabelAtlas.CanvasRenderCmd=function(a){cc.AtlasNode.CanvasRenderCmd.call(this,a),this._needDraw=!1};var a=cc.LabelAtlas.CanvasRenderCmd.prototype=Object.create(cc.AtlasNode.CanvasRenderCmd.prototype);a.constructor=cc.LabelAtlas.CanvasRenderCmd,a.setCascade=function(){var a=this._node;a._cascadeOpacityEnabled=!0,a._cascadeColorEnabled=!1},a.updateAtlasValues=function(){for(var a=this._node,b=a._string||"",c=b.length,d=this._textureToRender,e=a._itemWidth,f=a._itemHeight,g=0,h=-1;g<c;g++){var i=b.charCodeAt(g)-a._mapStartChar.charCodeAt(0),j=parseInt(i%a._itemsPerRow,10),k=parseInt(i/a._itemsPerRow,10);if(!(j<0||k<0)){var l=cc.rect(j*e,k*f,e,f),m=d._contentSize;if(!(l.x<0||l.y<0||l.x+l.width>m.width||l.y+l.height>m.height)){h++;var n=b.charCodeAt(g),o=a.getChildByTag(g);o?32===n?(o.init(),o.setTextureRect(cc.rect(0,0,10,10),!1,cc.size(0,0))):(o.initWithTexture(d,l),o.visible=!0):(o=new cc.Sprite,32===n?(o.init(),o.setTextureRect(cc.rect(0,0,10,10),!1,cc.size(0,0))):o.initWithTexture(d,l),cc.Node.prototype.addChild.call(a,o,0,g)),o.setPosition(h*e+e/2,f/2)}}}this.updateContentSize(g,h+1)},a.updateContentSize=function(a,b){var c=this._node,d=c._contentSize;a!==b&&a*c._itemWidth===d.width&&c._itemHeight===d.height&&c.setContentSize(b*c._itemWidth,c._itemHeight)},a.setString=function(a){var b=this._node;if(b._children)for(var c=b._children,d=c.length,e=0;e<d;e++){var f=c[e];f&&!f._lateChild&&(f.visible=!1)}},a._addChild=function(){child._lateChild=!0}}(),cc.LabelBMFont=cc.SpriteBatchNode.extend({_opacityModifyRGB:!1,_string:"",_config:null,_fntFile:"",_initialString:"",_alignment:cc.TEXT_ALIGNMENT_CENTER,_width:-1,_lineBreakWithoutSpaces:!1,_imageOffset:null,_textureLoaded:!1,_className:"LabelBMFont",_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new cc.LabelBMFont.WebGLRenderCmd(this):new cc.LabelBMFont.CanvasRenderCmd(this)},_setString:function(a,b){b?this._initialString=a:this._string=a;var c=this._children;if(c)for(var d=0;d<c.length;d++){var e=c[d];e&&e.setVisible(!1)}this._textureLoaded&&(this.createFontChars(),b&&this.updateLabel())},ctor:function(a,b,c,d,e){cc.SpriteBatchNode.prototype.ctor.call(this),this._imageOffset=cc.p(0,0),this._cascadeColorEnabled=!0,this._cascadeOpacityEnabled=!0,this.initWithString(a,b,c,d,e)},textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setOpacityModifyRGB:function(a){this._opacityModifyRGB=a;var b=this._children;if(b)for(var c=0;c<b.length;c++){var d=b[c];d&&(d.opacityModifyRGB=this._opacityModifyRGB)}},_changeTextureColor:function(){this._renderCmd._changeTextureColor()},init:function(){return this.initWithString(null,null,null,null,null)},initWithString:function(a,b,c,d,e){var f=this,g=a||"";f._config&&cc.log("cc.LabelBMFont.initWithString(): re-init is no longer supported");var h;if(b){var i=cc.loader.getRes(b);if(!i)return cc.log("cc.LabelBMFont.initWithString(): Impossible to create font. Please check file"),!1;f._config=i,f._fntFile=b,h=cc.textureCache.addImage(i.atlasName);var j=h.isLoaded();f._textureLoaded=j,j||h.addEventListener("load",function(a){var b=this;b._textureLoaded=!0,b.initWithTexture(a,b._initialString.length),b.setString(b._initialString,!0),b.dispatchEvent("load")},f)}else{h=new cc.Texture2D;var k=new Image;h.initWithElement(k),f._textureLoaded=!1}return!!f.initWithTexture(h,g.length)&&(f._alignment=d||cc.TEXT_ALIGNMENT_LEFT,f._imageOffset=e||cc.p(0,0),f._width=void 0===c?-1:c,f._realOpacity=255,f._realColor=cc.color(255,255,255,255),f._contentSize.width=0,f._contentSize.height=0,f.setAnchorPoint(.5,.5),f.setString(g,!0),!0)},createFontChars:function(){var a=this,b=this._renderCmd,c=b._texture||this._texture,d=0,e=cc.size(0,0),f=0,g=1,h=a._string,i=h?h.length:0;if(0!==i){var j,k=a._config,l=k.kerningDict,m=k.commonHeight,n=k.fontDefDictionary;for(j=0;j<i-1;j++)10===h.charCodeAt(j)&&g++;var o,p=m*g,q=-(m-m*g),r=-1;for(j=0;j<i;j++){var s=h.charCodeAt(j);if(0!==s)if(10!==s){var t=l[r<<16|65535&s]||0;o=n[s],o||(cc.log("cocos2d: LabelBMFont: character not found "+h[j]),o={rect:{x:0,y:0,width:0,height:0},xOffset:0,yOffset:0,xAdvance:0});var u=cc.rect(o.rect.x,o.rect.y,o.rect.width,o.rect.height);u=cc.rectPixelsToPoints(u),u.x+=a._imageOffset.x,u.y+=a._imageOffset.y;var v=a.getChildByTag(j);v?b._updateCharTexture(v,u,s):(v=new cc.Sprite,v.initWithTexture(c,u,!1),v._newTextureWhenChangeColor=!0,this.addChild(v,0,j)),v.opacityModifyRGB=this._opacityModifyRGB,b._updateCharColorAndOpacity(v);var w=k.commonHeight-o.yOffset,x=cc.p(d+o.xOffset+.5*o.rect.width+t,q+w-.5*u.height*cc.contentScaleFactor());v.setPosition(cc.pointPixelsToPoints(x)),d+=o.xAdvance+t,r=s,f<d&&(f=d)}else d=0,q-=k.commonHeight}o&&o.xAdvance<o.rect.width?e.width=f-o.xAdvance+o.rect.width:e.width=f,e.height=p,a.setContentSize(cc.sizePixelsToPoints(e))}},updateString:function(a){var b=this,c=b._children;if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];f&&(f.visible=!1)}b._config&&b.createFontChars(),a||b.updateLabel()},getString:function(){return this._initialString},setString:function(a,b){a=String(a),null==b&&(b=!0),null!=a&&cc.isString(a)||(a+=""),this._initialString=a,this._setString(a,b)},_setStringForSetter:function(a){this.setString(a,!1)},setCString:function(a){this.setString(a,!0)},_getCharsWidth:function(a,b){if(b<=0)return 0;var c=this.getChildByTag(a),d=this.getChildByTag(a+b);return this._getLetterPosXLeft(d)-this._getLetterPosXLeft(c)},_checkWarp:function(a,b,c,d){for(var e=this,f=a[b],g=0,h=0;h<b;h++)g+=a[h].length;g=g+b-d;var i=e._getCharsWidth(g,a[b].length-1);if(i>c&&f.length>1){for(var j,k=f.length*(c/i)|0,l=f.substr(k),m=i-this._getCharsWidth(g+k,l.length-1),n=0,o=0;m>c&&o++<100;)k*=c/m,k|=0,l=f.substr(k),m=i-this._getCharsWidth(g+k,l.length-1);for(o=0;m<c&&o++<100;){if(l){var p=cc.LabelTTF._wordRex.exec(l);n=p?p[0].length:1,j=l}e._lineBreakWithoutSpaces&&(n=0),k+=n,l=f.substr(k),m=i-this._getCharsWidth(g+k,l.length-1)}k-=n,0===k&&(k=1,j=j.substr(1));var q,r=f.substr(0,k);cc.LabelTTF.wrapInspection&&cc.LabelTTF._symbolRex.test(j||l)&&(q=cc.LabelTTF._lastWordRex.exec(r),n=q?q[0].length:0,e._lineBreakWithoutSpaces&&(n=0),k-=n,j=f.substr(k),r=f.substr(0,k)),cc.LabelTTF._firsrEnglish.test(j)&&(q=cc.LabelTTF._lastEnglish.exec(r),q&&r!==q[0]&&(n=q[0].length,e._lineBreakWithoutSpaces&&(n=0),k-=n,j=f.substr(k),r=f.substr(0,k))),a[b]=j||l,a.splice(b,0,r)}},updateLabel:function(){var a=this;a.string=a._initialString;var b,c,d;if(a._width>0){var e=a.string.split("\n"),f="",g=0,h=0;for(b=0;b<e.length;b++)h=e.length,this._checkWarp(e,b,a._width*this._scaleX,g),h<e.length&&g++,b>0&&(f+="\n"),f+=e[b];f+=String.fromCharCode(0),a._setString(f,!1)}if(a._alignment!==cc.TEXT_ALIGNMENT_LEFT){b=0;for(var i=0,j=a._string.length,k=[],l=0;l<j;l++)if(10!==a._string[l].charCodeAt(0)&&0!==a._string[l].charCodeAt(0))k.push(a._string[b]);else{var m=0,n=k.length;if(0===n){i++;continue}var o=b+n-1+i;if(o<0)continue;var p=a.getChildByTag(o);if(null==p)continue;m=p.getPositionX()+p._getWidth()/2;var q=0;switch(a._alignment){case cc.TEXT_ALIGNMENT_CENTER:q=a.width/2-m/2;break;case cc.TEXT_ALIGNMENT_RIGHT:q=a.width-m}if(0!==q)for(c=0;c<n;c++)o=b+c+i,o<0||(d=a.getChildByTag(o),d&&(d.x+=q));b+=n,i++,k.length=0}}},setAlignment:function(a){this._alignment=a,this.updateLabel()},_getAlignment:function(){return this._alignment},setBoundingWidth:function(a){this._width=a,this.updateLabel()},_getBoundingWidth:function(){return this._width},setLineBreakWithoutSpace:function(a){this._lineBreakWithoutSpaces=a,this.updateLabel()},setScale:function(a,b){cc.Node.prototype.setScale.call(this,a,b),this.updateLabel()},setScaleX:function(a){cc.Node.prototype.setScaleX.call(this,a),this.updateLabel()},setScaleY:function(a){cc.Node.prototype.setScaleY.call(this,a),this.updateLabel()},setFntFile:function(a){var b=this;if(null!=a&&a!==b._fntFile){var c=cc.loader.getRes(a);if(!c)return void cc.log("cc.LabelBMFont.setFntFile() : Impossible to create font. Please check file");b._fntFile=a,b._config=c;var d=cc.textureCache.addImage(c.atlasName),e=d.isLoaded();b._textureLoaded=e,e?(b.setTexture(d),b.createFontChars()):d.addEventListener("load",function(a){var b=this;b._textureLoaded=!0,b.setTexture(a),b.createFontChars(),b._changeTextureColor(),b.updateLabel(),b.dispatchEvent("load")},b)}},getFntFile:function(){return this._fntFile},setTexture:function(a){this._texture=a,this._renderCmd.setTexture(a)},setAnchorPoint:function(a,b){cc.Node.prototype.setAnchorPoint.call(this,a,b),this.updateLabel()},_setAnchorX:function(a){cc.Node.prototype._setAnchorX.call(this,a),this.updateLabel()},_setAnchorY:function(a){cc.Node.prototype._setAnchorY.call(this,a),this.updateLabel()},_atlasNameFromFntFile:function(a){},_kerningAmountForFirst:function(a,b){var c=0,d=a<<16|65535&b;if(this._configuration.kerningDictionary){var e=this._configuration.kerningDictionary[d.toString()];e&&(c=e.amount)}return c},_getLetterPosXLeft:function(a){return a.getPositionX()*this._scaleX-a._getWidth()*this._scaleX*a._getAnchorX()},_getLetterPosXRight:function(a){return a.getPositionX()*this._scaleX+a._getWidth()*this._scaleX*a._getAnchorX()},_isspace_unicode:function(a){return a=a.charCodeAt(0),a>=9&&a<=13||32===a||133===a||160===a||5760===a||a>=8192&&a<=8202||8232===a||8233===a||8239===a||8287===a||12288===a},_utf8_trim_ws:function(a){var b=a.length;if(!(b<=0)){var c=b-1;if(this._isspace_unicode(a[c])){for(var d=c-1;d>=0&&this._isspace_unicode(a[d]);--d)c=d;this._utf8_trim_from(a,c)}}},_utf8_trim_from:function(a,b){var c=a.length;b>=c||b<0||a.splice(b,c)}}),function(){var a=cc.LabelBMFont.prototype;cc.EventHelper.prototype.apply(a),a.string,cc.defineGetterSetter(a,"string",a.getString,a._setStringForSetter),a.boundingWidth,cc.defineGetterSetter(a,"boundingWidth",a._getBoundingWidth,a.setBoundingWidth),a.textAlign,cc.defineGetterSetter(a,"textAlign",a._getAlignment,a.setAlignment),cc.defineGetterSetter(a,"texture",a.getTexture,a.setTexture)}(),cc.LabelBMFont.create=function(a,b,c,d,e){return new cc.LabelBMFont(a,b,c,d,e)};var _fntLoader={INFO_EXP:/info [^\n]*(\n|$)/gi,COMMON_EXP:/common [^\n]*(\n|$)/gi,PAGE_EXP:/page [^\n]*(\n|$)/gi,CHAR_EXP:/char [^\n]*(\n|$)/gi,KERNING_EXP:/kerning [^\n]*(\n|$)/gi,ITEM_EXP:/\w+=[^ \r\n]+/gi,INT_EXP:/^[\-]?\d+$/,_parseStrToObj:function(a){var b=a.match(this.ITEM_EXP),c={};if(b)for(var d=0,e=b.length;d<e;d++){var f=b[d],g=f.indexOf("="),h=f.substring(0,g),i=f.substring(g+1);i.match(this.INT_EXP)?i=parseInt(i):'"'===i[0]&&(i=i.substring(1,i.length-1)),c[h]=i}return c},parseFnt:function(a,b){var c=this,d={},e=c._parseStrToObj(a.match(c.INFO_EXP)[0]),f=e.padding.split(","),g=({left:parseInt(f[0]),top:parseInt(f[1]),right:parseInt(f[2]),bottom:parseInt(f[3])},c._parseStrToObj(a.match(c.COMMON_EXP)[0]));if(d.commonHeight=g.lineHeight,cc._renderType===cc.game.RENDER_TYPE_WEBGL){var h=cc.configuration.getMaxTextureSize();(g.scaleW>h.width||g.scaleH>h.height)&&cc.log("cc.LabelBMFont._parseCommonArguments(): page can't be larger than supported")}1!==g.pages&&cc.log("cc.LabelBMFont._parseCommonArguments(): only supports 1 page");var i=c._parseStrToObj(a.match(c.PAGE_EXP)[0]);0!==i.id&&cc.log("cc.LabelBMFont._parseImageFileName() : file could not be found"),d.atlasName=cc.path.changeBasename(b,i.file);for(var j=a.match(c.CHAR_EXP),k=d.fontDefDictionary={},l=0,m=j.length;l<m;l++){var n=c._parseStrToObj(j[l]),o=n.id;k[o]={rect:{x:n.x,y:n.y,width:n.width,height:n.height},xOffset:n.xoffset,yOffset:n.yoffset,xAdvance:n.xadvance}}var p=d.kerningDict={},q=a.match(c.KERNING_EXP);if(q)for(var l=0,m=q.length;l<m;l++){var r=c._parseStrToObj(q[l]);p[r.first<<16|65535&r.second]=r.amount}return d},load:function(a,b,c,d){var e=this;cc.loader.loadTxt(a,function(a,c){return a?d(a):void d(null,e.parseFnt(c,b))})}};cc.loader.register(["fnt"],_fntLoader),function(){cc.LabelBMFont.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a)};var a=cc.LabelBMFont.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.LabelBMFont.CanvasRenderCmd,a._updateCharTexture=function(a,b,c){32===c?a.setTextureRect(b,!1,cc.size(0,0)):(a.setTextureRect(b,!1),a.visible=!0)},a._updateCharColorAndOpacity=function(a){a._displayedColor=this._displayedColor,a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty),a._displayedOpacity=this._displayedOpacity,a._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},a.setTexture=function(a){for(var b=this._node,c=b._children,d=this._displayedColor,e=0;e<c.length;e++){var f=c[e],g=f._renderCmd,h=g._displayedColor;(b._texture===g._texture||h.r===d.r&&h.g===d.g&&h.b===d.b)&&(f.texture=a)}b._texture=a},a._changeTextureColor=function(){var a=this._node,b=a._texture,c=b.getContentSize(),d=a._texture,e=d.getHtmlElementObj(),f=this._displayedColor,g=cc.rect(0,0,e.width,e.height);if(b&&c.width>0){if(!e)return;var h=d._generateColorTexture(f.r,f.g,f.b,g);a.setTexture(h)}},a._updateChildrenDisplayedOpacity=function(a){cc.Node.prototype.updateDisplayedOpacity.call(a,this._displayedOpacity)},a._updateChildrenDisplayedColor=function(a){cc.Node.prototype.updateDisplayedColor.call(a,this._displayedColor)}}();cc.v2fzero=function(){return{x:0,y:0}},cc.v2f=function(a,b){return{x:a,y:b}},cc.v2fadd=function(a,b){return cc.v2f(a.x+b.x,a.y+b.y)},cc.v2fsub=function(a,b){return cc.v2f(a.x-b.x,a.y-b.y)},cc.v2fmult=function(a,b){return cc.v2f(a.x*b,a.y*b)},cc.v2fperp=function(a){return cc.v2f(-a.y,a.x)},cc.v2fneg=function(a){return cc.v2f(-a.x,-a.y)},cc.v2fdot=function(a,b){return a.x*b.x+a.y*b.y},cc.v2fforangle=function(a){return cc.v2f(Math.cos(a),Math.sin(a))},cc.v2fnormalize=function(a){var b=cc.pNormalize(cc.p(a.x,a.y));return cc.v2f(b.x,b.y)},cc.__v2f=function(a){return cc.v2f(a.x,a.y)},cc.__t=function(a){return{u:a.x,v:a.y}},cc.DrawNode=cc.Node.extend({_buffer:null,_blendFunc:null,_lineWidth:1,_drawColor:null,getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a,b){void 0===b?(this._blendFunc.src=a.src,this._blendFunc.dst=a.dst):(this._blendFunc.src=a,this._blendFunc.dst=b)},setLineWidth:function(a){this._lineWidth=a},getLineWidth:function(){return this._lineWidth},setDrawColor:function(a){var b=this._drawColor;b.r=a.r,b.g=a.g,b.b=a.b,b.a=null==a.a?255:a.a},getDrawColor:function(){return cc.color(this._drawColor.r,this._drawColor.g,this._drawColor.b,this._drawColor.a)}}),cc.DrawNode.create=function(){return new cc.DrawNode},cc.DrawNode.TYPE_DOT=0,cc.DrawNode.TYPE_SEGMENT=1,cc.DrawNode.TYPE_POLY=2,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){cc._renderType===cc.game.RENDER_TYPE_CANVAS?(cc._DrawNodeElement=function(a,b,c,d,e,f,g,h,i){var j=this;j.type=a,j.verts=b||null,j.fillColor=c||null,j.lineWidth=d||0,j.lineColor=e||null,j.lineCap=f||"butt",j.isClosePolygon=g||!1,j.isFill=h||!1,j.isStroke=i||!1},cc.extend(cc.DrawNode.prototype,{_className:"DrawNodeCanvas",ctor:function(){cc.Node.prototype.ctor.call(this);var a=this._renderCmd;a._buffer=this._buffer=[],a._drawColor=this._drawColor=cc.color(255,255,255,255),a._blendFunc=this._blendFunc=new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),this.init(),this._localBB=new cc.Rect},setLocalBB:function(a,b,c,d){var e=this._localBB;void 0===b?(e.x=a.x,e.y=a.y,e.width=a.width,e.height=a.height):(e.x=a,e.y=b,e.width=c,e.height=d)},drawRect:function(a,b,c,d,e){d=null==d?this._lineWidth:d,e=e||this.getDrawColor(),null==e.a&&(e.a=255);var f=[a,cc.p(b.x,a.y),b,cc.p(a.x,b.y)],g=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);g.verts=f,g.lineWidth=d,g.lineColor=e,g.isClosePolygon=!0,g.isStroke=!0,g.lineCap="butt",g.fillColor=c,c&&(null==c.a&&(c.a=255),g.isFill=!0),this._buffer.push(g)},drawCircle:function(a,b,c,d,e,f,g){f=f||this._lineWidth,g=g||this.getDrawColor(),null==g.a&&(g.a=255);for(var h=2*Math.PI/d,i=[],j=0;j<=d;j++){var k=j*h,l=b*Math.cos(k+c)+a.x,m=b*Math.sin(k+c)+a.y;i.push(cc.p(l,m))}e&&i.push(cc.p(a.x,a.y));var n=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);n.verts=i,n.lineWidth=f,n.lineColor=g,n.isClosePolygon=!0,n.isStroke=!0,this._buffer.push(n)},drawQuadBezier:function(a,b,c,d,e,f){e=e||this._lineWidth,f=f||this.getDrawColor(),null==f.a&&(f.a=255);for(var g=[],h=0,i=0;i<d;i++){var j=Math.pow(1-h,2)*a.x+2*(1-h)*h*b.x+h*h*c.x,k=Math.pow(1-h,2)*a.y+2*(1-h)*h*b.y+h*h*c.y;g.push(cc.p(j,k)),h+=1/d}g.push(cc.p(c.x,c.y));var l=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);l.verts=g,l.lineWidth=e,l.lineColor=f,l.isStroke=!0,l.lineCap="round",this._buffer.push(l)},drawCubicBezier:function(a,b,c,d,e,f,g){f=f||this._lineWidth,g=g||this.getDrawColor(),null==g.a&&(g.a=255);for(var h=[],i=0,j=0;j<e;j++){var k=Math.pow(1-i,3)*a.x+3*Math.pow(1-i,2)*i*b.x+3*(1-i)*i*i*c.x+i*i*i*d.x,l=Math.pow(1-i,3)*a.y+3*Math.pow(1-i,2)*i*b.y+3*(1-i)*i*i*c.y+i*i*i*d.y;h.push(cc.p(k,l)),i+=1/e}h.push(cc.p(d.x,d.y));var m=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);m.verts=h,m.lineWidth=f,m.lineColor=g,m.isStroke=!0,m.lineCap="round",this._buffer.push(m)},drawCatmullRom:function(a,b,c,d){this.drawCardinalSpline(a,.5,b,c,d)},drawCardinalSpline:function(a,b,c,d,e){d=d||this._lineWidth,e=e||this.getDrawColor(),null==e.a&&(e.a=255);for(var f,g,h=[],i=1/a.length,j=0;j<c+1;j++){var k=j/c;1===k?(f=a.length-1,g=1):(f=0|k/i,g=(k-i*f)/i);var l=cc.cardinalSplineAt(cc.getControlPointAt(a,f-1),cc.getControlPointAt(a,f-0),cc.getControlPointAt(a,f+1),cc.getControlPointAt(a,f+2),b,g);h.push(l)}var m=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);m.verts=h,m.lineWidth=d,m.lineColor=e,m.isStroke=!0,m.lineCap="round",this._buffer.push(m)},drawDot:function(a,b,c){c=c||this.getDrawColor(),null==c.a&&(c.a=255);var d=new cc._DrawNodeElement(cc.DrawNode.TYPE_DOT);d.verts=[a],d.lineWidth=b,d.fillColor=c,this._buffer.push(d)},drawDots:function(a,b,c){if(a&&0!=a.length){c=c||this.getDrawColor(),null==c.a&&(c.a=255);for(var d=0,e=a.length;d<e;d++)this.drawDot(a[d],b,c)}},drawSegment:function(a,b,c,d){c=c||this._lineWidth,d=d||this.getDrawColor(),null==d.a&&(d.a=255);var e=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);e.verts=[a,b],e.lineWidth=2*c,e.lineColor=d,e.isStroke=!0,e.lineCap="round",this._buffer.push(e)},drawPoly_:function(a,b,c,d){c=null==c?this._lineWidth:c,d=d||this.getDrawColor(),null==d.a&&(d.a=255);var e=new cc._DrawNodeElement(cc.DrawNode.TYPE_POLY);e.verts=a,e.fillColor=b,e.lineWidth=c,e.lineColor=d,e.isClosePolygon=!0,e.isStroke=!0,e.lineCap="round",b&&(e.isFill=!0),this._buffer.push(e)},drawPoly:function(a,b,c,d){for(var e=[],f=0;f<a.length;f++)e.push(cc.p(a[f].x,a[f].y));return this.drawPoly_(e,b,c,d)},clear:function(){this._buffer.length=0},_createRenderCmd:function(){return new cc.DrawNode.CanvasRenderCmd(this)}})):cc._renderType===cc.game.RENDER_TYPE_WEBGL&&cc.extend(cc.DrawNode.prototype,{_bufferCapacity:0,_trianglesArrayBuffer:null,_trianglesWebBuffer:null,_trianglesReader:null,_dirty:!1,_className:"DrawNodeWebGL",ctor:function(){cc.Node.prototype.ctor.call(this),this._buffer=[],this._blendFunc=new cc.BlendFunc(cc.SRC_ALPHA,cc.ONE_MINUS_SRC_ALPHA),this._drawColor=cc.color(255,255,255,255),this.init()},init:function(){return!!cc.Node.prototype.init.call(this)&&(this.shaderProgram=cc.shaderCache.programForKey(cc.SHADER_POSITION_LENGTHTEXTURECOLOR),this._ensureCapacity(64),this._trianglesWebBuffer=cc._renderContext.createBuffer(),this._dirty=!0,!0)},drawRect:function(a,b,c,d,e){d=null==d?this._lineWidth:d,e=e||this.getDrawColor(),null==e.a&&(e.a=255);var f=[a,cc.p(b.x,a.y),b,cc.p(a.x,b.y)];null==c?this._drawSegments(f,d,e,!0):this.drawPoly(f,c,d,e)},drawCircle:function(a,b,c,d,e,f,g){f=f||this._lineWidth,g=g||this.getDrawColor(),null==g.a&&(g.a=255);var h,i,j=2*Math.PI/d,k=[];for(h=0;h<=d;h++){var l=h*j,m=b*Math.cos(l+c)+a.x,n=b*Math.sin(l+c)+a.y;k.push(cc.p(m,n))}for(e&&k.push(cc.p(a.x,a.y)),f*=.5,h=0,i=k.length;h<i-1;h++)this.drawSegment(k[h],k[h+1],f,g)},drawQuadBezier:function(a,b,c,d,e,f){e=e||this._lineWidth,f=f||this.getDrawColor(),null==f.a&&(f.a=255);for(var g=[],h=0,i=0;i<d;i++){var j=Math.pow(1-h,2)*a.x+2*(1-h)*h*b.x+h*h*c.x,k=Math.pow(1-h,2)*a.y+2*(1-h)*h*b.y+h*h*c.y;g.push(cc.p(j,k)),h+=1/d}g.push(cc.p(c.x,c.y)),this._drawSegments(g,e,f,!1)},drawCubicBezier:function(a,b,c,d,e,f,g){f=f||this._lineWidth,g=g||this.getDrawColor(),null==g.a&&(g.a=255);for(var h=[],i=0,j=0;j<e;j++){var k=Math.pow(1-i,3)*a.x+3*Math.pow(1-i,2)*i*b.x+3*(1-i)*i*i*c.x+i*i*i*d.x,l=Math.pow(1-i,3)*a.y+3*Math.pow(1-i,2)*i*b.y+3*(1-i)*i*i*c.y+i*i*i*d.y;h.push(cc.p(k,l)),i+=1/e}h.push(cc.p(d.x,d.y)),this._drawSegments(h,f,g,!1)},drawCatmullRom:function(a,b,c,d){this.drawCardinalSpline(a,.5,b,c,d)},drawCardinalSpline:function(a,b,c,d,e){d=d||this._lineWidth,e=e||this.getDrawColor(),null==e.a&&(e.a=255);for(var f,g,h=[],i=1/a.length,j=0;j<c+1;j++){var k=j/c;1===k?(f=a.length-1,g=1):(f=0|k/i,g=(k-i*f)/i);var l=cc.cardinalSplineAt(cc.getControlPointAt(a,f-1),cc.getControlPointAt(a,f-0),cc.getControlPointAt(a,f+1),cc.getControlPointAt(a,f+2),b,g);h.push(l)}d*=.5;for(var m=0,n=h.length;m<n-1;m++)this.drawSegment(h[m],h[m+1],d,e)},_render:function(){var a=cc._renderContext;a.bindBuffer(a.ARRAY_BUFFER,this._trianglesWebBuffer),this._dirty&&(a.bufferData(a.ARRAY_BUFFER,this._trianglesArrayBuffer,a.STREAM_DRAW),this._dirty=!1);var b=cc.V2F_C4B_T2F.BYTES_PER_ELEMENT;a.enableVertexAttribArray(cc.VERTEX_ATTRIB_POSITION),a.enableVertexAttribArray(cc.VERTEX_ATTRIB_COLOR),a.enableVertexAttribArray(cc.VERTEX_ATTRIB_TEX_COORDS),a.vertexAttribPointer(cc.VERTEX_ATTRIB_POSITION,2,a.FLOAT,!1,b,0),a.vertexAttribPointer(cc.VERTEX_ATTRIB_COLOR,4,a.UNSIGNED_BYTE,!0,b,8),a.vertexAttribPointer(cc.VERTEX_ATTRIB_TEX_COORDS,2,a.FLOAT,!1,b,12),a.drawArrays(a.TRIANGLES,0,3*this._buffer.length),cc.incrementGLDraws(1)},_ensureCapacity:function(a){var b=this,c=b._buffer;if(c.length+a>b._bufferCapacity){var d=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT;if(b._bufferCapacity+=Math.max(b._bufferCapacity,a),null==c||0===c.length)b._buffer=[],b._trianglesArrayBuffer=new ArrayBuffer(d*b._bufferCapacity),b._trianglesReader=new Uint8Array(b._trianglesArrayBuffer);else{for(var e=[],f=new ArrayBuffer(d*b._bufferCapacity),g=0;g<c.length;g++)e[g]=new cc.V2F_C4B_T2F_Triangle(c[g].a,c[g].b,c[g].c,f,g*d);b._trianglesReader=new Uint8Array(f),b._trianglesArrayBuffer=f,b._buffer=e}}},drawDot:function(a,b,c){c=c||this.getDrawColor(),null==c.a&&(c.a=255);var d={r:0|c.r,g:0|c.g,b:0|c.b,a:0|c.a},e={vertices:{x:a.x-b,y:a.y-b},colors:d,texCoords:{u:-1,v:-1}},f={vertices:{x:a.x-b,y:a.y+b},colors:d,texCoords:{u:-1,v:1}},g={vertices:{x:a.x+b,y:a.y+b},colors:d,texCoords:{u:1,v:1}},h={vertices:{x:a.x+b,y:a.y-b},colors:d,texCoords:{u:1,v:-1}};this._ensureCapacity(6),this._buffer.push(new cc.V2F_C4B_T2F_Triangle(e,f,g,this._trianglesArrayBuffer,this._buffer.length*cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT)),this._buffer.push(new cc.V2F_C4B_T2F_Triangle(e,g,h,this._trianglesArrayBuffer,this._buffer.length*cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT)),this._dirty=!0},drawDots:function(a,b,c){if(a&&0!==a.length){c=c||this.getDrawColor(),null==c.a&&(c.a=255);for(var d=0,e=a.length;d<e;d++)this.drawDot(a[d],b,c)}},drawSegment:function(a,b,c,d){d=d||this.getDrawColor(),null==d.a&&(d.a=255),c=c||.5*this._lineWidth;var e=18;this._ensureCapacity(e);var f={r:0|d.r,g:0|d.g,b:0|d.b,a:0|d.a},g=cc.__v2f(a),h=cc.__v2f(b),i=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(h,g))),j=cc.v2fperp(i),k=cc.v2fmult(i,c),l=cc.v2fmult(j,c),m=cc.v2fsub(h,cc.v2fadd(k,l)),n=cc.v2fadd(h,cc.v2fsub(k,l)),o=cc.v2fsub(h,k),p=cc.v2fadd(h,k),q=cc.v2fsub(g,k),r=cc.v2fadd(g,k),s=cc.v2fsub(g,cc.v2fsub(k,l)),t=cc.v2fadd(g,cc.v2fadd(k,l)),u=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT,v=this._trianglesArrayBuffer,w=this._buffer;w.push(new cc.V2F_C4B_T2F_Triangle({vertices:m,colors:f,texCoords:cc.__t(cc.v2fneg(cc.v2fadd(i,j)))},{vertices:n,colors:f,texCoords:cc.__t(cc.v2fsub(i,j))},{vertices:o,colors:f,texCoords:cc.__t(cc.v2fneg(i))},v,w.length*u)),w.push(new cc.V2F_C4B_T2F_Triangle({vertices:p,colors:f,texCoords:cc.__t(i)},{vertices:n,colors:f,texCoords:cc.__t(cc.v2fsub(i,j))},{vertices:o,colors:f,texCoords:cc.__t(cc.v2fneg(i))},v,w.length*u)),w.push(new cc.V2F_C4B_T2F_Triangle({vertices:p,colors:f,texCoords:cc.__t(i)},{vertices:q,colors:f,texCoords:cc.__t(cc.v2fneg(i))},{vertices:o,colors:f,texCoords:cc.__t(cc.v2fneg(i))},v,w.length*u)),w.push(new cc.V2F_C4B_T2F_Triangle({vertices:p,colors:f,texCoords:cc.__t(i)},{vertices:q,colors:f,texCoords:cc.__t(cc.v2fneg(i))},{vertices:r,colors:f,texCoords:cc.__t(i)},v,w.length*u)),w.push(new cc.V2F_C4B_T2F_Triangle({vertices:s,colors:f,texCoords:cc.__t(cc.v2fsub(j,i))},{vertices:q,colors:f,texCoords:cc.__t(cc.v2fneg(i))},{vertices:r,colors:f,texCoords:cc.__t(i)},v,w.length*u)),w.push(new cc.V2F_C4B_T2F_Triangle({vertices:s,colors:f,texCoords:cc.__t(cc.v2fsub(j,i))},{vertices:t,colors:f,texCoords:cc.__t(cc.v2fadd(i,j))},{vertices:r,colors:f,texCoords:cc.__t(i)},v,w.length*u)),this._dirty=!0},drawPoly:function(a,b,c,d){if(null==b)return void this._drawSegments(a,c,d,!0);null==b.a&&(b.a=255),null==d.a&&(d.a=255),c=null==c?this._lineWidth:c,c*=.5;var e,f,g,h,i={r:0|b.r,g:0|b.g,b:0|b.b,a:0|b.a},j={r:0|d.r,g:0|d.g,b:0|d.b,a:0|d.a},k=[],l=a.length;for(e=0;e<l;e++){f=cc.__v2f(a[(e-1+l)%l]),g=cc.__v2f(a[e]),h=cc.__v2f(a[(e+1)%l]);var m=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(g,f))),n=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(h,g))),o=cc.v2fmult(cc.v2fadd(m,n),1/(cc.v2fdot(m,n)+1));k[e]={offset:o,n:n}}var p=c>0,q=3*l-2,r=3*q;this._ensureCapacity(r);var s=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT,t=this._trianglesArrayBuffer,u=this._buffer,v=0==p?.5:0;for(e=0;e<l-2;e++)f=cc.v2fsub(cc.__v2f(a[0]),cc.v2fmult(k[0].offset,v)),g=cc.v2fsub(cc.__v2f(a[e+1]),cc.v2fmult(k[e+1].offset,v)),h=cc.v2fsub(cc.__v2f(a[e+2]),cc.v2fmult(k[e+2].offset,v)),u.push(new cc.V2F_C4B_T2F_Triangle({vertices:f,colors:i,texCoords:cc.__t(cc.v2fzero())},{vertices:g,colors:i,texCoords:cc.__t(cc.v2fzero())},{vertices:h,colors:i,texCoords:cc.__t(cc.v2fzero())},t,u.length*s));for(e=0;e<l;e++){var w=(e+1)%l;f=cc.__v2f(a[e]),g=cc.__v2f(a[w]);var x=k[e].n,y=k[e].offset,z=k[w].offset,A=p?cc.v2fsub(f,cc.v2fmult(y,c)):cc.v2fsub(f,cc.v2fmult(y,.5)),B=p?cc.v2fsub(g,cc.v2fmult(z,c)):cc.v2fsub(g,cc.v2fmult(z,.5)),C=p?cc.v2fadd(f,cc.v2fmult(y,c)):cc.v2fadd(f,cc.v2fmult(y,.5)),D=p?cc.v2fadd(g,cc.v2fmult(z,c)):cc.v2fadd(g,cc.v2fmult(z,.5));p?(u.push(new cc.V2F_C4B_T2F_Triangle({vertices:A,colors:j,texCoords:cc.__t(cc.v2fneg(x))},{vertices:B,colors:j,texCoords:cc.__t(cc.v2fneg(x))},{vertices:D,colors:j,texCoords:cc.__t(x)},t,u.length*s)),u.push(new cc.V2F_C4B_T2F_Triangle({vertices:A,colors:j,texCoords:cc.__t(cc.v2fneg(x))},{vertices:C,colors:j,texCoords:cc.__t(x)},{vertices:D,colors:j,texCoords:cc.__t(x)},t,u.length*s))):(u.push(new cc.V2F_C4B_T2F_Triangle({vertices:A,colors:i,texCoords:cc.__t(cc.v2fzero())},{vertices:B,colors:i,texCoords:cc.__t(cc.v2fzero())},{vertices:D,colors:i,texCoords:cc.__t(x)},t,u.length*s)),u.push(new cc.V2F_C4B_T2F_Triangle({vertices:A,colors:i,texCoords:cc.__t(cc.v2fzero())},{vertices:C,colors:i,texCoords:cc.__t(x)},{vertices:D,colors:i,texCoords:cc.__t(x)},t,u.length*s)))}k=null,this._dirty=!0},_drawSegments:function(a,b,c,d){if(b=null==b?this._lineWidth:b,c=c||this._drawColor,null==c.a&&(c.a=255),b*=.5,!(b<=0)){var e,f,g,h,i={r:0|c.r,g:0|c.g,b:0|c.b,a:0|c.a},j=[],k=a.length;for(e=0;e<k;e++){f=cc.__v2f(a[(e-1+k)%k]),g=cc.__v2f(a[e]),h=cc.__v2f(a[(e+1)%k]);var l=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(g,f))),m=cc.v2fnormalize(cc.v2fperp(cc.v2fsub(h,g))),n=cc.v2fmult(cc.v2fadd(l,m),1/(cc.v2fdot(l,m)+1));j[e]={offset:n,n:m}}var o=3*k-2,p=3*o;this._ensureCapacity(p);var q=cc.V2F_C4B_T2F_Triangle.BYTES_PER_ELEMENT,r=this._trianglesArrayBuffer,s=this._buffer,t=d?k:k-1;for(e=0;e<t;e++){var u=(e+1)%k;f=cc.__v2f(a[e]),g=cc.__v2f(a[u]);var v=j[e].n,w=j[e].offset,x=j[u].offset,y=cc.v2fsub(f,cc.v2fmult(w,b)),z=cc.v2fsub(g,cc.v2fmult(x,b)),A=cc.v2fadd(f,cc.v2fmult(w,b)),B=cc.v2fadd(g,cc.v2fmult(x,b));s.push(new cc.V2F_C4B_T2F_Triangle({vertices:y,colors:i,texCoords:cc.__t(cc.v2fneg(v))},{vertices:z,colors:i,texCoords:cc.__t(cc.v2fneg(v))},{vertices:B,colors:i,texCoords:cc.__t(v)},r,s.length*q)),s.push(new cc.V2F_C4B_T2F_Triangle({vertices:y,colors:i,texCoords:cc.__t(cc.v2fneg(v))},{vertices:A,colors:i,texCoords:cc.__t(v)},{vertices:B,colors:i,texCoords:cc.__t(v)},r,s.length*q))}j=null,this._dirty=!0}},clear:function(){this._buffer.length=0,this._dirty=!0},_createRenderCmd:function(){return new cc.DrawNode.WebGLRenderCmd(this)}})}),function(){cc.DrawNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._buffer=null,this._drawColor=null,this._blendFunc=null},cc.DrawNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype),cc.DrawNode.CanvasRenderCmd.prototype.constructor=cc.DrawNode.CanvasRenderCmd,cc.DrawNode.CanvasRenderCmd.prototype.getLocalBB=function(){var a=this._node;return a._localBB},cc.extend(cc.DrawNode.CanvasRenderCmd.prototype,{rendering:function(a,b,c){var d=a||cc._renderContext,e=(d.getContext(),this._node),f=e._displayedOpacity/255;if(0!==f){d.setTransform(this._worldTransform,b,c),d.setGlobalAlpha(f),this._blendFunc&&this._blendFunc.src===cc.SRC_ALPHA&&this._blendFunc.dst===cc.ONE&&d.setCompositeOperation("lighter");for(var g=this._buffer,h=0,i=g.length;h<i;h++){var j=g[h];switch(j.type){case cc.DrawNode.TYPE_DOT:this._drawDot(d,j,b,c);break;case cc.DrawNode.TYPE_SEGMENT:this._drawSegment(d,j,b,c);break;case cc.DrawNode.TYPE_POLY:this._drawPoly(d,j,b,c)}}}},_drawDot:function(a,b){var c=b.fillColor,d=b.verts[0],e=b.lineWidth,f=a.getContext();a.setFillStyle("rgba("+(0|c.r)+","+(0|c.g)+","+(0|c.b)+","+c.a/255+")"),f.beginPath(),f.arc(d.x,-d.y,e,0,2*Math.PI,!1),f.closePath(),f.fill()},_drawSegment:function(a,b,c){var d=b.lineColor,e=b.verts[0],f=b.verts[1],g=b.lineWidth,h=b.lineCap,i=a.getContext();a.setStrokeStyle("rgba("+(0|d.r)+","+(0|d.g)+","+(0|d.b)+","+d.a/255+")"),i.lineWidth=g*c,i.beginPath(),i.lineCap=h,i.moveTo(e.x,-e.y),i.lineTo(f.x,-f.y),i.stroke()},_drawPoly:function(a,b,c){var d=b.verts,e=b.lineCap;if(null!=d){var f=b.fillColor,g=b.lineWidth,h=b.lineColor,i=b.isClosePolygon,j=b.isFill,k=b.isStroke,l=a.getContext(),m=d[0];l.lineCap=e,f&&a.setFillStyle("rgba("+(0|f.r)+","+(0|f.g)+","+(0|f.b)+","+f.a/255+")"),g&&(l.lineWidth=g*c),h&&a.setStrokeStyle("rgba("+(0|h.r)+","+(0|h.g)+","+(0|h.b)+","+h.a/255+")"),l.beginPath(),l.moveTo(m.x,-m.y);for(var n=1,o=d.length;n<o;n++)l.lineTo(d[n].x,-d[n].y);i&&l.closePath(),j&&l.fill(),k&&l.stroke()}}})}();cc.stencilBits=-1,cc.ClippingNode=cc.Node.extend({alphaThreshold:0,inverted:!1,_stencil:null,_className:"ClippingNode",ctor:function(a){a=a||null,cc.Node.prototype.ctor.call(this),this._stencil=a,this.alphaThreshold=1,this.inverted=!1,this._renderCmd.initStencilBits()},init:function(a){return this._stencil=a,this.alphaThreshold=1,this.inverted=!1,this._renderCmd.initStencilBits(),!0},onEnter:function(){cc.Node.prototype.onEnter.call(this),this._stencil.onEnter()},onEnterTransitionDidFinish:function(){cc.Node.prototype.onEnterTransitionDidFinish.call(this),this._stencil.onEnterTransitionDidFinish()},onExitTransitionDidStart:function(){this._stencil.onExitTransitionDidStart(),cc.Node.prototype.onExitTransitionDidStart.call(this)},onExit:function(){this._stencil.onExit(),cc.Node.prototype.onExit.call(this)},getAlphaThreshold:function(){return this.alphaThreshold},setAlphaThreshold:function(a){this.alphaThreshold=a},isInverted:function(){return this.inverted},setInverted:function(a){this.inverted=a},getStencil:function(){return this._stencil},setStencil:function(a){this._stencil!==a&&this._renderCmd.setStencil(a)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ClippingNode.CanvasRenderCmd(this):new cc.ClippingNode.WebGLRenderCmd(this)}});var _p=cc.ClippingNode.prototype;cc.defineGetterSetter(_p,"stencil",_p.getStencil,_p.setStencil),_p.stencil,cc.ClippingNode.create=function(a){return new cc.ClippingNode(a)},function(){cc.ClippingNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!1,this._godhelpme=!1,this._clipElemType=!1,this._rendererSaveCmd=new cc.CustomRenderCmd(this,this._saveCmdCallback),this._rendererClipCmd=new cc.CustomRenderCmd(this,this._clipCmdCallback),this._rendererRestoreCmd=new cc.CustomRenderCmd(this,this._restoreCmdCallback)};var a=cc.ClippingNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.ClippingNode.CanvasRenderCmd,a.initStencilBits=function(){},a.setStencil=function(a){if(null!=a)if(this._node._stencil=a,a instanceof cc.DrawNode){if(a._buffer)for(var b=0;b<a._buffer.length;b++)a._buffer[b].isFill=!1,a._buffer[b].isStroke=!1;a._renderCmd.rendering=function(a,b,c){},a._renderCmd._canUseDirtyRegion=!0,this._rendererSaveCmd._canUseDirtyRegion=!0,this._rendererClipCmd._canUseDirtyRegion=!0,this._rendererRestoreCmd._canUseDirtyRegion=!0}else a._parent=this._node},a._saveCmdCallback=function(a,b,c){var d=a||cc._renderContext,e=d.getContext();if(this._clipElemType){var f=cc.ClippingNode.CanvasRenderCmd._getSharedCache(),g=e.canvas;f.width=g.width,f.height=g.height;var h=f.getContext("2d");h.drawImage(g,0,0)}else d.save(),d.setTransform(this._worldTransform,b,c),this._node.inverted&&(e.beginPath(),e.rect(0,0,e.canvas.width,-e.canvas.height),e.clip())},a._setStencilCompositionOperation=function(a){if(a){var b=this._node;if(a._renderCmd&&a._renderCmd._blendFuncStr&&(a._renderCmd._blendFuncStr=b.inverted?"destination-out":"destination-in"),a._children)for(var c=a._children,d=0,e=c.length;d<e;d++)this._setStencilCompositionOperation(c[d])}},a._clipCmdCallback=function(a){var b=this._node,c=a||cc._renderContext,d=c.getContext();if(this._clipElemType)this._setStencilCompositionOperation(b._stencil);else{var e=this._node._stencil;if(e instanceof cc.DrawNode){d.beginPath();var f=e._renderCmd._transform;d.transform(f.a,f.b,f.c,f.d,f.tx,-f.ty);for(var g=0;g<e._buffer.length;g++){var h=e._buffer[g].verts,i=h[0];d.moveTo(i.x,-i.y);for(var j=h.length-1;j>0;j--)d.lineTo(h[j].x,-h[j].y)}}d.clip()}},a._restoreCmdCallback=function(a){var b=cc.ClippingNode.CanvasRenderCmd._getSharedCache(),c=a||cc._renderContext,d=c.getContext();this._clipElemType?(d.save(),d.setTransform(1,0,0,1,0,0),d.globalCompositeOperation="destination-over",d.drawImage(b,0,0),d.restore(),this._dirtyFlag=0):c.restore()},a.transform=function(a,b){cc.Node.CanvasRenderCmd.prototype.transform.call(this,a,b);var c=this._node;c._stencil&&c._stencil._renderCmd&&c._stencil._renderCmd.transform(this,b)},a._cangodhelpme=function(a){return a!==!0&&a!==!1||(cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme=a),cc.ClippingNode.CanvasRenderCmd.prototype._godhelpme},a.visit=function(a){var b=this._node;if(b._visible){a=a||this.getParentRenderCmd(),a&&(this._curLevel=a._curLevel+1);var c=this;if(this._clipElemType=!(!this._cangodhelpme()&&b._stencil instanceof cc.DrawNode),!b._stencil||!b._stencil.visible)return void(this.inverted&&this.originVisit(a));if(this._syncStatus(a),cc.renderer.pushRenderCommand(this._rendererSaveCmd),this._clipElemType?this.originVisit(a):b._stencil.visit(this),cc.renderer.pushRenderCommand(this._rendererClipCmd),this._clipElemType)b._stencil.visit(c);else{var d,e=b._children;this._cangodhelpme(!0);var f=e.length;if(f>0)for(b.sortAllChildren(),d=0;d<f;d++)e[d]._renderCmd.visit(this);this._cangodhelpme(!1)}cc.renderer.pushRenderCommand(this._rendererRestoreCmd),this._dirtyFlag=0}},cc.ClippingNode.CanvasRenderCmd._sharedCache=null,cc.ClippingNode.CanvasRenderCmd._getSharedCache=function(){return cc.ClippingNode.CanvasRenderCmd._sharedCache||(cc.ClippingNode.CanvasRenderCmd._sharedCache=document.createElement("canvas"))}}();cc.ProgressTimer=cc.Node.extend({_type:null,_percentage:0,_sprite:null,_midPoint:null,_barChangeRate:null,_reverseDirection:!1,_className:"ProgressTimer",ctor:function(a){cc.Node.prototype.ctor.call(this),this._type=cc.ProgressTimer.TYPE_RADIAL,this._percentage=0,this._midPoint=cc.p(0,0),this._barChangeRate=cc.p(0,0),this._reverseDirection=!1,this._sprite=null,a&&this.initWithSprite(a)},onEnter:function(){this._super(),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&(this._renderCmd.initCmd(),this._renderCmd._updateProgress())},cleanup:function(){cc._renderType===cc.game.RENDER_TYPE_WEBGL&&this._renderCmd.releaseData(),this._super()},getMidpoint:function(){return cc.p(this._midPoint.x,this._midPoint.y)},setMidpoint:function(a){this._midPoint=cc.pClamp(a,cc.p(0,0),cc.p(1,1))},getBarChangeRate:function(){return cc.p(this._barChangeRate.x,this._barChangeRate.y)},setBarChangeRate:function(a){this._barChangeRate=cc.pClamp(a,cc.p(0,0),cc.p(1,1))},getType:function(){return this._type},getPercentage:function(){return this._percentage},getSprite:function(){return this._sprite},setPercentage:function(a){this._percentage!==a&&(this._percentage=cc.clampf(a,0,100),this._renderCmd._updateProgress())},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1},isReverseDirection:function(){return this._reverseDirection},setColor:function(a){this._sprite.color=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.colorDirty)},setOpacity:function(a){this._sprite.opacity=a,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.opacityDirty)},getColor:function(){return this._sprite.color},getOpacity:function(){return this._sprite.opacity},setReverseProgress:function(a){this._reverseDirection!==a&&(this._reverseDirection=a,this._renderCmd.resetVertexData())},setSprite:function(a){this._sprite!==a&&(this._sprite=a,a?(this.setContentSize(a.width,a.height),a.ignoreAnchorPointForPosition(!0)):this.setContentSize(0,0),this._renderCmd.resetVertexData())},setType:function(a){a!==this._type&&(this._type=a,this._renderCmd.resetVertexData())},setReverseDirection:function(a){this._reverseDirection!==a&&(this._reverseDirection=a,this._renderCmd.resetVertexData())},initWithSprite:function(a){return this.percentage=0,this.setAnchorPoint(.5,.5),this._type=cc.ProgressTimer.TYPE_RADIAL,this._reverseDirection=!1,this.midPoint=cc.p(.5,.5),this.barChangeRate=cc.p(1,1),this.setSprite(a),this._renderCmd.resetVertexData(),!0},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ProgressTimer.CanvasRenderCmd(this):new cc.ProgressTimer.WebGLRenderCmd(this)}});var _p=cc.ProgressTimer.prototype;_p.midPoint,cc.defineGetterSetter(_p,"midPoint",_p.getMidpoint,_p.setMidpoint),_p.barChangeRate,cc.defineGetterSetter(_p,"barChangeRate",_p.getBarChangeRate,_p.setBarChangeRate),_p.type,cc.defineGetterSetter(_p,"type",_p.getType,_p.setType),_p.percentage,cc.defineGetterSetter(_p,"percentage",_p.getPercentage,_p.setPercentage),_p.sprite,cc.defineGetterSetter(_p,"sprite",_p.getSprite,_p.setSprite),_p.reverseDir,cc.defineGetterSetter(_p,"reverseDir",_p.isReverseDirection,_p.setReverseDirection),cc.ProgressTimer.create=function(a){return new cc.ProgressTimer(a)},cc.ProgressTimer.TEXTURE_COORDS_COUNT=4,cc.ProgressTimer.TEXTURE_COORDS=75,cc.ProgressTimer.TYPE_RADIAL=0,cc.ProgressTimer.TYPE_BAR=1,function(){cc.ProgressTimer.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._PI180=Math.PI/180,this._barRect=cc.rect(0,0,0,0),this._origin=cc.p(0,0),this._radius=0,this._startAngle=270,this._endAngle=270,this._counterClockWise=!1,this._canUseDirtyRegion=!0};var a=cc.ProgressTimer.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.ProgressTimer.CanvasRenderCmd,a.rendering=function(a,b,c){var d=a||cc._renderContext,e=d.getContext(),f=this._node,g=f._sprite,h=g._renderCmd._textureCoord,i=g._renderCmd._displayedOpacity/255;if(0!==h.width&&0!==h.height&&g._texture&&h.validRect&&0!==i){d.setTransform(this._worldTransform,b,c),d.setCompositeOperation(g._blendFuncStr),d.setGlobalAlpha(i);var j=g._rect,k=g._offsetPosition,l=k.x,m=-k.y-j.height,n=j.width,o=j.height;if(d.save(),g._flippedX&&(l=-l-n,e.scale(-1,1)),g._flippedY&&(m=k.y,e.scale(1,-1)),f._type===cc.ProgressTimer.TYPE_BAR){var p=this._barRect;e.beginPath(),e.rect(p.x,p.y,p.width,p.height),e.clip(),e.closePath()}else if(f._type===cc.ProgressTimer.TYPE_RADIAL){var q=this._origin.x,r=this._origin.y;e.beginPath(),e.arc(q,r,this._radius,this._PI180*this._startAngle,this._PI180*this._endAngle,this._counterClockWise),e.lineTo(q,r),e.clip(),e.closePath()}var s=g._renderCmd._textureToRender||g._texture,t=s.getHtmlElementObj();g._renderCmd._colorized?e.drawImage(t,0,0,h.width,h.height,l,m,n,o):e.drawImage(t,h.renderX,h.renderY,h.width,h.height,l,m,n,o),d.restore(),cc.g_NumberOfDraws++}},a.releaseData=function(){},a.resetVertexData=function(){},a._updateProgress=function(){this.setDirtyFlag(cc.Node._dirtyFlags.contentDirty);var a=this._node,b=a._sprite,c=b.width,d=b.height,e=a._midPoint;if(a._type===cc.ProgressTimer.TYPE_RADIAL){this._radius=Math.round(Math.sqrt(c*c+d*d));var f,g,h=!1,i=this._origin;i.x=c*e.x,i.y=-d*e.y,a._reverseDirection?(g=270,f=270-3.6*a._percentage):(f=-90,g=-90+3.6*a._percentage),b._flippedX&&(i.x-=c*(2*a._midPoint.x),f=-f,g=-g,f-=180,g-=180,h=!h),b._flippedY&&(i.y+=d*(2*a._midPoint.y),h=!h,f=-f,g=-g),this._startAngle=f,this._endAngle=g,this._counterClockWise=h}else{var j=a._barChangeRate,k=a._percentage/100,l=this._barRect,m=cc.size(c*(1-j.x),d*(1-j.y)),n=cc.size((c-m.width)*k,(d-m.height)*k),o=cc.size(m.width+n.width,m.height+n.height),p=cc.p(c*e.x,d*e.y),q=p.x-o.width/2;e.x>.5&&o.width/2>=c-p.x&&(q=c-o.width);var r=p.y-o.height/2;e.y>.5&&o.height/2>=d-p.y&&(r=d-o.height),l.x=0;var s=1;b._flippedX&&(l.x-=o.width,s=-1),q>0&&(l.x+=q*s),l.y=0;var t=1;b._flippedY&&(l.y+=o.height,t=-1),r>0&&(l.y-=r*t),l.width=o.width,l.height=-o.height}},a._syncStatus=function(a){var b=this._node;if(b._sprite){var c=cc.Node._dirtyFlags,d=this._dirtyFlag,e=a?a._node:null;e&&e._cascadeColorEnabled&&a._dirtyFlag&c.colorDirty&&(d|=c.colorDirty),e&&e._cascadeOpacityEnabled&&a._dirtyFlag&c.opacityDirty&&(d|=c.opacityDirty),a&&a._dirtyFlag&c.transformDirty&&(d|=c.transformDirty),this._dirtyFlag=d;var f=b._sprite._renderCmd,g=f._dirtyFlag,h=g&c.colorDirty,i=g&c.opacityDirty;h&&(f._syncDisplayColor(),f._dirtyFlag=f._dirtyFlag&c.colorDirty^f._dirtyFlag,this._dirtyFlag=this._dirtyFlag&c.colorDirty^this._dirtyFlag),i&&(f._syncDisplayOpacity(),f._dirtyFlag=f._dirtyFlag&c.opacityDirty^f._dirtyFlag,this._dirtyFlag=this._dirtyFlag&c.opacityDirty^this._dirtyFlag),(h||i)&&f._updateColor(),d&c.transformDirty&&this.transform(a),d&c.orderDirty&&(this._dirtyFlag=this._dirtyFlag&c.orderDirty^this._dirtyFlag)}},a.updateStatus=function(){var a=this._node;if(a._sprite){var b=cc.Node._dirtyFlags,c=this._dirtyFlag,d=a._sprite._renderCmd,e=d._dirtyFlag,f=e&b.colorDirty,g=e&b.opacityDirty;f&&(d._updateDisplayColor(),d._dirtyFlag=d._dirtyFlag&b.colorDirty^d._dirtyFlag,this._dirtyFlag=this._dirtyFlag&b.colorDirty^this._dirtyFlag),g&&(d._updateDisplayOpacity(),d._dirtyFlag=d._dirtyFlag&b.opacityDirty^d._dirtyFlag,this._dirtyFlag=this._dirtyFlag&b.opacityDirty^this._dirtyFlag),(f||g)&&d._updateColor(),c&b.transformDirty&&this.transform(this.getParentRenderCmd(),!0),c&b.contentDirty&&this._notifyRegionStatus&&this._notifyRegionStatus(cc.Node.CanvasRenderCmd.RegionStatus.Dirty),this._dirtyFlag=0}}}(),cc.ProgressTo=cc.ActionInterval.extend({_to:0,_from:0,ctor:function(a,b){cc.ActionInterval.prototype.ctor.call(this),this._to=0,this._from=0,void 0!==b&&this.initWithDuration(a,b)},initWithDuration:function(a,b){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._to=b,!0)},clone:function(){var a=new cc.ProgressTo;return a.initWithDuration(this._duration,this._to),a},reverse:function(){return cc.log("cc.ProgressTo.reverse(): reverse hasn't been supported."),null},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a),this._from=a.percentage},update:function(a){this.target instanceof cc.ProgressTimer&&(this.target.percentage=this._from+(this._to-this._from)*a)}}),cc.progressTo=function(a,b){return new cc.ProgressTo(a,b)},cc.ProgressTo.create=cc.progressTo,cc.ProgressFromTo=cc.ActionInterval.extend({_to:0,_from:0,ctor:function(a,b,c){cc.ActionInterval.prototype.ctor.call(this),this._to=0,this._from=0,void 0!==c&&this.initWithDuration(a,b,c)},initWithDuration:function(a,b,c){return!!cc.ActionInterval.prototype.initWithDuration.call(this,a)&&(this._to=c,this._from=b,!0)},clone:function(){var a=new cc.ProgressFromTo;return a.initWithDuration(this._duration,this._from,this._to),a},reverse:function(){return cc.progressFromTo(this._duration,this._to,this._from)},startWithTarget:function(a){cc.ActionInterval.prototype.startWithTarget.call(this,a)},update:function(a){this.target instanceof cc.ProgressTimer&&(this.target.percentage=this._from+(this._to-this._from)*a)}}),cc.progressFromTo=function(a,b,c){return new cc.ProgressFromTo(a,b,c)},cc.ProgressFromTo.create=cc.progressFromTo;cc.Codec={name:"Jacob__Codec"},cc.unzip=function(){return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip,arguments)},cc.unzipBase64=function(){var a=cc.Codec.Base64.decode.apply(cc.Codec.Base64,arguments);return cc.Codec.GZip.gunzip.apply(cc.Codec.GZip,[a])},cc.unzipBase64AsArray=function(a,b){b=b||1;var c,d,e,f=this.unzipBase64(a),g=[];for(c=0,e=f.length/b;c<e;c++)for(g[c]=0,d=b-1;d>=0;--d)g[c]+=f.charCodeAt(c*b+d)<<8*d;return g},cc.unzipAsArray=function(a,b){b=b||1;var c,d,e,f=this.unzip(a),g=[];for(c=0,e=f.length/b;c<e;c++)for(g[c]=0,d=b-1;d>=0;--d)g[c]+=f.charCodeAt(c*b+d)<<8*d;return g},cc.StringToArray=function(a){var b,c=a.split(","),d=[];for(b=0;b<c.length;b++)d.push(parseInt(c[b]));return d},cc.Codec.Base64={name:"Jacob__Codec__Base64"},cc.Codec.Base64._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",cc.Codec.Base64.decode=function(a){var b,c,d,e,f,g,h,i=[],j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i.push(String.fromCharCode(b)),64!==g&&i.push(String.fromCharCode(c)),64!==h&&i.push(String.fromCharCode(d));return i=i.join("")},cc.Codec.Base64.decodeAsArray=function(a,b){var c,d,e,f=this.decode(a),g=[];for(c=0,e=f.length/b;c<e;c++)for(g[c]=0,d=b-1;d>=0;--d)g[c]+=f.charCodeAt(c*b+d)<<8*d;return g},cc.uint8ArrayToUint32Array=function(a){if(a.length%4!==0)return null;for(var b=a.length/4,c=window.Uint32Array?new Uint32Array(b):[],d=0;d<b;d++){var e=4*d;c[d]=a[e]+256*a[e+1]+65536*a[e+2]+a[e+3]*(1<<24)}return c},cc.Codec.GZip=function(a){this.data=a,this.debug=!1,this.gpflags=void 0,this.files=0,this.unzipped=[],this.buf32k=new Array(32768),this.bIdx=0,this.modeZIP=!1,this.bytepos=0,this.bb=1,this.bits=0,this.nameBuf=[],this.fileout=void 0,this.literalTree=new Array(cc.Codec.GZip.LITERALS),this.distanceTree=new Array(32),this.treepos=0,this.Places=null,this.len=0,this.fpos=new Array(17),this.fpos[0]=0,this.flens=void 0,this.fmax=void 0},cc.Codec.GZip.gunzip=function(a){a.constructor===Array||a.constructor===String;var b=new cc.Codec.GZip(a);return b.gunzip()[0][0]},cc.Codec.GZip.HufNode=function(){this.b0=0,this.b1=0,this.jump=null,this.jumppos=-1},cc.Codec.GZip.LITERALS=288,cc.Codec.GZip.NAMEMAX=256,cc.Codec.GZip.bitReverse=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,3,131,67,195,35,163,99,227,19,147,83,211,51,179,115,243,11,139,75,203,43,171,107,235,27,155,91,219,59,187,123,251,7,135,71,199,39,167,103,231,23,151,87,215,55,183,119,247,15,143,79,207,47,175,111,239,31,159,95,223,63,191,127,255],cc.Codec.GZip.cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cc.Codec.GZip.cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],cc.Codec.GZip.cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cc.Codec.GZip.cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],cc.Codec.GZip.border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],cc.Codec.GZip.prototype.gunzip=function(){return this.outputArr=[],this.nextFile(),this.unzipped},cc.Codec.GZip.prototype.readByte=function(){return this.bits+=8,this.bytepos<this.data.length?this.data.charCodeAt(this.bytepos++):-1},cc.Codec.GZip.prototype.byteAlign=function(){this.bb=1},cc.Codec.GZip.prototype.readBit=function(){var a;return this.bits++,a=1&this.bb,this.bb>>=1,0===this.bb&&(this.bb=this.readByte(),a=1&this.bb,this.bb=this.bb>>1|128),a},cc.Codec.GZip.prototype.readBits=function(a){for(var b=0,c=a;c--;)b=b<<1|this.readBit();return a&&(b=cc.Codec.GZip.bitReverse[b]>>8-a),b},cc.Codec.GZip.prototype.flushBuffer=function(){this.bIdx=0},cc.Codec.GZip.prototype.addBuffer=function(a){this.buf32k[this.bIdx++]=a,this.outputArr.push(String.fromCharCode(a)),32768===this.bIdx&&(this.bIdx=0)},cc.Codec.GZip.prototype.IsPat=function(){for(;;){if(this.fpos[this.len]>=this.fmax)return-1;if(this.flens[this.fpos[this.len]]===this.len)return this.fpos[this.len]++;this.fpos[this.len]++}},cc.Codec.GZip.prototype.Rec=function(){var a,b=this.Places[this.treepos];if(17===this.len)return-1;if(this.treepos++,this.len++,a=this.IsPat(),a>=0)b.b0=a;else if(b.b0=32768,this.Rec())return-1;if(a=this.IsPat(),a>=0)b.b1=a,b.jump=null;else if(b.b1=32768,b.jump=this.Places[this.treepos],b.jumppos=this.treepos,this.Rec())return-1;return this.len--,0},cc.Codec.GZip.prototype.CreateTree=function(a,b,c,d){var e;for(this.Places=a,this.treepos=0,this.flens=c,this.fmax=b,e=0;e<17;e++)this.fpos[e]=0;return this.len=0,this.Rec()?-1:0},cc.Codec.GZip.prototype.DecodeValue=function(a){for(var b,c,d,e=0,f=a[e];;)if(d=this.readBit()){if(!(32768&f.b1))return f.b1;for(f=f.jump,b=a.length,c=0;c<b;c++)if(a[c]===f){e=c;break}}else{if(!(32768&f.b0))return f.b0;e++,f=a[e]}return-1},cc.Codec.GZip.prototype.DeflateLoop=function(){var a,b,c,d,e;do if(a=this.readBit(),c=this.readBits(2),0===c){var f,g;for(this.byteAlign(),f=this.readByte(),f|=this.readByte()<<8,g=this.readByte(),g|=this.readByte()<<8,65535&(f^~g)&&document.write("BlockLen checksum mismatch\n");f--;)b=this.readByte(),this.addBuffer(b)}else if(1===c)for(var h;;)if(h=cc.Codec.GZip.bitReverse[this.readBits(7)]>>1,h>23?(h=h<<1|this.readBit(),h>199?(h-=128,h=h<<1|this.readBit()):(h-=48,h>143&&(h+=136))):h+=256,h<256)this.addBuffer(h);else{if(256===h)break;var e,i;for(h-=257,e=this.readBits(cc.Codec.GZip.cplext[h])+cc.Codec.GZip.cplens[h],h=cc.Codec.GZip.bitReverse[this.readBits(5)]>>3,cc.Codec.GZip.cpdext[h]>8?(i=this.readBits(8),i|=this.readBits(cc.Codec.GZip.cpdext[h]-8)<<8):i=this.readBits(cc.Codec.GZip.cpdext[h]),i+=cc.Codec.GZip.cpdist[h],h=0;h<e;h++){var b=this.buf32k[this.bIdx-i&32767];this.addBuffer(b)}}else if(2===c){var h,j,k,l,m,n=new Array(320);for(k=257+this.readBits(5),l=1+this.readBits(5),m=4+this.readBits(4),h=0;h<19;h++)n[h]=0;for(h=0;h<m;h++)n[cc.Codec.GZip.border[h]]=this.readBits(3);for(e=this.distanceTree.length,d=0;d<e;d++)this.distanceTree[d]=new cc.Codec.GZip.HufNode;if(this.CreateTree(this.distanceTree,19,n,0))return this.flushBuffer(),1;j=k+l,d=0;for(var o=-1;d<j;)if(o++,h=this.DecodeValue(this.distanceTree),h<16)n[d++]=h;else if(16===h){var p;if(h=3+this.readBits(2),d+h>j)return this.flushBuffer(),1;for(p=d?n[d-1]:0;h--;)n[d++]=p}else{if(h=17===h?3+this.readBits(3):11+this.readBits(7),d+h>j)return this.flushBuffer(),1;for(;h--;)n[d++]=0}for(e=this.literalTree.length,d=0;d<e;d++)this.literalTree[d]=new cc.Codec.GZip.HufNode;if(this.CreateTree(this.literalTree,k,n,0))return this.flushBuffer(),1;for(e=this.literalTree.length,d=0;d<e;d++)this.distanceTree[d]=new cc.Codec.GZip.HufNode;var q=new Array;for(d=k;d<n.length;d++)q[d-k]=n[d];if(this.CreateTree(this.distanceTree,l,q,0))return this.flushBuffer(),1;for(;;)if(h=this.DecodeValue(this.literalTree),h>=256){var e,i;if(h-=256,0===h)break;for(h--,e=this.readBits(cc.Codec.GZip.cplext[h])+cc.Codec.GZip.cplens[h],h=this.DecodeValue(this.distanceTree),cc.Codec.GZip.cpdext[h]>8?(i=this.readBits(8),i|=this.readBits(cc.Codec.GZip.cpdext[h]-8)<<8):i=this.readBits(cc.Codec.GZip.cpdext[h]),i+=cc.Codec.GZip.cpdist[h];e--;){var b=this.buf32k[this.bIdx-i&32767];this.addBuffer(b)}}else this.addBuffer(h)}while(!a);return this.flushBuffer(),this.byteAlign(),0},cc.Codec.GZip.prototype.unzipFile=function(a){var b;for(this.gunzip(),b=0;b<this.unzipped.length;b++)if(this.unzipped[b][1]===a)return this.unzipped[b][0]},cc.Codec.GZip.prototype.nextFile=function(){this.outputArr=[],this.modeZIP=!1;var a=[];if(a[0]=this.readByte(),a[1]=this.readByte(),120===a[0]&&218===a[1]&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),"geonext.gxt"],this.files++),31===a[0]&&139===a[1]&&(this.skipdir(),this.unzipped[this.files]=[this.outputArr.join(""),"file"],this.files++),80===a[0]&&75===a[1]&&(this.modeZIP=!0,a[2]=this.readByte(),a[3]=this.readByte(),3===a[2]&&4===a[3])){a[0]=this.readByte(),a[1]=this.readByte(),this.gpflags=this.readByte(),this.gpflags|=this.readByte()<<8;var b=this.readByte();b|=this.readByte()<<8,this.readByte(),this.readByte(),this.readByte(),this.readByte();var c=this.readByte();c|=this.readByte()<<8,c|=this.readByte()<<16,c|=this.readByte()<<24;var d=this.readByte();d|=this.readByte()<<8,d|=this.readByte()<<16,d|=this.readByte()<<24;var e=this.readByte();e|=this.readByte()<<8;var f=this.readByte();for(f|=this.readByte()<<8,h=0,this.nameBuf=[];e--;){var g=this.readByte();"/"===g|":"===g?h=0:h<cc.Codec.GZip.NAMEMAX-1&&(this.nameBuf[h++]=String.fromCharCode(g))}this.fileout||(this.fileout=this.nameBuf);for(var h=0;h<f;)g=this.readByte(),h++;8===b&&(this.DeflateLoop(),this.unzipped[this.files]=[this.outputArr.join(""),this.nameBuf.join("")],this.files++),this.skipdir()}},cc.Codec.GZip.prototype.skipdir=function(){var a,b,c,d,e,f=[];if(8&this.gpflags&&(f[0]=this.readByte(),f[1]=this.readByte(),f[2]=this.readByte(),f[3]=this.readByte(),a=this.readByte(),a|=this.readByte()<<8,a|=this.readByte()<<16,a|=this.readByte()<<24,b=this.readByte(),b|=this.readByte()<<8,b|=this.readByte()<<16,b|=this.readByte()<<24),this.modeZIP&&this.nextFile(),f[0]=this.readByte(),8!==f[0])return 0;if(this.gpflags=this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),this.readByte(),c=this.readByte(),4&this.gpflags)for(f[0]=this.readByte(),f[2]=this.readByte(),this.len=f[0]+256*f[1],d=0;d<this.len;d++)this.readByte();if(8&this.gpflags)for(d=0,this.nameBuf=[];e=this.readByte();)"7"!==e&&":"!==e||(d=0),d<cc.Codec.GZip.NAMEMAX-1&&(this.nameBuf[d++]=e);if(16&this.gpflags)for(;e=this.readByte(););2&this.gpflags&&(this.readByte(),this.readByte()),this.DeflateLoop(),b=this.readByte(),b|=this.readByte()<<8,b|=this.readByte()<<16,b|=this.readByte()<<24,this.modeZIP&&this.nextFile()},function(){"use strict";function a(a){throw a}function b(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||b===s?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a){if("string"==typeof a){var b,c,d=a.split("");for(b=0,c=d.length;b<c;b++)d[b]=(255&d[b].charCodeAt(0))>>>0;a=d}for(var e,f=1,g=0,h=a.length,i=0;0<h;){e=1024<h?1024:h,h-=e;do f+=a[i++],g+=f;while(--e);f%=65521,g%=65521}return(g<<16|f)>>>0}function d(b,c){this.index="number"==typeof c?c:0,this.i=0,this.buffer=b instanceof(v?Uint8Array:Array)?b:new(v?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&a(Error("invalid index")),this.buffer.length<=this.index&&this.f()}function e(a){this.buffer=new(v?Uint16Array:Array)(2*a),this.length=0}function f(a){var b,c,d,e,f,g,h,i,j,k=a.length,l=0,m=Number.POSITIVE_INFINITY;for(i=0;i<k;++i)a[i]>l&&(l=a[i]),a[i]<m&&(m=a[i]);for(b=1<<l,c=new(v?Uint32Array:Array)(b),d=1,e=0,f=2;d<=l;){for(i=0;i<k;++i)if(a[i]===d){for(g=0,h=e,j=0;j<d;++j)g=g<<1|1&h,h>>=1;for(j=g;j<b;j+=f)c[j]=d<<16|i;++e}++d,e<<=1,f<<=1}return[c,l,m]}function g(a,b){this.h=E,this.w=0,this.input=a,this.b=0,b&&(b.lazy&&(this.w=b.lazy),"number"==typeof b.compressionType&&(this.h=b.compressionType),b.outputBuffer&&(this.a=v&&b.outputBuffer instanceof Array?new Uint8Array(b.outputBuffer):b.outputBuffer),"number"==typeof b.outputIndex&&(this.b=b.outputIndex)),this.a||(this.a=new(v?Uint8Array:Array)(32768))}function h(a,b){this.length=a,this.G=b}function i(){var b=H;switch(t){case 3===b:return[257,b-3,0];case 4===b:return[258,b-4,0];case 5===b:return[259,b-5,0];case 6===b:return[260,b-6,0];case 7===b:return[261,b-7,0];case 8===b:return[262,b-8,0];case 9===b:return[263,b-9,0];case 10===b:return[264,b-10,0];case 12>=b:return[265,b-11,1];case 14>=b:return[266,b-13,1];case 16>=b:return[267,b-15,1];case 18>=b:return[268,b-17,1];case 22>=b:return[269,b-19,2];case 26>=b:return[270,b-23,2];case 30>=b:return[271,b-27,2];case 34>=b:return[272,b-31,2];case 42>=b:return[273,b-35,3];case 50>=b:return[274,b-43,3];case 58>=b:return[275,b-51,3];case 66>=b:return[276,b-59,3];case 82>=b:return[277,b-67,4];case 98>=b:return[278,b-83,4];case 114>=b:return[279,b-99,4];case 130>=b:return[280,b-115,4];case 162>=b:return[281,b-131,5];case 194>=b:return[282,b-163,5];case 226>=b:return[283,b-195,5];case 257>=b:return[284,b-227,5];case 258===b:return[285,b-258,0];default:a("invalid length: "+b)}}function j(b,c){function d(b,c){var d,e=b.G,f=[],g=0;d=K[b.length],f[g++]=65535&d,f[g++]=d>>16&255,f[g++]=d>>24;var h;switch(t){case 1===e:h=[0,e-1,0];break;case 2===e:h=[1,e-2,0];break;case 3===e:h=[2,e-3,0];break;case 4===e:h=[3,e-4,0];break;case 6>=e:h=[4,e-5,1];break;case 8>=e:h=[5,e-7,1];break;case 12>=e:h=[6,e-9,2];break;case 16>=e:h=[7,e-13,2];break;case 24>=e:h=[8,e-17,3];break;case 32>=e:h=[9,e-25,3];break;case 48>=e:h=[10,e-33,4];break;case 64>=e:h=[11,e-49,4];break;case 96>=e:h=[12,e-65,5];break;case 128>=e:h=[13,e-97,5];break;case 192>=e:h=[14,e-129,6];break;case 256>=e:h=[15,e-193,6];break;case 384>=e:h=[16,e-257,7];break;case 512>=e:h=[17,e-385,7];break;case 768>=e:h=[18,e-513,8];break;case 1024>=e:h=[19,e-769,8];break;case 1536>=e:h=[20,e-1025,9];break;case 2048>=e:h=[21,e-1537,9];break;case 3072>=e:h=[22,e-2049,10];break;case 4096>=e:h=[23,e-3073,10];break;case 6144>=e:h=[24,e-4097,11];break;case 8192>=e:h=[25,e-6145,11];break;case 12288>=e:h=[26,e-8193,12];break;case 16384>=e:h=[27,e-12289,12];break;case 24576>=e:h=[28,e-16385,13];break;case 32768>=e:h=[29,e-24577,13];break;default:a("invalid distance")}d=h,f[g++]=d[0],f[g++]=d[1],f[g++]=d[2];var i,j;for(i=0,j=f.length;i<j;++i)p[q++]=f[i];u[f[0]]++,w[f[3]]++,r=b.length+c-1,m=null}var e,f,g,i,j,k,l,m,n,o={},p=v?new Uint16Array(2*c.length):[],q=0,r=0,u=new(v?Uint32Array:Array)(286),w=new(v?Uint32Array:Array)(30),x=b.w;if(!v){for(g=0;285>=g;)u[g++]=0;for(g=0;29>=g;)w[g++]=0}for(u[256]=1,e=0,f=c.length;e<f;++e){for(g=j=0,i=3;g<i&&e+g!==f;++g)j=j<<8|c[e+g];if(o[j]===s&&(o[j]=[]),k=o[j],!(0<r--)){for(;0<k.length&&32768<e-k[0];)k.shift();if(e+3>=f){for(m&&d(m,-1),g=0,i=f-e;g<i;++g)n=c[e+g],p[q++]=n,++u[n];break}if(0<k.length){var y=s,z=s,A=0,B=s,C=s,D=s,E=s,F=c.length,C=0,E=k.length;a:for(;C<E;C++){if(y=k[E-C-1],B=3,3<A){for(D=A;3<D;D--)if(c[y+D-1]!==c[e+D-1])continue a;B=A}for(;258>B&&e+B<F&&c[y+B]===c[e+B];)++B;if(B>A&&(z=y,A=B),258===B)break}l=new h(A,e-z),m?m.length<l.length?(n=c[e-1],p[q++]=n,++u[n],d(l,0)):d(m,-1):l.length<x?m=l:d(l,0)}else m?d(m,-1):(n=c[e],p[q++]=n,++u[n])}k.push(e)}return p[q++]=256,u[256]++,b.L=u,b.K=w,v?p.subarray(0,q):p}function k(a,b){function c(a){var b=x[a][y[a]];b===r?(c(a+1),c(a+1)):--u[b],++y[a]}var d,f,g,h,i,j=a.length,k=new e(572),l=new(v?Uint8Array:Array)(j);if(!v)for(h=0;h<j;h++)l[h]=0;for(h=0;h<j;++h)0<a[h]&&k.push(h,a[h]);if(d=Array(k.length/2),f=new(v?Uint32Array:Array)(k.length/2),1===d.length)return l[k.pop().index]=1,l;for(h=0,i=k.length/2;h<i;++h)d[h]=k.pop(),f[h]=d[h].value;var m,n,o,p,q,r=f.length,s=new(v?Uint16Array:Array)(b),t=new(v?Uint8Array:Array)(b),u=new(v?Uint8Array:Array)(r),w=Array(b),x=Array(b),y=Array(b),z=(1<<b)-r,A=1<<b-1;for(s[b-1]=r,n=0;n<b;++n)z<A?t[n]=0:(t[n]=1,z-=A),z<<=1,s[b-2-n]=(s[b-1-n]/2|0)+r;for(s[0]=t[0],w[0]=Array(s[0]),x[0]=Array(s[0]),n=1;n<b;++n)s[n]>2*s[n-1]+t[n]&&(s[n]=2*s[n-1]+t[n]),w[n]=Array(s[n]),x[n]=Array(s[n]);for(m=0;m<r;++m)u[m]=b;for(o=0;o<s[b-1];++o)w[b-1][o]=f[o],x[b-1][o]=o;for(m=0;m<b;++m)y[m]=0;for(1===t[b-1]&&(--u[0],++y[b-1]),n=b-2;0<=n;--n){for(p=m=0,q=y[n+1],o=0;o<s[n];o++)p=w[n+1][q]+w[n+1][q+1],p>f[m]?(w[n][o]=p,x[n][o]=r,q+=2):(w[n][o]=f[m],x[n][o]=m,++m);y[n]=0,1===t[n]&&c(n)}for(g=u,h=0,i=d.length;h<i;++h)l[d[h].index]=g[h];return l}function l(b){var c,d,e,f,g=new(v?Uint16Array:Array)(b.length),h=[],i=[],j=0;for(c=0,d=b.length;c<d;c++)h[b[c]]=(0|h[b[c]])+1;for(c=1,d=16;c<=d;c++)i[c]=j,j+=0|h[c],j>1<<c&&a("overcommitted"),j<<=1;for(65536>j&&a("undercommitted"),c=0,d=b.length;c<d;c++)for(j=i[b[c]],i[b[c]]+=1,e=g[c]=0,f=b[c];e<f;e++)g[c]=g[c]<<1|1&j,j>>>=1;return g}function m(a,b){this.input=a,this.a=new(v?Uint8Array:Array)(32768),this.h=L.j;var c,d={};!b&&(b={})||"number"!=typeof b.compressionType||(this.h=b.compressionType);for(c in b)d[c]=b[c];d.outputBuffer=this.a,this.z=new g(this.input,d)}function n(b,c){switch(this.k=[],this.l=32768,this.e=this.g=this.c=this.q=0,this.input=v?new Uint8Array(b):b,this.s=!1,this.m=N,this.B=!1,!c&&(c={})||(c.index&&(this.c=c.index),c.bufferSize&&(this.l=c.bufferSize),c.bufferType&&(this.m=c.bufferType),c.resize&&(this.B=c.resize)),this.m){case M:this.b=32768,this.a=new(v?Uint8Array:Array)(32768+this.l+258);break;case N:this.b=0,this.a=new(v?Uint8Array:Array)(this.l),this.f=this.J,this.t=this.H,this.o=this.I;break;default:a(Error("invalid inflate mode"))}}function o(b,c){for(var d,e=b.g,f=b.e,g=b.input,h=b.c;f<c;)d=g[h++],d===s&&a(Error("input buffer is broken")),e|=d<<f,f+=8;return d=e&(1<<c)-1,b.g=e>>>c,b.e=f-c,b.c=h,d}function p(b,c){for(var d,e,f,g=b.g,h=b.e,i=b.input,j=b.c,k=c[0],l=c[1];h<l;)d=i[j++],d===s&&a(Error("input buffer is broken")),g|=d<<h,h+=8;return e=k[g&(1<<l)-1],f=e>>>16,b.g=g>>f,b.e=h-f,b.c=j,65535&e}function q(a){function b(a,b,c){var d,e,f,g;for(g=0;g<a;)switch(d=p(this,b)){case 16:for(f=3+o(this,2);f--;)c[g++]=e;break;case 17:for(f=3+o(this,3);f--;)c[g++]=0;e=0;break;case 18:for(f=11+o(this,7);f--;)c[g++]=0;e=0;break;default:e=c[g++]=d}return c}var c,d,e,g,h=o(a,5)+257,i=o(a,5)+1,j=o(a,4)+4,k=new(v?Uint8Array:Array)(S.length);for(g=0;g<j;++g)k[S[g]]=o(a,3);c=f(k),d=new(v?Uint8Array:Array)(h),e=new(v?Uint8Array:Array)(i),a.o(f(b.call(a,h,c,d)),f(b.call(a,i,c,e)))}function r(b,c){var d,e;switch(this.input=b,this.c=0,!c&&(c={})||(c.index&&(this.c=c.index),c.verify&&(this.M=c.verify)),d=b[this.c++],e=b[this.c++],15&d){case qa:this.method=qa;break;default:a(Error("unsupported compression method"))}0!==((d<<8)+e)%31&&a(Error("invalid fcheck flag:"+((d<<8)+e)%31)),32&e&&a(Error("fdict flag is not supported")),this.A=new n(b,{index:this.c,bufferSize:c.bufferSize,bufferType:c.bufferType,resize:c.resize})}var s=void 0,t=!0,u=this,v="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;d.prototype.f=function(){var a,b=this.buffer,c=b.length,d=new(v?Uint8Array:Array)(c<<1);if(v)d.set(b);else for(a=0;a<c;++a)d[a]=b[a];return this.buffer=d},d.prototype.d=function(a,b,c){var d,e=this.buffer,f=this.index,g=this.i,h=e[f];if(c&&1<b&&(a=8<b?(B[255&a]<<24|B[a>>>8&255]<<16|B[a>>>16&255]<<8|B[a>>>24&255])>>32-b:B[a]>>8-b),8>b+g)h=h<<b|a,g+=b;else for(d=0;d<b;++d)h=h<<1|a>>b-d-1&1,8===++g&&(g=0,e[f++]=B[h],h=0,f===e.length&&(e=this.f()));e[f]=h,this.buffer=e,this.i=g,this.index=f},d.prototype.finish=function(){var a,b=this.buffer,c=this.index;return 0<this.i&&(b[c]<<=8-this.i,b[c]=B[b[c]],c++),v?a=b.subarray(0,c):(b.length=c,a=b),a};var w,x=new(v?Uint8Array:Array)(256);for(w=0;256>w;++w){for(var y=w,z=y,A=7,y=y>>>1;y;y>>>=1)z<<=1,z|=1&y,--A;x[w]=(z<<A&255)>>>0}var B=x,C=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];v&&new Uint32Array(C),e.prototype.getParent=function(a){return 2*((a-2)/4|0)},e.prototype.push=function(a,b){var c,d,e,f=this.buffer;for(c=this.length,f[this.length++]=b,f[this.length++]=a;0<c&&(d=this.getParent(c),f[c]>f[d]);)e=f[c],f[c]=f[d],f[d]=e,e=f[c+1],f[c+1]=f[d+1],f[d+1]=e,c=d;return this.length},e.prototype.pop=function(){var a,b,c,d,e,f=this.buffer;for(b=f[0],a=f[1],this.length-=2,f[0]=f[this.length],f[1]=f[this.length+1],e=0;(d=2*e+2,!(d>=this.length))&&(d+2<this.length&&f[d+2]>f[d]&&(d+=2),f[d]>f[e]);)c=f[e],f[e]=f[d],f[d]=c,c=f[e+1],f[e+1]=f[d+1],f[d+1]=c,e=d;return{index:a,value:b,length:this.length}};var D,E=2,F={NONE:0,r:1,j:E,N:3},G=[];for(D=0;288>D;D++)switch(t){case 143>=D:G.push([D+48,8]);break;case 255>=D:G.push([D-144+400,9]);break;case 279>=D:G.push([D-256+0,7]);break;case 287>=D:G.push([D-280+192,8]);break;default:a("invalid literal: "+D)}g.prototype.n=function(){var b,c,e,f,g=this.input;switch(this.h){case 0:for(e=0,f=g.length;e<f;){c=v?g.subarray(e,e+65535):g.slice(e,e+65535),e+=c.length;var h=c,i=e===f,m=s,n=s,o=s,p=s,q=s,r=this.a,u=this.b;if(v){for(r=new Uint8Array(this.a.buffer);r.length<=u+h.length+5;)r=new Uint8Array(r.length<<1);r.set(this.a)}if(m=i?1:0,r[u++]=0|m,n=h.length,o=~n+65536&65535,r[u++]=255&n,r[u++]=n>>>8&255,r[u++]=255&o,r[u++]=o>>>8&255,v)r.set(h,u),u+=h.length,r=r.subarray(0,u);else{for(p=0,q=h.length;p<q;++p)r[u++]=h[p];r.length=u}this.b=u,this.a=r}break;case 1:var w=new d(new Uint8Array(this.a.buffer),this.b);w.d(1,1,t),w.d(1,2,t);var x,y,z,A=j(this,g);for(x=0,y=A.length;x<y;x++)if(z=A[x],d.prototype.d.apply(w,G[z]),256<z)w.d(A[++x],A[++x],t),w.d(A[++x],5),w.d(A[++x],A[++x],t);else if(256===z)break;this.a=w.finish(),this.b=this.a.length;break;case E:var B,C,D,F,H,I,J,K,L,M,N,O,P,Q,R,S=new d(new Uint8Array(this.a),this.b),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=Array(19);for(B=E,S.d(1,1,t),S.d(B,2,t),C=j(this,g),I=k(this.L,15),J=l(I),K=k(this.K,7),L=l(K),D=286;257<D&&0===I[D-1];D--);for(F=30;1<F&&0===K[F-1];F--);var V,W,X,Y,Z,$,_=D,aa=F,ba=new(v?Uint32Array:Array)(_+aa),ca=new(v?Uint32Array:Array)(316),da=new(v?Uint8Array:Array)(19);for(V=W=0;V<_;V++)ba[W++]=I[V];for(V=0;V<aa;V++)ba[W++]=K[V];if(!v)for(V=0,Y=da.length;V<Y;++V)da[V]=0;for(V=Z=0,Y=ba.length;V<Y;V+=W){for(W=1;V+W<Y&&ba[V+W]===ba[V];++W);if(X=W,0===ba[V])if(3>X)for(;0<X--;)ca[Z++]=0,da[0]++;else for(;0<X;)$=138>X?X:138,$>X-3&&$<X&&($=X-3),10>=$?(ca[Z++]=17,ca[Z++]=$-3,da[17]++):(ca[Z++]=18,ca[Z++]=$-11,da[18]++),X-=$;else if(ca[Z++]=ba[V],da[ba[V]]++,X--,3>X)for(;0<X--;)ca[Z++]=ba[V],da[ba[V]]++;else for(;0<X;)$=6>X?X:6,$>X-3&&$<X&&($=X-3),ca[Z++]=16,ca[Z++]=$-3,da[16]++,X-=$}for(b=v?ca.subarray(0,Z):ca.slice(0,Z),M=k(da,7),Q=0;19>Q;Q++)U[Q]=M[T[Q]];for(H=19;4<H&&0===U[H-1];H--);for(N=l(M),S.d(D-257,5,t),S.d(F-1,5,t),S.d(H-4,4,t),Q=0;Q<H;Q++)S.d(U[Q],3,t);for(Q=0,R=b.length;Q<R;Q++)if(O=b[Q],S.d(N[O],M[O],t),16<=O){switch(Q++,O){case 16:P=2;break;case 17:P=3;break;case 18:P=7;break;default:a("invalid code: "+O)}S.d(b[Q],P,t)}var ea,fa,ga,ha,ia,ja,ka,la,ma=[J,I],na=[L,K];for(ia=ma[0],ja=ma[1],ka=na[0],la=na[1],ea=0,fa=C.length;ea<fa;++ea)if(ga=C[ea],S.d(ia[ga],ja[ga],t),256<ga)S.d(C[++ea],C[++ea],t),ha=C[++ea],S.d(ka[ha],la[ha],t),S.d(C[++ea],C[++ea],t);else if(256===ga)break;this.a=S.finish(),this.b=this.a.length;break;default:a("invalid compression type")}return this.a};var H,I,J=[];for(H=3;258>=H;H++)I=i(),J[H]=I[2]<<24|I[1]<<16|I[0];var K=v?new Uint32Array(J):J,L=F;m.prototype.n=function(){var b,d,e,f,g,h,i,j=0;switch(i=this.a,b=qa){case qa:d=Math.LOG2E*Math.log(32768)-8;break;default:a(Error("invalid compression method"))}switch(e=d<<4|b,i[j++]=e,b){case qa:switch(this.h){case L.NONE:g=0;break;case L.r:g=1;break;case L.j:g=2;break;default:a(Error("unsupported compression type"))}break;default:a(Error("invalid compression method"))}return f=g<<6|0,i[j++]=f|31-(256*e+f)%31,h=c(this.input),this.z.b=j,i=this.z.n(),j=i.length,v&&(i=new Uint8Array(i.buffer),i.length<=j+4&&(this.a=new Uint8Array(i.length+4),this.a.set(i),i=this.a),i=i.subarray(0,j+4)),i[j++]=h>>24&255,i[j++]=h>>16&255,i[j++]=h>>8&255,i[j++]=255&h,i},b("Zlib.Deflate",m),b("Zlib.Deflate.compress",function(a,b){return new m(a,b).n()}),b("Zlib.Deflate.CompressionType",L),b("Zlib.Deflate.CompressionType.NONE",L.NONE),b("Zlib.Deflate.CompressionType.FIXED",L.r),b("Zlib.Deflate.CompressionType.DYNAMIC",L.j);var M=0,N=1,O={D:M,C:N};n.prototype.p=function(){for(;!this.s;){var b=o(this,3);switch(1&b&&(this.s=t),b>>>=1){case 0:var c=this.input,d=this.c,e=this.a,f=this.b,g=s,h=s,i=s,j=e.length,k=s;switch(this.e=this.g=0,g=c[d++],g===s&&a(Error("invalid uncompressed block header: LEN (first byte)")),h=g,g=c[d++],g===s&&a(Error("invalid uncompressed block header: LEN (second byte)")),h|=g<<8,g=c[d++],g===s&&a(Error("invalid uncompressed block header: NLEN (first byte)")),i=g,g=c[d++],g===s&&a(Error("invalid uncompressed block header: NLEN (second byte)")),i|=g<<8,h===~i&&a(Error("invalid uncompressed block header: length verify")),d+h>c.length&&a(Error("input buffer is broken")),this.m){case M:for(;f+h>e.length;){if(k=j-f,h-=k,v)e.set(c.subarray(d,d+k),f),f+=k,d+=k;else for(;k--;)e[f++]=c[d++];this.b=f,e=this.f(),f=this.b}break;case N:for(;f+h>e.length;)e=this.f({v:2});break;default:a(Error("invalid inflate mode"))}if(v)e.set(c.subarray(d,d+h),f),f+=h,d+=h;else for(;h--;)e[f++]=c[d++];this.c=d,this.b=f,this.a=e;break;case 1:this.o(ca,ea);break;case 2:q(this);break;default:a(Error("unknown BTYPE: "+b))}}return this.t()};var P,Q,R=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S=v?new Uint16Array(R):R,T=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],U=v?new Uint16Array(T):T,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],W=v?new Uint8Array(V):V,X=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Y=v?new Uint16Array(X):X,Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=v?new Uint8Array(Z):Z,_=new(v?Uint8Array:Array)(288);for(P=0,Q=_.length;P<Q;++P)_[P]=143>=P?8:255>=P?9:279>=P?7:8;var aa,ba,ca=f(_),da=new(v?Uint8Array:Array)(30);for(aa=0,ba=da.length;aa<ba;++aa)da[aa]=5;var ea=f(da);n.prototype.o=function(a,b){var c=this.a,d=this.b;this.u=a;for(var e,f,g,h,i=c.length-258;256!==(e=p(this,a));)if(256>e)d>=i&&(this.b=d,c=this.f(),d=this.b),c[d++]=e;else for(f=e-257,h=U[f],0<W[f]&&(h+=o(this,W[f])),e=p(this,b),g=Y[e],0<$[e]&&(g+=o(this,$[e])),d>=i&&(this.b=d,c=this.f(),d=this.b);h--;)c[d]=c[d++-g];for(;8<=this.e;)this.e-=8,this.c--;this.b=d},n.prototype.I=function(a,b){var c=this.a,d=this.b;this.u=a;for(var e,f,g,h,i=c.length;256!==(e=p(this,a));)if(256>e)d>=i&&(c=this.f(),i=c.length),c[d++]=e;else for(f=e-257,h=U[f],0<W[f]&&(h+=o(this,W[f])),e=p(this,b),g=Y[e],0<$[e]&&(g+=o(this,$[e])),d+h>i&&(c=this.f(),i=c.length);h--;)c[d]=c[d++-g];for(;8<=this.e;)this.e-=8,this.c--;this.b=d},n.prototype.f=function(){var a,b,c=new(v?Uint8Array:Array)(this.b-32768),d=this.b-32768,e=this.a;if(v)c.set(e.subarray(32768,c.length));else for(a=0,b=c.length;a<b;++a)c[a]=e[a+32768];if(this.k.push(c),this.q+=c.length,v)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];return this.b=32768,e},n.prototype.J=function(a){var b,c,d,e,f=this.input.length/this.c+1|0,g=this.input,h=this.a;return a&&("number"==typeof a.v&&(f=a.v),"number"==typeof a.F&&(f+=a.F)),2>f?(c=(g.length-this.c)/this.u[2],e=258*(c/2)|0,d=e<h.length?h.length+e:h.length<<1):d=h.length*f,v?(b=new Uint8Array(d),b.set(h)):b=h,this.a=b},n.prototype.t=function(){var a,b,c,d,e,f=0,g=this.a,h=this.k,i=new(v?Uint8Array:Array)(this.q+(this.b-32768));if(0===h.length)return v?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(b=0,c=h.length;b<c;++b)for(a=h[b],d=0,e=a.length;d<e;++d)i[f++]=a[d];for(b=32768,c=this.b;b<c;++b)i[f++]=g[b];return this.k=[],this.buffer=i},n.prototype.H=function(){var a,b=this.b;return v?this.B?(a=new Uint8Array(b),a.set(this.a.subarray(0,b))):a=this.a.subarray(0,b):(this.a.length>b&&(this.a.length=b),a=this.a),this.buffer=a},r.prototype.p=function(){var b,d,e=this.input;return b=this.A.p(),this.c=this.A.c,this.M&&(d=(e[this.c++]<<24|e[this.c++]<<16|e[this.c++]<<8|e[this.c++])>>>0,d!==c(b)&&a(Error("invalid adler-32 checksum"))),b},b("Zlib.Inflate",r),b("Zlib.Inflate.BufferType",O),O.ADAPTIVE=O.C,O.BLOCK=O.D,b("Zlib.Inflate.prototype.decompress",r.prototype.p);var fa=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];v&&new Uint16Array(fa);var ga=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258];v&&new Uint16Array(ga);var ha=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0];v&&new Uint8Array(ha);var ia=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];v&&new Uint16Array(ia);var ja=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];v&&new Uint8Array(ja);var ka,la,ma=new(v?Uint8Array:Array)(288);for(ka=0,la=ma.length;ka<la;++ka)ma[ka]=143>=ka?8:255>=ka?9:279>=ka?7:8;f(ma);var na,oa,pa=new(v?Uint8Array:Array)(30);for(na=0,oa=pa.length;na<oa;++na)pa[na]=5;f(pa);var qa=8}.call(this);var _p=window;_p=_p.Zlib=_p.Zlib,_p.Deflate=_p.Deflate,_p.Deflate.compress=_p.Deflate.compress,_p.Inflate=_p.Inflate,_p.Inflate.BufferType=_p.Inflate.BufferType,_p.Inflate.prototype.decompress=_p.Inflate.prototype.decompress;cc.PNGReader=cc.Class.extend({ctor:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(b=this.readUInt32(),j=function(){var a,b;for(b=[],g=a=0;a<4;g=++a)b.push(String.fromCharCode(this.data[this.pos++]));return b}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(b);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},e=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*e/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for("fdAT"===j&&(this.pos+=4,b-=4),a=(null!=f?f.data:void 0)||this.imgData,g=m=0;0<=b?m<b:m>b;g=0<=b?++m:--m)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(b),k=255-this.transparency.indexed.length,k>0)for(g=n=0;0<=k?n<k:n>k;g=0<=k?++n:--n)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(b)[0];break;case 2:this.transparency.rgb=this.read(b)}break;case"tEXt":l=this.read(b),h=l.indexOf(0),i=String.fromCharCode.apply(String,l.slice(0,h)),this.text[i]=String.fromCharCode.apply(String,l.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(o=this.colorType)||6===o,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(Uint8Array!=Array&&(this.imgData=new Uint8Array(this.imgData)));default:this.pos+=b}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}},read:function(a){var b,c,d;for(d=[],b=c=0;0<=a?c<a:c>a;b=0<=a?++c:--c)d.push(this.data[this.pos++]);return d},readUInt32:function(){var a,b,c,d;return a=this.data[this.pos++]<<24,b=this.data[this.pos++]<<16,c=this.data[this.pos++]<<8,d=this.data[this.pos++],a|b|c|d},readUInt16:function(){var a,b;return a=this.data[this.pos++]<<8,b=this.data[this.pos++],a|b},decodePixels:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(null==a&&(a=this.imgData),0===a.length)return new Uint8Array(0);var y=new Zlib.Inflate(a,{index:0,verify:!1});for(a=y.decompress(),m=this.pixelBitlength/8,q=m*this.width,n=new Uint8Array(q*this.height),g=a.length,p=0,o=0,c=0;o<g;){switch(a[o++]){case 0:for(e=t=0;t<q;e=t+=1)n[c++]=a[o++];break;case 1:for(e=u=0;u<q;e=u+=1)b=a[o++],f=e<m?0:n[c-m],n[c++]=(b+f)%256;break;case 2:for(e=v=0;v<q;e=v+=1)b=a[o++],d=(e-e%m)/m,r=p&&n[(p-1)*q+d*m+e%m],n[c++]=(r+b)%256;break;case 3:for(e=w=0;w<q;e=w+=1)b=a[o++],d=(e-e%m)/m,f=e<m?0:n[c-m],r=p&&n[(p-1)*q+d*m+e%m],n[c++]=(b+Math.floor((f+r)/2))%256;break;case 4:for(e=x=0;x<q;e=x+=1)b=a[o++],d=(e-e%m)/m,f=e<m?0:n[c-m],0===p?r=s=0:(r=n[(p-1)*q+d*m+e%m],s=d&&n[(p-1)*q+(d-1)*m+e%m]),h=f+r-s,i=Math.abs(h-f),k=Math.abs(h-r),l=Math.abs(h-s),j=i<=k&&i<=l?f:k<=l?r:s,n[c++]=(b+j)%256;break;default:throw new Error("Invalid filter algorithm: "+a[o-1])}p++}return n},copyToImageData:function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(d=this.colors,k=null,c=this.hasAlphaChannel,this.palette.length&&(k=null!=(m=this._decodedPalette)?m:this._decodedPalette=this.decodePalette(),d=4,c=!0),e=a.data||a,j=e.length,g=k||b,f=h=0,1===d)for(;f<j;)i=k?4*b[f/4]:h,l=g[i++],e[f++]=l,e[f++]=l,e[f++]=l,e[f++]=c?g[i++]:255,h=i;else for(;f<j;)i=k?4*b[f/4]:h,e[f++]=g[i++],e[f++]=g[i++],e[f++]=g[i++],e[f++]=c?g[i++]:255,h=i},decodePalette:function(){var a,b,c,d,e,f,g,h,i;for(c=this.palette,f=this.transparency.indexed||[],e=new Uint8Array((f.length||0)+c.length),d=0,a=0,b=g=0,h=c.length;g<h;b=g+=3)e[d++]=c[b],e[d++]=c[b+1],e[d++]=c[b+2],e[d++]=null!=(i=f[a++])?i:255;return e},render:function(a){var b,c;return a.width=this.width,a.height=this.height,b=a.getContext("2d"),c=b.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),b.putImageData(c,0,0)}}),cc.tiffReader={_littleEndian:!1,_tiffData:null,_fileDirectories:[],getUint8:function(a){return this._tiffData[a]},getUint16:function(a){return this._littleEndian?this._tiffData[a+1]<<8|this._tiffData[a]:this._tiffData[a]<<8|this._tiffData[a+1]},getUint32:function(a){var b=this._tiffData;return this._littleEndian?b[a+3]<<24|b[a+2]<<16|b[a+1]<<8|b[a]:b[a]<<24|b[a+1]<<16|b[a+2]<<8|b[a+3]},checkLittleEndian:function(){var a=this.getUint16(0);if(18761===a)this.littleEndian=!0;else{if(19789!==a)throw console.log(a),TypeError("Invalid byte order value.");this.littleEndian=!1}return this.littleEndian},hasTowel:function(){if(42!==this.getUint16(2))throw RangeError("You forgot your towel!");return!0},getFieldTypeName:function(a){var b=this.fieldTypeNames;return a in b?b[a]:null},getFieldTagName:function(a){var b=this.fieldTagNames;return a in b?b[a]:(console.log("Unknown Field Tag:",a),"Tag"+a)},getFieldTypeLength:function(a){return["BYTE","ASCII","SBYTE","UNDEFINED"].indexOf(a)!==-1?1:["SHORT","SSHORT"].indexOf(a)!==-1?2:["LONG","SLONG","FLOAT"].indexOf(a)!==-1?4:["RATIONAL","SRATIONAL","DOUBLE"].indexOf(a)!==-1?8:null},getFieldValues:function(a,b,c,d){var e=[],f=this.getFieldTypeLength(b),g=f*c;if(g<=4)this.littleEndian===!1?e.push(d>>>8*(4-f)):e.push(d);else for(var h=0;h<c;h++){var i=f*h;f>=8?["RATIONAL","SRATIONAL"].indexOf(b)!==-1?(e.push(this.getUint32(d+i)),e.push(this.getUint32(d+i+4))):cc.log("Can't handle this field type or size"):e.push(this.getBytes(f,d+i))}return"ASCII"===b&&e.forEach(function(a,b,c){c[b]=String.fromCharCode(a)}),e},getBytes:function(a,b){if(a<=0)cc.log("No bytes requested");else{if(a<=1)return this.getUint8(b);if(a<=2)return this.getUint16(b);if(a<=3)return this.getUint32(b)>>>8;if(a<=4)return this.getUint32(b);cc.log("Too many bytes requested")}},getBits:function(a,b,c){c=c||0;var d,e,f=Math.floor(c/8),g=b+f,h=c+a,i=32-a;return h<=0?console.log("No bits requested"):h<=8?(d=24+c,e=this.getUint8(g)):h<=16?(d=16+c,e=this.getUint16(g)):h<=32?(d=c,e=this.getUint32(g)):console.log("Too many bits requested"),{bits:e<<d>>>i,byteOffset:g+Math.floor(h/8),bitOffset:h%8}},parseFileDirectory:function(a){for(var b=this.getUint16(a),c=[],d=a+2,e=0;e<b;d+=12,e++){var f=this.getUint16(d),g=this.getUint16(d+2),h=this.getUint32(d+4),i=this.getUint32(d+8),j=this.getFieldTagName(f),k=this.getFieldTypeName(g),l=this.getFieldValues(j,k,h,i);c[j]={type:k,values:l}}this._fileDirectories.push(c);var m=this.getUint32(d);0!==m&&this.parseFileDirectory(m)},clampColorSample:function(a,b){var c=Math.pow(2,8-b);return Math.floor(a*c+(c-1))},parseTIFF:function(a,b){if(b=b||document.createElement("canvas"),this._tiffData=a,this.canvas=b,this.checkLittleEndian(),this.hasTowel()){var c=this.getUint32(4);this._fileDirectories.length=0,this.parseFileDirectory(c);var d=this._fileDirectories[0],e=d.ImageWidth.values[0],f=d.ImageLength.values[0];this.canvas.width=e,this.canvas.height=f;var g=[],h=d.Compression?d.Compression.values[0]:1,i=d.SamplesPerPixel.values[0],j=[],k=0,l=!1;if(d.BitsPerSample.values.forEach(function(a,b,c){j[b]={bitsPerSample:a,hasBytesPerSample:!1,bytesPerSample:void 0},a%8===0&&(j[b].hasBytesPerSample=!0,j[b].bytesPerSample=a/8),k+=a},this),k%8===0){l=!0;var m=k/8}var n=d.StripOffsets.values,o=n.length;if(d.StripByteCounts)var p=d.StripByteCounts.values;else{if(cc.log("Missing StripByteCounts!"),1!==o)throw Error("Cannot recover from missing StripByteCounts");var p=[Math.ceil(e*f*k/8)]}for(var q=0;q<o;q++){var r=n[q];g[q]=[];for(var s=p[q],t=0,u=0,v=1,w=!0,x=[],y=0,z=0,A=0;t<s;t+=v)switch(h){case 1:for(var B=0,x=[];B<i;B++){if(!j[B].hasBytesPerSample){var C=this.getBits(j[B].bitsPerSample,r+t,u);throw x.push(C.bits),t=C.byteOffset-r,u=C.bitOffset,RangeError("Cannot handle sub-byte bits per sample")}var D=j[B].bytesPerSample*B;x.push(this.getBytes(j[B].bytesPerSample,r+t+D))}if(g[q].push(x),!l)throw v=0,RangeError("Cannot handle sub-byte bits per pixel");v=m;break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:break;case 7:break;case 32773:if(w){w=!1;var E=1,F=1,G=this.getInt8(r+t);G>=0&&G<=127?E=G+1:G>=-127&&G<=-1?F=-G+1:w=!0}else{for(var H=this.getUint8(r+t),B=0;B<F;B++){if(!j[z].hasBytesPerSample)throw RangeError("Cannot handle sub-byte bits per sample");A=A<<8*y|H,y++,y===j[z].bytesPerSample&&(x.push(A),A=y=0,z++),z===i&&(g[q].push(x),x=[],z=0)}E--,0===E&&(w=!0)}v=1}}if(b.getContext){var I=this.canvas.getContext("2d");I.fillStyle="rgba(255, 255, 255, 0)";var J=d.RowsPerStrip?d.RowsPerStrip.values[0]:f,K=g.length,L=f%J,M=0===L?J:L,N=J,O=0,P=d.PhotometricInterpretation.values[0],Q=[],R=0;if(d.ExtraSamples&&(Q=d.ExtraSamples.values,R=Q.length),d.ColorMap)var S=d.ColorMap.values,T=Math.pow(2,j[0].bitsPerSample);for(var q=0;q<K;q++){q+1===K&&(N=M);for(var U=g[q].length,V=O*q,W=0,X=0;X<U;W++)for(var Y=0;Y<e;Y++,X++){var Z=g[q][X],$=0,_=0,aa=0,ba=1;if(R>0)for(var ca=0;ca<R;ca++)if(1===Q[ca]||2===Q[ca]){ba=Z[3+ca]/256;break}switch(P){case 0:if(j[0].hasBytesPerSample)var da=Math.pow(16,2*j[0].bytesPerSample);Z.forEach(function(a,b,c){c[b]=da-a});case 1:$=_=aa=this.clampColorSample(Z[0],j[0].bitsPerSample);break;case 2:$=this.clampColorSample(Z[0],j[0].bitsPerSample),_=this.clampColorSample(Z[1],j[1].bitsPerSample),aa=this.clampColorSample(Z[2],j[2].bitsPerSample);break;case 3:if(void 0===S)throw Error("Palette image missing color map");var ea=Z[0];$=this.clampColorSample(S[ea],16),_=this.clampColorSample(S[T+ea],16),aa=this.clampColorSample(S[2*T+ea],16);break;default:throw RangeError("Unknown Photometric Interpretation:",P)}I.fillStyle="rgba("+$+", "+_+", "+aa+", "+ba+")",I.fillRect(Y,V+W,1,1)}O=N}}return this.canvas}},fieldTagNames:{315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop"},fieldTypeNames:{1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE"}},cc.Particle=function(a,b,c,d,e,f,g,h,i,j,k,l){this.pos=a?a:cc.p(0,0),this.startPos=b?b:cc.p(0,0),this.color=c?c:{r:0,g:0,b:0,a:255},this.deltaColor=d?d:{r:0,g:0,b:0,a:255},this.size=e||0,this.deltaSize=f||0,this.rotation=g||0,this.deltaRotation=h||0,this.timeToLive=i||0,this.atlasIndex=j||0,this.modeA=k?k:new cc.Particle.ModeA,this.modeB=l?l:new cc.Particle.ModeB,this.isChangeColor=!1,this.drawPos=cc.p(0,0)},cc.Particle.ModeA=function(a,b,c){this.dir=a?a:cc.p(0,0),this.radialAccel=b||0,this.tangentialAccel=c||0},cc.Particle.ModeB=function(a,b,c,d){this.angle=a||0,this.degreesPerSecond=b||0,this.radius=c||0,this.deltaRadius=d||0},cc.Particle.TemporaryPoints=[cc.p(),cc.p(),cc.p(),cc.p()],cc.ParticleSystem=cc.Node.extend({_className:"ParticleSystem",_plistFile:"",_elapsed:0,_dontTint:!1,modeA:null,modeB:null,_pointZeroForParticle:cc.p(0,0),_particles:null,_emitCounter:0,_particleIdx:0,_batchNode:null,atlasIndex:0,_transformSystemDirty:!1,_allocatedParticles:0,_isActive:!1,particleCount:0,duration:0,_sourcePosition:null,_posVar:null,life:0,lifeVar:0,angle:0,angleVar:0,startSize:0,startSizeVar:0,endSize:0,endSizeVar:0,_startColor:null,_startColorVar:null,_endColor:null,_endColorVar:null,startSpin:0,startSpinVar:0,endSpin:0,endSpinVar:0,emissionRate:0,_totalParticles:0,_texture:null,_blendFunc:null,_opacityModifyRGB:!1,positionType:null,autoRemoveOnFinish:!1,emitterMode:0,_textureLoaded:null,ctor:function(a){if(cc.Node.prototype.ctor.call(this),this.emitterMode=cc.ParticleSystem.MODE_GRAVITY,this.modeA=new cc.ParticleSystem.ModeA,this.modeB=new cc.ParticleSystem.ModeB,this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},this._particles=[],this._sourcePosition=cc.p(0,0),this._posVar=cc.p(0,0),this._startColor=cc.color(255,255,255,255),this._startColorVar=cc.color(255,255,255,255),this._endColor=cc.color(255,255,255,255),this._endColorVar=cc.color(255,255,255,255),this._plistFile="",this._elapsed=0,this._dontTint=!1,this._pointZeroForParticle=cc.p(0,0),this._emitCounter=0,this._particleIdx=0,this._batchNode=null,this.atlasIndex=0,this._transformSystemDirty=!1,this._allocatedParticles=0,this._isActive=!1,this.particleCount=0,this.duration=0,this.life=0,this.lifeVar=0,this.angle=0,this.angleVar=0,this.startSize=0,this.startSizeVar=0,this.endSize=0,this.endSizeVar=0,this.startSpin=0,this.startSpinVar=0,this.endSpin=0,this.endSpinVar=0,this.emissionRate=0,this._totalParticles=0,this._texture=null,this._opacityModifyRGB=!1,this.positionType=cc.ParticleSystem.TYPE_FREE,this.autoRemoveOnFinish=!1,this._textureLoaded=!0,!a||cc.isNumber(a)){var b=a||100;this.setDrawMode(cc.ParticleSystem.TEXTURE_MODE),this.initWithTotalParticles(b)}else cc.isString(a)?this.initWithFile(a):cc.isObject(a)&&this.initWithDictionary(a,"")},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ParticleSystem.CanvasRenderCmd(this):new cc.ParticleSystem.WebGLRenderCmd(this)},ignoreColor:function(a){this._dontTint=a},initTexCoordsWithRect:function(a){this._renderCmd.initTexCoordsWithRect(a)},getBatchNode:function(){return this._batchNode},setBatchNode:function(a){this._renderCmd.setBatchNode(a)},getAtlasIndex:function(){return this.atlasIndex},setAtlasIndex:function(a){this.atlasIndex=a},getDrawMode:function(){return this._renderCmd.getDrawMode()},setDrawMode:function(a){this._renderCmd.setDrawMode(a)},getShapeType:function(){return this._renderCmd.getShapeType()},setShapeType:function(a){this._renderCmd.setShapeType(a)},isActive:function(){return this._isActive},getParticleCount:function(){return this.particleCount},setParticleCount:function(a){this.particleCount=a},getDuration:function(){return this.duration},setDuration:function(a){this.duration=a},getSourcePosition:function(){return{x:this._sourcePosition.x,y:this._sourcePosition.y}},setSourcePosition:function(a){this._sourcePosition=a},getPosVar:function(){return{x:this._posVar.x,y:this._posVar.y}},setPosVar:function(a){this._posVar=a},getLife:function(){return this.life},setLife:function(a){this.life=a},getLifeVar:function(){return this.lifeVar},setLifeVar:function(a){this.lifeVar=a},getAngle:function(){return this.angle},setAngle:function(a){this.angle=a},getAngleVar:function(){return this.angleVar},setAngleVar:function(a){this.angleVar=a},getGravity:function(){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getGravity() : Particle Mode should be Gravity");var a=this.modeA.gravity;return cc.p(a.x,a.y)},setGravity:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setGravity() : Particle Mode should be Gravity"),this.modeA.gravity=a},getSpeed:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getSpeed() : Particle Mode should be Gravity"),this.modeA.speed},setSpeed:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setSpeed() : Particle Mode should be Gravity"),this.modeA.speed=a},getSpeedVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getSpeedVar() : Particle Mode should be Gravity"),this.modeA.speedVar},setSpeedVar:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setSpeedVar() : Particle Mode should be Gravity"),this.modeA.speedVar=a},getTangentialAccel:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getTangentialAccel() : Particle Mode should be Gravity"),this.modeA.tangentialAccel},setTangentialAccel:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setTangentialAccel() : Particle Mode should be Gravity"),this.modeA.tangentialAccel=a},getTangentialAccelVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getTangentialAccelVar() : Particle Mode should be Gravity"),this.modeA.tangentialAccelVar},setTangentialAccelVar:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setTangentialAccelVar() : Particle Mode should be Gravity"),this.modeA.tangentialAccelVar=a},getRadialAccel:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getRadialAccel() : Particle Mode should be Gravity"),this.modeA.radialAccel},setRadialAccel:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setRadialAccel() : Particle Mode should be Gravity"),this.modeA.radialAccel=a},getRadialAccelVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getRadialAccelVar() : Particle Mode should be Gravity"),this.modeA.radialAccelVar},setRadialAccelVar:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setRadialAccelVar() : Particle Mode should be Gravity"),this.modeA.radialAccelVar=a},getRotationIsDir:function(){return this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.getRotationIsDir() : Particle Mode should be Gravity"),this.modeA.rotationIsDir},setRotationIsDir:function(a){this.emitterMode!==cc.ParticleSystem.MODE_GRAVITY&&cc.log("cc.ParticleBatchNode.setRotationIsDir() : Particle Mode should be Gravity"),this.modeA.rotationIsDir=a},getStartRadius:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getStartRadius() : Particle Mode should be Radius"),this.modeB.startRadius},setStartRadius:function(a){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setStartRadius() : Particle Mode should be Radius"),this.modeB.startRadius=a},getStartRadiusVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getStartRadiusVar() : Particle Mode should be Radius"),this.modeB.startRadiusVar},setStartRadiusVar:function(a){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setStartRadiusVar() : Particle Mode should be Radius"),this.modeB.startRadiusVar=a},getEndRadius:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getEndRadius() : Particle Mode should be Radius"),this.modeB.endRadius},setEndRadius:function(a){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setEndRadius() : Particle Mode should be Radius"),this.modeB.endRadius=a},getEndRadiusVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getEndRadiusVar() : Particle Mode should be Radius"),this.modeB.endRadiusVar},setEndRadiusVar:function(a){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setEndRadiusVar() : Particle Mode should be Radius"),this.modeB.endRadiusVar=a},getRotatePerSecond:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getRotatePerSecond() : Particle Mode should be Radius"),this.modeB.rotatePerSecond},setRotatePerSecond:function(a){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setRotatePerSecond() : Particle Mode should be Radius"),this.modeB.rotatePerSecond=a},getRotatePerSecondVar:function(){return this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.getRotatePerSecondVar() : Particle Mode should be Radius"),this.modeB.rotatePerSecondVar},setRotatePerSecondVar:function(a){this.emitterMode!==cc.ParticleSystem.MODE_RADIUS&&cc.log("cc.ParticleBatchNode.setRotatePerSecondVar() : Particle Mode should be Radius"),this.modeB.rotatePerSecondVar=a},setScale:function(a,b){this._transformSystemDirty=!0,cc.Node.prototype.setScale.call(this,a,b)},setRotation:function(a){this._transformSystemDirty=!0,cc.Node.prototype.setRotation.call(this,a)},setScaleX:function(a){this._transformSystemDirty=!0,cc.Node.prototype.setScaleX.call(this,a)},setScaleY:function(a){this._transformSystemDirty=!0,cc.Node.prototype.setScaleY.call(this,a)},getStartSize:function(){return this.startSize},setStartSize:function(a){this.startSize=a},getStartSizeVar:function(){return this.startSizeVar},setStartSizeVar:function(a){this.startSizeVar=a},getEndSize:function(){return this.endSize},setEndSize:function(a){this.endSize=a},getEndSizeVar:function(){return this.endSizeVar},setEndSizeVar:function(a){this.endSizeVar=a},getStartColor:function(){return cc.color(this._startColor.r,this._startColor.g,this._startColor.b,this._startColor.a)},setStartColor:function(a){this._startColor=cc.color(a)},getStartColorVar:function(){return cc.color(this._startColorVar.r,this._startColorVar.g,this._startColorVar.b,this._startColorVar.a)},setStartColorVar:function(a){this._startColorVar=cc.color(a)},getEndColor:function(){return cc.color(this._endColor.r,this._endColor.g,this._endColor.b,this._endColor.a)},setEndColor:function(a){this._endColor=cc.color(a)},getEndColorVar:function(){return cc.color(this._endColorVar.r,this._endColorVar.g,this._endColorVar.b,this._endColorVar.a)},setEndColorVar:function(a){this._endColorVar=cc.color(a)},getStartSpin:function(){return this.startSpin},setStartSpin:function(a){this.startSpin=a},getStartSpinVar:function(){return this.startSpinVar},setStartSpinVar:function(a){this.startSpinVar=a},getEndSpin:function(){return this.endSpin},setEndSpin:function(a){this.endSpin=a},getEndSpinVar:function(){return this.endSpinVar},setEndSpinVar:function(a){this.endSpinVar=a},getEmissionRate:function(){return this.emissionRate},setEmissionRate:function(a){this.emissionRate=a},getTotalParticles:function(){return this._totalParticles},setTotalParticles:function(a){this._renderCmd.setTotalParticles(a)},getTexture:function(){return this._texture},setTexture:function(a){a&&(a.isLoaded()?this.setTextureWithRect(a,cc.rect(0,0,a.width,a.height)):(this._textureLoaded=!1,a.addEventListener("load",function(a){this._textureLoaded=!0,this.setTextureWithRect(a,cc.rect(0,0,a.width,a.height))},this)))},getBlendFunc:function(){return this._blendFunc},setBlendFunc:function(a,b){void 0===b?this._blendFunc!==a&&(this._blendFunc=a,this._updateBlendFunc()):this._blendFunc.src===a&&this._blendFunc.dst===b||(this._blendFunc={src:a,dst:b},this._updateBlendFunc())},isOpacityModifyRGB:function(){return this._opacityModifyRGB},setOpacityModifyRGB:function(a){this._opacityModifyRGB=a},isBlendAdditive:function(){return this._blendFunc.src===cc.SRC_ALPHA&&this._blendFunc.dst===cc.ONE||this._blendFunc.src===cc.ONE&&this._blendFunc.dst===cc.ONE},setBlendAdditive:function(a){var b=this._blendFunc;a?(b.src=cc.SRC_ALPHA,b.dst=cc.ONE):this._renderCmd._setBlendAdditive()},getPositionType:function(){return this.positionType},setPositionType:function(a){this.positionType=a},isAutoRemoveOnFinish:function(){return this.autoRemoveOnFinish},setAutoRemoveOnFinish:function(a){this.autoRemoveOnFinish=a},getEmitterMode:function(){return this.emitterMode},setEmitterMode:function(a){this.emitterMode=a},init:function(){return this.initWithTotalParticles(150)},initWithFile:function(a){this._plistFile=a;var b=cc.loader.getRes(a);return b?this.initWithDictionary(b,""):(cc.log("cc.ParticleSystem.initWithFile(): Particles: file not found"),!1)},getBoundingBoxToWorld:function(){return cc.rect(0,0,cc._canvas.width,cc._canvas.height)},initWithDictionary:function(a,b){var c=!1,d=null,e=this._valueForKey,f=parseInt(e("maxParticles",a));if(this.initWithTotalParticles(f)){this.angle=parseFloat(e("angle",a)),this.angleVar=parseFloat(e("angleVariance",a)),this.duration=parseFloat(e("duration",a)),this._blendFunc.src=parseInt(e("blendFuncSource",a)),this._blendFunc.dst=parseInt(e("blendFuncDestination",a));var g=this._startColor;g.r=255*parseFloat(e("startColorRed",a)),g.g=255*parseFloat(e("startColorGreen",a)),g.b=255*parseFloat(e("startColorBlue",a)),g.a=255*parseFloat(e("startColorAlpha",a));var h=this._startColorVar;h.r=255*parseFloat(e("startColorVarianceRed",a)),h.g=255*parseFloat(e("startColorVarianceGreen",a)),h.b=255*parseFloat(e("startColorVarianceBlue",a)),h.a=255*parseFloat(e("startColorVarianceAlpha",a));var i=this._endColor;i.r=255*parseFloat(e("finishColorRed",a)),i.g=255*parseFloat(e("finishColorGreen",a)),i.b=255*parseFloat(e("finishColorBlue",a)),i.a=255*parseFloat(e("finishColorAlpha",a));var j=this._endColorVar;if(j.r=255*parseFloat(e("finishColorVarianceRed",a)),j.g=255*parseFloat(e("finishColorVarianceGreen",a)),j.b=255*parseFloat(e("finishColorVarianceBlue",a)),j.a=255*parseFloat(e("finishColorVarianceAlpha",a)),this.startSize=parseFloat(e("startParticleSize",a)),this.startSizeVar=parseFloat(e("startParticleSizeVariance",a)),this.endSize=parseFloat(e("finishParticleSize",a)),this.endSizeVar=parseFloat(e("finishParticleSizeVariance",a)),this.setPosition(parseFloat(e("sourcePositionx",a)),parseFloat(e("sourcePositiony",a))),this._posVar.x=parseFloat(e("sourcePositionVariancex",a)),this._posVar.y=parseFloat(e("sourcePositionVariancey",a)),this.startSpin=parseFloat(e("rotationStart",a)),this.startSpinVar=parseFloat(e("rotationStartVariance",a)),this.endSpin=parseFloat(e("rotationEnd",a)),this.endSpinVar=parseFloat(e("rotationEndVariance",a)),this.emitterMode=parseInt(e("emitterType",a)),this.emitterMode===cc.ParticleSystem.MODE_GRAVITY){var k=this.modeA;k.gravity.x=parseFloat(e("gravityx",a)),k.gravity.y=parseFloat(e("gravityy",a)),k.speed=parseFloat(e("speed",a)),k.speedVar=parseFloat(e("speedVariance",a));var l=e("radialAcceleration",a);k.radialAccel=l?parseFloat(l):0,l=e("radialAccelVariance",a),k.radialAccelVar=l?parseFloat(l):0,l=e("tangentialAcceleration",a),k.tangentialAccel=l?parseFloat(l):0,l=e("tangentialAccelVariance",a),k.tangentialAccelVar=l?parseFloat(l):0;var m=e("rotationIsDir",a).toLowerCase();k.rotationIsDir=null!=m&&("true"===m||"1"===m)}else{if(this.emitterMode!==cc.ParticleSystem.MODE_RADIUS)return cc.log("cc.ParticleSystem.initWithDictionary(): Invalid emitterType in config file"),!1;var n=this.modeB;n.startRadius=parseFloat(e("maxRadius",a)),n.startRadiusVar=parseFloat(e("maxRadiusVariance",a)),n.endRadius=parseFloat(e("minRadius",a)),n.endRadiusVar=0,n.rotatePerSecond=parseFloat(e("rotatePerSecond",a)),n.rotatePerSecondVar=parseFloat(e("rotatePerSecondVariance",a))}if(this.life=parseFloat(e("particleLifespan",a)),this.lifeVar=parseFloat(e("particleLifespanVariance",a)),this.emissionRate=this._totalParticles/this.life,!this._batchNode){this._opacityModifyRGB=!1;var o=e("textureFileName",a),p=cc.path.changeBasename(this._plistFile,o),q=cc.textureCache.getTextureForKey(p);if(q)this.setTexture(q);else{var r=e("textureImageData",a);if(r&&0!==r.length){if(d=cc.unzipBase64AsArray(r,1),!d)return cc.log("cc.ParticleSystem: error decoding or ungzipping textureImageData"),!1;var s=cc.getImageFormatByData(d);if(s!==cc.FMT_TIFF&&s!==cc.FMT_PNG)return cc.log("cc.ParticleSystem: unknown image format with Data"),!1;var t=document.createElement("canvas");if(s===cc.FMT_PNG){var u=new cc.PNGReader(d);u.render(t)}else{var v=cc.tiffReader;v.parseTIFF(d,t)}cc.textureCache.cacheImage(p,t);var w=cc.textureCache.getTextureForKey(p);w||cc.log("cc.ParticleSystem.initWithDictionary() : error loading the texture"),this.setTexture(w)}else{if(q=cc.textureCache.addImage(p),!q)return!1;this.setTexture(q)}}}c=!0}return c},initWithTotalParticles:function(a){this._totalParticles=a;var b,c=this._particles;for(c.length=0,b=0;b<a;b++)c[b]=new cc.Particle;if(!c)return cc.log("Particle system: not enough memory"),!1;if(this._allocatedParticles=a,this._batchNode)for(b=0;b<this._totalParticles;b++)c[b].atlasIndex=b;return this._isActive=!0,this._blendFunc.src=cc.BLEND_SRC,this._blendFunc.dst=cc.BLEND_DST,this.positionType=cc.ParticleSystem.TYPE_FREE,this.emitterMode=cc.ParticleSystem.MODE_GRAVITY,this.autoRemoveOnFinish=!1,this._transformSystemDirty=!1,this.scheduleUpdateWithPriority(1),this._renderCmd._initWithTotalParticles(a),!0},destroyParticleSystem:function(){this.unscheduleUpdate()},addParticle:function(){if(this.isFull())return!1;var a=this._renderCmd.addParticle();return this.initParticle(a),++this.particleCount,!0},initParticle:function(a){var b=cc.randomMinus1To1;a.timeToLive=this.life+this.lifeVar*b(),a.timeToLive=Math.max(0,a.timeToLive),a.pos.x=this._sourcePosition.x+this._posVar.x*b(),a.pos.y=this._sourcePosition.y+this._posVar.y*b();var c,d,e=this._startColor,f=this._startColorVar,g=this._endColor,h=this._endColorVar;c={r:cc.clampf(e.r+f.r*b(),0,255),g:cc.clampf(e.g+f.g*b(),0,255),b:cc.clampf(e.b+f.b*b(),0,255),a:cc.clampf(e.a+f.a*b(),0,255)},d={r:cc.clampf(g.r+h.r*b(),0,255),g:cc.clampf(g.g+h.g*b(),0,255),b:cc.clampf(g.b+h.b*b(),0,255),a:cc.clampf(g.a+h.a*b(),0,255)},a.color=c;var i=a.deltaColor,j=a.timeToLive;i.r=(d.r-c.r)/j,i.g=(d.g-c.g)/j,i.b=(d.b-c.b)/j,i.a=(d.a-c.a)/j;var k=this.startSize+this.startSizeVar*b();if(k=Math.max(0,k),a.size=k,this.endSize===cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE)a.deltaSize=0;else{var l=this.endSize+this.endSizeVar*b();l=Math.max(0,l),a.deltaSize=(l-k)/j}var m=this.startSpin+this.startSpinVar*b(),n=this.endSpin+this.endSpinVar*b();a.rotation=m,a.deltaRotation=(n-m)/j,this.positionType===cc.ParticleSystem.TYPE_FREE?a.startPos=this.convertToWorldSpace(this._pointZeroForParticle):this.positionType===cc.ParticleSystem.TYPE_RELATIVE&&(a.startPos.x=this._position.x,a.startPos.y=this._position.y);var o=cc.degreesToRadians(this.angle+this.angleVar*b());if(this.emitterMode===cc.ParticleSystem.MODE_GRAVITY){var p=this.modeA,q=a.modeA,r=p.speed+p.speedVar*b();q.dir.x=Math.cos(o),q.dir.y=Math.sin(o),cc.pMultIn(q.dir,r),q.radialAccel=p.radialAccel+p.radialAccelVar*b(),q.tangentialAccel=p.tangentialAccel+p.tangentialAccelVar*b(),p.rotationIsDir&&(a.rotation=-cc.radiansToDegrees(cc.pToAngle(q.dir)))}else{var s=this.modeB,t=a.modeB,u=s.startRadius+s.startRadiusVar*b(),v=s.endRadius+s.endRadiusVar*b();t.radius=u,t.deltaRadius=s.endRadius===cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS?0:(v-u)/j,
t.angle=o,t.degreesPerSecond=cc.degreesToRadians(s.rotatePerSecond+s.rotatePerSecondVar*b())}},stopSystem:function(){this._isActive=!1,this._elapsed=this.duration,this._emitCounter=0},resetSystem:function(){this._isActive=!0,this._elapsed=0;var a=this._particles;for(this._particleIdx=0;this._particleIdx<this.particleCount;++this._particleIdx)a[this._particleIdx].timeToLive=0},isFull:function(){return this.particleCount>=this._totalParticles},updateQuadWithParticle:function(a,b){this._renderCmd.updateQuadWithParticle(a,b)},postStep:function(){this._renderCmd.postStep()},update:function(a){if(this._isActive&&this.emissionRate){var b=1/this.emissionRate;for(this.particleCount<this._totalParticles&&(this._emitCounter+=a);this.particleCount<this._totalParticles&&this._emitCounter>b;)this.addParticle(),this._emitCounter-=b;this._elapsed+=a,this.duration!==-1&&this.duration<this._elapsed&&this.stopSystem()}this._particleIdx=0;var c=cc.Particle.TemporaryPoints[0];if(this.positionType===cc.ParticleSystem.TYPE_FREE?cc.pIn(c,this.convertToWorldSpace(this._pointZeroForParticle)):this.positionType===cc.ParticleSystem.TYPE_RELATIVE&&(c.x=this._position.x,c.y=this._position.y),this._visible){for(var d=cc.Particle.TemporaryPoints[1],e=cc.Particle.TemporaryPoints[2],f=cc.Particle.TemporaryPoints[3],g=this._particles;this._particleIdx<this.particleCount;){cc.pZeroIn(d),cc.pZeroIn(e),cc.pZeroIn(f);var h=g[this._particleIdx];if(h.timeToLive-=a,h.timeToLive>0){if(this.emitterMode===cc.ParticleSystem.MODE_GRAVITY){var i=f,j=d,k=e;h.pos.x||h.pos.y?(cc.pIn(j,h.pos),cc.pNormalizeIn(j)):cc.pZeroIn(j),cc.pIn(k,j),cc.pMultIn(j,h.modeA.radialAccel);var l=k.x;k.x=-k.y,k.y=l,cc.pMultIn(k,h.modeA.tangentialAccel),cc.pIn(i,j),cc.pAddIn(i,k),cc.pAddIn(i,this.modeA.gravity),cc.pMultIn(i,a),cc.pAddIn(h.modeA.dir,i),cc.pIn(i,h.modeA.dir),cc.pMultIn(i,a),cc.pAddIn(h.pos,i)}else{var m=h.modeB;m.angle+=m.degreesPerSecond*a,m.radius+=m.deltaRadius*a,h.pos.x=-Math.cos(m.angle)*m.radius,h.pos.y=-Math.sin(m.angle)*m.radius}this._renderCmd._updateDeltaColor(h,a),h.size+=h.deltaSize*a,h.size=Math.max(0,h.size),h.rotation+=h.deltaRotation*a;var n=d;if(this.positionType===cc.ParticleSystem.TYPE_FREE||this.positionType===cc.ParticleSystem.TYPE_RELATIVE){var o=e;cc.pIn(o,c),cc.pSubIn(o,h.startPos),cc.pIn(n,h.pos),cc.pSubIn(n,o)}else cc.pIn(n,h.pos);this._batchNode&&(n.x+=this._position.x,n.y+=this._position.y),this._renderCmd.updateParticlePosition(h,n),++this._particleIdx}else{var p=h.atlasIndex;if(this._particleIdx!==this.particleCount-1){var q=g[this._particleIdx];g[this._particleIdx]=g[this.particleCount-1],g[this.particleCount-1]=q}if(this._batchNode&&(this._batchNode.disableParticle(this.atlasIndex+p),g[this.particleCount-1].atlasIndex=p),--this.particleCount,0===this.particleCount&&this.autoRemoveOnFinish)return this.unscheduleUpdate(),void this._parent.removeChild(this,!0)}}this._transformSystemDirty=!1}this._batchNode||this.postStep()},updateWithNoTime:function(){this.update(0)},_valueForKey:function(a,b){if(b){var c=b[a];return null!=c?c:""}return""},_updateBlendFunc:function(){if(this._batchNode)return void cc.log("Can't change blending functions when the particle is being batched");var a=this._texture;if(a&&a instanceof cc.Texture2D){this._opacityModifyRGB=!1;var b=this._blendFunc;b.src===cc.BLEND_SRC&&b.dst===cc.BLEND_DST&&(a.hasPremultipliedAlpha()?this._opacityModifyRGB=!0:(b.src=cc.SRC_ALPHA,b.dst=cc.ONE_MINUS_SRC_ALPHA))}},clone:function(){var a=new cc.ParticleSystem;if(a.initWithTotalParticles(this.getTotalParticles())){a.setAngle(this.getAngle()),a.setAngleVar(this.getAngleVar()),a.setDuration(this.getDuration());var b=this.getBlendFunc();if(a.setBlendFunc(b.src,b.dst),a.setStartColor(this.getStartColor()),a.setStartColorVar(this.getStartColorVar()),a.setEndColor(this.getEndColor()),a.setEndColorVar(this.getEndColorVar()),a.setStartSize(this.getStartSize()),a.setStartSizeVar(this.getStartSizeVar()),a.setEndSize(this.getEndSize()),a.setEndSizeVar(this.getEndSizeVar()),a.setPosition(cc.p(this.x,this.y)),a.setPosVar(cc.p(this.getPosVar().x,this.getPosVar().y)),a.setPositionType(this.getPositionType()),a.setStartSpin(this.getStartSpin()||0),a.setStartSpinVar(this.getStartSpinVar()||0),a.setEndSpin(this.getEndSpin()||0),a.setEndSpinVar(this.getEndSpinVar()||0),a.setEmitterMode(this.getEmitterMode()),this.getEmitterMode()===cc.ParticleSystem.MODE_GRAVITY){var c=this.getGravity();a.setGravity(cc.p(c.x,c.y)),a.setSpeed(this.getSpeed()),a.setSpeedVar(this.getSpeedVar()),a.setRadialAccel(this.getRadialAccel()),a.setRadialAccelVar(this.getRadialAccelVar()),a.setTangentialAccel(this.getTangentialAccel()),a.setTangentialAccelVar(this.getTangentialAccelVar())}else this.getEmitterMode()===cc.ParticleSystem.MODE_RADIUS&&(a.setStartRadius(this.getStartRadius()),a.setStartRadiusVar(this.getStartRadiusVar()),a.setEndRadius(this.getEndRadius()),a.setEndRadiusVar(this.getEndRadiusVar()),a.setRotatePerSecond(this.getRotatePerSecond()),a.setRotatePerSecondVar(this.getRotatePerSecondVar()));if(a.setLife(this.getLife()),a.setLifeVar(this.getLifeVar()),a.setEmissionRate(this.getEmissionRate()),!this.getBatchNode()){a.setOpacityModifyRGB(this.isOpacityModifyRGB());var d=this.getTexture();if(d){var e=d.getContentSize();a.setTextureWithRect(d,cc.rect(0,0,e.width,e.height))}}}return a},setDisplayFrame:function(a){if(a){var b=a.getOffsetInPixels();0===b.x&&0===b.y||cc.log("cc.ParticleSystem.setDisplayFrame(): QuadParticle only supports SpriteFrames with no offsets");var c=a.getTexture(),d=this._texture;d!==c&&this.setTexture(c)}},setTextureWithRect:function(a,b){var c=this._texture;c!==a&&(this._texture=a,this._updateBlendFunc()),this.initTexCoordsWithRect(b)},listenBackToForeground:function(a){}});var _p=cc.ParticleSystem.prototype;_p.opacityModifyRGB,cc.defineGetterSetter(_p,"opacityModifyRGB",_p.isOpacityModifyRGB,_p.setOpacityModifyRGB),_p.batchNode,cc.defineGetterSetter(_p,"batchNode",_p.getBatchNode,_p.setBatchNode),_p.drawMode,cc.defineGetterSetter(_p,"drawMode",_p.getDrawMode,_p.setDrawMode),_p.shapeType,cc.defineGetterSetter(_p,"shapeType",_p.getShapeType,_p.setShapeType),_p.active,cc.defineGetterSetter(_p,"active",_p.isActive),_p.sourcePos,cc.defineGetterSetter(_p,"sourcePos",_p.getSourcePosition,_p.setSourcePosition),_p.posVar,cc.defineGetterSetter(_p,"posVar",_p.getPosVar,_p.setPosVar),_p.gravity,cc.defineGetterSetter(_p,"gravity",_p.getGravity,_p.setGravity),_p.speed,cc.defineGetterSetter(_p,"speed",_p.getSpeed,_p.setSpeed),_p.speedVar,cc.defineGetterSetter(_p,"speedVar",_p.getSpeedVar,_p.setSpeedVar),_p.tangentialAccel,cc.defineGetterSetter(_p,"tangentialAccel",_p.getTangentialAccel,_p.setTangentialAccel),_p.tangentialAccelVar,cc.defineGetterSetter(_p,"tangentialAccelVar",_p.getTangentialAccelVar,_p.setTangentialAccelVar),_p.radialAccel,cc.defineGetterSetter(_p,"radialAccel",_p.getRadialAccel,_p.setRadialAccel),_p.radialAccelVar,cc.defineGetterSetter(_p,"radialAccelVar",_p.getRadialAccelVar,_p.setRadialAccelVar),_p.rotationIsDir,cc.defineGetterSetter(_p,"rotationIsDir",_p.getRotationIsDir,_p.setRotationIsDir),_p.startRadius,cc.defineGetterSetter(_p,"startRadius",_p.getStartRadius,_p.setStartRadius),_p.startRadiusVar,cc.defineGetterSetter(_p,"startRadiusVar",_p.getStartRadiusVar,_p.setStartRadiusVar),_p.endRadius,cc.defineGetterSetter(_p,"endRadius",_p.getEndRadius,_p.setEndRadius),_p.endRadiusVar,cc.defineGetterSetter(_p,"endRadiusVar",_p.getEndRadiusVar,_p.setEndRadiusVar),_p.rotatePerS,cc.defineGetterSetter(_p,"rotatePerS",_p.getRotatePerSecond,_p.setRotatePerSecond),_p.rotatePerSVar,cc.defineGetterSetter(_p,"rotatePerSVar",_p.getRotatePerSecondVar,_p.setRotatePerSecondVar),_p.startColor,cc.defineGetterSetter(_p,"startColor",_p.getStartColor,_p.setStartColor),_p.startColorVar,cc.defineGetterSetter(_p,"startColorVar",_p.getStartColorVar,_p.setStartColorVar),_p.endColor,cc.defineGetterSetter(_p,"endColor",_p.getEndColor,_p.setEndColor),_p.endColorVar,cc.defineGetterSetter(_p,"endColorVar",_p.getEndColorVar,_p.setEndColorVar),_p.totalParticles,cc.defineGetterSetter(_p,"totalParticles",_p.getTotalParticles,_p.setTotalParticles),_p.texture,cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.ParticleSystem.create=function(a){return new cc.ParticleSystem(a)},cc.ParticleSystem.createWithTotalParticles=cc.ParticleSystem.create,cc.ParticleSystem.ModeA=function(a,b,c,d,e,f,g,h){this.gravity=a?a:cc.p(0,0),this.speed=b||0,this.speedVar=c||0,this.tangentialAccel=d||0,this.tangentialAccelVar=e||0,this.radialAccel=f||0,this.radialAccelVar=g||0,this.rotationIsDir=h||!1},cc.ParticleSystem.ModeB=function(a,b,c,d,e,f){this.startRadius=a||0,this.startRadiusVar=b||0,this.endRadius=c||0,this.endRadiusVar=d||0,this.rotatePerSecond=e||0,this.rotatePerSecondVar=f||0},cc.ParticleSystem.SHAPE_MODE=0,cc.ParticleSystem.TEXTURE_MODE=1,cc.ParticleSystem.STAR_SHAPE=0,cc.ParticleSystem.BALL_SHAPE=1,cc.ParticleSystem.DURATION_INFINITY=-1,cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE=-1,cc.ParticleSystem.START_RADIUS_EQUAL_TO_END_RADIUS=-1,cc.ParticleSystem.MODE_GRAVITY=0,cc.ParticleSystem.MODE_RADIUS=1,cc.ParticleSystem.TYPE_FREE=0,cc.ParticleSystem.TYPE_RELATIVE=1,cc.ParticleSystem.TYPE_GROUPED=2,function(){cc.ParticleSystem.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!0,this._drawMode=cc.ParticleSystem.TEXTURE_MODE,this._shapeType=cc.ParticleSystem.BALL_SHAPE,this._pointRect=cc.rect(0,0,0,0),this._tintCache=document.createElement("canvas")};var a=cc.ParticleSystem.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.ParticleSystem.CanvasRenderCmd,a.getDrawMode=function(){return this._drawMode},a.setDrawMode=function(a){this._drawMode=a},a.getShapeType=function(){return this._shapeType},a.setShapeType=function(a){this._shapeType=a},a.setBatchNode=function(a){this._batchNode!==a&&(this._node._batchNode=a)},a.updateQuadWithParticle=function(a,b){},a.updateParticlePosition=function(a,b){cc.pIn(a.drawPos,b)},a.rendering=function(a,b,c){var d=a||cc._renderContext,e=d.getContext(),f=this._node,g=this._pointRect;d.setTransform(this._worldTransform,b,c),d.save(),f.isBlendAdditive()?e.globalCompositeOperation="lighter":e.globalCompositeOperation="source-over";var h,i,j,k,l=this._node.particleCount,m=this._node._particles;if(f.drawMode!==cc.ParticleSystem.SHAPE_MODE&&f._texture){if(!f._texture._textureLoaded)return void d.restore();var n=f._texture.getHtmlElementObj();if(!n.width||!n.height)return void d.restore();var o=n;for(h=0;h<l;h++)if(i=m[h],j=0|.5*i.size,k=i.color.a/255,0!==k){e.globalAlpha=k,e.save(),e.translate(0|i.drawPos.x,-(0|i.drawPos.y));var p=4*Math.floor(i.size/4),q=g.width,r=g.height;e.scale(Math.max(1/q*p,1e-6),Math.max(1/r*p,1e-6)),i.rotation&&e.rotate(cc.degreesToRadians(i.rotation)),o=i.isChangeColor?this._changeTextureColor(f._texture,i.color,this._pointRect):n,e.drawImage(o,-(0|q/2),-(0|r/2)),e.restore()}}else{var s=cc._drawingUtil;for(h=0;h<l;h++)i=m[h],j=0|.5*i.size,k=i.color.a/255,0!==k&&(e.globalAlpha=k,e.save(),e.translate(0|i.drawPos.x,-(0|i.drawPos.y)),f.shapeType===cc.ParticleSystem.STAR_SHAPE?(i.rotation&&e.rotate(cc.degreesToRadians(i.rotation)),s.drawStar(d,j,i.color)):s.drawColorBall(d,j,i.color),e.restore())}d.restore(),cc.g_NumberOfDraws++},a._changeTextureColor=function(a,b,c){var d=this._tintCache,e=a.getContentSize();return d.width=e.width,d.height=e.height,a._generateColorTexture(b.r,b.g,b.b,c,d)},a.initTexCoordsWithRect=function(a){this._pointRect=a},a.setTotalParticles=function(a){this._node._totalParticles=a<200?a:200},a.addParticle=function(){var a,b=this._node,c=b._particles;return b.particleCount<c.length?a=c[b.particleCount]:(a=new cc.Particle,c.push(a)),a},a._setupVBO=function(){},a._allocMemory=function(){return!0},a.postStep=function(){},a._setBlendAdditive=function(){var a=this._node._blendFunc;a.src=cc.BLEND_SRC,a.dst=cc.BLEND_DST},a._initWithTotalParticles=function(a){},a._updateDeltaColor=function(a,b){this._node._dontTint||(a.color.r+=a.deltaColor.r*b,a.color.g+=a.deltaColor.g*b,a.color.b+=a.deltaColor.b*b,a.color.a+=a.deltaColor.a*b,a.isChangeColor=!0)}}(),cc.ParticleFire=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?300:150)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(60),this.setSpeedVar(20),this.setAngle(90),this.setAngleVar(10);var b=cc.director.getWinSize();return this.setPosition(b.width/2,60),this.setPosVar(cc.p(40,20)),this.setLife(3),this.setLifeVar(.25),this.setStartSize(54),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(194,64,31,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0}return!1}}),cc.ParticleFire.create=function(){return new cc.ParticleFire},cc.ParticleFireworks=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?1500:150)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,-90)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(180),this.setSpeedVar(50);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setAngle(90),this.setAngleVar(20),this.setLife(3.5),this.setLifeVar(1),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(128,128,128,255)),this.setStartColorVar(cc.color(128,128,128,255)),this.setEndColor(cc.color(26,26,26,51)),this.setEndColorVar(cc.color(26,26,26,51)),this.setStartSize(8),this.setStartSizeVar(2),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setBlendAdditive(!1),!0}return!1}}),cc.ParticleFireworks.create=function(){return new cc.ParticleFireworks},cc.ParticleSun=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?350:150)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setBlendAdditive(!0),this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(20),this.setSpeedVar(5),this.setAngle(90),this.setAngleVar(360);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setPosVar(cc.p(0,0)),this.setLife(1),this.setLifeVar(.5),this.setStartSize(30),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(194,64,31,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),!0}return!1}}),cc.ParticleSun.create=function(){return new cc.ParticleSun},cc.ParticleGalaxy=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?200:100)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(60),this.setSpeedVar(10),this.setRadialAccel(-80),this.setRadialAccelVar(0),this.setTangentialAccel(80),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setPosVar(cc.p(0,0)),this.setLife(4),this.setLifeVar(1),this.setStartSize(37),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(31,64,194,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0}return!1}}),cc.ParticleGalaxy.create=function(){return new cc.ParticleGalaxy},cc.ParticleFlower=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?250:100)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(80),this.setSpeedVar(10),this.setRadialAccel(-60),this.setRadialAccelVar(0),this.setTangentialAccel(15),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setPosVar(cc.p(0,0)),this.setLife(4),this.setLifeVar(1),this.setStartSize(30),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(128,128,128,255)),this.setStartColorVar(cc.color(128,128,128,128)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0}return!1}}),cc.ParticleFlower.create=function(){return new cc.ParticleFlower},cc.ParticleMeteor=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?150:100)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(-200,200)),this.setSpeed(15),this.setSpeedVar(5),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setTangentialAccel(0),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setPosVar(cc.p(0,0)),this.setLife(2),this.setLifeVar(1),this.setStartSize(60),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(51,102,179)),this.setStartColorVar(cc.color(0,0,51,26)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!0),!0}return!1}}),cc.ParticleMeteor.create=function(){return new cc.ParticleMeteor},cc.ParticleSpiral=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?500:100)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(150),this.setSpeedVar(0),this.setRadialAccel(-380),this.setRadialAccelVar(0),this.setTangentialAccel(45),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(0);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setPosVar(cc.p(0,0)),this.setLife(12),this.setLifeVar(0),this.setStartSize(20),this.setStartSizeVar(0),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(128,128,128,255)),this.setStartColorVar(cc.color(128,128,128,0)),this.setEndColor(cc.color(128,128,128,255)),this.setEndColorVar(cc.color(128,128,128,0)),this.setBlendAdditive(!1),!0}return!1}}),cc.ParticleSpiral.create=function(){return new cc.ParticleSpiral},cc.ParticleExplosion=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?700:300)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(.1),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setSpeed(70),this.setSpeedVar(40),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setTangentialAccel(0),this.setTangentialAccelVar(0),this.setAngle(90),this.setAngleVar(360);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height/2),this.setPosVar(cc.p(0,0)),this.setLife(5),this.setLifeVar(2),this.setStartSize(15),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getDuration()),this.setStartColor(cc.color(179,26,51,255)),this.setStartColorVar(cc.color(128,128,128,0)),this.setEndColor(cc.color(128,128,128,0)),this.setEndColorVar(cc.color(128,128,128,0)),this.setBlendAdditive(!1),!0}return!1}}),cc.ParticleExplosion.create=function(){return new cc.ParticleExplosion},cc.ParticleSmoke=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?200:100)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,0)),this.setRadialAccel(0),this.setRadialAccelVar(0),this.setSpeed(25),this.setSpeedVar(10),this.setAngle(90),this.setAngleVar(5);var b=cc.director.getWinSize();return this.setPosition(b.width/2,0),this.setPosVar(cc.p(20,0)),this.setLife(4),this.setLifeVar(1),this.setStartSize(60),this.setStartSizeVar(10),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(this.getTotalParticles()/this.getLife()),this.setStartColor(cc.color(204,204,204,255)),this.setStartColorVar(cc.color(5,5,5,0)),this.setEndColor(cc.color(0,0,0,255)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!1),!0}return!1}}),cc.ParticleSmoke.create=function(){return new cc.ParticleSmoke},cc.ParticleSnow=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?700:250)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(0,-1)),this.setSpeed(5),this.setSpeedVar(1),this.setRadialAccel(0),this.setRadialAccelVar(1),this.setTangentialAccel(0),this.setTangentialAccelVar(1);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height+10),this.setPosVar(cc.p(b.width/2,0)),this.setAngle(-90),this.setAngleVar(5),this.setLife(45),this.setLifeVar(15),this.setStartSize(10),this.setStartSizeVar(5),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(10),this.setStartColor(cc.color(255,255,255,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(255,255,255,0)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!1),!0}return!1}}),cc.ParticleSnow.create=function(){return new cc.ParticleSnow},cc.ParticleRain=cc.ParticleSystem.extend({ctor:function(){cc.ParticleSystem.prototype.ctor.call(this,cc._renderType===cc.game.RENDER_TYPE_WEBGL?1e3:300)},initWithTotalParticles:function(a){if(cc.ParticleSystem.prototype.initWithTotalParticles.call(this,a)){this.setDuration(cc.ParticleSystem.DURATION_INFINITY),this.setEmitterMode(cc.ParticleSystem.MODE_GRAVITY),this.setGravity(cc.p(10,-10)),this.setRadialAccel(0),this.setRadialAccelVar(1),this.setTangentialAccel(0),this.setTangentialAccelVar(1),this.setSpeed(130),this.setSpeedVar(30),this.setAngle(-90),this.setAngleVar(5);var b=cc.director.getWinSize();return this.setPosition(b.width/2,b.height),this.setPosVar(cc.p(b.width/2,0)),this.setLife(4.5),this.setLifeVar(0),this.setStartSize(4),this.setStartSizeVar(2),this.setEndSize(cc.ParticleSystem.START_SIZE_EQUAL_TO_END_SIZE),this.setEmissionRate(20),this.setStartColor(cc.color(179,204,255,255)),this.setStartColorVar(cc.color(0,0,0,0)),this.setEndColor(cc.color(179,204,255,128)),this.setEndColorVar(cc.color(0,0,0,0)),this.setBlendAdditive(!1),!0}return!1}}),cc.ParticleRain.create=function(){return new cc.ParticleRain},cc.PARTICLE_DEFAULT_CAPACITY=500,cc.ParticleBatchNode=cc.Node.extend({textureAtlas:null,_blendFunc:null,_className:"ParticleBatchNode",ctor:function(a,b){cc.Node.prototype.ctor.call(this),this._blendFunc={src:cc.BLEND_SRC,dst:cc.BLEND_DST},cc.isString(a)?this.init(a,b):a instanceof cc.Texture2D&&this.initWithTexture(a,b)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ParticleBatchNode.CanvasRenderCmd(this):new cc.ParticleBatchNode.WebGLRenderCmd(this)},initWithTexture:function(a,b){return this.textureAtlas=new cc.TextureAtlas,this.textureAtlas.initWithTexture(a,b),this._children.length=0,this._renderCmd._initWithTexture(),!0},initWithFile:function(a,b){var c=cc.textureCache.addImage(a);return this.initWithTexture(c,b)},init:function(a,b){var c=cc.textureCache.addImage(a);return this.initWithTexture(c,b)},addChild:function(a,b,c){if(!a)throw new Error("cc.ParticleBatchNode.addChild() : child should be non-null");if(!(a instanceof cc.ParticleSystem))throw new Error("cc.ParticleBatchNode.addChild() : only supports cc.ParticleSystem as children");if(b=null==b?a.zIndex:b,c=null==c?a.tag:c,a.getTexture()!==this.textureAtlas.texture)throw new Error("cc.ParticleSystem.addChild() : the child is not using the same texture id");var d=a.getBlendFunc();if(0===this._children.length)this.setBlendFunc(d);else if(d.src!==this._blendFunc.src||d.dst!==this._blendFunc.dst)return void cc.log("cc.ParticleSystem.addChild() : Can't add a ParticleSystem that uses a different blending function");var e=this._addChildHelper(a,b,c),f=0;if(0!==e){var g=this._children[e-1];f=g.getAtlasIndex()+g.getTotalParticles()}else f=0;this.insertChild(a,f),a.setBatchNode(this)},insertChild:function(a,b){var c=a.getTotalParticles(),d=this.textureAtlas,e=d.totalQuads;a.setAtlasIndex(b),e+c>d.getCapacity()&&(this._increaseAtlasCapacityTo(e+c),d.fillWithEmptyQuadsFromIndex(d.getCapacity()-c,c)),a.getAtlasIndex()+c!==e&&d.moveQuadsFromIndex(b,b+c),d.increaseTotalQuadsWith(c),this._updateAllAtlasIndexes()},removeChild:function(a,b){if(null!=a){if(!(a instanceof cc.ParticleSystem))throw new Error("cc.ParticleBatchNode.removeChild(): only supports cc.ParticleSystem as children");if(this._children.indexOf(a)===-1)return void cc.log("cc.ParticleBatchNode.removeChild(): doesn't contain the sprite. Can't remove it");cc.Node.prototype.removeChild.call(this,a,b);var c=this.textureAtlas;c.removeQuadsAtIndex(a.getAtlasIndex(),a.getTotalParticles()),c.fillWithEmptyQuadsFromIndex(c.totalQuads,a.getTotalParticles()),a.setBatchNode(null),this._updateAllAtlasIndexes()}},reorderChild:function(a,b){if(!a)throw new Error("cc.ParticleBatchNode.reorderChild(): child should be non-null");if(!(a instanceof cc.ParticleSystem))throw new Error("cc.ParticleBatchNode.reorderChild(): only supports cc.QuadParticleSystems as children");if(this._children.indexOf(a)===-1)return void cc.log("cc.ParticleBatchNode.reorderChild(): Child doesn't belong to batch");if(b!==a.zIndex){if(this._children.length>1){var c=this._getCurrentIndex(a,b);if(c.oldIndex!==c.newIndex){this._children.splice(c.oldIndex,1),this._children.splice(c.newIndex,0,a);var d=a.getAtlasIndex();this._updateAllAtlasIndexes();for(var e=0,f=this._children,g=0;g<f.length;g++){var h=f[g];if(h===a){e=a.getAtlasIndex();break}}this.textureAtlas.moveQuadsFromIndex(d,a.getTotalParticles(),e),a.updateWithNoTime()}}a._setLocalZOrder(b)}},removeChildAtIndex:function(a,b){this.removeChild(this._children[i],b)},removeAllChildren:function(a){for(var b=this._children,c=0;c<b.length;c++)b[c].setBatchNode(null);cc.Node.prototype.removeAllChildren.call(this,a),this.textureAtlas.removeAllQuads()},disableParticle:function(a){var b=this.textureAtlas.quads[a];b.br.vertices.x=b.br.vertices.y=b.tr.vertices.x=b.tr.vertices.y=b.tl.vertices.x=b.tl.vertices.y=b.bl.vertices.x=b.bl.vertices.y=0,this.textureAtlas._setDirty(!0)},getTexture:function(){return this.textureAtlas.texture},setTexture:function(a){this.textureAtlas.texture=a;var b=this._blendFunc;a&&!a.hasPremultipliedAlpha()&&b.src===cc.BLEND_SRC&&b.dst===cc.BLEND_DST&&(b.src=cc.SRC_ALPHA,b.dst=cc.ONE_MINUS_SRC_ALPHA)},setBlendFunc:function(a,b){void 0===b?(this._blendFunc.src=a.src,this._blendFunc.dst=a.dst):(this._blendFunc.src=a,this._blendFunc.src=b)},getBlendFunc:function(){return new cc.BlendFunc(this._blendFunc.src,this._blendFunc.dst)},_updateAllAtlasIndexes:function(){for(var a=0,b=this._children,c=0;c<b.length;c++){var d=b[c];d.setAtlasIndex(a),a+=d.getTotalParticles()}},_increaseAtlasCapacityTo:function(a){cc.log("cocos2d: cc.ParticleBatchNode: resizing TextureAtlas capacity from ["+this.textureAtlas.getCapacity()+"] to ["+a+"]."),this.textureAtlas.resizeCapacity(a)||cc.log("cc.ParticleBatchNode._increaseAtlasCapacityTo() : WARNING: Not enough memory to resize the atlas")},_searchNewPositionInChildrenForZ:function(a){for(var b=this._children,c=b.length,d=0;d<c;d++)if(b[d].zIndex>a)return d;return c},_getCurrentIndex:function(a,b){for(var c=!1,d=!1,e=0,f=0,g=0,h=this._children,i=h.length,j=0;j<i;j++){var k=h[j];if(k.zIndex>b&&!d&&(e=j,d=!0,c&&d))break;if(a===k&&(f=j,c=!0,d||(g=-1),c&&d))break}return d||(e=i),e+=g,{newIndex:e,oldIndex:f}},_addChildHelper:function(a,b,c){if(!a)throw new Error("cc.ParticleBatchNode._addChildHelper(): child should be non-null");if(a.parent)return cc.log("cc.ParticleBatchNode._addChildHelper(): child already added. It can't be added again"),null;this._children||(this._children=[]);var d=this._searchNewPositionInChildrenForZ(b);return this._children.splice(d,0,a),a.tag=c,a._setLocalZOrder(b),a.parent=this,this._running&&(a.onEnter(),a.onEnterTransitionDidFinish()),d},_updateBlendFunc:function(){this.textureAtlas.texture.hasPremultipliedAlpha()||(this._blendFunc.src=cc.SRC_ALPHA,this._blendFunc.dst=cc.ONE_MINUS_SRC_ALPHA)},getTextureAtlas:function(){return this.textureAtlas},setTextureAtlas:function(a){this.textureAtlas=a}});var _p=cc.ParticleBatchNode.prototype;_p.texture,cc.defineGetterSetter(_p,"texture",_p.getTexture,_p.setTexture),cc.ParticleBatchNode.create=function(a,b){return new cc.ParticleBatchNode(a,b)},function(){cc.ParticleBatchNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._needDraw=!1};var a=cc.ParticleBatchNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.ParticleBatchNode.CanvasRenderCmd,a._initWithTexture=function(){}}();cc.IMEKeyboardNotificationInfo=function(a,b,c){this.begin=a||cc.rect(0,0,0,0),this.end=b||cc.rect(0,0,0,0),this.duration=c||0},cc.IMEDelegate=cc.Class.extend({ctor:function(){cc.imeDispatcher.addDelegate(this)},removeDelegate:function(){cc.imeDispatcher.removeDelegate(this)},attachWithIME:function(){return cc.imeDispatcher.attachDelegateWithIME(this)},detachWithIME:function(){return cc.imeDispatcher.detachDelegateWithIME(this)},canAttachWithIME:function(){return!1},didAttachWithIME:function(){},canDetachWithIME:function(){return!1},didDetachWithIME:function(){},insertText:function(a,b){},deleteBackward:function(){},getContentText:function(){return""},keyboardWillShow:function(a){},keyboardDidShow:function(a){},keyboardWillHide:function(a){},keyboardDidHide:function(a){}}),cc.IMEDispatcher=cc.Class.extend({_domInputControl:null,impl:null,_currentInputString:"",_lastClickPosition:null,ctor:function(){this.impl=new cc.IMEDispatcher.Impl,this._lastClickPosition=cc.p(0,0)},init:function(){if(!cc.sys.isMobile){this._domInputControl=cc.$("#imeDispatcherInput"),this._domInputControl||(this._domInputControl=cc.$new("input"),this._domInputControl.setAttribute("type","text"),this._domInputControl.setAttribute("id","imeDispatcherInput"),this._domInputControl.resize(0,0),this._domInputControl.translates(0,0),this._domInputControl.style.opacity="0",this._domInputControl.style.fontSize="1px",this._domInputControl.setAttribute("tabindex",2),this._domInputControl.style.position="absolute",this._domInputControl.style.top=0,this._domInputControl.style.left=0,document.body.appendChild(this._domInputControl));var a=this;this._domInputControl.addEventListener("input",function(){a._processDomInputString(a._domInputControl.value)},!1),this._domInputControl.addEventListener("keydown",function(b){b.keyCode===cc.KEY.tab?(b.stopPropagation(),b.preventDefault()):b.keyCode===cc.KEY.enter&&(a.dispatchInsertText("\n",1),b.stopPropagation(),b.preventDefault())},!1),/msie/i.test(navigator.userAgent)&&this._domInputControl.addEventListener("keyup",function(b){b.keyCode===cc.KEY.backspace&&a._processDomInputString(a._domInputControl.value)},!1),window.addEventListener("mousedown",function(b){var c=b.pageX||0,d=b.pageY||0;a._lastClickPosition.x=c,a._lastClickPosition.y=d},!1)}},_processDomInputString:function(a){var b,c,d=this._currentInputString.length<a.length?this._currentInputString.length:a.length;for(c=0;c<d&&a[c]===this._currentInputString[c];c++);var e=this._currentInputString.length-c,f=a.length-c;for(b=0;b<e;b++)this.dispatchDeleteBackward();for(b=0;b<f;b++)this.dispatchInsertText(a[c+b],1);this._currentInputString=a},dispatchInsertText:function(a,b){!this.impl||!a||b<=0||this.impl._delegateWithIme&&this.impl._delegateWithIme.insertText(a,b)},dispatchDeleteBackward:function(){this.impl&&this.impl._delegateWithIme&&this.impl._delegateWithIme.deleteBackward()},getContentText:function(){if(this.impl&&this.impl._delegateWithIme){var a=this.impl._delegateWithIme.getContentText();return a?a:""}return""},dispatchKeyboardWillShow:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardWillShow(a)}},dispatchKeyboardDidShow:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardDidShow(a)}},dispatchKeyboardWillHide:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardWillHide(a)}},dispatchKeyboardDidHide:function(a){if(this.impl)for(var b=0;b<this.impl._delegateList.length;b++){var c=this.impl._delegateList[b];c&&c.keyboardDidHide(a)}},addDelegate:function(a){a&&this.impl&&(this.impl._delegateList.indexOf(a)>-1||this.impl._delegateList.splice(0,0,a))},attachDelegateWithIME:function(a){if(!this.impl||!a)return!1;if(this.impl._delegateList.indexOf(a)===-1)return!1;if(this.impl._delegateWithIme){if(!this.impl._delegateWithIme.canDetachWithIME()||!a.canAttachWithIME())return!1;var b=this.impl._delegateWithIme;return this.impl._delegateWithIme=null,b.didDetachWithIME(),this._focusDomInput(a),!0}return!!a.canAttachWithIME()&&(this._focusDomInput(a),!0)},_focusDomInput:function(a){if(cc.sys.isMobile){this.impl._delegateWithIme=a,a.didAttachWithIME(),this._currentInputString=a.string||"";var b,c=a.getTipMessage?a.getTipMessage():"please enter your word:",d=window.Window;b=d&&d.prototype.prompt&&d.prototype.prompt!=prompt?d.prototype.prompt.call(window,c,this._currentInputString):prompt(c,this._currentInputString),null!=b&&this._processDomInputString(b),this.dispatchInsertText("\n",1)}else this.impl._delegateWithIme=a,this._currentInputString=a.string||"",a.didAttachWithIME(),this._domInputControl.focus(),this._domInputControl.value=this._currentInputString,this._domInputControlTranslate()},_domInputControlTranslate:function(){/msie/i.test(navigator.userAgent)?(this._domInputControl.style.left=this._lastClickPosition.x+"px",this._domInputControl.style.top=this._lastClickPosition.y+"px"):this._domInputControl.translates(this._lastClickPosition.x,this._lastClickPosition.y)},detachDelegateWithIME:function(a){return!(!this.impl||!a)&&(this.impl._delegateWithIme===a&&(!!a.canDetachWithIME()&&(this.impl._delegateWithIme=null,a.didDetachWithIME(),cc._canvas.focus(),!0)))},removeDelegate:function(a){this.impl&&a&&this.impl._delegateList.indexOf(a)!==-1&&(this.impl._delegateWithIme&&a===this.impl._delegateWithIme&&(this.impl._delegateWithIme=null),cc.arrayRemoveObject(this.impl._delegateList,a))},processKeycode:function(a){a<32?a===cc.KEY.backspace?this.dispatchDeleteBackward():a===cc.KEY.enter?this.dispatchInsertText("\n",1):a===cc.KEY.tab||a===cc.KEY.escape:a<255&&this.dispatchInsertText(String.fromCharCode(a),1)}}),cc.IMEDispatcher.Impl=cc.Class.extend({_delegateWithIme:null,_delegateList:null,ctor:function(){this._delegateList=[]},findDelegate:function(a){for(var b=0;b<this._delegateList.length;b++)if(this._delegateList[b]===a)return b;return null}}),cc.imeDispatcher=new cc.IMEDispatcher,document.body?cc.imeDispatcher.init():window.addEventListener("load",function(){cc.imeDispatcher.init()},!1),cc.TextFieldDelegate=cc.Class.extend({onTextFieldAttachWithIME:function(a){return!1},onTextFieldDetachWithIME:function(a){return!1},onTextFieldInsertText:function(a,b,c){return!1},onTextFieldDeleteBackward:function(a,b,c){return!1},onDraw:function(a){return!1}}),cc.TextFieldTTF=cc.LabelTTF.extend({delegate:null,colorSpaceHolder:null,_colorText:null,_lens:null,_inputText:"",_placeHolder:"",_charCount:0,_className:"TextFieldTTF",ctor:function(a,b,c,d,e){this.colorSpaceHolder=cc.color(127,127,127),this._colorText=cc.color(255,255,255,255),cc.LabelTTF.prototype.ctor.call(this),void 0!==e?(this.initWithPlaceHolder("",b,c,d,e),a&&this.setPlaceHolder(a)):void 0===d&&void 0!==c&&(this.initWithString("",arguments[1],arguments[2]),a&&this.setPlaceHolder(a))},onEnter:function(){cc.LabelTTF.prototype.onEnter.call(this),cc.imeDispatcher.addDelegate(this)},onExit:function(){cc.LabelTTF.prototype.onExit.call(this),cc.imeDispatcher.removeDelegate(this)},getDelegate:function(){return this.delegate},setDelegate:function(a){this.delegate=a},getCharCount:function(){return this._charCount},getColorSpaceHolder:function(){return cc.color(this.colorSpaceHolder)},setColorSpaceHolder:function(a){this.colorSpaceHolder.r=a.r,this.colorSpaceHolder.g=a.g,this.colorSpaceHolder.b=a.b,this.colorSpaceHolder.a=cc.isUndefined(a.a)?255:a.a,this._inputText.length||this.setColor(this.colorSpaceHolder)},setTextColor:function(a){this._colorText.r=a.r,this._colorText.g=a.g,this._colorText.b=a.b,this._colorText.a=cc.isUndefined(a.a)?255:a.a,this._inputText.length&&this.setColor(this._colorText)},initWithPlaceHolder:function(a,b,c,d,e){switch(arguments.length){case 5:return a&&this.setPlaceHolder(a),this.initWithString(this._placeHolder,d,e,b,c);case 3:return a&&this.setPlaceHolder(a),this.initWithString(this._placeHolder,arguments[1],arguments[2]);default:throw new Error("Argument must be non-nil ")}},setString:function(a){a=String(a),this._inputText=a||"",this._inputText.length?(cc.LabelTTF.prototype.setString.call(this,this._inputText),this.setColor(this._colorText)):(cc.LabelTTF.prototype.setString.call(this,this._placeHolder),this.setColor(this.colorSpaceHolder)),cc._renderType===cc.game.RENDER_TYPE_CANVAS&&this._renderCmd._updateTexture(),this._charCount=this._inputText.length},getString:function(){return this._inputText},setPlaceHolder:function(a){this._placeHolder=a||"",this._inputText.length||(cc.LabelTTF.prototype.setString.call(this,this._placeHolder),this.setColor(this.colorSpaceHolder))},getPlaceHolder:function(){return this._placeHolder},draw:function(a){var b=a||cc._renderContext;this.delegate&&this.delegate.onDraw(this)||cc.LabelTTF.prototype.draw.call(this,b)},visit:function(a){this._super(a)},attachWithIME:function(){return cc.imeDispatcher.attachDelegateWithIME(this)},detachWithIME:function(){return cc.imeDispatcher.detachDelegateWithIME(this)},canAttachWithIME:function(){return!this.delegate||!this.delegate.onTextFieldAttachWithIME(this)},didAttachWithIME:function(){},canDetachWithIME:function(){return!this.delegate||!this.delegate.onTextFieldDetachWithIME(this)},didDetachWithIME:function(){},deleteBackward:function(){var a=this._inputText.length;if(0!==a){var b=1;if(!this.delegate||!this.delegate.onTextFieldDeleteBackward(this,this._inputText[a-b],b))return a<=b?(this._inputText="",this._charCount=0,cc.LabelTTF.prototype.setString.call(this,this._placeHolder),void this.setColor(this.colorSpaceHolder)):void(this.string=this._inputText.substring(0,a-b))}},removeDelegate:function(){cc.imeDispatcher.removeDelegate(this)},_tipMessage:"please enter your word:",setTipMessage:function(a){null!=a&&(this._tipMessage=a)},getTipMessage:function(){return this._tipMessage},insertText:function(a,b){var c=a,d=c.indexOf("\n");if(d>-1&&(c=c.substring(0,d)),c.length>0){if(this.delegate&&this.delegate.onTextFieldInsertText(this,c,c.length))return;var e=this._inputText+c;this._charCount=e.length,this.string=e}d!==-1&&(this.delegate&&this.delegate.onTextFieldInsertText(this,"\n",1)||this.detachWithIME())},getContentText:function(){return this._inputText},keyboardWillShow:function(a){},keyboardDidShow:function(a){},keyboardWillHide:function(a){},keyboardDidHide:function(a){}});var _p=cc.TextFieldTTF.prototype;_p.charCount,cc.defineGetterSetter(_p,"charCount",_p.getCharCount),_p.placeHolder,cc.defineGetterSetter(_p,"placeHolder",_p.getPlaceHolder,_p.setPlaceHolder),cc.TextFieldTTF.create=function(a,b,c,d,e){return new cc.TextFieldTTF(a,b,c,d,e)};cc.CONTROL_EVENT_TOTAL_NUMBER=9,cc.CONTROL_EVENT_TOUCH_DOWN=1,cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE=2,cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE=4,cc.CONTROL_EVENT_TOUCH_DRAG_ENTER=8,cc.CONTROL_EVENT_TOUCH_DRAG_EXIT=16,cc.CONTROL_EVENT_TOUCH_UP_INSIDE=32,cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE=64,cc.CONTROL_EVENT_TOUCH_CANCEL=128,cc.CONTROL_EVENT_VALUECHANGED=256,cc.CONTROL_STATE_NORMAL=1,cc.CONTROL_STATE_HIGHLIGHTED=2,cc.CONTROL_STATE_DISABLED=4,cc.CONTROL_STATE_SELECTED=8,cc.CONTROL_STATE_INITIAL=8,cc.Control=cc.Layer.extend({_isOpacityModifyRGB:!1,_hasVisibleParents:!1,_touchListener:null,_className:"Control",isOpacityModifyRGB:function(){return this._isOpacityModifyRGB},setOpacityModifyRGB:function(a){this._isOpacityModifyRGB=a;for(var b=this.getChildren(),c=0,d=b.length;c<d;c++){var e=b[c];e&&e.setOpacityModifyRGB(a)}},_state:cc.CONTROL_STATE_NORMAL,getState:function(){return this._state},_enabled:!1,_selected:!1,_highlighted:!1,_dispatchTable:null,setEnabled:function(a){this._enabled=a,this._state=a?cc.CONTROL_STATE_NORMAL:cc.CONTROL_STATE_DISABLED,this.needsLayout()},isEnabled:function(){return this._enabled},setSelected:function(a){this._selected=a,this.needsLayout()},isSelected:function(){return this._selected},setHighlighted:function(a){this._highlighted=a,this.needsLayout()},isHighlighted:function(){return this._highlighted},hasVisibleParents:function(){for(var a=this.getParent(),b=a;null!=b;b=b.getParent())if(!b.isVisible())return!1;return!0},ctor:function(){cc.Layer.prototype.ctor.call(this),this._dispatchTable={},this._color=cc.color.WHITE},init:function(){if(cc.Layer.prototype.init.call(this)){this._state=cc.CONTROL_STATE_NORMAL,this._enabled=!0,this._selected=!1,this._highlighted=!1;var a=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0});return this.onTouchBegan&&(a.onTouchBegan=this.onTouchBegan.bind(this)),this.onTouchMoved&&(a.onTouchMoved=this.onTouchMoved.bind(this)),this.onTouchEnded&&(a.onTouchEnded=this.onTouchEnded.bind(this)),this.onTouchCancelled&&(a.onTouchCancelled=this.onTouchCancelled.bind(this)),this._touchListener=a,!0}return!1},onEnter:function(){var a=this._touchListener;a._isRegistered()||cc.eventManager.addListener(a,this),cc.Node.prototype.onEnter.call(this)},sendActionsForControlEvents:function(a){for(var b=0,c=cc.CONTROL_EVENT_TOTAL_NUMBER;b<c;b++)if(a&1<<b)for(var d=this._dispatchListforControlEvent(1<<b),e=0,f=d.length;e<f;e++)d[e].invoke(this)},addTargetWithActionForControlEvents:function(a,b,c){for(var d=0,e=cc.CONTROL_EVENT_TOTAL_NUMBER;d<e;d++)c&1<<d&&this._addTargetWithActionForControlEvent(a,b,1<<d)},removeTargetWithActionForControlEvents:function(a,b,c){for(var d=0,e=cc.CONTROL_EVENT_TOTAL_NUMBER;d<e;d++)c&1<<d&&this._removeTargetWithActionForControlEvent(a,b,1<<d)},getTouchLocation:function(a){var b=a.getLocation();return this.convertToNodeSpace(b)},isTouchInside:function(a){var b=a.getLocation();return b=this.getParent().convertToNodeSpace(b),cc.rectContainsPoint(this.getBoundingBox(),b)},_invocationWithTargetAndActionForControlEvent:function(a,b,c){return null},_dispatchListforControlEvent:function(a){return a=a.toString(),this._dispatchTable[a]||(this._dispatchTable[a]=[]),this._dispatchTable[a]},_addTargetWithActionForControlEvent:function(a,b,c){var d=new cc.Invocation(a,b,c),e=this._dispatchListforControlEvent(c);e.push(d)},_removeTargetWithActionForControlEvent:function(a,b,c){var d=this._dispatchListforControlEvent(c);if(a||b)for(var e=0;e<d.length;){var f=d[e],g=!0;a&&(g=a===f.getTarget()),b&&(g=g&&b===f.getAction()),g?cc.arrayRemoveObject(d,f):e++}else d.length=0},needsLayout:function(){}});var _p=cc.Control.prototype;_p.state,cc.defineGetterSetter(_p,"state",_p.getState),_p.enabled,cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),_p.selected,cc.defineGetterSetter(_p,"selected",_p.isSelected,_p.setSelected),_p.highlighted,cc.defineGetterSetter(_p,"highlighted",_p.isHighlighted,_p.setHighlighted),_p=null,cc.Control.create=function(){var a=new cc.Control;return a&&a.init()?a:null},cc.CONTROL_ZOOM_ACTION_TAG=3435855873,cc.ControlButton=cc.Control.extend({_doesAdjustBackgroundImage:!1,zoomOnTouchDown:!1,_preferredSize:null,_labelAnchorPoint:null,_currentTitle:null,_currentTitleColor:null,_titleLabel:null,_backgroundSprite:null,_opacity:0,_isPushed:!1,_titleDispatchTable:null,_titleColorDispatchTable:null,_titleLabelDispatchTable:null,_backgroundSpriteDispatchTable:null,_parentInited:!1,_marginV:0,_marginH:0,_className:"ControlButton",ctor:function(a,b,c){cc.Control.prototype.ctor.call(this),this._preferredSize=cc.size(0,0),this._labelAnchorPoint=cc.p(0,0),this._currentTitle="",this._currentTitleColor=cc.color.WHITE,this._titleDispatchTable={},this._titleColorDispatchTable={},this._titleLabelDispatchTable={},this._backgroundSpriteDispatchTable={},void 0!=c?this.initWithTitleAndFontNameAndFontSize(a,b,c):void 0!=b?this.initWithLabelAndBackgroundSprite(a,b):void 0!=a?this.initWithBackgroundSprite(a):this.init()},init:function(){return this.initWithLabelAndBackgroundSprite(new cc.LabelTTF("","Arial",12),new cc.Scale9Sprite)},needsLayout:function(){if(this._parentInited){this._titleLabel&&this._titleLabel.setVisible(!1),this._backgroundSprite&&this._backgroundSprite.setVisible(!1),this.setLabelAnchorPoint(this._labelAnchorPoint);var a=this._state;this._currentTitle=this.getTitleForState(a),this._currentTitleColor=this.getTitleColorForState(a),this._titleLabel=this.getTitleLabelForState(a);var b=this._titleLabel;b&&b.setString&&b.setString(this._currentTitle),b&&b.setColor(this._currentTitleColor);var c=this.getContentSize();b&&b.setPosition(c.width/2,c.height/2),this._backgroundSprite=this.getBackgroundSpriteForState(a);var d=this._backgroundSprite;d&&d.setPosition(c.width/2,c.height/2);var e=cc.size(0,0);if(b){var f=b.getBoundingBox();e.width=f.width,e.height=f.height}if(this._doesAdjustBackgroundImage)d&&d.setContentSize(e.width+2*this._marginH,e.height+2*this._marginV);else if(d){var g=d.getPreferredSize();g=cc.size(g.width,g.height),g.width<=0&&(g.width=e.width),g.height<=0&&(g.height=e.height),d.setContentSize(g)}var h=b?b.getBoundingBox():cc.rect(0,0,0,0),i=d?d.getBoundingBox():cc.rect(0,0,0,0),j=cc.rectUnion(h,i);this.setContentSize(j.width,j.height),c=this.getContentSize(),b&&(b.setPosition(c.width/2,c.height/2),b.setVisible(!0)),d&&(d.setPosition(c.width/2,c.height/2),d.setVisible(!0))}},initWithLabelAndBackgroundSprite:function(a,b){if(!a)throw new Error("cc.ControlButton.initWithLabelAndBackgroundSprite(): label should be non-null");if(!b)throw new Error("cc.ControlButton.initWithLabelAndBackgroundSprite(): backgroundSprite should be non-null");if(cc.Control.prototype.init.call(this,!0)){this._parentInited=!0,this._titleDispatchTable={},this._titleColorDispatchTable={},this._titleLabelDispatchTable={},this._backgroundSpriteDispatchTable={},this._isPushed=!1,this.zoomOnTouchDown=!0,this._currentTitle=null,this.setAdjustBackgroundImage(!0),this.setPreferredSize(cc.size(0,0)),this.zoomOnTouchDown=!0,this.ignoreAnchorPointForPosition(!1),this.setAnchorPoint(.5,.5),this._titleLabel=a,this._backgroundSprite=b,this.setOpacity(255),this.setOpacityModifyRGB(!0);var c=a.getString();return this.setTitleForState(c,cc.CONTROL_STATE_NORMAL),this.setTitleColorForState(a.getColor(),cc.CONTROL_STATE_NORMAL),this.setTitleLabelForState(a,cc.CONTROL_STATE_NORMAL),this.setBackgroundSpriteForState(b,cc.CONTROL_STATE_NORMAL),this._state=cc.CONTROL_STATE_NORMAL,this._marginH=24,this._marginV=12,this._labelAnchorPoint=cc.p(.5,.5),this.setPreferredSize(cc.size(0,0)),this.needsLayout(),!0}return!1},initWithTitleAndFontNameAndFontSize:function(a,b,c){var d=new cc.LabelTTF(a,b,c);return this.initWithLabelAndBackgroundSprite(d,new cc.Scale9Sprite)},initWithBackgroundSprite:function(a){var b=new cc.LabelTTF("","Arial",30);return this.initWithLabelAndBackgroundSprite(b,a)},doesAdjustBackgroundImage:function(){return this._doesAdjustBackgroundImage},setAdjustBackgroundImage:function(a){this._doesAdjustBackgroundImage=a,this.needsLayout()},getZoomOnTouchDown:function(){return this.zoomOnTouchDown},setZoomOnTouchDown:function(a){return this.zoomOnTouchDown=a},getPreferredSize:function(){return this._preferredSize},setPreferredSize:function(a){if(0===a.width&&0===a.height)this._doesAdjustBackgroundImage=!0;else{this._doesAdjustBackgroundImage=!1;var b=this._backgroundSpriteDispatchTable;for(var c in b)b[c].setPreferredSize(a)}this._preferredSize=a,this.needsLayout()},getLabelAnchorPoint:function(){return this._labelAnchorPoint},setLabelAnchorPoint:function(a){this._labelAnchorPoint=a,this._titleLabel&&this._titleLabel.setAnchorPoint(a)},_getCurrentTitle:function(){return this._currentTitle},_getCurrentTitleColor:function(){return this._currentTitleColor},getOpacity:function(){return this._opacity},setOpacity:function(a){cc.Control.prototype.setOpacity.call(this,a);var b=this._backgroundSpriteDispatchTable;for(var c in b)b[c].setOpacity(a)},setColor:function(a){cc.Control.prototype.setColor.call(this,a);var b=this._backgroundSpriteDispatchTable;for(var c in b)b[c].setColor(a)},getColor:function(){var a=this._realColor;return cc.color(a.r,a.g,a.b,a.a)},isPushed:function(){return this._isPushed},_getVerticalMargin:function(){return this._marginV},_getHorizontalOrigin:function(){return this._marginH},setMargins:function(a,b){this._marginV=b,this._marginH=a,this.needsLayout()},setEnabled:function(a){cc.Control.prototype.setEnabled.call(this,a),this.needsLayout()},setSelected:function(a){cc.Control.prototype.setSelected.call(this,a),this.needsLayout()},setHighlighted:function(a){this._state=a?cc.CONTROL_STATE_HIGHLIGHTED:cc.CONTROL_STATE_NORMAL,cc.Control.prototype.setHighlighted.call(this,a);var b=this.getActionByTag(cc.CONTROL_ZOOM_ACTION_TAG);if(b&&this.stopAction(b),this.zoomOnTouchDown){var c=this.isHighlighted()&&this.isEnabled()&&!this.isSelected()?1.1:1,d=cc.scaleTo(.05,c);d.setTag(cc.CONTROL_ZOOM_ACTION_TAG),this.runAction(d)}},onTouchBegan:function(a,b){return!!(this.isTouchInside(a)&&this.isEnabled()&&this.isVisible()&&this.hasVisibleParents())&&(this._isPushed=!0,this.setHighlighted(!0),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DOWN),!0)},onTouchMoved:function(a,b){if(!this._enabled||!this._isPushed||this._selected)return void(this._highlighted&&this.setHighlighted(!1));var c=this.isTouchInside(a);c&&!this._highlighted?(this.setHighlighted(!0),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_ENTER)):c&&this._highlighted?this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_INSIDE):!c&&this._highlighted?(this.setHighlighted(!1),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_EXIT)):c||this._highlighted||this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_DRAG_OUTSIDE)},onTouchEnded:function(a,b){this._isPushed=!1,this.setHighlighted(!1),this.isTouchInside(a)?this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_INSIDE):this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_UP_OUTSIDE)},onTouchCancelled:function(a,b){this._isPushed=!1,this.setHighlighted(!1),this.sendActionsForControlEvents(cc.CONTROL_EVENT_TOUCH_CANCEL)},getTitleForState:function(a){var b=this._titleDispatchTable;return b?b[a]?b[a]:b[cc.CONTROL_STATE_NORMAL]:""},setTitleForState:function(a,b){this._titleDispatchTable[b]=a||"",this.getState()===b&&this.needsLayout()},getTitleColorForState:function(a){var b=this._titleColorDispatchTable[a];return b?b:(b=this._titleColorDispatchTable[cc.CONTROL_STATE_NORMAL],b?b:cc.color.WHITE)},setTitleColorForState:function(a,b){this._titleColorDispatchTable[b]=a,this.getState()===b&&this.needsLayout()},getTitleLabelForState:function(a){var b=this._titleLabelDispatchTable;return b[a]?b[a]:b[cc.CONTROL_STATE_NORMAL]},setTitleLabelForState:function(a,b){var c=this._titleLabelDispatchTable;if(c[b]){var d=c[b];d&&this.removeChild(d,!0)}c[b]=a,a.setVisible(!1),a.setAnchorPoint(.5,.5),this.addChild(a,1),this.getState()===b&&this.needsLayout()},setTitleTTFForState:function(a,b){var c=this.getTitleForState(b);c||(c=""),this.setTitleLabelForState(new cc.LabelTTF(c,a,12),b)},getTitleTTFForState:function(a){var b=this.getTitleLabelForState(a);return null!=b&&b instanceof cc.LabelTTF?b.getFontName():""},setTitleTTFSizeForState:function(a,b){var c=this.getTitleLabelForState(b);null!=c&&c instanceof cc.LabelTTF&&c.setFontSize(a)},getTitleTTFSizeForState:function(a){var b=this.getTitleLabelForState(a);return null!=b&&b instanceof cc.LabelTTF?b.getFontSize():0},setTitleBMFontForState:function(a,b){var c=this.getTitleForState(b);c||(c=""),this.setTitleLabelForState(new cc.LabelBMFont(c,a),b)},getTitleBMFontForState:function(a){var b=this.getTitleLabelForState(a);return null!=b&&b instanceof cc.LabelBMFont?b.getFntFile():""},getBackgroundSpriteForState:function(a){var b=this._backgroundSpriteDispatchTable;return b[a]?b[a]:b[cc.CONTROL_STATE_NORMAL]},setBackgroundSpriteForState:function(a,b){var c=this._backgroundSpriteDispatchTable;if(c[b]){var d=c[b];d&&this.removeChild(d,!0)}c[b]=a,a.setVisible(!1),a.setAnchorPoint(.5,.5),this.addChild(a);var e=this._preferredSize;0===e.width&&0===e.height||a.setPreferredSize(e),this._state===b&&this.needsLayout()},setBackgroundSpriteFrameForState:function(a,b){var c=cc.Scale9Sprite.createWithSpriteFrame(a);this.setBackgroundSpriteForState(c,b)}});var _p=cc.ControlButton.prototype;_p.adjustBackground,cc.defineGetterSetter(_p,"adjustBackground",_p.getAdjustBackgroundImage,_p.setAdjustBackgroundImage),_p.preferredSize,cc.defineGetterSetter(_p,"preferredSize",_p.getPreferredSize,_p.setPreferredSize),_p.labelAnchor,cc.defineGetterSetter(_p,"labelAnchor",_p.getLabelAnchorPoint,_p.setLabelAnchorPoint),_p=null,cc.ControlButton.create=function(a,b,c){return new cc.ControlButton(a,b,c)},cc.RGBA=function(a,b,c,d){this.r=a,this.g=b,this.b=c,this.a=d},cc.HSV=function(a,b,c){this.h=a,this.s=b,this.v=c},cc.ControlUtils={},cc.ControlUtils.addSpriteToTargetWithPosAndAnchor=function(a,b,c,d){var e=new cc.Sprite("#"+a);return e?(e.setPosition(c),e.setAnchorPoint(d),b.addChild(e),e):null},cc.ControlUtils.HSVfromRGB=function(a){var b,c,d,e=new cc.HSV;return b=a.r<a.g?a.r:a.g,b=b<a.b?b:a.b,c=a.r>a.g?a.r:a.g,c=c>a.b?c:a.b,e.v=c,d=c-b,c>0?(e.s=d/c,a.r>=c?e.h=(a.g-a.b)/d:a.g>=c?e.h=2+(a.b-a.r)/d:e.h=4+(a.r-a.g)/d,e.h*=60,e.h<0&&(e.h+=360),e):(e.s=0,e.h=-1,e)},cc.ControlUtils.RGBfromHSV=function(a){var b,c,d,e,f,g,h=new cc.RGBA;if(h.a=1,a.s<=0)return a.h?(h.r=0,h.g=0,h.b=0,h):(h.r=a.v,h.g=a.v,h.b=a.v,h);switch(b=a.h,b>=360&&(b=0),b/=60,g=0|b,f=b-g,c=a.v*(1-a.s),d=a.v*(1-a.s*f),e=a.v*(1-a.s*(1-f)),g){case 0:h.r=a.v,h.g=e,h.b=c;break;case 1:h.r=d,h.g=a.v,h.b=c;break;case 2:h.r=c,h.g=a.v,h.b=e;break;case 3:h.r=c,h.g=d,h.b=a.v;break;case 4:h.r=e,h.g=c,h.b=a.v;break;default:h.r=a.v,h.g=c,h.b=d}return h},cc.ControlUtils.CCRectUnion=function(a,b){return cc.rectUnion(a,b)},cc.Invocation=cc.Class.extend({_action:null,_target:null,_controlEvent:null,ctor:function(a,b,c){this._target=a,this._action=b,this._controlEvent=c},getAction:function(){return this._action},getTarget:function(){return this._target},getControlEvent:function(){return this._controlEvent},invoke:function(a){this._target&&this._action&&(cc.isString(this._action)?this._target[this._action](a,this._controlEvent):this._action.call(this._target,a,this._controlEvent))}}),cc.Spacer=cc.Layer.extend({}),cc.Spacer.verticalSpacer=function(a){var b=new cc.Spacer;return b.init(),b.setContentSize(0,a),b},cc.Spacer.horizontalSpacer=function(a){var b=new cc.Spacer;return b.init(),b.setContentSize(a,0),b},cc.MenuPassive=cc.Layer.extend({_color:null,_opacity:0,_className:"MenuPassive",ctor:function(){},getColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},setColor:function(a){var b=this._color;if(b.r=a.r,b.g=a.g,b.b=a.b,this._children&&this._children.length>0)for(var c=0;c<this._children.length;c++)this._children[c]&&this._children[c].setColor(a);void 0===a.a||a.a_undefined||this.setOpacity(a.a)},getOpacity:function(){return this._opacity},setOpacity:function(a){if(this._opacity=a,this._children&&this._children.length>0)for(var b=0;b<this._children.length;b++)this._children[b]&&this._children[b].setOpacity(a);this._color.a=a},initWithItems:function(a,b){if(this.init()){var c=cc.director.getWinSize();this.ignoreAnchorPointForPosition(!0),this.setAnchorPoint(.5,.5),this.setContentSize(c),this.setPosition(c.width/2,c.height/2);var d=0;if(a){this.addChild(a,d);for(var e=0;e<b.length;e++)b[e]&&(d++,this.addChild(b[e],d))}return!0}return!1},alignItemsVertically:function(){this.alignItemsVerticallyWithPadding(cc.DEFAULT_PADDING)},alignItemsVerticallyWithPadding:function(a){var b,c=-a;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)this._children[b]&&(c+=this._children[b].getContentSize().height*this._children[b].getScaleY()+a);var d=0,e=c/2;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)this._children[b]&&(d=Math.max(d,this._children[b].getContentSize().width),this._children[b].setPosition(0,e-this._children[b].getContentSize().height*this._children[b].getScaleY()/2),e-=this._children[b].getContentSize().height*this._children[b].getScaleY()+a);this.setContentSize(d,c)},alignItemsHorizontally:function(){this.alignItemsHorizontallyWithPadding(cc.DEFAULT_PADDING)},alignItemsHorizontallyWithPadding:function(a){var b,c=-a;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)this._children[b]&&(c+=this._children[b].getContentSize().width*this._children[b].getScaleX()+a);var d=0,e=-c/2;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)this._children[b]&&(d=Math.max(d,this._children[b].getContentSize().height),this._children[b].setPosition(e+this._children[b].getContentSize().width*this._children[b].getScaleX()/2,0),e+=this._children[b].getContentSize().width*this._children[b].getScaleX()+a);this.setContentSize(c,d)},alignItemsInColumns:function(a){var b,c=[];for(b=1;b<arguments.length;b++)c.push(arguments[b]);var d,e,f=-5,g=0,h=0,i=0;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)if(this._children[b]){if(g>=c.length){cc.log("cc.MenuPassive.alignItemsInColumns(): invalid row index");continue}if(d=c[g],!d){cc.log("cc.MenuPassive.alignItemsInColumns(): can not have zero columns on a row");continue}e=this._children[b].getContentSize().height,h=0|(h>=e||null==e?h:e),++i,i>=d&&(f+=h+5,i=0,h=0,++g)}var j=cc.director.getWinSize();g=0,h=0,d=0;var k=0,l=0,m=f/2;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)this._children[b]&&(0===d&&(d=c[g],k=j.width/(1+d),l=k),e=this._children[b].getContentSize().height,h=0|(h>=e||null==e?h:e),this._children[b].setPosition(l-j.width/2,m-this._children[b].getContentSize().height/2),l+=k,++i,i>=d&&(m-=h+5,i=0,d=0,h=0,++g))},alignItemsInRows:function(a){var b,c=[];for(b=1;b<arguments.length;b++)c.push(arguments[b]);var d,e,f=[],g=[],h=-10,i=-5,j=0,k=0,l=0;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)if(this._children[b]){if(j>=c.length){cc.log("cc.MenuPassive.alignItemsInRows(): invalid row index");continue}if(d=c[j],!d){cc.log("cc.MenuPassive.alignItemsInColumns(): can't have zero rows on a column");continue}e=this._children[b].getContentSize().width,k=0|(k>=e||null==e?k:e),i+=0|this._children[b].getContentSize().height+5,++l,l>=d&&(f.push(k),g.push(i),h+=k+10,l=0,k=0,i=-5,++j)}var m=cc.director.getWinSize();j=0,k=0,d=null;var n=-h/2,o=0;if(this._children&&this._children.length>0)for(b=0;b<this._children.length;b++)this._children[b]&&(null==d&&(d=c[j],o=g[j]),e=this._children[b].getContentSize().width,k=0|(k>=e||null==e?k:e),this._children[b].setPosition(n+f[j]/2,o-m.height/2),o-=this._children[b].getContentSize().height+10,++l,l>=d&&(n+=k+5,l=0,d=0,k=0,++j))},setOpacityModifyRGB:function(a){},isOpacityModifyRGB:function(){return!1}}),cc.MenuPassive.create=function(a){a||(a=null);for(var b=[],c=1;c<arguments.length;c++)b.push(arguments[c]);var d=new cc.MenuPassive;return d&&d.initWithItems(a,b)?d:null},cc.MenuPassive.createWithItem=function(a){return cc.MenuPassive.create(a,null)},cc.ControlSaturationBrightnessPicker=cc.Control.extend({_saturation:0,_brightness:0,_background:null,_overlay:null,_shadow:null,_slider:null,_startPos:null,_boxPos:0,_boxSize:0,_className:"ControlSaturationBrightnessPicker",ctor:function(a,b){cc.Control.prototype.ctor.call(this),b&&this.initWithTargetAndPos(a,b)},getSaturation:function(){return this._saturation},getBrightness:function(){return this._brightness},getBackground:function(){return this._background},getOverlay:function(){return this._brightness},getShadow:function(){return this._shadow},getSlider:function(){return this._slider},getStartPos:function(){return this._startPos},initWithTargetAndPos:function(a,b){return!!cc.Control.prototype.init.call(this)&&(this._background=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerBackground.png",a,b,cc.p(0,0)),this._overlay=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerOverlay.png",a,b,cc.p(0,0)),this._shadow=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPickerShadow.png",a,b,cc.p(0,0)),this._slider=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPicker.png",a,b,cc.p(.5,.5)),this._startPos=b,this._boxPos=35,this._boxSize=this._background.getContentSize().width/2,!0)},setEnabled:function(a){cc.Control.prototype.setEnabled.call(this,a),this._slider&&this._slider.setOpacity(a?255:128)},updateWithHSV:function(a){var b=new cc.HSV;b.s=1,b.h=a.h,b.v=1;var c=cc.ControlUtils.RGBfromHSV(b);this._background.setColor(cc.color(0|255*c.r,0|255*c.g,0|255*c.b))},updateDraggerWithHSV:function(a){var b=cc.p(this._startPos.x+this._boxPos+this._boxSize*(1-a.s),this._startPos.y+this._boxPos+this._boxSize*a.v);this._updateSliderPosition(b)},_updateSliderPosition:function(a){var b=this._startPos.x+.5*this._background.getBoundingBox().width,c=this._startPos.y+.5*this._background.getBoundingBox().height,d=a.x-b,e=a.y-c,f=Math.sqrt(d*d+e*e),g=Math.atan2(e,d),h=.5*this._background.getBoundingBox().width;f>h&&(a.x=b+h*Math.cos(g),a.y=c+h*Math.sin(g)),this._slider.setPosition(a),a.x<this._startPos.x+this._boxPos?a.x=this._startPos.x+this._boxPos:a.x>this._startPos.x+this._boxPos+this._boxSize-1&&(a.x=this._startPos.x+this._boxPos+this._boxSize-1),a.y<this._startPos.y+this._boxPos?a.y=this._startPos.y+this._boxPos:a.y>this._startPos.y+this._boxPos+this._boxSize&&(a.y=this._startPos.y+this._boxPos+this._boxSize),this._saturation=1-Math.abs((this._startPos.x+this._boxPos-a.x)/this._boxSize),this._brightness=Math.abs((this._startPos.y+this._boxPos-a.y)/this._boxSize)},_checkSliderPosition:function(a){var b=this._startPos.x+.5*this._background.getBoundingBox().width,c=this._startPos.y+.5*this._background.getBoundingBox().height,d=a.x-b,e=a.y-c,f=Math.sqrt(d*d+e*e);return f<=.5*this._background.getBoundingBox().width&&(this._updateSliderPosition(a),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED),!0)},onTouchBegan:function(a,b){if(!this.isEnabled()||!this.isVisible())return!1;var c=this.getTouchLocation(a);return this._checkSliderPosition(c)},onTouchMoved:function(a,b){var c=this.getTouchLocation(a);this._checkSliderPosition(c)}});var _p=cc.ControlSaturationBrightnessPicker.prototype;_p.saturation,cc.defineGetterSetter(_p,"saturation",_p.getSaturation),_p.brightness,cc.defineGetterSetter(_p,"brightness",_p.getBrightness),_p.background,cc.defineGetterSetter(_p,"background",_p.getBackground),_p.overlay,cc.defineGetterSetter(_p,"overlay",_p.getOverlay),_p.shadow,cc.defineGetterSetter(_p,"shadow",_p.getShadow),_p.slider,cc.defineGetterSetter(_p,"slider",_p.getSlider),_p.startPos,cc.defineGetterSetter(_p,"startPos",_p.getStartPos),_p=null,cc.ControlSaturationBrightnessPicker.create=function(a,b){return new cc.ControlSaturationBrightnessPicker(a,b)},cc.ControlHuePicker=cc.Control.extend({_hue:0,_huePercentage:0,_background:null,_slider:null,_startPos:null,_className:"ControlHuePicker",ctor:function(a,b){cc.Control.prototype.ctor.call(this),b&&this.initWithTargetAndPos(a,b)},getHue:function(){return this._hue},setHue:function(a){this._hue=a,this.setHuePercentage(this._hue/360)},getHuePercentage:function(){return this._huePercentage},setHuePercentage:function(a){this._huePercentage=a,this._hue=360*this._huePercentage;var b=this._background.getBoundingBox(),c=this._startPos.x+.5*b.width,d=this._startPos.y+.5*b.height,e=.5*b.width-15,f=360*this._huePercentage-180,g=cc.degreesToRadians(f),h=c+e*Math.cos(g),i=d+e*Math.sin(g);this._slider.setPosition(h,i)},setEnabled:function(a){cc.Control.prototype.setEnabled.call(this,a),this._slider&&this._slider.setOpacity(a?255:128)},getBackground:function(){return this._background},getSlider:function(){return this._slider},getStartPos:function(){return this._startPos},initWithTargetAndPos:function(a,b){return!!cc.Control.prototype.init.call(this)&&(this._background=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("huePickerBackground.png",a,b,cc.p(0,0)),this._slider=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("colourPicker.png",a,b,cc.p(.5,.5)),this._slider.setPosition(b.x,b.y+.5*this._background.getBoundingBox().height),this._startPos=b,this._hue=0,this._huePercentage=0,!0)},_updateSliderPosition:function(a){var b=this._background.getBoundingBox(),c=this._startPos.x+.5*b.width,d=this._startPos.y+.5*b.height,e=a.x-c,f=a.y-d,g=Math.atan2(f,e),h=cc.radiansToDegrees(g)+180;this.setHue(h),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},_checkSliderPosition:function(a){var b=Math.sqrt(Math.pow(a.x+10,2)+Math.pow(a.y,2));return 80>b&&b>59&&(this._updateSliderPosition(a),!0)},onTouchBegan:function(a,b){if(!this.isEnabled()||!this.isVisible())return!1;var c=this.getTouchLocation(a);return this._checkSliderPosition(c)},onTouchMoved:function(a,b){var c=this.getTouchLocation(a);this._checkSliderPosition(c)}});var _p=cc.ControlHuePicker.prototype;_p.hue,cc.defineGetterSetter(_p,"hue",_p.getHue,_p.setHue),_p.huePercent,cc.defineGetterSetter(_p,"huePercent",_p.getHuePercentage,_p.setHuePercentage),_p.background,cc.defineGetterSetter(_p,"background",_p.getBackground),_p.slider,cc.defineGetterSetter(_p,"slider",_p.getSlider),_p.startPos,cc.defineGetterSetter(_p,"startPos",_p.getStartPos),_p=null,cc.ControlHuePicker.create=function(a,b){return new cc.ControlHuePicker(a,b)},cc.ControlColourPicker=cc.Control.extend({_hsv:null,_colourPicker:null,_huePicker:null,_background:null,_className:"ControlColourPicker",ctor:function(){cc.Control.prototype.ctor.call(this),this.init()},hueSliderValueChanged:function(a,b){this._hsv.h=a.getHue();var c=cc.ControlUtils.RGBfromHSV(this._hsv);cc.Control.prototype.setColor.call(this,cc.color(0|255*c.r,0|255*c.g,0|255*c.b)),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED),this._updateControlPicker()},colourSliderValueChanged:function(a,b){this._hsv.s=a.getSaturation(),this._hsv.v=a.getBrightness();var c=cc.ControlUtils.RGBfromHSV(this._hsv);cc.Control.prototype.setColor.call(this,cc.color(0|255*c.r,0|255*c.g,0|255*c.b)),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},setColor:function(a){cc.Control.prototype.setColor.call(this,a);var b=new cc.RGBA;b.r=a.r/255,b.g=a.g/255,b.b=a.b/255,b.a=1,this._hsv=cc.ControlUtils.HSVfromRGB(b),this._updateHueAndControlPicker()},getBackground:function(){return this._background},init:function(){if(cc.Control.prototype.init.call(this)){cc.spriteFrameCache.addSpriteFrames(res.CCControlColourPickerSpriteSheet_plist);var a=new cc.SpriteBatchNode(res.CCControlColourPickerSpriteSheet_png);this.addChild(a),this._hsv=new cc.HSV(0,0,0),this._background=cc.ControlUtils.addSpriteToTargetWithPosAndAnchor("menuColourPanelBackground.png",a,cc.p(0,0),cc.p(.5,.5));var b=cc.pSub(this._background.getPosition(),cc.p(this._background.getContentSize().width/2,this._background.getContentSize().height/2)),c=8,d=28;return this._huePicker=new cc.ControlHuePicker(a,cc.p(b.x+c,b.y+c)),this._colourPicker=new cc.ControlSaturationBrightnessPicker(a,cc.p(b.x+d,b.y+d)),this._huePicker.addTargetWithActionForControlEvents(this,this.hueSliderValueChanged,cc.CONTROL_EVENT_VALUECHANGED),this._colourPicker.addTargetWithActionForControlEvents(this,this.colourSliderValueChanged,cc.CONTROL_EVENT_VALUECHANGED),this._updateHueAndControlPicker(),this.addChild(this._huePicker),this.addChild(this._colourPicker),this.setContentSize(this._background.getContentSize()),!0}return!1},_updateControlPicker:function(){this._huePicker.setHue(this._hsv.h),this._colourPicker.updateWithHSV(this._hsv)},_updateHueAndControlPicker:function(){this._huePicker.setHue(this._hsv.h),this._colourPicker.updateWithHSV(this._hsv),this._colourPicker.updateDraggerWithHSV(this._hsv)},setEnabled:function(a){cc.Control.prototype.setEnabled.call(this,a),null!==this._huePicker&&this._huePicker.setEnabled(a),this._colourPicker&&this._colourPicker.setEnabled(a)},onTouchBegan:function(){return!1}});var _p=cc.ControlColourPicker.prototype;_p.background,cc.defineGetterSetter(_p,"background",_p.getBackground),_p=null,cc.ControlColourPicker.create=function(){return new cc.ControlColourPicker};var res=res||{};res.CCControlColourPickerSpriteSheet_plist=res.CCControlColourPickerSpriteSheet_plist||"res/extensions/CCControlColourPickerSpriteSheet.plist",res.CCControlColourPickerSpriteSheet_png=res.CCControlColourPickerSpriteSheet_png||"res/extensions/CCControlColourPickerSpriteSheet.png",cc.SLIDER_MARGIN_H=24,cc.SLIDER_MARGIN_V=8,cc.ControlSlider=cc.Control.extend({_value:0,_minimumValue:0,_maximumValue:0,_minimumAllowedValue:0,_maximumAllowedValue:0,_thumbSprite:null,_progressSprite:null,_backgroundSprite:null,_className:"ControlSlider",ctor:function(a,b,c){if(cc.Control.prototype.ctor.call(this),void 0!=c){var d=new cc.Sprite(a),e=new cc.Sprite(b),f=new cc.Sprite(c);this.initWithSprites(d,e,f)}},getValue:function(){return this._value},setValue:function(a){a=Math.max(a,this._minimumValue),a=Math.min(a,this._maximumValue),this._value=a,this.needsLayout(),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},getMinimumValue:function(){return this._minimumValue},setMinimumValue:function(a){this._minimumValue=a,this._minimumAllowedValue=a,this._minimumValue>=this._maximumValue&&(this._maximumValue=this._minimumValue+1),this.setValue(this._value)},getMaximumValue:function(){return this._maximumValue},setMaximumValue:function(a){this._maximumValue=a,this._maximumAllowedValue=a,this._maximumValue<=this._minimumValue&&(this._minimumValue=this._maximumValue-1),this.setValue(this._value)},isTouchInside:function(a){var b=a.getLocation();b=this.getParent().convertToNodeSpace(b);var c=this.getBoundingBox();return c.width+=this._thumbSprite.getContentSize().width,c.x-=this._thumbSprite.getContentSize().width/2,cc.rectContainsPoint(c,b)},locationFromTouch:function(a){var b=a.getLocation();return b=this.convertToNodeSpace(b),b.x<0?b.x=0:b.x>this._backgroundSprite.getContentSize().width&&(b.x=this._backgroundSprite.getContentSize().width),b},getMinimumAllowedValue:function(){return this._minimumAllowedValue},setMinimumAllowedValue:function(a){this._minimumAllowedValue=a},getMaximumAllowedValue:function(){return this._maximumAllowedValue},setMaximumAllowedValue:function(a){this._maximumAllowedValue=a},getThumbSprite:function(){return this._thumbSprite},getProgressSprite:function(){return this._progressSprite},getBackgroundSprite:function(){return this._backgroundSprite},initWithSprites:function(a,b,c){if(cc.Control.prototype.init.call(this)){this.ignoreAnchorPointForPosition(!1),this._backgroundSprite=a,this._progressSprite=b,this._thumbSprite=c;var d=cc.ControlUtils.CCRectUnion(a.getBoundingBox(),c.getBoundingBox());return this.setContentSize(d.width,d.height),this._backgroundSprite.setAnchorPoint(.5,.5),this._backgroundSprite.setPosition(d.width/2,d.height/2),this.addChild(this._backgroundSprite),this._progressSprite.setAnchorPoint(0,.5),this._progressSprite.setPosition(0,d.height/2),
this.addChild(this._progressSprite),this._thumbSprite.setPosition(0,d.height/2),this.addChild(this._thumbSprite),this._minimumValue=0,this._maximumValue=1,this.setValue(this._minimumValue),!0}return!1},setEnabled:function(a){cc.Control.prototype.setEnabled.call(this,a),this._thumbSprite&&this._thumbSprite.setOpacity(a?255:128)},sliderBegan:function(a){this.setSelected(!0),this._thumbSprite.setColor(cc.color.GRAY),this.setValue(this.valueForLocation(a))},sliderMoved:function(a){this.setValue(this.valueForLocation(a))},sliderEnded:function(a){this.isSelected()&&this.setValue(this.valueForLocation(this._thumbSprite.getPosition())),this._thumbSprite.setColor(cc.color.WHITE),this.setSelected(!1)},getTouchLocationInControl:function(a){var b=a.getLocation();return b=this.convertToNodeSpace(b),b.x<0?b.x=0:b.x>this._backgroundSprite.getContentSize().width+cc.SLIDER_MARGIN_H&&(b.x=this._backgroundSprite.getContentSize().width+cc.SLIDER_MARGIN_H),b},onTouchBegan:function(a,b){if(!this.isTouchInside(a)||!this.isEnabled()||!this.isVisible())return!1;var c=this.locationFromTouch(a);return this.sliderBegan(c),!0},onTouchMoved:function(a,b){var c=this.locationFromTouch(a);this.sliderMoved(c)},onTouchEnded:function(a,b){this.sliderEnded(cc.p(0,0))},needsLayout:function(){var a=(this._value-this._minimumValue)/(this._maximumValue-this._minimumValue);this._thumbSprite.setPositionX(a*this._backgroundSprite.getContentSize().width);var b=this._progressSprite.getTextureRect();b=cc.rect(b.x,b.y,this._thumbSprite.getPositionX(),b.height),this._progressSprite.setTextureRect(b,this._progressSprite.isTextureRectRotated()),this._thumbSprite._renderCmd.transform(this._renderCmd)},valueForLocation:function(a){var b=a.x/this._backgroundSprite.getContentSize().width;return Math.max(Math.min(this._minimumValue+b*(this._maximumValue-this._minimumValue),this._maximumAllowedValue),this._minimumAllowedValue)}});var _p=cc.ControlSlider.prototype;_p.value,cc.defineGetterSetter(_p,"value",_p.getValue,_p.setValue),_p.minValue,cc.defineGetterSetter(_p,"minValue",_p.getMinimumValue,_p.setMinimumValue),_p.maxValue,cc.defineGetterSetter(_p,"maxValue",_p.getMaximumValue,_p.setMaximumValue),_p.minAllowedValue,cc.defineGetterSetter(_p,"minAllowedValue",_p.getMinimumAllowedValue,_p.setMinimumAllowedValue),_p.maxAllowedValue,cc.defineGetterSetter(_p,"maxAllowedValue",_p.getMaximumAllowedValue,_p.setMaximumAllowedValue),_p.thumbSprite,cc.defineGetterSetter(_p,"thumbSprite",_p.getThumbSprite),_p.progressSprite,cc.defineGetterSetter(_p,"progressSprite",_p.getProgressSprite),_p.backgroundSprite,cc.defineGetterSetter(_p,"backgroundSprite",_p.getBackgroundSprite),_p=null,cc.ControlSlider.create=function(a,b,c){return new cc.ControlSlider(a,b,c)},cc.ControlSwitch=cc.Control.extend({_switchSprite:null,_initialTouchXPosition:0,_moved:!1,_on:!1,_className:"ControlSwitch",ctor:function(a,b,c,d,e,f){cc.Control.prototype.ctor.call(this),f&&this.initWithMaskSprite(a,b,c,d,e,f)},initWithMaskSprite:function(a,b,c,d,e,f){if(!a)throw new Error("cc.ControlSwitch.initWithMaskSprite(): maskSprite should be non-null.");if(!b)throw new Error("cc.ControlSwitch.initWithMaskSprite(): onSprite should be non-null.");if(!c)throw new Error("cc.ControlSwitch.initWithMaskSprite(): offSprite should be non-null.");if(!d)throw new Error("cc.ControlSwitch.initWithMaskSprite(): thumbSprite should be non-null.");return!!this.init()&&(this._on=!0,this._switchSprite=new cc.ControlSwitchSprite,this._switchSprite.initWithMaskSprite(a,b,c,d,e,f),this._switchSprite.setPosition(this._switchSprite.getContentSize().width/2,this._switchSprite.getContentSize().height/2),this.addChild(this._switchSprite),this.ignoreAnchorPointForPosition(!1),this.setAnchorPoint(.5,.5),this.setContentSize(this._switchSprite.getContentSize()),!0)},setOn:function(a,b){b=b||!1,this._on=a;var c=this._on?this._switchSprite.getOnPosition():this._switchSprite.getOffPosition();b?this._switchSprite.runAction(new cc.ActionTween(.2,"sliderXPosition",this._switchSprite.getSliderXPosition(),c)):this._switchSprite.setSliderXPosition(c),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},isOn:function(){return this._on},hasMoved:function(){return this._moved},setEnabled:function(a){this._enabled=a,this._switchSprite.setOpacity(a?255:128)},locationFromTouch:function(a){var b=a.getLocation();return b=this.convertToNodeSpace(b)},onTouchBegan:function(a,b){if(!this.isTouchInside(a)||!this.isEnabled()||!this.isVisible())return!1;this._moved=!1;var c=this.locationFromTouch(a);return this._initialTouchXPosition=c.x-this._switchSprite.getSliderXPosition(),this._switchSprite.getThumbSprite().setColor(cc.color.GRAY),this._switchSprite.needsLayout(),!0},onTouchMoved:function(a,b){var c=this.locationFromTouch(a);c=cc.p(c.x-this._initialTouchXPosition,0),this._moved=!0,this._switchSprite.setSliderXPosition(c.x)},onTouchEnded:function(a,b){var c=this.locationFromTouch(a);this._switchSprite.getThumbSprite().setColor(cc.color.WHITE),this.hasMoved()?this.setOn(!(c.x<this._switchSprite.getContentSize().width/2),!0):this.setOn(!this._on,!0)},onTouchCancelled:function(a,b){var c=this.locationFromTouch(a);this._switchSprite.getThumbSprite().setColor(cc.color.WHITE),this.hasMoved()?this.setOn(!(c.x<this._switchSprite.getContentSize().width/2),!0):this.setOn(!this._on,!0)}}),cc.ControlSwitch.create=function(a,b,c,d,e,f){return new cc.ControlSwitch(a,b,c,d,e,f)},cc.ControlSwitchSprite=cc.Sprite.extend({_sliderXPosition:0,_onPosition:0,_offPosition:0,_textureLocation:0,_maskLocation:0,_maskSize:null,_onSprite:null,_offSprite:null,_thumbSprite:null,_onLabel:null,_offLabel:null,_clipper:null,_stencil:null,_backRT:null,ctor:function(){cc.Sprite.prototype.ctor.call(this),this._sliderXPosition=0,this._onPosition=0,this._offPosition=0,this._maskLocation=0,this._maskSize=cc.size(0,0),this._onSprite=null,this._offSprite=null,this._thumbSprite=null,this._onLabel=null,this._offLabel=null},initWithMaskSprite:function(a,b,c,d,e,f){if(cc.Sprite.prototype.init.call(this)){this.setSpriteFrame(a.displayFrame()),this._onPosition=0,this._offPosition=-b.getContentSize().width+d.getContentSize().width/2,this._sliderXPosition=this._onPosition,this.setOnSprite(b),this.setOffSprite(c),this.setThumbSprite(d),this.setOnLabel(e),this.setOffLabel(f),this._stencil=a;var g=this._maskSize=this._stencil.getContentSize();return this._stencil.setPosition(0,0),this._clipper=new cc.ClippingNode,this._clipper.setAnchorPoint(.5,.5),this._clipper.setPosition(g.width/2,g.height/2),this._clipper.setStencil(this._stencil),this.addChild(this._clipper),this._clipper.addChild(b),this._clipper.addChild(c),this._clipper.addChild(e),this._clipper.addChild(f),this.addChild(this._thumbSprite),this.needsLayout(),!0}return!1},needsLayout:function(){var a=this._maskSize;this._onSprite.setPosition(this._onSprite.getContentSize().width/2+this._sliderXPosition-a.width/2,this._onSprite.getContentSize().height/2-a.height/2),this._offSprite.setPosition(this._onSprite.getContentSize().width+this._offSprite.getContentSize().width/2+this._sliderXPosition-a.width/2,this._offSprite.getContentSize().height/2-a.height/2),this._onLabel&&this._onLabel.setPosition(this._onSprite.getPositionX()-this._thumbSprite.getContentSize().width/6,this._onSprite.getContentSize().height/2-a.height/2),this._offLabel&&this._offLabel.setPosition(this._offSprite.getPositionX()+this._thumbSprite.getContentSize().width/6,this._offSprite.getContentSize().height/2-a.height/2),this._thumbSprite.setPosition(this._onSprite.getContentSize().width+this._sliderXPosition,this._maskSize.height/2)},setSliderXPosition:function(a){a<=this._offPosition?a=this._offPosition:a>=this._onPosition&&(a=this._onPosition),this._sliderXPosition=a,this.needsLayout()},getSliderXPosition:function(){return this._sliderXPosition},_getOnSideWidth:function(){return this._onSprite.getContentSize().width},_getOffSideWidth:function(){return this._offSprite.getContentSize().height},updateTweenAction:function(a,b){"sliderXPosition"===b&&this.setSliderXPosition(a)},setOnPosition:function(a){this._onPosition=a},getOnPosition:function(){return this._onPosition},setOffPosition:function(a){this._offPosition=a},getOffPosition:function(){return this._offPosition},setMaskTexture:function(a){this._stencil.setTexture(a)},getMaskTexture:function(){return this._stencil.getTexture()},setTextureLocation:function(a){this._textureLocation=a},getTextureLocation:function(){return this._textureLocation},setMaskLocation:function(a){this._maskLocation=a},getMaskLocation:function(){return this._maskLocation},setOnSprite:function(a){this._onSprite=a},getOnSprite:function(){return this._onSprite},setOffSprite:function(a){this._offSprite=a},getOffSprite:function(){return this._offSprite},setThumbSprite:function(a){this._thumbSprite=a},getThumbSprite:function(){return this._thumbSprite},setOnLabel:function(a){this._onLabel=a},getOnLabel:function(){return this._onLabel},setOffLabel:function(a){this._offLabel=a},getOffLabel:function(){return this._offLabel}});var _p=cc.ControlSwitchSprite.prototype;_p.sliderX,cc.defineGetterSetter(_p,"sliderX",_p.getSliderXPosition,_p.setSliderXPosition),_p.onPos,cc.defineGetterSetter(_p,"onPos",_p.getOnPosition,_p.setOnPosition),_p.offPos,cc.defineGetterSetter(_p,"offPos",_p.getOffPosition,_p.setOffPosition),_p.maskTexture,cc.defineGetterSetter(_p,"maskTexture",_p.getMaskTexture,_p.setMaskTexture),_p.maskPos,cc.defineGetterSetter(_p,"maskPos",_p.getMaskLocation,_p.setMaskLocation),_p.onSprite,cc.defineGetterSetter(_p,"onSprite",_p.getOnSprite,_p.setOnSprite),_p.offSprite,cc.defineGetterSetter(_p,"offSprite",_p.getOffSprite,_p.setOffSprite),_p.thumbSprite,cc.defineGetterSetter(_p,"thumbSprite",_p.getThumbSprite,_p.setThumbSprite),_p.onLabel,cc.defineGetterSetter(_p,"onLabel",_p.getOnLabel,_p.setOnLabel),_p.offLabel,cc.defineGetterSetter(_p,"offLabel",_p.getOffLabel,_p.setOffLabel),_p.onSideWidth,cc.defineGetterSetter(_p,"onSideWidth",_p._getOnSideWidth),_p.offSideWidth,cc.defineGetterSetter(_p,"offSideWidth",_p._getOffSideWidth),_p=null,cc.CONTROL_STEPPER_PARTMINUS=0,cc.CONTROL_STEPPER_PARTPLUS=1,cc.CONTROL_STEPPER_PARTNONE=2,cc.CONTROL_STEPPER_LABELCOLOR_ENABLED=cc.color(55,55,55),cc.CONTROL_STEPPER_LABELCOLOR_DISABLED=cc.color(147,147,147),cc.CONTROL_STEPPER_LABELFONT="CourierNewPSMT",cc.AUTOREPEAT_DELTATIME=.15,cc.AUTOREPEAT_INCREASETIME_INCREMENT=12,cc.ControlStepper=cc.Control.extend({_minusSprite:null,_plusSprite:null,_minusLabel:null,_plusLabel:null,_value:0,_continuous:!1,_autorepeat:!1,_wraps:!1,_minimumValue:0,_maximumValue:0,_stepValue:0,_touchInsideFlag:!1,_touchedPart:cc.CONTROL_STEPPER_PARTNONE,_autorepeatCount:0,_className:"ControlStepper",ctor:function(a,b){cc.Control.prototype.ctor.call(this),this._minusSprite=null,this._plusSprite=null,this._minusLabel=null,this._plusLabel=null,this._value=0,this._continuous=!1,this._autorepeat=!1,this._wraps=!1,this._minimumValue=0,this._maximumValue=0,this._stepValue=0,this._touchInsideFlag=!1,this._touchedPart=cc.CONTROL_STEPPER_PARTNONE,this._autorepeatCount=0,b&&this.initWithMinusSpriteAndPlusSprite(a,b)},initWithMinusSpriteAndPlusSprite:function(a,b){if(!a)throw new Error("cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Minus sprite should be non-null.");if(!b)throw new Error("cc.ControlStepper.initWithMinusSpriteAndPlusSprite(): Plus sprite should be non-null.");if(this.init()){this._autorepeat=!0,this._continuous=!0,this._minimumValue=0,this._maximumValue=100,this._value=0,this._stepValue=1,this._wraps=!1,this.ignoreAnchorPointForPosition(!1),this.setMinusSprite(a),this._minusSprite.setPosition(a.getContentSize().width/2,a.getContentSize().height/2),this.addChild(this._minusSprite),this.setMinusLabel(new cc.LabelTTF("-",cc.CONTROL_STEPPER_LABELFONT,40,cc.size(40,40),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_CENTER)),this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_DISABLED),this._minusLabel.setPosition(this._minusSprite.getContentSize().width/2,this._minusSprite.getContentSize().height/2),this._minusSprite.addChild(this._minusLabel),this.setPlusSprite(b),this._plusSprite.setPosition(a.getContentSize().width+b.getContentSize().width/2,a.getContentSize().height/2),this.addChild(this._plusSprite),this.setPlusLabel(new cc.LabelTTF("+",cc.CONTROL_STEPPER_LABELFONT,40,cc.size(40,40),cc.TEXT_ALIGNMENT_CENTER,cc.VERTICAL_TEXT_ALIGNMENT_CENTER)),this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),this._plusLabel.setPosition(this._plusSprite.getContentSize().width/2,this._plusSprite.getContentSize().height/2),this._plusSprite.addChild(this._plusLabel);var c=cc.ControlUtils.CCRectUnion(this._minusSprite.getBoundingBox(),this._plusSprite.getBoundingBox());return this.setContentSize(this._minusSprite.getContentSize().width+this._plusSprite.getContentSize().height,c.height),!0}return!1},setWraps:function(a){this._wraps=a,this._wraps&&(this._minusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),this._plusLabel.setColor(cc.CONTROL_STEPPER_LABELCOLOR_ENABLED)),this.setValue(this._value)},getWraps:function(){return this._wraps},setMinimumValue:function(a){if(a>=this._maximumValue)throw new Error("cc.ControlStepper.setMinimumValue(): minimumValue should be numerically less than maximumValue.");this._minimumValue=a,this.setValue(this._value)},getMinimumValue:function(){return this._minimumValue},setMaximumValue:function(a){if(a<=this._minimumValue)throw new Error("cc.ControlStepper.setMaximumValue(): maximumValue should be numerically less than maximumValue.");this._maximumValue=a,this.setValue(this._value)},getMaximumValue:function(){return this._maximumValue},setValue:function(a){this.setValueWithSendingEvent(a,!0)},getValue:function(){return this._value},setStepValue:function(a){if(a<=0)throw new Error("cc.ControlStepper.setMaximumValue(): stepValue should be numerically greater than 0.");this._stepValue=a},getStepValue:function(){return this._stepValue},isContinuous:function(){return this._continuous},setValueWithSendingEvent:function(a,b){a<this._minimumValue?a=this._wraps?this._maximumValue:this._minimumValue:a>this._maximumValue&&(a=this._wraps?this._minimumValue:this._maximumValue),this._value=a,this._wraps||(this._minusLabel.setColor(a===this._minimumValue?cc.CONTROL_STEPPER_LABELCOLOR_DISABLED:cc.CONTROL_STEPPER_LABELCOLOR_ENABLED),this._plusLabel.setColor(a===this._maximumValue?cc.CONTROL_STEPPER_LABELCOLOR_DISABLED:cc.CONTROL_STEPPER_LABELCOLOR_ENABLED)),b&&this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},startAutorepeat:function(){this._autorepeatCount=-1,this.schedule(this.update,cc.AUTOREPEAT_DELTATIME,cc.REPEAT_FOREVER,3*cc.AUTOREPEAT_DELTATIME)},stopAutorepeat:function(){this.unschedule(this.update)},update:function(a){this._autorepeatCount++,this._autorepeatCount<cc.AUTOREPEAT_INCREASETIME_INCREMENT&&this._autorepeatCount%3!==0||(this._touchedPart===cc.CONTROL_STEPPER_PARTMINUS?this.setValueWithSendingEvent(this._value-this._stepValue,this._continuous):this._touchedPart===cc.CONTROL_STEPPER_PARTPLUS&&this.setValueWithSendingEvent(this._value+this._stepValue,this._continuous))},updateLayoutUsingTouchLocation:function(a){a.x<this._minusSprite.getContentSize().width&&this._value>this._minimumValue?(this._touchedPart=cc.CONTROL_STEPPER_PARTMINUS,this._minusSprite.setColor(cc.color.GRAY),this._plusSprite.setColor(cc.color.WHITE)):a.x>=this._minusSprite.getContentSize().width&&this._value<this._maximumValue?(this._touchedPart=cc.CONTROL_STEPPER_PARTPLUS,this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.GRAY)):(this._touchedPart=cc.CONTROL_STEPPER_PARTNONE,this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.WHITE))},onTouchBegan:function(a,b){if(!this.isTouchInside(a)||!this.isEnabled()||!this.isVisible())return!1;var c=this.getTouchLocation(a);return this.updateLayoutUsingTouchLocation(c),this._touchInsideFlag=!0,this._autorepeat&&this.startAutorepeat(),!0},onTouchMoved:function(a,b){if(this.isTouchInside(a)){var c=this.getTouchLocation(a);this.updateLayoutUsingTouchLocation(c),this._touchInsideFlag||(this._touchInsideFlag=!0,this._autorepeat&&this.startAutorepeat())}else this._touchInsideFlag=!1,this._touchedPart=cc.CONTROL_STEPPER_PARTNONE,this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.WHITE),this._autorepeat&&this.stopAutorepeat()},onTouchEnded:function(a,b){if(this._minusSprite.setColor(cc.color.WHITE),this._plusSprite.setColor(cc.color.WHITE),this._autorepeat&&this.stopAutorepeat(),this.isTouchInside(a)){var c=this.getTouchLocation(a);this.setValue(this._value+(c.x<this._minusSprite.getContentSize().width?0-this._stepValue:this._stepValue))}},setMinusSprite:function(a){this._minusSprite=a},getMinusSprite:function(){return this._minusSprite},setPlusSprite:function(a){this._plusSprite=a},getPlusSprite:function(){return this._plusSprite},setMinusLabel:function(a){this._minusLabel=a},getMinusLabel:function(){return this._minusLabel},setPlusLabel:function(a){this._plusLabel=a},getPlusLabel:function(){return this._plusLabel}});var _p=cc.ControlStepper.prototype;_p.wraps,cc.defineGetterSetter(_p,"wraps",_p.getWraps,_p.setWraps),_p.value,cc.defineGetterSetter(_p,"value",_p.getValue,_p.setValue),_p.minValue,cc.defineGetterSetter(_p,"minValue",_p.getMinimumValue,_p.setMinimumValue),_p.maxValue,cc.defineGetterSetter(_p,"maxValue",_p.getMaximumValue,_p.setMaximumValue),_p.stepValue,cc.defineGetterSetter(_p,"stepValue",_p.getStepValue,_p.setStepValue),_p.continuous,cc.defineGetterSetter(_p,"continuous",_p.isContinuous),_p.minusSprite,cc.defineGetterSetter(_p,"minusSprite",_p.getMinusSprite,_p.setMinusSprite),_p.plusSprite,cc.defineGetterSetter(_p,"plusSprite",_p.getPlusSprite,_p.setPlusSprite),_p.minusLabel,cc.defineGetterSetter(_p,"minusLabel",_p.getMinusLabel,_p.setMinusLabel),_p.plusLabel,cc.defineGetterSetter(_p,"plusLabel",_p.getPlusLabel,_p.setPlusLabel),_p=null,cc.ControlStepper.create=function(a,b){return new cc.ControlStepper(a,b)},cc.ControlPotentiometer=cc.Control.extend({_thumbSprite:null,_progressTimer:null,_previousLocation:null,_value:0,_minimumValue:0,_maximumValue:1,_className:"ControlPotentiometer",ctor:function(a,b,c){if(cc.Control.prototype.ctor.call(this),void 0!=c){var d=new cc.Sprite(a),e=new cc.Sprite(c),f=new cc.ProgressTimer(new cc.Sprite(b));this.initWithTrackSprite_ProgressTimer_ThumbSprite(d,f,e)}},initWithTrackSprite_ProgressTimer_ThumbSprite:function(a,b,c){return!!this.init()&&(this.setProgressTimer(b),this.setThumbSprite(c),this._thumbSprite.setPosition(b.getPosition()),this.addChild(c,2),this.addChild(b,1),this.addChild(a),this.setContentSize(a.getContentSize()),this._minimumValue=0,this._maximumValue=1,this.setValue(this._minimumValue),!0)},setEnabled:function(a){this.setEnabled(a),null!==this._thumbSprite&&this._thumbSprite.setOpacity(a?255:128)},setValue:function(a){a<this._minimumValue&&(a=this._minimumValue),a>this._maximumValue&&(a=this._maximumValue),this._value=a;var b=(a-this._minimumValue)/(this._maximumValue-this._minimumValue);this._progressTimer.setPercentage(100*b),this._thumbSprite.setRotation(360*b),this.sendActionsForControlEvents(cc.CONTROL_EVENT_VALUECHANGED)},getValue:function(){return this._value},setMinimumValue:function(a){this._minimumValue=a,this._minimumValue>=this._maximumValue&&(this._maximumValue=this._minimumValue+1),this.setValue(this._maximumValue)},getMinimumValue:function(){return this._minimumValue},setMaximumValue:function(a){this._maximumValue=a,this._maximumValue<=this._minimumValue&&(this._minimumValue=this._maximumValue-1),this.setValue(this._minimumValue)},getMaximumValue:function(){return this._maximumValue},isTouchInside:function(a){var b=this.getTouchLocation(a),c=this.distanceBetweenPointAndPoint(this._progressTimer.getPosition(),b);return c<Math.min(this.getContentSize().width/2,this.getContentSize().height/2)},onTouchBegan:function(a,b){return!!(this.isTouchInside(a)&&this.isEnabled()&&this.isVisible())&&(this._previousLocation=this.getTouchLocation(a),this.potentiometerBegan(this._previousLocation),!0)},onTouchMoved:function(a,b){var c=this.getTouchLocation(a);this.potentiometerMoved(c)},onTouchEnded:function(a,b){this.potentiometerEnded(cc.p(0,0))},distanceBetweenPointAndPoint:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)},angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint:function(a,b,c,d){var e=b.x-a.x,f=b.y-a.y,g=d.x-c.x,h=d.y-c.y,i=Math.atan2(e,f),j=Math.atan2(g,h);return 180*(i-j)/Math.PI},potentiometerBegan:function(a){this.setSelected(!0),this.getThumbSprite().setColor(cc.color.GRAY)},potentiometerMoved:function(a){var b=this.angleInDegreesBetweenLineFromPoint_toPoint_toLineFromPoint_toPoint(this._progressTimer.getPosition(),a,this._progressTimer.getPosition(),this._previousLocation);b>180?b-=360:b<-180&&(b+=360),this.setValue(this._value+b/360*(this._maximumValue-this._minimumValue)),this._previousLocation=a},potentiometerEnded:function(a){this.getThumbSprite().setColor(cc.color.WHITE),this.setSelected(!1)},setThumbSprite:function(a){this._thumbSprite=a},getThumbSprite:function(){return this._thumbSprite},setProgressTimer:function(a){this._progressTimer=a},getProgressTimer:function(){return this._progressTimer},setPreviousLocation:function(a){this._previousLocation=a},getPreviousLocation:function(){return this._previousLocation}});var _p=cc.ControlPotentiometer.prototype;_p.value,cc.defineGetterSetter(_p,"value",_p.getValue,_p.setValue),_p.minValue,cc.defineGetterSetter(_p,"minValue",_p.getMinimumValue,_p.setMinimumValue),_p.maxValue,cc.defineGetterSetter(_p,"maxValue",_p.getMaximumValue,_p.setMaximumValue),_p.progressTimer,cc.defineGetterSetter(_p,"progressTimer",_p.getProgressTimer,_p.setProgressTimer),_p.thumbSprite,cc.defineGetterSetter(_p,"thumbSprite",_p.getThumbSprite,_p.setThumbSprite),_p.prevLocation,cc.defineGetterSetter(_p,"prevLocation",_p.getPreviousLocation,_p.setPreviousLocation),_p=null,cc.ControlPotentiometer.create=function(a,b,c){return new cc.ControlPotentiometer(a,b,c)},cc.SCROLLVIEW_DIRECTION_NONE=-1,cc.SCROLLVIEW_DIRECTION_HORIZONTAL=0,cc.SCROLLVIEW_DIRECTION_VERTICAL=1,cc.SCROLLVIEW_DIRECTION_BOTH=2;var SCROLL_DEACCEL_RATE=.95,SCROLL_DEACCEL_DIST=1,BOUNCE_DURATION=.15,INSET_RATIO=.2,MOVE_INCH=7/160,BOUNCE_BACK_FACTOR=.35;cc.convertDistanceFromPointToInch=function(a){var b=cc.view,c=(b.getScaleX()+b.getScaleY())/2;return a*c/160},cc.ScrollViewDelegate=cc.Class.extend({scrollViewDidScroll:function(a){},scrollViewDidZoom:function(a){}}),cc.ScrollView=cc.Layer.extend({_zoomScale:0,_minZoomScale:0,_maxZoomScale:0,_delegate:null,_direction:cc.SCROLLVIEW_DIRECTION_BOTH,_dragging:!1,_contentOffset:null,_container:null,_touchMoved:!1,_maxInset:null,_minInset:null,_bounceable:!1,_clippingToBounds:!1,_scrollDistance:null,_touchPoint:null,_touchLength:0,_touches:null,_viewSize:null,_minScale:0,_maxScale:0,_parentScissorRect:null,_scissorRestored:!1,_tmpViewRect:null,_touchListener:null,_className:"ScrollView",ctor:function(a,b){cc.Layer.prototype.ctor.call(this),this._contentOffset=cc.p(0,0),this._maxInset=cc.p(0,0),this._minInset=cc.p(0,0),this._scrollDistance=cc.p(0,0),this._touchPoint=cc.p(0,0),this._touches=[],this._viewSize=cc.size(0,0),this._parentScissorRect=new cc.Rect(0,0,0,0),this._tmpViewRect=new cc.Rect(0,0,0,0),void 0!=b?this.initWithViewSize(a,b):this.initWithViewSize(cc.size(200,200),null)},init:function(){return this.initWithViewSize(cc.size(200,200),null)},initWithViewSize:function(a,b){var c=cc.p(0,0);return!!cc.Layer.prototype.init.call(this)&&(b||this._container||(b=new cc.Layer),b&&this.setContainer(b),this.setViewSize(a),this.setTouchEnabled(!0),this._touches.length=0,this._delegate=null,this._bounceable=!0,this._clippingToBounds=!0,this._direction=cc.SCROLLVIEW_DIRECTION_BOTH,this._container.setPosition(c),this._touchLength=0,this._minScale=this._maxScale=1,!0)},setContentOffset:function(a,b){if(b)return void this.setContentOffsetInDuration(a,BOUNCE_DURATION);if(!this._bounceable){var c=this.minContainerOffset(),d=this.maxContainerOffset();a.x=Math.max(c.x,Math.min(d.x,a.x)),a.y=Math.max(c.y,Math.min(d.y,a.y))}this._container.setPosition(a);var e=this._delegate;null!=e&&e.scrollViewDidScroll&&e.scrollViewDidScroll(this)},getContentOffset:function(){var a=this._container.getPosition();return cc.p(a.x,a.y)},setContentOffsetInDuration:function(a,b){var c=cc.moveTo(b,a),d=cc.callFunc(this._stoppedAnimatedScroll,this);this._container.runAction(cc.sequence(c,d)),this.schedule(this._performedAnimatedScroll)},setZoomScale:function(a,b){if(b)return void this.setZoomScaleInDuration(a,BOUNCE_DURATION);var c=this._container;if(c.getScale()!==a){var d,e,f;if(0===this._touchLength){var g=this._viewSize;f=cc.p(.5*g.width,.5*g.height),f=this.convertToWorldSpace(f)}else f=this._touchPoint;d=c.convertToNodeSpace(f),c.setScale(Math.max(this._minScale,Math.min(this._maxScale,a))),e=c.convertToWorldSpace(d);var h=cc.pSub(f,e);this._delegate&&this._delegate.scrollViewDidZoom&&this._delegate.scrollViewDidZoom(this),this.setContentOffset(cc.pAdd(c.getPosition(),h))}},getZoomScale:function(){return this._container.getScale()},setZoomScaleInDuration:function(a,b){if(b>0){var c=this._container.getScale();if(c!==a){var d=cc.actionTween(b,"zoomScale",c,a);this.runAction(d)}}else this.setZoomScale(a)},minContainerOffset:function(){var a=this._container,b=a.getContentSize(),c=this._viewSize;return cc.p(c.width-b.width*a.getScaleX(),c.height-b.height*a.getScaleY())},maxContainerOffset:function(){return cc.p(0,0)},isNodeVisible:function(a){var b=this.getContentOffset(),c=this.getViewSize(),d=this.getZoomScale(),e=cc.rect(-b.x/d,-b.y/d,c.width/d,c.height/d);return cc.rectIntersectsRect(e,a.getBoundingBox())},pause:function(a){this._container.pause();for(var b=this._container.getChildren(),c=0;c<b.length;c++)b[c].pause();this._super()},resume:function(a){for(var b=this._container.getChildren(),c=0,d=b.length;c<d;c++)b[c].resume();this._container.resume(),this._super()},isDragging:function(){return this._dragging},isTouchMoved:function(){return this._touchMoved},isBounceable:function(){return this._bounceable},setBounceable:function(a){this._bounceable=a},getViewSize:function(){return this._viewSize},setViewSize:function(a){this._viewSize=a,cc.Node.prototype.setContentSize.call(this,a)},getContainer:function(){return this._container},setContainer:function(a){a&&(this.removeAllChildren(!0),this._container=a,a.ignoreAnchorPointForPosition(!1),a.setAnchorPoint(0,0),this.addChild(a),this.setViewSize(this._viewSize))},getDirection:function(){return this._direction},setDirection:function(a){this._direction=a},getDelegate:function(){return this._delegate},setDelegate:function(a){this._delegate=a},onTouchBegan:function(a,b){for(var c=this;null!=c;c=c.parent)if(!c.isVisible())return!1;var d=this._getViewRect(),e=this._container,f=e.convertToWorldSpace(e.convertTouchToNodeSpace(a)),g=this._touches;return!(g.length>2||this._touchMoved||!cc.rectContainsPoint(d,f))&&(g.push(a),1===g.length?(this._touchPoint=this.convertTouchToNodeSpace(a),this._touchMoved=!1,this._dragging=!0,this._scrollDistance.x=0,this._scrollDistance.y=0,this._touchLength=0):2===g.length&&(this._touchPoint=cc.pMidpoint(this.convertTouchToNodeSpace(g[0]),this.convertTouchToNodeSpace(g[1])),this._touchLength=cc.pDistance(e.convertTouchToNodeSpace(g[0]),e.convertTouchToNodeSpace(g[1])),this._dragging=!1),!0)},onTouchMoved:function(a,b){if(this.isVisible())if(this.setNodeDirty(),1===this._touches.length&&this._dragging){this._touchMoved=!0;var c,d=(this._getViewRect(),this.convertTouchToNodeSpace(a)),e=cc.pSub(d,this._touchPoint),f=0,g=this._direction;if(g===cc.SCROLLVIEW_DIRECTION_VERTICAL)f=e.y,c=this._container.getPositionY(),this.minContainerOffset().y<=c&&c<=this.maxContainerOffset().y||(e.y*=BOUNCE_BACK_FACTOR);else if(g===cc.SCROLLVIEW_DIRECTION_HORIZONTAL)f=e.x,c=this._container.getPositionX(),this.minContainerOffset().x<=c&&c<=this.maxContainerOffset().x||(e.x*=BOUNCE_BACK_FACTOR);else{f=Math.sqrt(e.x*e.x+e.y*e.y),c=this._container.getPositionY();var h=this.minContainerOffset(),i=this.maxContainerOffset();h.y<=c&&c<=i.y||(e.y*=BOUNCE_BACK_FACTOR),c=this._container.getPositionX(),h.x<=c&&c<=i.x||(e.x*=BOUNCE_BACK_FACTOR)}if(!this._touchMoved&&Math.abs(cc.convertDistanceFromPointToInch(f))<MOVE_INCH)return;if(this._touchMoved||(e.x=0,e.y=0),this._touchPoint=d,this._touchMoved=!0,this._dragging){switch(g){case cc.SCROLLVIEW_DIRECTION_VERTICAL:e.x=0;break;case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:e.y=0}var j=this._container.getPosition(),k=j.x+e.x,l=j.y+e.y;this._scrollDistance=e,this.setContentOffset(cc.p(k,l))}}else if(2===this._touches.length&&!this._dragging){var m=cc.pDistance(this._container.convertTouchToNodeSpace(this._touches[0]),this._container.convertTouchToNodeSpace(this._touches[1]));this.setZoomScale(this.getZoomScale()*m/this._touchLength)}},onTouchEnded:function(a,b){this.isVisible()&&(1===this._touches.length&&this._touchMoved&&this.schedule(this._deaccelerateScrolling),this._touches.length=0,this._dragging=!1,this._touchMoved=!1)},onTouchCancelled:function(a,b){this.isVisible()&&(this._touches.length=0,this._dragging=!1,this._touchMoved=!1)},setContentSize:function(a,b){null!==this.getContainer()&&(void 0===b?this.getContainer().setContentSize(a):this.getContainer().setContentSize(a,b),this.updateInset())},_setWidth:function(a){var b=this.getContainer();null!==b&&(b._setWidth(a),this.updateInset())},_setHeight:function(a){var b=this.getContainer();null!==b&&(b._setHeight(a),this.updateInset())},getContentSize:function(){return this._container.getContentSize()},updateInset:function(){if(null!==this.getContainer()){var a=this._viewSize,b=this.maxContainerOffset();this._maxInset.x=b.x+a.width*INSET_RATIO,this._maxInset.y=b.y+a.height*INSET_RATIO,b=this.minContainerOffset(),this._minInset.x=b.x-a.width*INSET_RATIO,this._minInset.y=b.y-a.height*INSET_RATIO}},isClippingToBounds:function(){return this._clippingToBounds},setClippingToBounds:function(a){this._clippingToBounds=a},addChild:function(a,b,c){if(!a)throw new Error("child must not nil!");b=b||a.getLocalZOrder(),c=c||a.getTag(),this._container!==a?this._container.addChild(a,b,c):cc.Layer.prototype.addChild.call(this,a,b,c)},isTouchEnabled:function(){return null!==this._touchListener},setTouchEnabled:function(a){if(this._touchListener&&cc.eventManager.removeListener(this._touchListener),this._touchListener=null,a){var b=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE});this.onTouchBegan&&(b.onTouchBegan=this.onTouchBegan.bind(this)),this.onTouchMoved&&(b.onTouchMoved=this.onTouchMoved.bind(this)),this.onTouchEnded&&(b.onTouchEnded=this.onTouchEnded.bind(this)),this.onTouchCancelled&&(b.onTouchCancelled=this.onTouchCancelled.bind(this)),this._touchListener=b,cc.eventManager.addListener(b,this)}else this._dragging=!1,this._touchMoved=!1,this._touches.length=0},_initWithViewSize:function(a){return null},_relocateContainer:function(a){var b=this.minContainerOffset(),c=this.maxContainerOffset(),d=this._direction,e=this._container.getPosition(),f=e.x,g=e.y;d!==cc.SCROLLVIEW_DIRECTION_BOTH&&d!==cc.SCROLLVIEW_DIRECTION_HORIZONTAL||(f=Math.max(f,b.x),f=Math.min(f,c.x)),d!==cc.SCROLLVIEW_DIRECTION_BOTH&&d!==cc.SCROLLVIEW_DIRECTION_VERTICAL||(g=Math.min(g,c.y),g=Math.max(g,b.y)),g===e.y&&f===e.x||this.setContentOffset(cc.p(f,g),a)},_deaccelerateScrolling:function(a){if(this._dragging)return void this.unschedule(this._deaccelerateScrolling);var b,c,d=this._container.getPosition(),e=this._scrollDistance;this._container.setPosition(d.x+e.x,d.y+e.y),this._bounceable?(b=this._maxInset,c=this._minInset):(b=this.maxContainerOffset(),c=this.minContainerOffset());var f=this._container.getPositionX(),g=this._container.getPositionY();e.x=e.x*SCROLL_DEACCEL_RATE,e.y=e.y*SCROLL_DEACCEL_RATE,this.setContentOffset(cc.p(f,g)),(Math.abs(e.x)<=SCROLL_DEACCEL_DIST&&Math.abs(e.y)<=SCROLL_DEACCEL_DIST||g>b.y||g<c.y||f>b.x||f<c.x||f===b.x||f===c.x||g===b.y||g===c.y)&&(this.unschedule(this._deaccelerateScrolling),
this._relocateContainer(!0))},_performedAnimatedScroll:function(a){return this._dragging?void this.unschedule(this._performedAnimatedScroll):void(this._delegate&&this._delegate.scrollViewDidScroll&&this._delegate.scrollViewDidScroll(this))},_stoppedAnimatedScroll:function(a){this.unschedule(this._performedAnimatedScroll),this._delegate&&this._delegate.scrollViewDidScroll&&this._delegate.scrollViewDidScroll(this)},_handleZoom:function(){},_getViewRect:function(){for(var a=this.convertToWorldSpace(cc.p(0,0)),b=this._viewSize,c=this.getScaleX(),d=this.getScaleY(),e=this._parent;null!=e;e=e.getParent())c*=e.getScaleX(),d*=e.getScaleY();c<0&&(a.x+=b.width*c,c=-c),d<0&&(a.y+=b.height*d,d=-d);var f=this._tmpViewRect;return f.x=a.x,f.y=a.y,f.width=b.width*c,f.height=b.height*d,f},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ScrollView.CanvasRenderCmd(this):new cc.ScrollView.WebGLRenderCmd(this)}});var _p=cc.ScrollView.prototype;_p.minOffset,cc.defineGetterSetter(_p,"minOffset",_p.minContainerOffset),_p.maxOffset,cc.defineGetterSetter(_p,"maxOffset",_p.maxContainerOffset),_p.bounceable,cc.defineGetterSetter(_p,"bounceable",_p.isBounceable,_p.setBounceable),_p.viewSize,cc.defineGetterSetter(_p,"viewSize",_p.getViewSize,_p.setViewSize),_p.container,cc.defineGetterSetter(_p,"container",_p.getContainer,_p.setContainer),_p.direction,cc.defineGetterSetter(_p,"direction",_p.getDirection,_p.setDirection),_p.delegate,cc.defineGetterSetter(_p,"delegate",_p.getDelegate,_p.setDelegate),_p.clippingToBounds,cc.defineGetterSetter(_p,"clippingToBounds",_p.isClippingToBounds,_p.setClippingToBounds),_p=null,cc.ScrollView.create=function(a,b){return new cc.ScrollView(a,b)},function(){cc.ScrollView.CanvasRenderCmd=function(a){cc.Layer.CanvasRenderCmd.call(this,a),this._needDraw=!1,this.startCmd=new cc.CustomRenderCmd(this,this._startCmd),this.startCmd._canUseDirtyRegion=!0,this.endCmd=new cc.CustomRenderCmd(this,this._endCmd),this.endCmd._canUseDirtyRegion=!0};var a=cc.ScrollView.CanvasRenderCmd.prototype=Object.create(cc.Layer.CanvasRenderCmd.prototype);a.constructor=cc.ScrollView.CanvasRenderCmd,a._startCmd=function(a,b,c){var d=this._node,e=a||cc._renderContext,f=e.getContext();if(e.save(),d._clippingToBounds){this._scissorRestored=!1,e.setTransform(this._worldTransform,b,c);var g=d.getScaleX(),h=d.getScaleY(),i=d._viewSize.width*g,j=d._viewSize.height*h;f.beginPath(),f.rect(0,0,i,-j),f.closePath(),f.clip()}},a._endCmd=function(a){a=a||cc._renderContext,a.restore()},a.visit=function(a){var b=this._node;if(b._visible){var c,d,e=b._children;if(this._syncStatus(a),cc.renderer.pushRenderCommand(this.startCmd),e&&e.length>0)for(d=e.length,b.sortAllChildren(),c=0;c<d;c++)e[c]._renderCmd.visit(this);cc.renderer.pushRenderCommand(this.endCmd),this._dirtyFlag=0}}}(),cc.SortableObject=cc.Class.extend({setObjectID:function(a){},getObjectID:function(){return 0}}),cc.SortedObject=cc.SortableObject.extend({_objectID:0,ctor:function(){this._objectID=0},setObjectID:function(a){this._objectID=a},getObjectID:function(){return this._objectID}});var _compareObject=function(a,b){return a.getObjectID()-b.getObjectID()};cc.ArrayForObjectSorting=cc.Class.extend({_saveObjectArr:null,ctor:function(){this._saveObjectArr=[]},insertSortedObject:function(a){if(!a)throw new Error("cc.ArrayForObjectSorting.insertSortedObject(): addObject should be non-null.");var b=this.indexOfSortedObject(a);this.insertObject(a,b)},removeSortedObject:function(a){if(0!==this.count()){var b=this.indexOfSortedObject(a);if(b<this.count()&&b!==cc.INVALID_INDEX){var c=this.objectAtIndex(b);c.getObjectID()===a.getObjectID()&&this.removeObjectAtIndex(b)}}},setObjectID_ofSortedObject:function(a,b){var c=this.indexOfSortedObject(b);if(c<this.count()&&c!==cc.INVALID_INDEX){var d=this.objectAtIndex(c);d.getObjectID()===b.getObjectID()&&(this.removeObjectAtIndex(c),d.setObjectID(a),this.insertSortedObject(d))}},objectWithObjectID:function(a){if(0===this.count())return null;var b=new cc.SortedObject;b.setObjectID(a);var c=this.indexOfSortedObject(b);return c<this.count()&&c!==cc.INVALID_INDEX&&(b=this.objectAtIndex(c),b.getObjectID()!==a&&(b=null)),b},getObjectWithObjectID:function(a){return null},indexOfSortedObject:function(a){var b=0;if(a)for(var c=0,d=a.getObjectID(),e=this._saveObjectArr,f=0;f<e.length;f++){var g=e[f],h=g.getObjectID();if(d===h||d>=c&&d<h)break;c=h,b++}else b=cc.INVALID_INDEX;return b},count:function(){return this._saveObjectArr.length},lastObject:function(){var a=this._saveObjectArr;return 0===a.length?null:a[a.length-1]},objectAtIndex:function(a){return this._saveObjectArr[a]},addObject:function(a){this._saveObjectArr.push(a),this._saveObjectArr.sort(_compareObject)},removeObjectAtIndex:function(a){this._saveObjectArr.splice(a,1),this._saveObjectArr.sort(_compareObject)},insertObject:function(a,b){this._saveObjectArr.splice(b,0,a),this._saveObjectArr.sort(_compareObject)}}),cc.TABLEVIEW_FILL_TOPDOWN=0,cc.TABLEVIEW_FILL_BOTTOMUP=1,cc.TableViewCell=cc.Node.extend({_idx:0,_className:"TableViewCell",getIdx:function(){return this._idx},setIdx:function(a){this._idx=a},reset:function(){this._idx=cc.INVALID_INDEX},setObjectID:function(a){this._idx=a},getObjectID:function(){return this._idx}});var _p=cc.TableViewCell.prototype;_p.objectId,cc.defineGetterSetter(_p,"objectId",_p.getObjectID,_p.setObjectID),_p=null,cc.TableViewDelegate=cc.ScrollViewDelegate.extend({tableCellTouched:function(a,b){},tableCellHighlight:function(a,b){},tableCellUnhighlight:function(a,b){},tableCellWillRecycle:function(a,b){}}),cc.TableViewDataSource=cc.Class.extend({tableCellSizeForIndex:function(a,b){return this.cellSizeForTable(a)},cellSizeForTable:function(a){return cc.size(0,0)},tableCellAtIndex:function(a,b){return null},numberOfCellsInTableView:function(a){return 0}}),cc.TableView=cc.ScrollView.extend({_vOrdering:null,_indices:null,_cellsFreed:null,_dataSource:null,_tableViewDelegate:null,_oldDirection:null,_cellsPositions:null,_touchedCell:null,ctor:function(a,b,c){cc.ScrollView.prototype.ctor.call(this),this._oldDirection=cc.SCROLLVIEW_DIRECTION_NONE,this._cellsPositions=[],this.initWithViewSize(b,c),this.setDataSource(a),this._updateCellPositions(),this._updateContentSize()},__indexFromOffset:function(a){var b,c=0,d=this._dataSource.numberOfCellsInTableView(this)-1;switch(this.getDirection()){case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:b=a.x;break;default:b=a.y}for(var e=this._cellsPositions;d>=c;){var f=0|c+(d-c)/2,g=e[f],h=e[f+1];if(b>=g&&b<=h)return f;b<g?d=f-1:c=f+1}return c<=0?0:-1},_indexFromOffset:function(a){var b={x:a.x,y:a.y},c=this._dataSource,d=c.numberOfCellsInTableView(this)-1;this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN&&(b.y=this.getContainer().getContentSize().height-b.y);var e=this.__indexFromOffset(b);return e!==-1&&(e=Math.max(0,e),e>d&&(e=cc.INVALID_INDEX)),e},__offsetFromIndex:function(a){var b;switch(this.getDirection()){case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:b=cc.p(this._cellsPositions[a],0);break;default:b=cc.p(0,this._cellsPositions[a])}return b},_offsetFromIndex:function(a){var b=this.__offsetFromIndex(a),c=this._dataSource.tableCellSizeForIndex(this,a);return this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN&&(b.y=this.getContainer().getContentSize().height-b.y-c.height),b},_updateCellPositions:function(){var a=this._dataSource.numberOfCellsInTableView(this),b=this._cellsPositions;if(a>0){for(var c,d=0,e=this._dataSource,f=0;f<a;f++)switch(b[f]=d,c=e.tableCellSizeForIndex(this,f),this.getDirection()){case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:d+=c.width;break;default:d+=c.height}this._cellsPositions[a]=d}},_updateContentSize:function(){var a=cc.size(0,0),b=this._dataSource.numberOfCellsInTableView(this);if(b>0){var c=this._cellsPositions[b];switch(this.getDirection()){case cc.SCROLLVIEW_DIRECTION_HORIZONTAL:a=cc.size(c,this._viewSize.height);break;default:a=cc.size(this._viewSize.width,c)}}this.setContentSize(a),this._oldDirection!==this._direction&&(this._direction===cc.SCROLLVIEW_DIRECTION_HORIZONTAL?this.setContentOffset(cc.p(0,0)):this.setContentOffset(cc.p(0,this.minContainerOffset().y)),this._oldDirection=this._direction)},_moveCellOutOfSight:function(a){this._tableViewDelegate&&this._tableViewDelegate.tableCellWillRecycle&&this._tableViewDelegate.tableCellWillRecycle(this,a),this._cellsFreed.addObject(a),this._cellsUsed.removeSortedObject(a),cc.arrayRemoveObject(this._indices,a.getIdx()),a.reset(),a.getParent()===this.getContainer()&&this.getContainer().removeChild(a,!0)},_setIndexForCell:function(a,b){b.setAnchorPoint(0,0),b.setPosition(this._offsetFromIndex(a)),b.setIdx(a)},_addCellIfNecessary:function(a){a.getParent()!==this.getContainer()&&this.getContainer().addChild(a),this._cellsUsed.insertSortedObject(a);var b=this._indices,c=a.getIdx();b.indexOf(c)===-1&&(b.push(c),b.sort(function(a,b){return a-b}))},getDataSource:function(){return this._dataSource},setDataSource:function(a){this._dataSource=a},getDelegate:function(){return this._tableViewDelegate},setDelegate:function(a){this._tableViewDelegate=a},setVerticalFillOrder:function(a){this._vOrdering!==a&&(this._vOrdering=a,this._cellsUsed.count()>0&&this.reloadData())},getVerticalFillOrder:function(){return this._vOrdering},initWithViewSize:function(a,b){return!!cc.ScrollView.prototype.initWithViewSize.call(this,a,b)&&(this._cellsUsed=new cc.ArrayForObjectSorting,this._cellsFreed=new cc.ArrayForObjectSorting,this._indices=[],this._tableViewDelegate=null,this._vOrdering=cc.TABLEVIEW_FILL_BOTTOMUP,this.setDirection(cc.SCROLLVIEW_DIRECTION_VERTICAL),cc.ScrollView.prototype.setDelegate.call(this,this),!0)},updateCellAtIndex:function(a){if(!(a===cc.INVALID_INDEX||a>this._dataSource.numberOfCellsInTableView(this)-1)){var b=this.cellAtIndex(a);b&&this._moveCellOutOfSight(b),b=this._dataSource.tableCellAtIndex(this,a),this._setIndexForCell(a,b),this._addCellIfNecessary(b)}},insertCellAtIndex:function(a){if(!(a===cc.INVALID_INDEX||a>this._dataSource.numberOfCellsInTableView(this)-1)){var b,c=this._cellsUsed,d=c.objectWithObjectID(a);if(d){b=c.indexOfSortedObject(d);for(var e=b;e<c.count();e++)d=c.objectAtIndex(e),this._setIndexForCell(d.getIdx()+1,d)}d=this._dataSource.tableCellAtIndex(this,a),this._setIndexForCell(a,d),this._addCellIfNecessary(d),this._updateCellPositions(),this._updateContentSize()}},removeCellAtIndex:function(a){if(!(a===cc.INVALID_INDEX||a>this._dataSource.numberOfCellsInTableView(this)-1)){var b=this.cellAtIndex(a);if(b){var c=this._cellsUsed,d=c.indexOfSortedObject(b);this._moveCellOutOfSight(b),cc.arrayRemoveObject(this._indices,a),this._updateCellPositions();for(var e=c.count()-1;e>d;e--)b=c.objectAtIndex(e),this._setIndexForCell(b.getIdx()-1,b)}}},reloadData:function(){this._oldDirection=cc.SCROLLVIEW_DIRECTION_NONE;for(var a=this._cellsUsed,b=this._cellsFreed,c=this.getContainer(),d=0,e=a.count();d<e;d++){var f=a.objectAtIndex(d);this._tableViewDelegate&&this._tableViewDelegate.tableCellWillRecycle&&this._tableViewDelegate.tableCellWillRecycle(this,f),b.addObject(f),f.reset(),f.getParent()===c&&c.removeChild(f,!0)}this._indices=[],this._cellsUsed=new cc.ArrayForObjectSorting,this._updateCellPositions(),this._updateContentSize(),this._dataSource.numberOfCellsInTableView(this)>0&&this.scrollViewDidScroll(this),this.setNodeDirty()},dequeueCell:function(){if(0===this._cellsFreed.count())return null;var a=this._cellsFreed.objectAtIndex(0);return this._cellsFreed.removeObjectAtIndex(0),a},cellAtIndex:function(a){var b=this._indices.indexOf(a);return b===-1?null:this._cellsUsed.objectWithObjectID(a)},scrollViewDidScroll:function(a){var b=this._dataSource,c=b.numberOfCellsInTableView(this);if(0!==c){null!==this._tableViewDelegate&&this._tableViewDelegate.scrollViewDidScroll&&this._tableViewDelegate.scrollViewDidScroll(this);var d=0,e=this._viewSize,f=this.getContainer(),g=this.getContentOffset();g.x*=-1,g.y*=-1;var h=Math.max(c-1,0);this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN&&(g.y=g.y+e.height/f.getScaleY());var i=this._indexFromOffset(g);i===cc.INVALID_INDEX&&(i=c-1),this._vOrdering===cc.TABLEVIEW_FILL_TOPDOWN?g.y-=e.height/f.getScaleY():g.y+=e.height/f.getScaleY(),g.x+=e.width/f.getScaleX();var j=this._indexFromOffset(g);j===cc.INVALID_INDEX&&(j=c-1);var k,l=this._cellsUsed;if(l.count()>0)for(k=l.objectAtIndex(0),d=k.getIdx();d<i&&(this._moveCellOutOfSight(k),l.count()>0);)k=l.objectAtIndex(0),d=k.getIdx();if(l.count()>0)for(k=l.lastObject(),d=k.getIdx();d<=h&&d>j&&(this._moveCellOutOfSight(k),l.count()>0);)k=l.lastObject(),d=k.getIdx();for(var m=this._indices,n=i;n<=j;n++)m.indexOf(n)===-1&&this.updateCellAtIndex(n)}},scrollViewDidZoom:function(a){},onTouchEnded:function(a,b){if(this.isVisible()){if(this._touchedCell){var c=this.getBoundingBox(),d=cc.p(c.x,c.y);d=this._parent.convertToWorldSpace(d),c.x=d.x,c.y=d.y;var e=this._tableViewDelegate;cc.rectContainsPoint(c,a.getLocation())&&null!==e&&(e.tableCellUnhighlight&&e.tableCellUnhighlight(this,this._touchedCell),e.tableCellTouched&&e.tableCellTouched(this,this._touchedCell)),this._touchedCell=null}cc.ScrollView.prototype.onTouchEnded.call(this,a,b)}},onTouchBegan:function(a,b){for(var c=this;null!=c;c=c.parent)if(!c.isVisible())return!1;var d=cc.ScrollView.prototype.onTouchBegan.call(this,a,b);if(1===this._touches.length){var e,f;f=this.getContainer().convertTouchToNodeSpace(a),e=this._indexFromOffset(f),e===cc.INVALID_INDEX?this._touchedCell=null:this._touchedCell=this.cellAtIndex(e),this._touchedCell&&null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellHighlight&&this._tableViewDelegate.tableCellHighlight(this,this._touchedCell)}else this._touchedCell&&(null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellUnhighlight&&this._tableViewDelegate.tableCellUnhighlight(this,this._touchedCell),this._touchedCell=null);return d},onTouchMoved:function(a,b){cc.ScrollView.prototype.onTouchMoved.call(this,a,b),this._touchedCell&&this.isTouchMoved()&&(null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellUnhighlight&&this._tableViewDelegate.tableCellUnhighlight(this,this._touchedCell),this._touchedCell=null)},onTouchCancelled:function(a,b){cc.ScrollView.prototype.onTouchCancelled.call(this,a,b),this._touchedCell&&(null!==this._tableViewDelegate&&this._tableViewDelegate.tableCellUnhighlight&&this._tableViewDelegate.tableCellUnhighlight(this,this._touchedCell),this._touchedCell=null)}});var _p=cc.TableView.prototype;_p.dataSource,cc.defineGetterSetter(_p,"dataSource",_p.getDataSource,_p.setDataSource),_p.delegate,cc.defineGetterSetter(_p,"delegate",_p.getDelegate,_p.setDelegate),_p.verticalFillOrder,cc.defineGetterSetter(_p,"verticalFillOrder",_p.getVerticalFillOrder,_p.setVerticalFillOrder),_p=null,cc.TableView.create=function(a,b,c){return new cc.TableView(a,b,c)};cc.ProtectedNode=cc.Node.extend({_protectedChildren:null,_reorderProtectedChildDirty:!1,_insertProtectedChild:function(a,b){this._reorderProtectedChildDirty=!0,this._protectedChildren.push(a),a._setLocalZOrder(b)},ctor:function(){cc.Node.prototype.ctor.call(this),this._protectedChildren=[]},addProtectedChild:function(a,b,c){cc.assert(null!=a,"child must be non-nil"),cc.assert(!a.parent,"child already added. It can't be added again"),b=b||a.getLocalZOrder(),c&&a.setTag(c),this._insertProtectedChild(a,b),a.setParent(this),a.setOrderOfArrival(cc.s_globalOrderOfArrival),this._running&&(a.onEnter(),this._isTransitionFinished&&a.onEnterTransitionDidFinish()),this._cascadeColorEnabled&&this._renderCmd.setCascadeColorEnabledDirty(),this._cascadeOpacityEnabled&&this._renderCmd.setCascadeOpacityEnabledDirty()},getProtectedChildByTag:function(a){cc.assert(a!==cc.NODE_TAG_INVALID,"Invalid tag");for(var b=this._protectedChildren,c=0,d=b.length;c<d;c++)if(b.getTag()===a)return b[c];return null},removeProtectedChild:function(a,b){null==b&&(b=!0);var c=this._protectedChildren;if(0!==c.length){var d=c.indexOf(a);d>-1&&(this._running&&(a.onExitTransitionDidStart(),a.onExit()),b&&a.cleanup(),a.setParent(null),c.splice(d,1))}},removeProtectedChildByTag:function(a,b){cc.assert(a!==cc.NODE_TAG_INVALID,"Invalid tag"),null==b&&(b=!0);var c=this.getProtectedChildByTag(a);null==c?cc.log("cocos2d: removeChildByTag(tag = %d): child not found!",a):this.removeProtectedChild(c,b)},removeAllProtectedChildren:function(){this.removeAllProtectedChildrenWithCleanup(!0)},removeAllProtectedChildrenWithCleanup:function(a){null==a&&(a=!0);for(var b=this._protectedChildren,c=0,d=b.length;c<d;c++){var e=b[c];this._running&&(e.onExitTransitionDidStart(),e.onExit()),a&&e.cleanup(),e.setParent(null)}b.length=0},reorderProtectedChild:function(a,b){cc.assert(null!=a,"Child must be non-nil"),this._reorderProtectedChildDirty=!0,a.setOrderOfArrival(cc.s_globalOrderOfArrival++),a._setLocalZOrder(b)},sortAllProtectedChildren:function(){if(this._reorderProtectedChildDirty){var a,b,c,d=this._protectedChildren,e=d.length;for(a=1;a<e;a++){for(c=d[a],b=a-1;b>=0;){if(c._localZOrder<d[b]._localZOrder)d[b+1]=d[b];else{if(!(c._localZOrder===d[b]._localZOrder&&c.arrivalOrder<d[b].arrivalOrder))break;d[b+1]=d[b]}b--}d[b+1]=c}this._reorderProtectedChildDirty=!1}},_changePosition:function(){},cleanup:function(){cc.Node.prototype.cleanup.call(this);for(var a=this._protectedChildren,b=0,c=a.length;b<c;b++)a[b].cleanup()},onEnter:function(){cc.Node.prototype.onEnter.call(this);for(var a=this._protectedChildren,b=0,c=a.length;b<c;b++)a[b].onEnter()},onEnterTransitionDidFinish:function(){cc.Node.prototype.onEnterTransitionDidFinish.call(this);for(var a=this._protectedChildren,b=0,c=a.length;b<c;b++)a[b].onEnterTransitionDidFinish()},onExit:function(){cc.Node.prototype.onExit.call(this);for(var a=this._protectedChildren,b=0,c=a.length;b<c;b++)a[b].onExit()},onExitTransitionDidStart:function(){cc.Node.prototype.onExitTransitionDidStart.call(this);for(var a=this._protectedChildren,b=0,c=a.length;b<c;b++)a[b].onExitTransitionDidStart()},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.ProtectedNode.CanvasRenderCmd(this):new cc.ProtectedNode.WebGLRenderCmd(this)}}),cc.ProtectedNode.create=function(){return new cc.ProtectedNode},function(){cc.ProtectedNode.RenderCmd={_updateDisplayColor:function(a){var b,c,d,e,f=this._node,g=this._displayedColor,h=f._realColor;if(this._cascadeColorEnabledDirty&&!f._cascadeColorEnabled){g.r=h.r,g.g=h.g,g.b=h.b;var i=new cc.Color(255,255,255,255);for(d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&e._renderCmd._updateDisplayColor(i);this._cascadeColorEnabledDirty=!1}else{if(void 0===a){var j=f._parent;a=j&&j._cascadeColorEnabled?j.getDisplayedColor():cc.color.WHITE}if(g.r=0|h.r*a.r/255,g.g=0|h.g*a.g/255,g.b=0|h.b*a.b/255,f._cascadeColorEnabled)for(d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&(e._renderCmd._updateDisplayColor(g),e._renderCmd._updateColor());for(d=f._protectedChildren,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&(e._renderCmd._updateDisplayColor(g),e._renderCmd._updateColor())}this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.colorDirty^this._dirtyFlag},_updateDisplayOpacity:function(a){var b,c,d,e,f=this._node;if(this._cascadeOpacityEnabledDirty&&!f._cascadeOpacityEnabled){for(this._displayedOpacity=f._realOpacity,d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&e._renderCmd._updateDisplayOpacity(255);this._cascadeOpacityEnabledDirty=!1}else{if(void 0===a){var g=f._parent;a=255,g&&g._cascadeOpacityEnabled&&(a=g.getDisplayedOpacity())}if(this._displayedOpacity=f._realOpacity*a/255,f._cascadeOpacityEnabled)for(d=f._children,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&(e._renderCmd._updateDisplayOpacity(this._displayedOpacity),e._renderCmd._updateColor());for(d=f._protectedChildren,b=0,c=d.length;b<c;b++)e=d[b],e&&e._renderCmd&&(e._renderCmd._updateDisplayOpacity(this._displayedOpacity),e._renderCmd._updateColor())}this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.opacityDirty^this._dirtyFlag},_changeProtectedChild:function(a){var b=a._renderCmd,c=b._dirtyFlag,d=cc.Node._dirtyFlags;this._dirtyFlag&d.colorDirty&&(c|=d.colorDirty),this._dirtyFlag&d.opacityDirty&&(c|=d.opacityDirty);var e=c&d.colorDirty,f=c&d.opacityDirty;e&&b._updateDisplayColor(this._displayedColor),f&&b._updateDisplayOpacity(this._displayedOpacity),(e||f)&&b._updateColor()}},cc.ProtectedNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._cachedParent=null,this._cacheDirty=!1};var a=cc.ProtectedNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);cc.inject(cc.ProtectedNode.RenderCmd,a),a.constructor=cc.ProtectedNode.CanvasRenderCmd,a.visit=function(a){var b=this._node;if(b._visible){var c,d,e,f=b._children,g=b._children,h=b._protectedChildren,i=g.length,j=h.length;this._syncStatus(a),b.sortAllChildren(),b.sortAllProtectedChildren();var k;for(c=0;c<i&&(e=f[c],e._localZOrder<0);c++)e.visit(this);for(d=0;d<j&&(k=h[d],k&&k._localZOrder<0);d++)this._changeProtectedChild(k),k.visit(this);for(cc.renderer.pushRenderCommand(this);c<i;c++)f[c]&&f[c].visit(this);for(;d<j;d++)k=h[d],k&&(this._changeProtectedChild(k),k.visit(this));this._dirtyFlag=0,this._cacheDirty=!1}},a.transform=function(a,b){var c=this._node;c._changePosition&&c._changePosition(),this.originTransform(a,b);var d,e,f=c._protectedChildren;if(b&&f&&0!==f.length)for(d=0,e=f.length;d<e;d++)f[d]._renderCmd.transform(this,b)},a.pNodeVisit=a.visit,a.pNodeTransform=a.transform}(),function(){if(cc.Node.WebGLRenderCmd){cc.ProtectedNode.WebGLRenderCmd=function(a){cc.Node.WebGLRenderCmd.call(this,a)};var a=cc.ProtectedNode.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);cc.inject(cc.ProtectedNode.RenderCmd,a),a.constructor=cc.ProtectedNode.WebGLRenderCmd,a.visit=function(a){var b=this._node;if(b._visible){var c,d;this._syncStatus(a);var e=b.grid;e&&e._active&&e.beforeDraw();var f=b._children,g=b._protectedChildren,h=f.length,i=g.length;b.sortAllChildren(),b.sortAllProtectedChildren();var j;for(c=0;c<h&&(f[c]&&f[c]._localZOrder<0);c++)f[c].visit(this);for(d=0;d<i&&(j=g[d],j&&j._localZOrder<0);d++)this._changeProtectedChild(j),j.visit(this);for(cc.renderer.pushRenderCommand(this);c<h;c++)f[c]&&f[c].visit(this);for(;d<i;d++)j=g[d],j&&(this._changeProtectedChild(j),j.visit(this));e&&e._active&&e.afterDraw(b),this._dirtyFlag=0}},a.transform=function(a,b){this.originTransform(a,b);var c,d,e=this._node._protectedChildren;if(b&&e&&0!==e.length)for(c=0,d=e.length;c<d;c++)e[c]._renderCmd.transform(this,b)},a.pNodeVisit=a.visit,a.pNodeTransform=a.transform}}();var ccui=ccui||{};ccui.Class=ccui.Class||cc.Class,ccui.Class.extend=ccui.Class.extend||cc.Class.extend,ccui.Node=ccui.Node||cc.Node,ccui.Node.extend=ccui.Node.extend||cc.Node.extend,ccui.ProtectedNode=ccui.ProtectedNode||cc.ProtectedNode,ccui.ProtectedNode.extend=ccui.ProtectedNode.extend||cc.ProtectedNode.extend,ccui.cocosGUIVersion="CocosGUI v1.0.0.0",ccui._FocusNavigationController=cc.Class.extend({_keyboardListener:null,_firstFocusedWidget:null,_enableFocusNavigation:!1,_keyboardEventPriority:1,enableFocusNavigation:function(a){this._enableFocusNavigation!==a&&(this._enableFocusNavigation=a,a?this._addKeyboardEventListener():this._removeKeyboardEventListener())},_setFirstFocsuedWidget:function(a){this._firstFocusedWidget=a},_onKeyPressed:function(a,b){this._enableFocusNavigation&&this._firstFocusedWidget&&(a===cc.KEY.dpadDown&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.DOWN,this._firstFocusedWidget)),a===cc.KEY.dpadUp&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.UP,this._firstFocusedWidget)),a===cc.KEY.dpadLeft&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.LEFT,this._firstFocusedWidget)),a===cc.KEY.dpadRight&&(this._firstFocusedWidget=this._firstFocusedWidget.findNextFocusedWidget(ccui.Widget.RIGHT,this._firstFocusedWidget)))},_addKeyboardEventListener:function(){this._keyboardListener||(this._keyboardListener=cc.EventListener.create({event:cc.EventListener.KEYBOARD,onKeyReleased:this._onKeyPressed.bind(this)}),cc.eventManager.addListener(this._keyboardListener,this._keyboardEventPriority))},_removeKeyboardEventListener:function(){this._keyboardListener&&(cc.eventManager.removeEventListener(this._keyboardListener),this._keyboardListener=null)}}),ccui.__LAYOUT_COMPONENT_NAME="__ui_layout",ccui.Widget=ccui.ProtectedNode.extend({_enabled:!0,_bright:!0,_touchEnabled:!1,_brightStyle:null,_touchBeganPosition:null,_touchMovePosition:null,_touchEndPosition:null,_touchEventListener:null,_touchEventSelector:null,_name:"default",_widgetType:null,_actionTag:0,_customSize:null,_layoutParameterDictionary:null,_layoutParameterType:0,_focused:!1,_focusEnabled:!0,_ignoreSize:!1,_affectByClipping:!1,_sizeType:null,_sizePercent:null,_positionType:null,_positionPercent:null,_hit:!1,_nodes:null,_touchListener:null,_className:"Widget",_flippedX:!1,_flippedY:!1,_opacity:255,_highlight:!1,_touchEventCallback:null,_clickEventListener:null,_propagateTouchEvents:!0,_unifySize:!1,_callbackName:null,_callbackType:null,_usingLayoutComponent:!1,_inViewRect:!0,ctor:function(){cc.ProtectedNode.prototype.ctor.call(this),this._brightStyle=ccui.Widget.BRIGHT_STYLE_NONE,this._touchBeganPosition=cc.p(0,0),this._touchMovePosition=cc.p(0,0),this._touchEndPosition=cc.p(0,0),this._widgetType=ccui.Widget.TYPE_WIDGET,this._customSize=cc.size(0,0),this._layoutParameterDictionary={},this._sizeType=ccui.Widget.SIZE_ABSOLUTE,this._sizePercent=cc.p(0,0),this._positionType=ccui.Widget.POSITION_ABSOLUTE,this._positionPercent=cc.p(0,0),this._nodes=[],this._layoutParameterType=ccui.LayoutParameter.NONE,ccui.Widget.prototype.init.call(this)},init:function(){return!!cc.ProtectedNode.prototype.init.call(this)&&(this._layoutParameterDictionary={},this._initRenderer(),this.setBright(!0),this.onFocusChanged=this.onFocusChange,this.onNextFocusedWidget=null,this.setAnchorPoint(cc.p(.5,.5)),this.ignoreContentAdaptWithSize(!0),!0)},onEnter:function(){var a=this._touchListener;a&&!a._isRegistered()&&this._touchEnabled&&cc.eventManager.addListener(a,this),this._usingLayoutComponent||this.updateSizeAndPosition(),cc.ProtectedNode.prototype.onEnter.call(this)},onExit:function(){this.unscheduleUpdate(),cc.ProtectedNode.prototype.onExit.call(this)},_getOrCreateLayoutComponent:function(){var a=this.getComponent(ccui.__LAYOUT_COMPONENT_NAME);return null==a&&(a=new ccui.LayoutComponent,this.addComponent(a)),a},getWidgetParent:function(){var a=this.getParent();return a instanceof ccui.Widget?a:null},_updateContentSizeWithTextureSize:function(a){return this._unifySize?void this.setContentSize(a):void this.setContentSize(this._ignoreSize?a:this._customSize)},_isAncestorsEnabled:function(){var a=this._getAncensterWidget(this);return null==a||!(a&&!a.isEnabled())&&a._isAncestorsEnabled()},setPropagateTouchEvents:function(a){this._propagateTouchEvents=a},isPropagateTouchEvents:function(){return this._propagateTouchEvents},setSwallowTouches:function(a){this._touchListener&&this._touchListener.setSwallowTouches(a)},isSwallowTouches:function(){return!!this._touchListener&&this._touchListener.isSwallowTouches()},_getAncensterWidget:function(a){if(null==a)return null;var b=a.getParent();return null==b?null:b instanceof ccui.Widget?b:this._getAncensterWidget(b.getParent())},_isAncestorsVisible:function(a){if(null==a)return!0;var b=a.getParent();return!(b&&!b.isVisible())&&this._isAncestorsVisible(b)},_cleanupWidget:function(){this._eventDispatcher.removeEventListener(this._touchListener),this._touchEnabled=!1,this._touchListener=null,ccui.Widget._focusedWidget===this&&(ccui.Widget._focusedWidget=null,ccui.Widget._focusNavigationController=null)},setEnabled:function(a){this._enabled=a},_initRenderer:function(){},setContentSize:function(a,b){var c=void 0===b?a.width:a,d=void 0===b?a.height:b;if(cc.Node.prototype.setContentSize.call(this,c,d),this._customSize.width=c,this._customSize.height=d,this._unifySize||this._ignoreSize&&(this._contentSize=this.getVirtualRendererSize()),!this._usingLayoutComponent&&this._running){var e=this.getWidgetParent(),f=e?e.getContentSize():this._parent.getContentSize();this._sizePercent.x=f.width>0?c/f.width:0,this._sizePercent.y=f.height>0?d/f.height:0}this._onSizeChanged()},_setWidth:function(a){if(cc.Node.prototype._setWidth.call(this,a),this._customSize.width=a,this._unifySize||this._ignoreSize&&(this._contentSize=this.getVirtualRendererSize()),!this._usingLayoutComponent&&this._running){var b=this.getWidgetParent(),c=b?b.width:this._parent.width;this._sizePercent.x=c>0?this._customSize.width/c:0}this._onSizeChanged()},_setHeight:function(a){if(cc.Node.prototype._setHeight.call(this,a),this._customSize.height=a,this._unifySize||this._ignoreSize&&(this._contentSize=this.getVirtualRendererSize()),!this._usingLayoutComponent&&this._running){var b=this.getWidgetParent(),c=b?b.height:this._parent.height;this._sizePercent.y=c>0?this._customSize.height/c:0}this._onSizeChanged()},setSizePercent:function(a){if(this._usingLayoutComponent){var b=this._getOrCreateLayoutComponent();return b.setUsingPercentContentSize(!0),b.setPercentContentSize(a),void b.refreshLayout()}this._sizePercent.x=a.x,this._sizePercent.y=a.y;var c=this._customSize.width,d=this._customSize.height;if(this._running){var e=this.getWidgetParent();e?(c=e.width*a.x,d=e.height*a.y):(c=this._parent.width*a.x,d=this._parent.height*a.y)}this._ignoreSize?this.setContentSize(this.getVirtualRendererSize()):this.setContentSize(c,d),this._customSize.width=c,this._customSize.height=d},_setWidthPercent:function(a){this._sizePercent.x=a;var b=this._customSize.width;if(this._running){var c=this.getWidgetParent();b=(c?c.width:this._parent.width)*a}this._ignoreSize?this._setWidth(this.getVirtualRendererSize().width):this._setWidth(b),this._customSize.width=b},_setHeightPercent:function(a){this._sizePercent.y=a;var b=this._customSize.height;if(this._running){var c=this.getWidgetParent();b=(c?c.height:this._parent.height)*a}this._ignoreSize?this._setHeight(this.getVirtualRendererSize().height):this._setHeight(b),this._customSize.height=b},updateSizeAndPosition:function(a){if(!a){var b=this.getWidgetParent();a=b?b.getLayoutSize():this._parent.getContentSize()}switch(this._sizeType){case ccui.Widget.SIZE_ABSOLUTE:this._ignoreSize?this.setContentSize(this.getVirtualRendererSize()):this.setContentSize(this._customSize),this._sizePercent.x=a.width>0?this._customSize.width/a.width:0,this._sizePercent.y=a.height>0?this._customSize.height/a.height:0;break;case ccui.Widget.SIZE_PERCENT:var c=cc.size(a.width*this._sizePercent.x,a.height*this._sizePercent.y);this._ignoreSize?this.setContentSize(this.getVirtualRendererSize()):this.setContentSize(c),this._customSize.width=c.width,this._customSize.height=c.height}this._onSizeChanged();var d=this.getPosition();switch(this._positionType){case ccui.Widget.POSITION_ABSOLUTE:a.width<=0||a.height<=0?this._positionPercent.x=this._positionPercent.y=0:(this._positionPercent.x=d.x/a.width,this._positionPercent.y=d.y/a.height);break;case ccui.Widget.POSITION_PERCENT:d=cc.p(a.width*this._positionPercent.x,a.height*this._positionPercent.y)}if(this._parent instanceof ccui.ImageView){var e=this._parent._imageRenderer;if(e&&!e._textureLoaded)return}this.setPosition(d)},setSizeType:function(a){if(this._sizeType=a,this._usingLayoutComponent){var b=this._getOrCreateLayoutComponent();b.setUsingPercentContentSize(this._sizeType===ccui.SIZE_PERCENT)}},getSizeType:function(){return this._sizeType},ignoreContentAdaptWithSize:function(a){return this._unifySize?void this.setContentSize(this._customSize):void(this._ignoreSize!==a&&(this._ignoreSize=a,this.setContentSize(a?this.getVirtualRendererSize():this._customSize)))},isIgnoreContentAdaptWithSize:function(){return this._ignoreSize},getCustomSize:function(){return cc.size(this._customSize)},getLayoutSize:function(){return cc.size(this._contentSize)},getSizePercent:function(){if(this._usingLayoutComponent){var a=this._getOrCreateLayoutComponent();this._sizePercent=a.getPercentContentSize()}return this._sizePercent},_getWidthPercent:function(){return this._sizePercent.x},_getHeightPercent:function(){return this._sizePercent.y},getWorldPosition:function(){return this.convertToWorldSpace(cc.p(this._anchorPoint.x*this._contentSize.width,this._anchorPoint.y*this._contentSize.height))},getVirtualRenderer:function(){return this},getVirtualRendererSize:function(){return cc.size(this._contentSize)},_onSizeChanged:function(){if(!this._usingLayoutComponent)for(var a=this.getChildren(),b=0,c=a.length;b<c;b++){var d=a[b];d instanceof ccui.Widget&&d.updateSizeAndPosition()}},setTouchEnabled:function(a){this._touchEnabled!==a&&(this._touchEnabled=a,this._touchEnabled?(this._touchListener||(this._touchListener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches:!0,onTouchBegan:this.onTouchBegan.bind(this),onTouchMoved:this.onTouchMoved.bind(this),onTouchEnded:this.onTouchEnded.bind(this)})),cc.eventManager.addListener(this._touchListener,this)):cc.eventManager.removeListener(this._touchListener))},isTouchEnabled:function(){return this._touchEnabled},isHighlighted:function(){return this._highlight},setHighlighted:function(a){a!==this._highlight&&(this._highlight=a,this._bright?this._highlight?this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT):this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL):this._onPressStateChangedToDisabled())},isFocused:function(){return this._focused},setFocused:function(a){this._focused=a,a&&(ccui.Widget._focusedWidget=this,ccui.Widget._focusNavigationController&&ccui.Widget._focusNavigationController._setFirstFocsuedWidget(this))},isFocusEnabled:function(){return this._focusEnabled},setFocusEnabled:function(a){this._focusEnabled=a},findNextFocusedWidget:function(a,b){if(null===this.onNextFocusedWidget||null==this.onNextFocusedWidget(a)){var c=b instanceof ccui.Layout;if(this.isFocused()||c){var d=this.getParent();return null!==d&&d instanceof ccui.Layout?d.findNextFocusedWidget(a,b):c?b.findNextFocusedWidget(a,b):b}return b}var e=this.onNextFocusedWidget(a);return this.dispatchFocusEvent(this,e),e},requestFocus:function(){this!==ccui.Widget._focusedWidget&&this.dispatchFocusEvent(ccui.Widget._focusedWidget,this)},getCurrentFocusedWidget:function(){return ccui.Widget._focusedWidget},onFocusChanged:null,onNextFocusedWidget:null,interceptTouchEvent:function(a,b,c){var d=this.getWidgetParent();d&&d.interceptTouchEvent(a,b,c)},onFocusChange:function(a,b){a&&a.setFocused(!1),b&&b.setFocused(!0)},dispatchFocusEvent:function(a,b){a&&!a.isFocused()&&(a=ccui.Widget._focusedWidget),b!==a&&(b&&b.onFocusChanged&&b.onFocusChanged(a,b),a&&b.onFocusChanged&&a.onFocusChanged(a,b),cc.eventManager.dispatchEvent(new cc.EventFocus(a,b)))},setBright:function(a){this._bright=a,this._bright?(this._brightStyle=ccui.Widget.BRIGHT_STYLE_NONE,this.setBrightStyle(ccui.Widget.BRIGHT_STYLE_NORMAL)):this._onPressStateChangedToDisabled()},setBrightStyle:function(a){if(this._brightStyle!==a)switch(a=a||ccui.Widget.BRIGHT_STYLE_NORMAL,this._brightStyle=a,this._brightStyle){case ccui.Widget.BRIGHT_STYLE_NORMAL:this._onPressStateChangedToNormal();break;case ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT:this._onPressStateChangedToPressed()}},_onPressStateChangedToNormal:function(){},_onPressStateChangedToPressed:function(){},_onPressStateChangedToDisabled:function(){},_updateChildrenDisplayedRGBA:function(){this.setColor(this.getColor()),this.setOpacity(this.getOpacity())},didNotSelectSelf:function(){},onTouchBegan:function(a,b){if(this._hit=!1,this.isVisible()&&this.isEnabled()&&this._isAncestorsEnabled()&&this._isAncestorsVisible(this)){var c=a.getLocation();this._touchBeganPosition.x=c.x,this._touchBeganPosition.y=c.y,this.hitTest(this._touchBeganPosition)&&this.isClippingParentContainsPoint(this._touchBeganPosition)&&(this._hit=!0)}return!!this._hit&&(this.setHighlighted(!0),this._propagateTouchEvents&&this.propagateTouchEvent(ccui.Widget.TOUCH_BEGAN,this,a),this._pushDownEvent(),!0)},propagateTouchEvent:function(a,b,c){var d=this.getWidgetParent();d&&d.interceptTouchEvent(a,b,c)},onTouchMoved:function(a,b){var c=a.getLocation();this._touchMovePosition.x=c.x,this._touchMovePosition.y=c.y,this.setHighlighted(this.hitTest(c)),this._propagateTouchEvents&&this.propagateTouchEvent(ccui.Widget.TOUCH_MOVED,this,a),this._moveEvent()},onTouchEnded:function(a,b){var c=a.getLocation();this._touchEndPosition.x=c.x,this._touchEndPosition.y=c.y,this._propagateTouchEvents&&this.propagateTouchEvent(ccui.Widget.TOUCH_ENDED,this,a);var d=this._highlight;this.setHighlighted(!1),d?this._releaseUpEvent():this._cancelUpEvent()},onTouchCancelled:function(a){this.setHighlighted(!1),this._cancelUpEvent()},onTouchLongClicked:function(a){this.longClickEvent()},_pushDownEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_BEGAN),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_BEGAN)},_moveEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_MOVED),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_MOVED)},_releaseUpEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_ENDED),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_ENDED),this._clickEventListener&&this._clickEventListener(this)},_cancelUpEvent:function(){this._touchEventCallback&&this._touchEventCallback(this,ccui.Widget.TOUCH_CANCELED),this._touchEventListener&&this._touchEventSelector&&this._touchEventSelector.call(this._touchEventListener,this,ccui.Widget.TOUCH_CANCELED)},longClickEvent:function(){},addTouchEventListener:function(a,b){void 0===b?this._touchEventCallback=a:(this._touchEventSelector=a,this._touchEventListener=b)},addClickEventListener:function(a){this._clickEventListener=a},hitTest:function(a){var b=cc.rect(0,0,this._contentSize.width,this._contentSize.height);return cc.rectContainsPoint(b,this.convertToNodeSpace(a))},isClippingParentContainsPoint:function(a){this._affectByClipping=!1;for(var b=this.getParent(),c=null;b;){if(b instanceof ccui.Layout&&b.isClippingEnabled()){this._affectByClipping=!0,c=b;break}b=b.getParent()}return!this._affectByClipping||(!c||!!c.hitTest(a)&&c.isClippingParentContainsPoint(a))},checkChildInfo:function(a,b,c){var d=this.getWidgetParent();d&&d.checkChildInfo(a,b,c)},setPosition:function(a,b){if(!this._usingLayoutComponent&&this._running){var c=this.getWidgetParent();if(c){var d=c.getContentSize();d.width<=0||d.height<=0?(this._positionPercent.x=0,this._positionPercent.y=0):void 0===b?(this._positionPercent.x=a.x/d.width,this._positionPercent.y=a.y/d.height):(this._positionPercent.x=a/d.width,this._positionPercent.y=b/d.height)}}cc.Node.prototype.setPosition.call(this,a,b)},setPositionX:function(a){if(this._running){var b=this.getWidgetParent();if(b){var c=b.width;c<=0?this._positionPercent.x=0:this._positionPercent.x=a/c}}cc.Node.prototype.setPositionX.call(this,a)},setPositionY:function(a){if(this._running){var b=this.getWidgetParent();if(b){var c=b.height;c<=0?this._positionPercent.y=0:this._positionPercent.y=a/c}}cc.Node.prototype.setPositionY.call(this,a)},setPositionPercent:function(a){if(this._usingLayoutComponent){var b=this._getOrCreateLayoutComponent();return b.setPositionPercentX(a.x),b.setPositionPercentY(a.y),void b.refreshLayout()}this._setXPercent(a.x),this._setYPercent(a.y),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},_setXPercent:function(a){if(this._usingLayoutComponent){var b=this._getOrCreateLayoutComponent();return b.setPositionPercentX(a.x),void b.refreshLayout()}this._positionPercent.x=a},_setYPercent:function(a){if(this._usingLayoutComponent){var b=this._getOrCreateLayoutComponent();return b.setPositionPercentY(a.x),void b.refreshLayout()}this._positionPercent.y=a},getPositionPercent:function(){if(this._usingLayoutComponent){var a=this._getOrCreateLayoutComponent();this._positionPercent.x=a.getPositionPercentX(),this._positionPercent.y=a.getPositionPercentY()}return cc.p(this._positionPercent)},_getXPercent:function(){if(this._usingLayoutComponent){var a=this._getOrCreateLayoutComponent();this._positionPercent.x=a.getPositionPercentX(),this._positionPercent.y=a.getPositionPercentY()}return this._positionPercent.x},_getYPercent:function(){if(this._usingLayoutComponent){var a=this._getOrCreateLayoutComponent();this._positionPercent.x=a.getPositionPercentX(),this._positionPercent.y=a.getPositionPercentY()}return this._positionPercent.y},setPositionType:function(a){if(this._positionType=a,this._usingLayoutComponent){var b=this._getOrCreateLayoutComponent();a===ccui.POSITION_ABSOLUTE?(b.setPositionPercentXEnabled(!1),b.setPositionPercentYEnabled(!1)):(b.setPositionPercentXEnabled(!0),b.setPositionPercentYEnabled(!0))}this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.transformDirty)},getPositionType:function(){return this._positionType},setFlippedX:function(a){var b=this.getScaleX();this._flippedX=a,this.setScaleX(b)},isFlippedX:function(){return this._flippedX},setFlippedY:function(a){var b=this.getScaleY();this._flippedY=a,this.setScaleY(b)},isFlippedY:function(){return this._flippedY},_adaptRenderers:function(){},isBright:function(){return this._bright},isEnabled:function(){return this._enabled},getLeftBoundary:function(){return this.getPositionX()-this._getAnchorX()*this._contentSize.width},getBottomBoundary:function(){return this.getPositionY()-this._getAnchorY()*this._contentSize.height},getRightBoundary:function(){return this.getLeftBoundary()+this._contentSize.width},getTopBoundary:function(){return this.getBottomBoundary()+this._contentSize.height},getTouchBeganPosition:function(){return cc.p(this._touchBeganPosition)},getTouchMovePosition:function(){return cc.p(this._touchMovePosition)},getTouchEndPosition:function(){return cc.p(this._touchEndPosition)},getWidgetType:function(){return this._widgetType},setLayoutParameter:function(a){a&&(this._layoutParameterDictionary[a.getLayoutType()]=a,this._layoutParameterType=a.getLayoutType())},getLayoutParameter:function(a){return a=a||this._layoutParameterType,this._layoutParameterDictionary[a]},getDescription:function(){return"Widget"},clone:function(){var a=this._createCloneInstance();return a._copyProperties(this),a._copyClonedWidgetChildren(this),a},_createCloneInstance:function(){return new ccui.Widget},_copyClonedWidgetChildren:function(a){for(var b=a.getChildren(),c=0;c<b.length;c++){var d=b[c];d instanceof ccui.Widget&&this.addChild(d.clone())}},_copySpecialProperties:function(a){},_copyProperties:function(a){this.setEnabled(a.isEnabled()),this.setVisible(a.isVisible()),this.setBright(a.isBright()),this.setTouchEnabled(a.isTouchEnabled()),this.setLocalZOrder(a.getLocalZOrder()),this.setTag(a.getTag()),this.setName(a.getName()),this.setActionTag(a.getActionTag()),this._ignoreSize=a._ignoreSize,this.setContentSize(a._contentSize),this._customSize.width=a._customSize.width,this._customSize.height=a._customSize.height,this._copySpecialProperties(a),this._sizeType=a.getSizeType(),this._sizePercent.x=a._sizePercent.x,this._sizePercent.y=a._sizePercent.y,this._positionType=a._positionType,this._positionPercent.x=a._positionPercent.x,this._positionPercent.y=a._positionPercent.y,this.setPosition(a.getPosition()),this.setAnchorPoint(a.getAnchorPoint()),this.setScaleX(a.getScaleX()),this.setScaleY(a.getScaleY()),this.setRotation(a.getRotation()),this.setRotationX(a.getRotationX()),this.setRotationY(a.getRotationY()),this.setFlippedX(a.isFlippedX()),this.setFlippedY(a.isFlippedY()),this.setColor(a.getColor()),this.setOpacity(a.getOpacity()),this._touchEventCallback=a._touchEventCallback,this._touchEventListener=a._touchEventListener,this._touchEventSelector=a._touchEventSelector,this._clickEventListener=a._clickEventListener,this._focused=a._focused,this._focusEnabled=a._focusEnabled,this._propagateTouchEvents=a._propagateTouchEvents;for(var b in a._layoutParameterDictionary){var c=a._layoutParameterDictionary[b];c&&this.setLayoutParameter(c.clone())}this._onSizeChanged()},setActionTag:function(a){this._actionTag=a},getActionTag:function(){return this._actionTag},getLeftInParent:function(){return cc.log("getLeftInParent is deprecated. Please use getLeftBoundary instead."),this.getLeftBoundary()},getBottomInParent:function(){return cc.log("getBottomInParent is deprecated. Please use getBottomBoundary instead."),this.getBottomBoundary()},getRightInParent:function(){return cc.log("getRightInParent is deprecated. Please use getRightBoundary instead."),this.getRightBoundary()},getTopInParent:function(){return cc.log("getTopInParent is deprecated. Please use getTopBoundary instead."),this.getTopBoundary()},getTouchEndPos:function(){return cc.log("getTouchEndPos is deprecated. Please use getTouchEndPosition instead."),this.getTouchEndPosition()},getTouchMovePos:function(){return cc.log("getTouchMovePos is deprecated. Please use getTouchMovePosition instead."),this.getTouchMovePosition()},clippingParentAreaContainPoint:function(a){cc.log("clippingParentAreaContainPoint is deprecated. Please use isClippingParentContainsPoint instead."),this.isClippingParentContainsPoint(a)},getTouchStartPos:function(){return cc.log("getTouchStartPos is deprecated. Please use getTouchBeganPosition instead."),this.getTouchBeganPosition()},setSize:function(a){this.setContentSize(a)},getSize:function(){return this.getContentSize()},addNode:function(a,b,c){return a instanceof ccui.Widget?void cc.log("Please use addChild to add a Widget."):(cc.Node.prototype.addChild.call(this,a,b,c),void this._nodes.push(a))},getNodeByTag:function(a){for(var b=this._nodes,c=0;c<b.length;c++){var d=b[c];if(d&&d.getTag()===a)return d}return null},getNodes:function(){return this._nodes},removeNode:function(a,b){cc.Node.prototype.removeChild.call(this,a,b),cc.arrayRemoveObject(this._nodes,a)},removeNodeByTag:function(a,b){var c=this.getChildByTag(a);c?this.removeChild(c,b):cc.log("cocos2d: removeNodeByTag(tag = %d): child not found!",a)},removeAllNodes:function(){for(var a=0;a<this._nodes.length;a++){var b=this._nodes[a];cc.Node.prototype.removeChild.call(this,b)}this._nodes.length=0},_findLayout:function(){cc.renderer.childrenOrderDirty=!0;for(var a=this._parent;a;){if(a._doLayout){a._doLayoutDirty=!0;break}a=a._parent}},isUnifySizeEnabled:function(){return this._unifySize},setUnifySizeEnabled:function(a){this._unifySize=a},_ccEventCallback:null,addCCSEventListener:function(a){this._ccEventCallback=a},setScaleX:function(a){this._flippedX&&(a*=-1),cc.Node.prototype.setScaleX.call(this,a);
},setScaleY:function(a){this._flippedY&&(a*=-1),cc.Node.prototype.setScaleY.call(this,a)},setScale:function(a,b){void 0===b&&(b=a),this.setScaleX(a),this.setScaleY(b)},getScaleX:function(){var a=cc.Node.prototype.getScaleX.call(this);return this._flippedX&&(a*=-1),a},getScaleY:function(){var a=cc.Node.prototype.getScaleY.call(this);return this._flippedY&&(a*=-1),a},getScale:function(){return this.getScaleX()!==this.getScaleY()&&cc.log("Widget#scale. ScaleX != ScaleY. Don't know which one to return"),this.getScaleX()},setCallbackName:function(a){this._callbackName=a},getCallbackName:function(){return this._callbackName},setCallbackType:function(a){this._callbackType=a},getCallbackType:function(){return this._callbackType},setLayoutComponentEnabled:function(a){this._usingLayoutComponent=a},isLayoutComponentEnabled:function(){return this._usingLayoutComponent},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new ccui.Widget.WebGLRenderCmd(this):new ccui.Widget.CanvasRenderCmd(this)}});var _p=ccui.Widget.prototype;_p.xPercent,cc.defineGetterSetter(_p,"xPercent",_p._getXPercent,_p._setXPercent),_p.yPercent,cc.defineGetterSetter(_p,"yPercent",_p._getYPercent,_p._setYPercent),_p.widthPercent,cc.defineGetterSetter(_p,"widthPercent",_p._getWidthPercent,_p._setWidthPercent),_p.heightPercent,cc.defineGetterSetter(_p,"heightPercent",_p._getHeightPercent,_p._setHeightPercent),_p.widgetParent,cc.defineGetterSetter(_p,"widgetParent",_p.getWidgetParent),_p.enabled,cc.defineGetterSetter(_p,"enabled",_p.isEnabled,_p.setEnabled),_p.focused,cc.defineGetterSetter(_p,"focused",_p.isFocused,_p.setFocused),_p.sizeType,cc.defineGetterSetter(_p,"sizeType",_p.getSizeType,_p.setSizeType),_p.widgetType,cc.defineGetterSetter(_p,"widgetType",_p.getWidgetType),_p.touchEnabled,cc.defineGetterSetter(_p,"touchEnabled",_p.isTouchEnabled,_p.setTouchEnabled),_p.updateEnabled,cc.defineGetterSetter(_p,"updateEnabled",_p.isUpdateEnabled,_p.setUpdateEnabled),_p.bright,cc.defineGetterSetter(_p,"bright",_p.isBright,_p.setBright),_p.name,cc.defineGetterSetter(_p,"name",_p.getName,_p.setName),_p.actionTag,cc.defineGetterSetter(_p,"actionTag",_p.getActionTag,_p.setActionTag),_p.opacity,cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity),_p=null,ccui.Widget.create=function(){return new ccui.Widget},ccui.Widget._focusedWidget=null,ccui.Widget._focusNavigationController=null,ccui.Widget.enableDpadNavigation=function(a){a?(null==ccui.Widget._focusNavigationController&&(ccui.Widget._focusNavigationController=new ccui._FocusNavigationController,ccui.Widget._focusedWidget&&ccui.Widget._focusNavigationController._setFirstFocsuedWidget(ccui.Widget._focusedWidget)),ccui.Widget._focusNavigationController.enableFocusNavigation(!0)):ccui.Widget._focusNavigationController&&(ccui.Widget._focusNavigationController.enableFocusNavigation(!1),ccui.Widget._focusNavigationController=null)},ccui.Widget.getCurrentFocusedWidget=function(){return ccui.Widget._focusedWidget},ccui.Widget.BRIGHT_STYLE_NONE=-1,ccui.Widget.BRIGHT_STYLE_NORMAL=0,ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT=1,ccui.Widget.TYPE_WIDGET=0,ccui.Widget.TYPE_CONTAINER=1,ccui.Widget.LEFT=0,ccui.Widget.RIGHT=1,ccui.Widget.UP=2,ccui.Widget.DOWN=3,ccui.Widget.LOCAL_TEXTURE=0,ccui.Widget.PLIST_TEXTURE=1,ccui.Widget.TOUCH_BEGAN=0,ccui.Widget.TOUCH_MOVED=1,ccui.Widget.TOUCH_ENDED=2,ccui.Widget.TOUCH_CANCELED=3,ccui.Widget.SIZE_ABSOLUTE=0,ccui.Widget.SIZE_PERCENT=1,ccui.Widget.POSITION_ABSOLUTE=0,ccui.Widget.POSITION_PERCENT=1,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){if(cc._renderType===cc.game.RENDER_TYPE_CANVAS){ccui.Widget.CanvasRenderCmd=function(a){cc.ProtectedNode.CanvasRenderCmd.call(this,a),this._needDraw=!1};var a=ccui.Widget.CanvasRenderCmd.prototype=Object.create(cc.ProtectedNode.CanvasRenderCmd.prototype);a.constructor=ccui.Widget.CanvasRenderCmd,a.visit=function(a){var b=this._node;b._visible&&(b._adaptRenderers(),this.pNodeVisit(a))},a.transform=function(a,b){var c=this._node;if(c._visible&&c._running){if(c._adaptRenderers(),!this._usingLayoutComponent){var d=c.getWidgetParent();if(d){var e=d.getContentSize();0!==e.width&&0!==e.height&&(c._position.x=e.width*c._positionPercent.x,c._position.y=e.height*c._positionPercent.y)}}this.pNodeTransform(a,b)}},a.widgetVisit=a.visit,a.widgetTransform=a.transform}else{ccui.Widget.WebGLRenderCmd=function(a){cc.ProtectedNode.WebGLRenderCmd.call(this,a),this._needDraw=!1};var a=ccui.Widget.WebGLRenderCmd.prototype=Object.create(cc.ProtectedNode.WebGLRenderCmd.prototype);a.constructor=ccui.Widget.WebGLRenderCmd,a.visit=function(a){var b=this._node;b._visible&&(b._adaptRenderers(),this.pNodeVisit(a))},a.transform=function(a,b){var c=this._node;if(c._visible&&c._running){if(c._adaptRenderers(),!this._usingLayoutComponent){var d=c.getWidgetParent();if(d){var e=d.getContentSize();0!==e.width&&0!==e.height&&(c._position.x=e.width*c._positionPercent.x,c._position.y=e.height*c._positionPercent.y)}}this.pNodeTransform(a,b)}},a.widgetVisit=a.visit,a.widgetTransform=a.transform}}),ccui.Scale9Sprite=cc.Scale9Sprite=cc.Node.extend({_spriteRect:null,_capInsetsInternal:null,_positionsAreDirty:!1,_scale9Image:null,_topLeft:null,_top:null,_topRight:null,_left:null,_centre:null,_right:null,_bottomLeft:null,_bottom:null,_bottomRight:null,_scale9Enabled:!0,_brightState:0,_renderers:null,_opacityModifyRGB:!1,_originalSize:null,_preferredSize:null,_opacity:0,_color:null,_capInsets:null,_insetLeft:0,_insetTop:0,_insetRight:0,_insetBottom:0,_spriteFrameRotated:!1,_textureLoaded:!1,_className:"Scale9Sprite",_flippedX:!1,_flippedY:!1,textureLoaded:function(){return this._textureLoaded},addLoadedEventListener:function(a,b){this.addEventListener("load",a,b)},_updateCapInset:function(){var a,b=this._insetLeft,c=this._insetTop,d=this._insetRight,e=this._spriteRect,f=this._insetBottom;a=0===b&&0===c&&0===d&&0===f?cc.rect(0,0,0,0):this._spriteFrameRotated?cc.rect(f,b,e.width-d-b,e.height-c-f):cc.rect(b,c,e.width-b-d,e.height-c-f),this.setCapInsets(a)},_updatePositions:function(){if(this._topLeft&&this._topRight&&this._bottomRight&&this._bottomLeft&&this._centre){var a=this._contentSize,b=this._topLeft,c=this._topRight,d=this._bottomRight,e=this._bottomLeft,f=this._left,g=this._right,h=this._top,i=this._bottom,j=this._centre,k=this._centre.getContentSize(),l=b.getContentSize(),m=e.getContentSize(),n=a.width-l.width-c.getContentSize().width,o=a.height-l.height-d.getContentSize().height,p=n/k.width,q=o/k.height,r=k.width*p,s=k.height*q,t=m.width,u=m.height,v=cc.p(this._offset.x*p,this._offset.y*q);if(cc._renderType===cc.game.RENDER_TYPE_WEBGL){var w=Math.round(r);r!==w&&(r=w,p=r/k.width);var x=Math.round(s);s!==x&&(s=x,q=s/k.height)}j.setScaleX(p),j.setScaleY(q),e.setAnchorPoint(1,1),e.setPosition(t,u),d.setAnchorPoint(0,1),d.setPosition(t+r,u),b.setAnchorPoint(1,0),b.setPosition(t,u+s),c.setAnchorPoint(0,0),c.setPosition(t+r,u+s),f.setAnchorPoint(1,.5),f.setPosition(t,u+s/2+v.y),f.setScaleY(q),g.setAnchorPoint(0,.5),g.setPosition(t+r,u+s/2+v.y),g.setScaleY(q),h.setAnchorPoint(.5,0),h.setPosition(t+r/2+v.x,u+s),h.setScaleX(p),i.setAnchorPoint(.5,1),i.setPosition(t+r/2+v.x,u),i.setScaleX(p),j.setAnchorPoint(.5,.5),j.setPosition(t+r/2+v.x,u+s/2+v.y),j.setScaleX(p),j.setScaleY(q)}},ctor:function(a,b,c){if(cc.Node.prototype.ctor.call(this),this._loader=new cc.Sprite.LoadManager,this._spriteRect=cc.rect(0,0,0,0),this._capInsetsInternal=cc.rect(0,0,0,0),this._originalSize=cc.size(0,0),this._preferredSize=cc.size(0,0),this._capInsets=cc.rect(0,0,0,0),this._renderers=[],void 0!==a)if(a instanceof cc.SpriteFrame)this.initWithSpriteFrame(a,b);else{var d=cc.spriteFrameCache.getSpriteFrame(a);d?this.initWithSpriteFrame(d,b):this.initWithFile(a,b,c)}else this.init(),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),this.setAnchorPoint(.5,.5),this._positionsAreDirty=!0},getSprite:function(){return this._scale9Image},getOriginalSize:function(){return cc.size(this._originalSize)},getPreferredSize:function(){return cc.size(this._preferredSize)},_getPreferredWidth:function(){return this._preferredSize.width},_getPreferredHeight:function(){return this._preferredSize.height},_asyncSetPreferredSize:function(){this.removeEventListener("load",this._asyncSetPreferredSize,this),this.setPreferredSize(this._cachePreferredSize),this._cachePreferredSize=null},setPreferredSize:function(a){if(a){if(!this._textureLoaded)return this._cachePreferredSize=a,this.removeEventListener("load",this._asyncSetPreferredSize,this),this.addEventListener("load",this._asyncSetPreferredSize,this),!1;this.setContentSize(a),this._preferredSize=a,this._positionsAreDirty&&(this._updatePositions(),this._positionsAreDirty=!1,this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty))}},_setPreferredWidth:function(a){this._setWidth(a),this._preferredSize.width=a},_setPreferredHeight:function(a){this._setHeight(a),this._preferredSize.height=a},setOpacity:function(a){if(cc.Node.prototype.setOpacity.call(this,a),this._scale9Enabled)for(var b=this._renderers,c=0;c<b.length;c++)b[c].setOpacity(a);else this._scale9Image&&this._scale9Image.setOpacity(a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},setColor:function(a){if(cc.Node.prototype.setColor.call(this,a),this._scale9Enabled)for(var b=this._renderers,c=0;c<b.length;c++){var d=b[c];d&&d.setColor(a)}else this._scale9Image&&this._scale9Image.setColor(a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},getCapInsets:function(){return cc.rect(this._capInsets)},_asyncSetCapInsets:function(){this.removeEventListener("load",this._asyncSetCapInsets,this),this.setCapInsets(this._cacheCapInsets),this._cacheCapInsets=null},setCapInsets:function(a){var b=this._contentSize,c=b.width,d=b.height;return this._textureLoaded?(this.updateWithSprite(this._scale9Image,this._spriteRect,this._spriteFrameRotated,this._offset,this._originalSize,a),this._insetLeft=a.x,this._insetTop=a.y,this._insetRight=this._originalSize.width-this._insetLeft-a.width,this._insetBottom=this._originalSize.height-this._insetTop-a.height,void this.setContentSize(c,d)):(this._cacheCapInsets=a,this.removeEventListener("load",this._asyncSetCapInsets,this),this.addEventListener("load",this._asyncSetCapInsets,this),!1)},getInsetLeft:function(){return this._insetLeft},setInsetLeft:function(a){this._insetLeft=a,this._updateCapInset()},getInsetTop:function(){return this._insetTop},setInsetTop:function(a){this._insetTop=a,this._updateCapInset()},getInsetRight:function(){return this._insetRight},setInsetRight:function(a){this._insetRight=a,this._updateCapInset()},getInsetBottom:function(){return this._insetBottom},setInsetBottom:function(a){this._insetBottom=a,this._updateCapInset()},setContentSize:function(a,b){cc.Node.prototype.setContentSize.call(this,a,b),this._positionsAreDirty=!0},setAnchorPoint:function(a,b){cc.Node.prototype.setAnchorPoint.call(this,a,b),this._scale9Enabled||this._scale9Image&&(this._scale9Image.setAnchorPoint(a,b),this._positionsAreDirty=!0)},_setWidth:function(a){cc.Node.prototype._setWidth.call(this,a),this._positionsAreDirty=!0},_setHeight:function(a){cc.Node.prototype._setHeight.call(this,a),this._positionsAreDirty=!0},init:function(){return this.initWithBatchNode(null,cc.rect(0,0,0,0),!1,cc.rect(0,0,0,0))},initWithBatchNode:function(a,b,c,d){return!!a&&(void 0===d&&(d=c,c=!1),this.updateWithBatchNode(a,b,c,d),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0),this.setAnchorPoint(.5,.5),this._positionsAreDirty=!0,!0)},initWithFile:function(a,b,c){if(a instanceof cc.Rect?(a=arguments[1],c=arguments[0],b=cc.rect(0,0,0,0)):(b=b||cc.rect(0,0,0,0),c=c||cc.rect(0,0,0,0)),!a)throw new Error("ccui.Scale9Sprite.initWithFile(): file should be non-null");var d=cc.textureCache.getTextureForKey(a);d||(d=cc.textureCache.addImage(a));var e=d.isLoaded();return this._textureLoaded=e,this._loader.clear(),e?this.initWithBatchNode(new cc.SpriteBatchNode(a,9),b,!1,c):(this._loader.once(d,function(){this.initWithFile(a,b,c),this.dispatchEvent("load")},this),!1)},initWithSpriteFrame:function(a,b){if(!a||!a.getTexture())throw new Error("ccui.Scale9Sprite.initWithSpriteFrame(): spriteFrame should be non-null and its texture should be non-null");b=b||cc.rect(0,0,0,0);var c=a.getTexture(),d=this._textureLoaded=c.isLoaded();if(this._loader.clear(),!d)return this._loader.once(c,function(){this.initWithSpriteFrame(a,b),this.dispatchEvent("load")},this),!1;var e=new cc.SpriteBatchNode(a.getTexture(),9);return this.initWithBatchNode(e,a.getRect(),cc._renderType===cc.game.RENDER_TYPE_WEBGL&&a.isRotated(),b),!0},initWithSpriteFrameName:function(a,b){if(!a)throw new Error("ccui.Scale9Sprite.initWithSpriteFrameName(): spriteFrameName should be non-null");b=b||cc.rect(0,0,0,0);var c=cc.spriteFrameCache.getSpriteFrame(a);return null==c?(cc.log("ccui.Scale9Sprite.initWithSpriteFrameName(): can't find the sprite frame by spriteFrameName"),!1):this.initWithSpriteFrame(c,b)},resizableSpriteWithCapInsets:function(a){var b=new ccui.Scale9Sprite;return b&&b.initWithBatchNode(this._scale9Image,this._spriteRect,!1,a)?b:null},setOpacityModifyRGB:function(a){if(this._scale9Image){this._opacityModifyRGB=a;var b=this._scale9Image.getChildren();if(b)for(var c=0,d=b.length;c<d;c++)b[c].setOpacityModifyRGB(a);this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)}},isOpacityModifyRGB:function(){return this._opacityModifyRGB},createSlicedSprites:function(){var a=this._originalSize.width,b=this._originalSize.height,c=this._spriteRect,d=Math.floor(this._offset.x+(a-c.width)/2),e=Math.floor(this._offset.y+(b-c.height)/2),f=c.x,g=c.y,h=this._capInsetsInternal,i=this._scale9Image,j=i.getTexture(),k=this._spriteFrameRotated,l=cc.rect(c.x,c.y,c.width,c.height);cc._rectEqualToZero(h)&&(h=cc.rect(a/3,b/3,a/3,b/3)),this._spriteFrameRotated?(f-=e,g-=d):(f-=d,g-=e),c=cc.rect(f,g,a,b);var m=h.x,n=h.width,o=c.width-(m+n),p=h.y,q=h.height,r=c.height-(p+q),s=0,t=0,u=cc.rect(s+.5|0,t+.5|0,m+.5|0,p+.5|0),v=u;s+=m;var w=cc.rect(s+.5|0,t+.5|0,n+.5|0,p+.5|0),x=w;s+=n;var y=cc.rect(s+.5|0,t+.5|0,o+.5|0,p+.5|0),z=y;s=0,t=0,t+=p;var A=cc.rect(s+.5|0,t+.5|0,m+.5|0,q+.5|0);s+=m;var B=cc.rect(s+.5|0,t+.5|0,n+.5|0,q+.5|0),C=B;s+=n;var D=cc.rect(s+.5|0,t+.5|0,o+.5|0,q+.5|0);s=0,t=0,t+=p,t+=q;var E=cc.rect(s+.5|0,t+.5|0,m+.5|0,r+.5|0);s+=m;var F=cc.rect(s+.5|0,t+.5|0,n+.5|0,r+.5|0);s+=n;var G=cc.rect(s+.5|0,t+.5|0,o+.5|0,r+.5|0),H=G,I=u,J=B,K=G,L=C,M=H,N=E,O=z,P=v,Q=D,R=A,S=F,T=x,U=cc.affineTransformMakeIdentity();k?(U=cc.affineTransformTranslate(U,l.height+l.x,l.y),U=cc.affineTransformRotate(U,1.57079633),u=cc.rectApplyAffineTransform(u,U),B=cc.rectApplyAffineTransform(B,U),G=cc.rectApplyAffineTransform(G,U),C=cc.rectApplyAffineTransform(C,U),H=cc.rectApplyAffineTransform(H,U),E=cc.rectApplyAffineTransform(E,U),z=cc.rectApplyAffineTransform(z,U),v=cc.rectApplyAffineTransform(v,U),D=cc.rectApplyAffineTransform(D,U),A=cc.rectApplyAffineTransform(A,U),F=cc.rectApplyAffineTransform(F,U),x=cc.rectApplyAffineTransform(x,U),I.x=u.x,J.x=B.x,K.x=G.x,L.x=C.x,M.x=H.x,N.x=E.x,O.x=z.x,P.x=v.x,Q.x=D.x,R.x=A.x,S.x=F.x,T.x=x.x,I.y=u.y,J.y=B.y,K.y=G.y,L.y=C.y,M.y=H.y,N.y=E.y,O.y=z.y,P.y=v.y,Q.y=D.y,R.y=A.y,S.y=F.y,T.y=x.y):(U=cc.affineTransformTranslate(U,l.x,l.y),I=cc.rectApplyAffineTransform(I,U),J=cc.rectApplyAffineTransform(J,U),K=cc.rectApplyAffineTransform(K,U),L=cc.rectApplyAffineTransform(L,U),M=cc.rectApplyAffineTransform(M,U),N=cc.rectApplyAffineTransform(N,U),O=cc.rectApplyAffineTransform(O,U),P=cc.rectApplyAffineTransform(P,U),Q=cc.rectApplyAffineTransform(Q,U),R=cc.rectApplyAffineTransform(R,U),S=cc.rectApplyAffineTransform(S,U),T=cc.rectApplyAffineTransform(T,U)),this._centre||(this._centre=new cc.Sprite),this._centre.initWithTexture(j,L,k),L.width>0&&L.height>0&&this._renderers.push(this._centre),this._top||(this._top=new cc.Sprite),this._top.initWithTexture(j,T,k),T.width>0&&T.height>0&&this._renderers.push(this._top),this._bottom||(this._bottom=new cc.Sprite),this._bottom.initWithTexture(j,S,k),S.width>0&&S.height>0&&this._renderers.push(this._bottom),this._left||(this._left=new cc.Sprite),this._left.initWithTexture(j,R,k),R.width>0&&R.height>0&&this._renderers.push(this._left),this._right||(this._right=new cc.Sprite),this._right.initWithTexture(j,Q,k),Q.width>0&&Q.height>0&&this._renderers.push(this._right),this._topLeft||(this._topLeft=new cc.Sprite),this._topLeft.initWithTexture(j,P,k),P.width>0&&P.height>0&&this._renderers.push(this._topLeft),this._topRight||(this._topRight=new cc.Sprite),this._topRight.initWithTexture(j,O,k),O.width>0&&O.height>0&&this._renderers.push(this._topRight),this._bottomLeft||(this._bottomLeft=new cc.Sprite),this._bottomLeft.initWithTexture(j,N,k),N.width>0&&N.height>0&&this._renderers.push(this._bottomLeft),this._bottomRight||(this._bottomRight=new cc.Sprite),this._bottomRight.initWithTexture(j,M,k),M.width>0&&M.height>0&&this._renderers.push(this._bottomRight)},updateWithSprite:function(a,b,c,d,e,f){if(!a)return!1;if(this._loader.clear(),this._textureLoaded=a._textureLoaded,!a._textureLoaded)return this._loader.once(a,function(){this.updateWithSprite(a,b,c,d,e,f),this.dispatchEvent("load")},this),!1;if(this._scale9Image=a,!this._scale9Image)return!1;var g=this._scale9Image.getTexture();this._textureLoaded=g&&g.isLoaded();var h=a.getSpriteFrame();cc._renderType===cc.game.RENDER_TYPE_CANVAS&&h&&g._htmlElementObj instanceof window.HTMLCanvasElement&&(c=!1,b={x:0,y:0,height:b.height,width:b.width});var i=this.getOpacity(),j=this.getColor();this._renderers.length=0;var k=b,l=e;if(cc._rectEqualToZero(k)){var m=g.getContentSize();k=cc.rect(0,0,m.width,m.height)}return 0===l.width&&0===l.height&&(l=cc.size(k.width,k.height)),this._capInsets=f,this._spriteRect=k,this._offset=d,this._spriteFrameRotated=c,this._originalSize=l,this._preferredSize=l,this._capInsetsInternal=f,this._scale9Enabled?this.createSlicedSprites():this._scale9Image.initWithTexture(g,this._spriteRect,this._spriteFrameRotated),this.setState(this._brightState),this.setContentSize(l),this.setOpacity(i),this.setColor(j),!0},updateWithBatchNode:function(a,b,c,d){if(!a)return!1;var e=a.getTexture();this._loader.clear();var f=this._textureLoaded=e.isLoaded();if(!f)return this._loader.once(e,function(){this.updateWithBatchNode(a,b,c,d),this.dispatchEvent("load")},this),!1;var g=new cc.Sprite(e),h=cc.p(0,0),i=cc.size(b.width,b.height);return this.updateWithSprite(g,b,c,h,i,d)},setSpriteFrame:function(a,b){b=b||cc.rect();var c=a.getTexture();if(this._textureLoaded=c._textureLoaded,this._loader.clear(),!c._textureLoaded)return this._loader.once(a,function(){this.setSpriteFrame(a,b),this.dispatchEvent("load")},this),!1;var d=new cc.Sprite(a.getTexture());this.updateWithSprite(d,a.getRect(),a.isRotated(),a.getOffset(),a.getOriginalSize(),b),this._insetLeft=b.x,this._insetTop=b.y,this._insetRight=this._originalSize.width-this._insetLeft-b.width,this._insetBottom=this._originalSize.height-this._insetTop-b.height},setState:function(a){a!==ccui.Scale9Sprite.state.NORMAL&&a!==ccui.Scale9Sprite.state.GRAY||(this._brightState=a,this._renderCmd.setState(a))},setScale9Enabled:function(a){this._scale9Enabled!==a&&(this._scale9Enabled=a,this._renderers.length=0,cc.Node.transformDirty=!0,this._scale9Enabled&&this._scale9Image&&this.updateWithSprite(this._scale9Image,this._spriteRect,this._spriteFrameRotated,this._offset,this._originalSize,this._capInsets),this._positionsAreDirty=!0)},_setRenderersPosition:function(){this._positionsAreDirty&&(this._updatePositions(),this._adjustScale9ImagePosition(),this._positionsAreDirty=!1)},_adjustScale9ImagePosition:function(){var a=this._scale9Image,b=this._contentSize;a&&(a.x=b.width*a.getAnchorPoint().x,a.y=b.height*a.getAnchorPoint().y)},_adjustScale9ImageScale:function(){var a=this._scale9Image,b=this._contentSize;a&&a.setScale(b.width/a.width,b.height/a.height)},setFlippedX:function(a){var b=this.getScaleX();this._flippedX=a,this.setScaleX(b),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},isFlippedX:function(){return this._flippedX},setFlippedY:function(a){var b=this.getScaleY();this._flippedY=a,this.setScaleY(b),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},isFlippedY:function(){return this._flippedY},setScaleX:function(a){this._flippedX&&(a*=-1),cc.Node.prototype.setScaleX.call(this,a),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},setScaleY:function(a){this._flippedY&&(a*=-1),cc.Node.prototype.setScaleY.call(this,a),this._renderCmd.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty)},setScale:function(a,b){void 0===b&&(b=a),this.setScaleX(a),this.setScaleY(b)},getScaleX:function(){var a=cc.Node.prototype.getScaleX.call(this);return this._flippedX&&(a*=-1),a},getScaleY:function(){var a=cc.Node.prototype.getScaleY.call(this);return this._flippedY&&(a*=-1),a},getScale:function(){return this.getScaleX()!==this.getScaleY()&&cc.log("Scale9Sprite#scale. ScaleX != ScaleY. Don't know which one to return"),this.getScaleX()},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new ccui.Scale9Sprite.CanvasRenderCmd(this):new ccui.Scale9Sprite.WebGLRenderCmd(this)}});var _p=ccui.Scale9Sprite.prototype;cc.EventHelper.prototype.apply(_p),_p.preferredSize,cc.defineGetterSetter(_p,"preferredSize",_p.getPreferredSize,_p.setPreferredSize),_p.capInsets,cc.defineGetterSetter(_p,"capInsets",_p.getCapInsets,_p.setCapInsets),_p.insetLeft,cc.defineGetterSetter(_p,"insetLeft",_p.getInsetLeft,_p.setInsetLeft),_p.insetTop,cc.defineGetterSetter(_p,"insetTop",_p.getInsetTop,_p.setInsetTop),_p.insetRight,cc.defineGetterSetter(_p,"insetRight",_p.getInsetRight,_p.setInsetRight),_p.insetBottom,cc.defineGetterSetter(_p,"insetBottom",_p.getInsetBottom,_p.setInsetBottom),_p=null,ccui.Scale9Sprite.create=function(a,b,c){return new ccui.Scale9Sprite(a,b,c)},ccui.Scale9Sprite.createWithSpriteFrame=function(a,b){return new ccui.Scale9Sprite(a,b)},ccui.Scale9Sprite.createWithSpriteFrameName=function(a,b){return new ccui.Scale9Sprite(a,b)},ccui.Scale9Sprite.POSITIONS_CENTRE=0,ccui.Scale9Sprite.POSITIONS_TOP=1,ccui.Scale9Sprite.POSITIONS_LEFT=2,ccui.Scale9Sprite.POSITIONS_RIGHT=3,ccui.Scale9Sprite.POSITIONS_BOTTOM=4,ccui.Scale9Sprite.POSITIONS_TOPRIGHT=5,ccui.Scale9Sprite.POSITIONS_TOPLEFT=6,ccui.Scale9Sprite.POSITIONS_BOTTOMRIGHT=7,ccui.Scale9Sprite.state={NORMAL:0,GRAY:1},function(){ccui.Scale9Sprite.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._cachedParent=null,this._cacheDirty=!1,this._state=ccui.Scale9Sprite.state.NORMAL;var b=this._node,c=this._cacheCanvas=document.createElement("canvas");c.width=1,c.height=1,this._cacheContext=new cc.CanvasContextWrapper(c.getContext("2d"));var d=this._cacheTexture=new cc.Texture2D;d.initWithElement(c),d.handleLoadedTexture(),this._cacheSprite=new cc.Sprite(d),this._cacheSprite.setAnchorPoint(0,0),b.addChild(this._cacheSprite)};var a=ccui.Scale9Sprite.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=ccui.Scale9Sprite.CanvasRenderCmd,a.visit=function(a){var b=this._node;b._visible&&(b._positionsAreDirty&&(b._updatePositions(),b._positionsAreDirty=!1),this.originVisit(a))},a.transform=function(a){var b=this._node;cc.Node.CanvasRenderCmd.prototype.transform.call(this,a),b._positionsAreDirty&&(b._updatePositions(),b._positionsAreDirty=!1);for(var c=b._children,d=0;d<c.length;d++)c[d].transform(this,!0)},a._updateDisplayColor=function(a){cc.Node.CanvasRenderCmd.prototype._updateDisplayColor.call(this,a);var b=this._node;if(b){var c=b._renderers;if(b._scale9Enabled)for(var d=c.length,e=0;e<d;e++){var f=c[e];if(!f)break;f._renderCmd._updateDisplayColor(a),f._renderCmd._updateColor()}else b._scale9Image&&(b._scale9Image._renderCmd._updateDisplayColor(a),b._scale9Image._renderCmd._updateColor())}},a.updateStatus=function(){var a=cc.Node._dirtyFlags,b=this._dirtyFlag;cc.Node.RenderCmd.prototype.updateStatus.call(this),b&a.cacheDirty&&(this._cacheScale9Sprite(),this._dirtyFlag=this._dirtyFlag&a.cacheDirty^this._dirtyFlag)},a._syncStatus=function(a){var b=cc.Node._dirtyFlags,c=this._dirtyFlag;cc.Node.RenderCmd.prototype._syncStatus.call(this,a),c&b.cacheDirty&&(this._cacheScale9Sprite(),this._dirtyFlag=this._dirtyFlag&b.cacheDirty^this._dirtyFlag)},a._cacheScale9Sprite=function(){var a=this._node;if(a._scale9Image){var b=cc.contentScaleFactor(),c=a._contentSize,d=cc.size(c.width*b,c.height*b),e=this._cacheCanvas,f=this._cacheContext,g=f.getContext(),h=!1;if(e.width===d.width&&e.height===d.height||(e.width=d.width,e.height=d.height,h=!0),cc.renderer._turnToCacheMode(a.__instanceId),a._scale9Enabled){var i=a._renderers;a._setRenderersPosition();for(var j=i.length,k=0;k<j;k++){var l=i[k];if(!l)break;var m=l._renderCmd;m.updateStatus(),cc.renderer.pushRenderCommand(m)}}else{var m=a._scale9Image._renderCmd;a._adjustScale9ImagePosition(),a._adjustScale9ImageScale(),m.updateStatus(),cc.renderer.pushRenderCommand(a._scale9Image._renderCmd)}var n=a._scale9Image.getTexture();n&&this._state===ccui.Scale9Sprite.state.GRAY&&n._switchToGray(!0),g.setTransform(1,0,0,1,0,0),g.clearRect(0,0,d.width,d.height),cc.renderer._renderingToCacheCanvas(f,a.__instanceId,b,b),cc.renderer._turnToNormalMode(),n&&this._state===ccui.Scale9Sprite.state.GRAY&&n._switchToGray(!1),h&&this._cacheSprite.setTextureRect(cc.rect(0,0,c.width,c.height)),this._cacheSprite.getParent()||a.addChild(this._cacheSprite,-1),this._cacheSprite._renderCmd._updateColor()}},a.setState=function(a){var b=this._node._scale9Image;b&&(this._state=a,this.setDirtyFlag(cc.Node._dirtyFlags.cacheDirty))}}(),function(){if(cc.Node.WebGLRenderCmd){ccui.Scale9Sprite.WebGLRenderCmd=function(a){cc.Node.WebGLRenderCmd.call(this,a),this._cachedParent=null,this._cacheDirty=!1};var a=ccui.Scale9Sprite.WebGLRenderCmd.prototype=Object.create(cc.Node.WebGLRenderCmd.prototype);a.constructor=ccui.Scale9Sprite.WebGLRenderCmd,a.setShaderProgram=function(a){var b=this._node;if(b._scale9Enabled)for(var c=b._renderers,d=c.length,e=0;e<d;e++)c[e]&&(c[e]._renderCmd._shaderProgram=a);else b._scale9Image._renderCmd._shaderProgram=a;this._shaderProgram=a},a.visit=function(a){var b=this._node;if(b._visible&&b._scale9Image){if(b._positionsAreDirty&&(b._updatePositions(),b._positionsAreDirty=!1),a=a||this.getParentRenderCmd(),b._parent&&b._parent._renderCmd&&(this._curLevel=b._parent._renderCmd._curLevel+1),this._syncStatus(a),b._scale9Enabled)for(var c=b._renderers,d=c.length,e=0;e<d;e++){var f=c[e];if(!f)break;var g=f._renderCmd;g.visit(this)}else b._adjustScale9ImageScale(),b._adjustScale9ImagePosition(),b._scale9Image._renderCmd.visit(this);this._dirtyFlag=0,this.originVisit(a)}},a.transform=function(a,b){var c=this._node;if(a=a||this.getParentRenderCmd(),this.originTransform(a,b),c._positionsAreDirty&&(c._updatePositions(),c._positionsAreDirty=!1),c._scale9Enabled)for(var d=c._renderers,e=d.length,f=cc.Node._dirtyFlags,g=0;g<e;g++){var h=d[g];if(!h)break;h._vertexZ=a._node._vertexZ;var i=h._renderCmd;i.transform(this,!0),i._dirtyFlag=i._dirtyFlag&f.transformDirty^i._dirtyFlag}else c._adjustScale9ImageScale(),c._adjustScale9ImagePosition(),c._scale9Image._renderCmd.transform(this,!0)},a.setDirtyFlag=function(a,b){a===cc.Node._dirtyFlags.cacheDirty&&(a=cc.Node._dirtyFlags.transformDirty),cc.Node.RenderCmd.prototype.setDirtyFlag.call(this,a,b)},a._syncStatus=function(a){cc.Node.WebGLRenderCmd.prototype._syncStatus.call(this,a),this._updateDisplayColor(this._displayedColor),this._updateDisplayOpacity(this._displayedOpacity)},a._updateDisplayColor=function(a){cc.Node.WebGLRenderCmd.prototype._updateDisplayColor.call(this,a);var b=this._node,c=b._scale9Image;if(a=this._displayedColor,b._scale9Enabled)for(var d=b._renderers,e=0;e<d.length;e++)d[e]._renderCmd._updateDisplayColor(a),d[e]._renderCmd._updateColor();else c._renderCmd._updateDisplayColor(a),c._renderCmd._updateColor()},a._updateDisplayOpacity=function(a){cc.Node.WebGLRenderCmd.prototype._updateDisplayOpacity.call(this,a);var b=this._node,c=b._scale9Image;if(a=this._displayedOpacity,b._scale9Enabled)for(var d=b._renderers,e=0;e<d.length;e++)d[e]._renderCmd._updateDisplayOpacity(a),d[e]._renderCmd._updateColor();else c._renderCmd._updateDisplayOpacity(a),c._renderCmd._updateColor()},a.setState=function(a){a===ccui.Scale9Sprite.state.NORMAL?this.setShaderProgram(cc.shaderCache.programForKey(cc.SHADER_SPRITE_POSITION_TEXTURECOLOR)):a===ccui.Scale9Sprite.state.GRAY&&this.setShaderProgram(ccui.Scale9Sprite.WebGLRenderCmd._getGrayShaderProgram())},ccui.Scale9Sprite.WebGLRenderCmd._grayShaderProgram=null,ccui.Scale9Sprite.WebGLRenderCmd._getGrayShaderProgram=function(){var a=ccui.Scale9Sprite.WebGLRenderCmd._grayShaderProgram;return a?a:(a=new cc.GLProgram,a.initWithVertexShaderByteArray(cc.SHADER_SPRITE_POSITION_TEXTURE_COLOR_VERT,ccui.Scale9Sprite.WebGLRenderCmd._grayShaderFragment),a.addAttribute(cc.ATTRIBUTE_NAME_POSITION,cc.VERTEX_ATTRIB_POSITION),a.addAttribute(cc.ATTRIBUTE_NAME_COLOR,cc.VERTEX_ATTRIB_COLOR),a.addAttribute(cc.ATTRIBUTE_NAME_TEX_COORD,cc.VERTEX_ATTRIB_TEX_COORDS),a.link(),a.updateUniforms(),ccui.Scale9Sprite.WebGLRenderCmd._grayShaderProgram=a,a)},ccui.Scale9Sprite.WebGLRenderCmd._grayShaderFragment="precision lowp float;\nvarying vec4 v_fragmentColor; \nvarying vec2 v_texCoord; \nvoid main() \n{ \n    vec4 c = texture2D(CC_Texture0, v_texCoord); \n    gl_FragColor.xyz = vec3(0.2126*c.r + 0.7152*c.g + 0.0722*c.b); \n     gl_FragColor.w = c.w ; \n}"}}(),ccui.Layout=ccui.Widget.extend({_clippingEnabled:!1,_backGroundScale9Enabled:null,_backGroundImage:null,_backGroundImageFileName:null,_backGroundImageCapInsets:null,_colorType:null,_bgImageTexType:ccui.Widget.LOCAL_TEXTURE,_colorRender:null,_gradientRender:null,_color:null,_startColor:null,_endColor:null,_alongVector:null,_opacity:255,_backGroundImageTextureSize:null,_layoutType:null,_doLayoutDirty:!0,_clippingRectDirty:!0,_clippingType:null,_clippingStencil:null,_scissorRectDirty:!1,_clippingRect:null,_clippingParent:null,_className:"Layout",_backGroundImageColor:null,_finalPositionX:0,_finalPositionY:0,_backGroundImageOpacity:0,_loopFocus:!1,__passFocusToChild:!0,_isFocusPassing:!1,_isInterceptTouch:!1,ctor:function(){this._layoutType=ccui.Layout.ABSOLUTE,this._widgetType=ccui.Widget.TYPE_CONTAINER,this._clippingType=ccui.Layout.CLIPPING_SCISSOR,this._colorType=ccui.Layout.BG_COLOR_NONE,ccui.Widget.prototype.ctor.call(this),this.ignoreContentAdaptWithSize(!1),this.setContentSize(cc.size(0,0)),this.setAnchorPoint(0,0),this.onPassFocusToChild=this._findNearestChildWidgetIndex.bind(this),this._backGroundImageCapInsets=cc.rect(0,0,0,0),this._color=cc.color(255,255,255,255),this._startColor=cc.color(255,255,255,255),this._endColor=cc.color(255,255,255,255),this._alongVector=cc.p(0,-1),this._backGroundImageTextureSize=cc.size(0,0),this._clippingRect=cc.rect(0,0,0,0),this._backGroundImageColor=cc.color(255,255,255,255)},onEnter:function(){ccui.Widget.prototype.onEnter.call(this),this._clippingStencil&&this._clippingStencil.onEnter(),this._doLayoutDirty=!0,this._clippingRectDirty=!0},onExit:function(){ccui.Widget.prototype.onExit.call(this),this._clippingStencil&&this._clippingStencil.onExit()},setLoopFocus:function(a){this._loopFocus=a},isLoopFocus:function(){return this._loopFocus},setPassFocusToChild:function(a){this.__passFocusToChild=a},isPassFocusToChild:function(){return this.__passFocusToChild},findNextFocusedWidget:function(a,b){if(this._isFocusPassing||this.isFocused()){var c=this.getParent();if(this._isFocusPassing=!1,this.__passFocusToChild){var d=this._passFocusToChild(a,b);return d instanceof ccui.Layout&&c?(c._isFocusPassing=!0,c.findNextFocusedWidget(a,this)):d}return null!=c&&c instanceof ccui.Layout?(c._isFocusPassing=!0,c.findNextFocusedWidget(a,this)):this}if(!(b.isFocused()||b instanceof ccui.Layout))return b;if(this._layoutType===ccui.Layout.LINEAR_HORIZONTAL)switch(a){case ccui.Widget.LEFT:return this._getPreviousFocusedWidget(a,b);case ccui.Widget.RIGHT:return this._getNextFocusedWidget(a,b);case ccui.Widget.DOWN:
case ccui.Widget.UP:return this._isLastWidgetInContainer(this,a)?this._isWidgetAncestorSupportLoopFocus(b,a)?ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this):b:ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this);default:return cc.assert(0,"Invalid Focus Direction"),b}else{if(this._layoutType!==ccui.Layout.LINEAR_VERTICAL)return cc.assert(0,"Un Supported Layout type, please use VBox and HBox instead!!!"),b;switch(a){case ccui.Widget.LEFT:case ccui.Widget.RIGHT:return this._isLastWidgetInContainer(this,a)?this._isWidgetAncestorSupportLoopFocus(b,a)?ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this):b:ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this);case ccui.Widget.DOWN:return this._getNextFocusedWidget(a,b);case ccui.Widget.UP:return this._getPreviousFocusedWidget(a,b);default:return cc.assert(0,"Invalid Focus Direction"),b}}},onPassFocusToChild:null,addChild:function(a,b,c){a instanceof ccui.Widget&&this._supplyTheLayoutParameterLackToChild(a),ccui.Widget.prototype.addChild.call(this,a,b,c),this._doLayoutDirty=!0},removeChild:function(a,b){ccui.Widget.prototype.removeChild.call(this,a,b),this._doLayoutDirty=!0},removeAllChildren:function(a){ccui.Widget.prototype.removeAllChildren.call(this,a),this._doLayoutDirty=!0},removeAllChildrenWithCleanup:function(a){ccui.Widget.prototype.removeAllChildrenWithCleanup.call(this,a),this._doLayoutDirty=!0},isClippingEnabled:function(){return this._clippingEnabled},visit:function(a){if(this._visible)if(this._adaptRenderers(),this._doLayout(),this._clippingEnabled)switch(this._clippingType){case ccui.Layout.CLIPPING_STENCIL:this._renderCmd.stencilClippingVisit(a);break;case ccui.Layout.CLIPPING_SCISSOR:this._renderCmd.scissorClippingVisit(a)}else ccui.Widget.prototype.visit.call(this,a)},setClippingEnabled:function(a){if(a!==this._clippingEnabled)switch(this._clippingEnabled=a,this._clippingType){case ccui.Layout.CLIPPING_SCISSOR:case ccui.Layout.CLIPPING_STENCIL:a?(this._clippingStencil=new cc.DrawNode,this._renderCmd.rebindStencilRendering(this._clippingStencil),this._running&&this._clippingStencil.onEnter(),this._setStencilClippingSize(this._contentSize)):(this._running&&this._clippingStencil&&this._clippingStencil.onExit(),this._clippingStencil=null)}},setClippingType:function(a){if(a!==this._clippingType){var b=this.isClippingEnabled();this.setClippingEnabled(!1),this._clippingType=a,this.setClippingEnabled(b)}},getClippingType:function(){return this._clippingType},_setStencilClippingSize:function(a){if(this._clippingEnabled){var b=[];b[0]=cc.p(0,0),b[1]=cc.p(a.width,0),b[2]=cc.p(a.width,a.height),b[3]=cc.p(0,a.height);var c=cc.color.GREEN;this._clippingStencil.clear(),this._clippingStencil.setLocalBB&&this._clippingStencil.setLocalBB(0,0,a.width,a.height),this._clippingStencil.drawPoly(b,4,c,0,c)}},_getClippingRect:function(){if(this._clippingRectDirty){for(var a,b=this.convertToWorldSpace(cc.p(0,0)),c=this.getNodeToWorldTransform(),d=this._contentSize.width*c.a,e=this._contentSize.height*c.d,f=this;f;)if(f=f.getParent(),f&&f instanceof ccui.Layout&&f.isClippingEnabled()){this._clippingParent=f;break}if(this._clippingParent){a=this._clippingParent._getClippingRect(),this._clippingRect.x=Math.max(b.x,a.x),this._clippingRect.y=Math.max(b.y,a.y);var g=Math.min(b.x+d,a.x+a.width),h=Math.min(b.y+e,a.y+a.height);this._clippingRect.width=Math.max(0,g-this._clippingRect.x),this._clippingRect.height=Math.max(0,h-this._clippingRect.y)}else this._clippingRect.x=b.x,this._clippingRect.y=b.y,this._clippingRect.width=d,this._clippingRect.height=e;this._clippingRectDirty=!1}return this._clippingRect},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this);var a=this._contentSize;this._setStencilClippingSize(a),this._doLayoutDirty=!0,this._clippingRectDirty=!0,this._backGroundImage&&(this._backGroundImage.setPosition(.5*a.width,.5*a.height),this._backGroundScale9Enabled&&this._backGroundImage instanceof ccui.Scale9Sprite&&this._backGroundImage.setPreferredSize(a)),this._colorRender&&this._colorRender.setContentSize(a),this._gradientRender&&this._gradientRender.setContentSize(a)},setBackGroundImageScale9Enabled:function(a){this._backGroundScale9Enabled!==a&&(this.removeProtectedChild(this._backGroundImage),this._backGroundImage=null,this._backGroundScale9Enabled=a,this._addBackGroundImage(),this.setBackGroundImage(this._backGroundImageFileName,this._bgImageTexType),this.setBackGroundImageCapInsets(this._backGroundImageCapInsets))},isBackGroundImageScale9Enabled:function(){return this._backGroundScale9Enabled},setBackGroundImage:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,null===this._backGroundImage&&(this._addBackGroundImage(),this.setBackGroundImageScale9Enabled(this._backGroundScale9Enabled)),this._backGroundImageFileName=a,this._bgImageTexType=b;var c=this._backGroundImage;switch(this._bgImageTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._backGroundScale9Enabled&&c.setPreferredSize(this._contentSize),this._backGroundImageTextureSize=c.getContentSize(),c.setPosition(.5*this._contentSize.width,.5*this._contentSize.height),this._updateBackGroundImageColor()}},setBackGroundImageCapInsets:function(a){if(a){var b=this._backGroundImageCapInsets;b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,this._backGroundScale9Enabled&&this._backGroundImage.setCapInsets(a)}},getBackGroundImageCapInsets:function(){return cc.rect(this._backGroundImageCapInsets)},_supplyTheLayoutParameterLackToChild:function(a){if(a)switch(this._layoutType){case ccui.Layout.ABSOLUTE:break;case ccui.Layout.LINEAR_HORIZONTAL:case ccui.Layout.LINEAR_VERTICAL:var b=a.getLayoutParameter(ccui.LayoutParameter.LINEAR);b||a.setLayoutParameter(new ccui.LinearLayoutParameter);break;case ccui.Layout.RELATIVE:var b=a.getLayoutParameter(ccui.LayoutParameter.RELATIVE);b||a.setLayoutParameter(new ccui.RelativeLayoutParameter)}},_addBackGroundImage:function(){var a=this._contentSize;this._backGroundScale9Enabled?(this._backGroundImage=new ccui.Scale9Sprite,this._backGroundImage.setPreferredSize(a)):this._backGroundImage=new cc.Sprite,this.addProtectedChild(this._backGroundImage,ccui.Layout.BACKGROUND_IMAGE_ZORDER,-1),this._backGroundImage.setPosition(.5*a.width,.5*a.height)},removeBackGroundImage:function(){this._backGroundImage&&(this.removeProtectedChild(this._backGroundImage),this._backGroundImage=null,this._backGroundImageFileName="",this._backGroundImageTextureSize.width=0,this._backGroundImageTextureSize.height=0)},setBackGroundColorType:function(a){if(this._colorType!==a){switch(this._colorType){case ccui.Layout.BG_COLOR_NONE:this._colorRender&&(this.removeProtectedChild(this._colorRender),this._colorRender=null),this._gradientRender&&(this.removeProtectedChild(this._gradientRender),this._gradientRender=null);break;case ccui.Layout.BG_COLOR_SOLID:this._colorRender&&(this.removeProtectedChild(this._colorRender),this._colorRender=null);break;case ccui.Layout.BG_COLOR_GRADIENT:this._gradientRender&&(this.removeProtectedChild(this._gradientRender),this._gradientRender=null)}switch(this._colorType=a,this._colorType){case ccui.Layout.BG_COLOR_NONE:break;case ccui.Layout.BG_COLOR_SOLID:this._colorRender=new cc.LayerColor,this._colorRender.setContentSize(this._contentSize),this._colorRender.setOpacity(this._opacity),this._colorRender.setColor(this._color),this.addProtectedChild(this._colorRender,ccui.Layout.BACKGROUND_RENDERER_ZORDER,-1);break;case ccui.Layout.BG_COLOR_GRADIENT:this._gradientRender=new cc.LayerGradient(cc.color(255,0,0,255),cc.color(0,255,0,255)),this._gradientRender.setContentSize(this._contentSize),this._gradientRender.setOpacity(this._opacity),this._gradientRender.setStartColor(this._startColor),this._gradientRender.setEndColor(this._endColor),this._gradientRender.setVector(this._alongVector),this.addProtectedChild(this._gradientRender,ccui.Layout.BACKGROUND_RENDERER_ZORDER,-1)}}},getBackGroundColorType:function(){return this._colorType},setBackGroundColor:function(a,b){b?(this._startColor.r=a.r,this._startColor.g=a.g,this._startColor.b=a.b,this._gradientRender&&this._gradientRender.setStartColor(a),this._endColor.r=b.r,this._endColor.g=b.g,this._endColor.b=b.b,this._gradientRender&&this._gradientRender.setEndColor(b)):(this._color.r=a.r,this._color.g=a.g,this._color.b=a.b,this._colorRender&&this._colorRender.setColor(a))},getBackGroundColor:function(){var a=this._color;return cc.color(a.r,a.g,a.b,a.a)},getBackGroundStartColor:function(){var a=this._startColor;return cc.color(a.r,a.g,a.b,a.a)},getBackGroundEndColor:function(){var a=this._endColor;return cc.color(a.r,a.g,a.b,a.a)},setBackGroundColorOpacity:function(a){switch(this._opacity=a,this._colorType){case ccui.Layout.BG_COLOR_NONE:break;case ccui.Layout.BG_COLOR_SOLID:this._colorRender.setOpacity(a);break;case ccui.Layout.BG_COLOR_GRADIENT:this._gradientRender.setOpacity(a)}},getBackGroundColorOpacity:function(){return this._opacity},setBackGroundColorVector:function(a){this._alongVector.x=a.x,this._alongVector.y=a.y,this._gradientRender&&this._gradientRender.setVector(a)},getBackGroundColorVector:function(){return this._alongVector},setBackGroundImageColor:function(a){this._backGroundImageColor.r=a.r,this._backGroundImageColor.g=a.g,this._backGroundImageColor.b=a.b,this._updateBackGroundImageColor()},setBackGroundImageOpacity:function(a){this._backGroundImageColor.a=a,this.getBackGroundImageColor()},getBackGroundImageColor:function(){var a=this._backGroundImageColor;return cc.color(a.r,a.g,a.b,a.a)},getBackGroundImageOpacity:function(){return this._backGroundImageColor.a},_updateBackGroundImageColor:function(){this._backGroundImage&&this._backGroundImage.setColor(this._backGroundImageColor)},getBackGroundImageTextureSize:function(){return this._backGroundImageTextureSize},setLayoutType:function(a){this._layoutType=a;for(var b=this._children,c=null,d=0;d<b.length;d++)c=b[d],c instanceof ccui.Widget&&this._supplyTheLayoutParameterLackToChild(c);this._doLayoutDirty=!0},getLayoutType:function(){return this._layoutType},requestDoLayout:function(){this._doLayoutDirty=!0},_doLayout:function(){if(this._doLayoutDirty){this.sortAllChildren();var a=ccui.getLayoutManager(this._layoutType);a&&a._doLayout(this),this._doLayoutDirty=!1}},_getLayoutContentSize:function(){return this.getContentSize()},_getLayoutElements:function(){return this.getChildren()},_updateBackGroundImageOpacity:function(){this._backGroundImage&&this._backGroundImage.setOpacity(this._backGroundImageOpacity)},_updateBackGroundImageRGBA:function(){this._backGroundImage&&(this._backGroundImage.setColor(this._backGroundImageColor),this._backGroundImage.setOpacity(this._backGroundImageOpacity))},_getLayoutAccumulatedSize:function(){for(var a,b=this.getChildren(),c=cc.size(0,0),d=0,e=0,f=b.length;e<f;e++){var g=b[e];if(null!==g&&g instanceof ccui.Layout)a=g._getLayoutAccumulatedSize(),c.width+=a.width,c.height+=a.height;else if(g instanceof ccui.Widget){d++;var h=g.getLayoutParameter().getMargin();a=g.getContentSize(),c.width+=a.width+.5*(h.right+h.left),c.height+=a.height+.5*(h.top+h.bottom)}}var i=this.getLayoutType();return i===ccui.Layout.LINEAR_HORIZONTAL&&(c.height=c.height-c.height/d*(d-1)),i===ccui.Layout.LINEAR_VERTICAL&&(c.width=c.width-c.width/d*(d-1)),c},_findNearestChildWidgetIndex:function(a,b){if(null==b||b===this)return this._findFirstFocusEnabledWidgetIndex();var c,d=0,e=this.getChildren(),f=e.length,g=cc.FLT_MAX,h=0;if(a===ccui.Widget.LEFT||a===ccui.Widget.RIGHT||a===ccui.Widget.DOWN||a===ccui.Widget.UP){for(c=this._getWorldCenterPoint(b);d<f;){var i=e[d];if(i&&i instanceof ccui.Widget&&i.isFocusEnabled()){var j=i instanceof ccui.Layout?i._calculateNearestDistance(b):cc.pLength(cc.pSub(this._getWorldCenterPoint(i),c));j<g&&(h=d,g=j)}d++}return h}return cc.log("invalid focus direction!"),0},_findFarthestChildWidgetIndex:function(a,b){if(null==b||b===this)return this._findFirstFocusEnabledWidgetIndex();var c=0,d=this.getChildren(),e=d.length,f=-cc.FLT_MAX,g=0;if(a===ccui.Widget.LEFT||a===ccui.Widget.RIGHT||a===ccui.Widget.DOWN||a===ccui.Widget.UP){for(var h=this._getWorldCenterPoint(b);c<e;){var i=d[c];if(i&&i instanceof ccui.Widget&&i.isFocusEnabled()){var j=i instanceof ccui.Layout?i._calculateFarthestDistance(b):cc.pLength(cc.pSub(this._getWorldCenterPoint(i),h));j>f&&(g=c,f=j)}c++}return g}return cc.log("invalid focus direction!!!"),0},_calculateNearestDistance:function(a){for(var b=cc.FLT_MAX,c=this._getWorldCenterPoint(a),d=this._children,e=0,f=d.length;e<f;e++){var g,h=d[e];if(h instanceof ccui.Layout)g=h._calculateNearestDistance(a);else{if(!(h instanceof ccui.Widget&&h.isFocusEnabled()))continue;g=cc.pLength(cc.pSub(this._getWorldCenterPoint(h),c))}g<b&&(b=g)}return b},_calculateFarthestDistance:function(a){for(var b=-cc.FLT_MAX,c=this._getWorldCenterPoint(a),d=this._children,e=0,f=d.length;e<f;e++){var g,h=d[e];if(h instanceof ccui.Layout)g=h._calculateFarthestDistance(a);else{if(!(h instanceof ccui.Widget&&h.isFocusEnabled()))continue;var i=this._getWorldCenterPoint(h);g=cc.pLength(cc.pSub(i,c))}g>b&&(b=g)}return b},_findProperSearchingFunctor:function(a,b){if(void 0!==b){var c=this._getWorldCenterPoint(b),d=this._getWorldCenterPoint(this._findFirstNonLayoutWidget());a===ccui.Widget.LEFT?this.onPassFocusToChild=c.x>d.x?this._findNearestChildWidgetIndex:this._findFarthestChildWidgetIndex:a===ccui.Widget.RIGHT?this.onPassFocusToChild=c.x>d.x?this._findFarthestChildWidgetIndex:this._findNearestChildWidgetIndex:a===ccui.Widget.DOWN?this.onPassFocusToChild=c.y>d.y?this._findNearestChildWidgetIndex:this._findFarthestChildWidgetIndex:a===ccui.Widget.UP?this.onPassFocusToChild=c.y<d.y?this._findNearestChildWidgetIndex:this._findFarthestChildWidgetIndex:cc.log("invalid direction!")}},_findFirstNonLayoutWidget:function(){for(var a=this._children,b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof ccui.Layout){var e=d._findFirstNonLayoutWidget();if(e)return e}else if(d instanceof ccui.Widget)return d}return null},_findFirstFocusEnabledWidgetIndex:function(){for(var a=0,b=this.getChildren(),c=b.length;a<c;){var d=b[a];if(d&&d instanceof ccui.Widget&&d.isFocusEnabled())return a;a++}return 0},_findFocusEnabledChildWidgetByIndex:function(a){var b=this._getChildWidgetByIndex(a);return b?b.isFocusEnabled()?b:(a+=1,this._findFocusEnabledChildWidgetByIndex(a)):null},_getWorldCenterPoint:function(a){var b=a instanceof ccui.Layout?a._getLayoutAccumulatedSize():a.getContentSize();return a.convertToWorldSpace(cc.p(b.width/2,b.height/2))},_getNextFocusedWidget:function(a,b){var c=null,d=this._children,e=d.indexOf(b);return e+=1,e<d.length?(c=this._getChildWidgetByIndex(e),c?c.isFocusEnabled()?c instanceof ccui.Layout?(c._isFocusPassing=!0,c.findNextFocusedWidget(a,c)):(this.dispatchFocusEvent(b,c),c):this._getNextFocusedWidget(a,c):b):this._loopFocus?this._checkFocusEnabledChild()?(e=0,c=this._getChildWidgetByIndex(e),c.isFocusEnabled()?c instanceof ccui.Layout?(c._isFocusPassing=!0,c.findNextFocusedWidget(a,c)):(this.dispatchFocusEvent(b,c),c):this._getNextFocusedWidget(a,c)):b instanceof ccui.Layout?b:ccui.Widget._focusedWidget:this._isLastWidgetInContainer(b,a)?this._isWidgetAncestorSupportLoopFocus(this,a)?ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this):b instanceof ccui.Layout?b:ccui.Widget._focusedWidget:ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this)},_getPreviousFocusedWidget:function(a,b){var c=null,d=this._children,e=d.indexOf(b);return e-=1,e>=0?(c=this._getChildWidgetByIndex(e),c.isFocusEnabled()?c instanceof ccui.Layout?(c._isFocusPassing=!0,c.findNextFocusedWidget(a,c)):(this.dispatchFocusEvent(b,c),c):this._getPreviousFocusedWidget(a,c)):this._loopFocus?this._checkFocusEnabledChild()?(e=d.length-1,c=this._getChildWidgetByIndex(e),c.isFocusEnabled()?c instanceof ccui.Layout?(c._isFocusPassing=!0,c.findNextFocusedWidget(a,c)):(this.dispatchFocusEvent(b,c),c):this._getPreviousFocusedWidget(a,c)):b instanceof ccui.Layout?b:ccui.Widget._focusedWidget:this._isLastWidgetInContainer(b,a)?this._isWidgetAncestorSupportLoopFocus(this,a)?ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this):b instanceof ccui.Layout?b:ccui.Widget._focusedWidget:ccui.Widget.prototype.findNextFocusedWidget.call(this,a,this)},_getChildWidgetByIndex:function(a){for(var b=this._children,c=b.length,d=0,e=a;a<c;){var f=b[a];if(f&&f instanceof ccui.Widget)return f;d++,a++}for(var g=0;g<e;){var h=b[g];if(h&&h instanceof ccui.Widget)return h;d++,g++}return null},_isLastWidgetInContainer:function(a,b){var c=a.getParent();if(null==c||!(c instanceof ccui.Layout))return!0;var d=c.getChildren(),e=d.indexOf(a);if(c.getLayoutType()===ccui.Layout.LINEAR_HORIZONTAL){if(b===ccui.Widget.LEFT)return 0===e&&this._isLastWidgetInContainer(c,b);if(b===ccui.Widget.RIGHT)return e===d.length-1&&this._isLastWidgetInContainer(c,b);if(b===ccui.Widget.DOWN)return this._isLastWidgetInContainer(c,b);if(b===ccui.Widget.UP)return this._isLastWidgetInContainer(c,b)}else{if(c.getLayoutType()!==ccui.Layout.LINEAR_VERTICAL)return cc.log("invalid layout Type"),!1;if(b===ccui.Widget.UP)return 0===e&&this._isLastWidgetInContainer(c,b);if(b===ccui.Widget.DOWN)return e===d.length-1&&this._isLastWidgetInContainer(c,b);if(b===ccui.Widget.LEFT)return this._isLastWidgetInContainer(c,b);if(b===ccui.Widget.RIGHT)return this._isLastWidgetInContainer(c,b)}},_isWidgetAncestorSupportLoopFocus:function(a,b){var c=a.getParent();if(null==c||!(c instanceof ccui.Layout))return!1;if(c.isLoopFocus()){var d=c.getLayoutType();return d===ccui.Layout.LINEAR_HORIZONTAL?b===ccui.Widget.LEFT||b===ccui.Widget.RIGHT||this._isWidgetAncestorSupportLoopFocus(c,b):d===ccui.Layout.LINEAR_VERTICAL?b===ccui.Widget.DOWN||b===ccui.Widget.UP||this._isWidgetAncestorSupportLoopFocus(c,b):(cc.assert(0,"invalid layout type"),!1)}return this._isWidgetAncestorSupportLoopFocus(c,b)},_passFocusToChild:function(a,b){if(this._checkFocusEnabledChild()){var c=ccui.Widget.getCurrentFocusedWidget();this._findProperSearchingFunctor(a,c);var d=this.onPassFocusToChild(a,c),e=this._getChildWidgetByIndex(d);return e instanceof ccui.Layout?(e._isFocusPassing=!0,e.findNextFocusedWidget(a,e)):(this.dispatchFocusEvent(b,e),e)}return this},_checkFocusEnabledChild:function(){for(var a=this._children,b=0,c=a.length;b<c;b++){var d=a[b];if(d&&d instanceof ccui.Widget&&d.isFocusEnabled())return!0}return!1},getDescription:function(){return"Layout"},_createCloneInstance:function(){return new ccui.Layout},_copyClonedWidgetChildren:function(a){ccui.Widget.prototype._copyClonedWidgetChildren.call(this,a)},_copySpecialProperties:function(a){a instanceof ccui.Layout&&(this.setBackGroundImageScale9Enabled(a._backGroundScale9Enabled),this.setBackGroundImage(a._backGroundImageFileName,a._bgImageTexType),this.setBackGroundImageCapInsets(a._backGroundImageCapInsets),this.setBackGroundColorType(a._colorType),this.setBackGroundColor(a._color),this.setBackGroundColor(a._startColor,a._endColor),this.setBackGroundColorOpacity(a._opacity),this.setBackGroundColorVector(a._alongVector),this.setLayoutType(a._layoutType),this.setClippingEnabled(a._clippingEnabled),this.setClippingType(a._clippingType),this._loopFocus=a._loopFocus,this.__passFocusToChild=a.__passFocusToChild,this._isInterceptTouch=a._isInterceptTouch)},forceDoLayout:function(){this.requestDoLayout(),this._doLayout()},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new ccui.Layout.WebGLRenderCmd(this):new ccui.Layout.CanvasRenderCmd(this)}});var _p=ccui.Layout.prototype;_p.clippingEnabled,cc.defineGetterSetter(_p,"clippingEnabled",_p.isClippingEnabled,_p.setClippingEnabled),_p.clippingType,cc.defineGetterSetter(_p,"clippingType",null,_p.setClippingType),_p.layoutType,cc.defineGetterSetter(_p,"layoutType",_p.getLayoutType,_p.setLayoutType),_p=null,ccui.Layout.create=function(){return new ccui.Layout},ccui.Layout.BG_COLOR_NONE=0,ccui.Layout.BG_COLOR_SOLID=1,ccui.Layout.BG_COLOR_GRADIENT=2,ccui.Layout.ABSOLUTE=0,ccui.Layout.LINEAR_VERTICAL=1,ccui.Layout.LINEAR_HORIZONTAL=2,ccui.Layout.RELATIVE=3,ccui.Layout.CLIPPING_STENCIL=0,ccui.Layout.CLIPPING_SCISSOR=1,ccui.Layout.BACKGROUND_IMAGE_ZORDER=-1,ccui.Layout.BACKGROUND_RENDERER_ZORDER=-2,function(){ccui.Layout.CanvasRenderCmd=function(a){ccui.ProtectedNode.CanvasRenderCmd.call(this,a),this._needDraw=!1,this._rendererSaveCmd=new cc.CustomRenderCmd(this,this._onRenderSaveCmd),this._rendererClipCmd=new cc.CustomRenderCmd(this,this._onRenderClipCmd),this._rendererRestoreCmd=new cc.CustomRenderCmd(this,this._onRenderRestoreCmd),this._rendererSaveCmd._canUseDirtyRegion=!0,this._rendererClipCmd._canUseDirtyRegion=!0,this._rendererRestoreCmd._canUseDirtyRegion=!0};var a=ccui.Layout.CanvasRenderCmd.prototype=Object.create(ccui.ProtectedNode.CanvasRenderCmd.prototype);a.constructor=ccui.Layout.CanvasRenderCmd,cc.game.addEventListener(cc.game.EVENT_RENDERER_INITED,function(){ccui.Widget.CanvasRenderCmd&&(ccui.Layout.CanvasRenderCmd.prototype.widgetVisit=ccui.Widget.CanvasRenderCmd.prototype.widgetVisit)}),a.visit=function(a){var b=this._node;if(b._visible)if(b._adaptRenderers(),b._doLayout(),b._clippingEnabled)switch(b._clippingType){case ccui.Layout.CLIPPING_STENCIL:this.stencilClippingVisit(a);break;case ccui.Layout.CLIPPING_SCISSOR:this.scissorClippingVisit(a)}else this.widgetVisit(a)},a.layoutVisit=a.visit,a._onRenderSaveCmd=function(a,b,c){var d=a||cc._renderContext,e=d.getContext();d.save(),d.save(),d.setTransform(this._worldTransform,b,c);for(var f=this._node._clippingStencil._renderCmd._buffer,g=0,h=f.length;g<h;g++){var i=f[g],j=i.verts,k=j[0];e.beginPath(),e.moveTo(k.x,-k.y);for(var l=1,m=j.length;l<m;l++)e.lineTo(j[l].x,-j[l].y);e.closePath()}},a._onRenderClipCmd=function(a){var b=a||cc._renderContext,c=b.getContext();b.restore(),c.clip()},a._onRenderRestoreCmd=function(a){var b=a||cc._renderContext;b.getContext();b.restore()},a.rebindStencilRendering=function(a){a._renderCmd.rendering=this.__stencilDraw,a._renderCmd._canUseDirtyRegion=!0},a.__stencilDraw=function(a,b,c){},a.stencilClippingVisit=a.scissorClippingVisit=function(a){var b=this._node;if(b._clippingStencil&&b._clippingStencil.isVisible()){this._syncStatus(a),cc.renderer.pushRenderCommand(this._rendererSaveCmd),b._clippingStencil.visit(this),cc.renderer.pushRenderCommand(this._rendererClipCmd),b.sortAllChildren(),b.sortAllProtectedChildren();for(var c,d=b._children,e=0,f=b._protectedChildren,g=0,h=d.length,i=f.length;g<h&&(c=d[g],c&&c.getLocalZOrder()<0);g++)c.visit(this);for(;e<i&&(c=f[e],c&&c.getLocalZOrder()<0);e++)c.visit(this);for(;g<h;g++)d[g].visit(this);for(;e<i;e++)f[e].visit(this);cc.renderer.pushRenderCommand(this._rendererRestoreCmd),this._dirtyFlag=0}},ccui.Layout.CanvasRenderCmd._getSharedCache=function(){return cc.ClippingNode._sharedCache||(cc.ClippingNode._sharedCache=document.createElement("canvas"))}}(),function(){if(ccui.ProtectedNode.WebGLRenderCmd){ccui.Layout.WebGLRenderCmd=function(a){ccui.ProtectedNode.WebGLRenderCmd.call(this,a),this._needDraw=!1,this._currentStencilEnabled=0,this._scissorOldState=!1,this._clippingOldRect=null,this._mask_layer_le=0,this._beforeVisitCmdStencil=new cc.CustomRenderCmd(this,this._onBeforeVisitStencil),this._afterDrawStencilCmd=new cc.CustomRenderCmd(this,this._onAfterDrawStencil),this._afterVisitCmdStencil=new cc.CustomRenderCmd(this,this._onAfterVisitStencil),this._beforeVisitCmdScissor=new cc.CustomRenderCmd(this,this._onBeforeVisitScissor),this._afterVisitCmdScissor=new cc.CustomRenderCmd(this,this._onAfterVisitScissor)};var a=ccui.Layout.WebGLRenderCmd.prototype=Object.create(ccui.ProtectedNode.WebGLRenderCmd.prototype);a.constructor=ccui.Layout.WebGLRenderCmd,a.visit=function(a){var b=this._node;if(b._visible)if(a&&a._dirtyFlag&cc.Node._dirtyFlags.transformDirty&&(b._clippingRectDirty=!0),b._adaptRenderers(),b._doLayout(),b._clippingEnabled)switch(b._clippingType){case ccui.Layout.CLIPPING_STENCIL:this.stencilClippingVisit(a);break;case ccui.Layout.CLIPPING_SCISSOR:this.scissorClippingVisit(a)}else this.pNodeVisit(a)},a.layoutVisit=a.visit,a._onBeforeVisitStencil=function(a){var b=a||cc._renderContext;ccui.Layout.WebGLRenderCmd._layer++;var c=1<<ccui.Layout.WebGLRenderCmd._layer,d=c-1;this._mask_layer_le=c|d,this._currentStencilEnabled=b.isEnabled(b.STENCIL_TEST),b.clear(b.DEPTH_BUFFER_BIT),b.enable(b.STENCIL_TEST),b.depthMask(!1),b.stencilFunc(b.NEVER,c,c),b.stencilOp(b.REPLACE,b.KEEP,b.KEEP),b.stencilMask(c),b.clear(b.STENCIL_BUFFER_BIT)},a._onAfterDrawStencil=function(a){var b=a||cc._renderContext;b.depthMask(!0),b.stencilFunc(b.EQUAL,this._mask_layer_le,this._mask_layer_le),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},a._onAfterVisitStencil=function(a){var b=a||cc._renderContext;if(ccui.Layout.WebGLRenderCmd._layer--,this._currentStencilEnabled){var c=1<<ccui.Layout.WebGLRenderCmd._layer,d=c-1,e=c|d;b.stencilMask(c),b.stencilFunc(b.EQUAL,e,e)}else b.disable(b.STENCIL_TEST)},a._onBeforeVisitScissor=function(a){this._node._clippingRectDirty=!0;var b=this._node._getClippingRect(),c=a||cc._renderContext;this._scissorOldState=c.isEnabled(c.SCISSOR_TEST),this._scissorOldState?(this._clippingOldRect=cc.view.getScissorRect(),cc.rectEqualToRect(this._clippingOldRect,b)||cc.view.setScissorInPoints(b.x,b.y,b.width,b.height)):(c.enable(c.SCISSOR_TEST),cc.view.setScissorInPoints(b.x,b.y,b.width,b.height))},a._onAfterVisitScissor=function(a){var b=a||cc._renderContext;this._scissorOldState?cc.rectEqualToRect(this._clippingOldRect,this._node._clippingRect)||cc.view.setScissorInPoints(this._clippingOldRect.x,this._clippingOldRect.y,this._clippingOldRect.width,this._clippingOldRect.height):b.disable(b.SCISSOR_TEST)},a.rebindStencilRendering=function(a){},a.transform=function(a,b){var c=this._node;this.pNodeTransform(a,b),c._clippingStencil&&c._clippingStencil._renderCmd.transform(this,b)},a.stencilClippingVisit=function(a){var b=this._node;if(b._clippingStencil&&b._clippingStencil.isVisible()){if(ccui.Layout.WebGLRenderCmd._layer+1===cc.stencilBits)return ccui.Layout.WebGLRenderCmd._visit_once=!0,ccui.Layout.WebGLRenderCmd._visit_once&&(cc.log("Nesting more than "+cc.stencilBits+"stencils is not supported. Everything will be drawn without stencil for this node and its childs."),ccui.Layout.WebGLRenderCmd._visit_once=!1),void cc.Node.prototype.visit.call(b,a);cc.renderer.pushRenderCommand(this._beforeVisitCmdStencil);var c=cc.current_stack;c.stack.push(c.top),this._syncStatus(a),this._dirtyFlag=0,c.top=this._stackMatrix,b._clippingStencil.visit(this),cc.renderer.pushRenderCommand(this._afterDrawStencilCmd);var d=0,e=0;b.sortAllChildren(),b.sortAllProtectedChildren();for(var f,g=b._children,h=b._protectedChildren,i=g.length,j=h.length;d<i&&(f=g[d],f&&f.getLocalZOrder()<0);d++)f.visit(this);for(;e<j&&(f=h[e],f&&f.getLocalZOrder()<0);e++)f.visit(this);for(;d<i;d++)g[d].visit(this);for(;e<j;e++)h[e].visit(this);cc.renderer.pushRenderCommand(this._afterVisitCmdStencil),c.top=c.stack.pop()}},a.scissorClippingVisit=function(a){cc.renderer.pushRenderCommand(this._beforeVisitCmdScissor),this.pNodeVisit(a),cc.renderer.pushRenderCommand(this._afterVisitCmdScissor)},ccui.Layout.WebGLRenderCmd._layer=-1,ccui.Layout.WebGLRenderCmd._visit_once=null}}(),ccui.Margin=ccui.Class.extend({left:0,top:0,right:0,bottom:0,ctor:function(a,b,c,d){void 0!==a&&void 0===b&&(this.left=a.left,this.top=a.top,this.right=a.right,this.bottom=a.bottom),void 0!==d&&(this.left=a,this.top=b,this.right=c,this.bottom=d)},setMargin:function(a,b,c,d){this.left=a,this.top=b,this.right=c,this.bottom=d},equals:function(a){return this.left===a.left&&this.top===a.top&&this.right===a.right&&this.bottom===a.bottom}}),ccui.MarginZero=function(){return new ccui.Margin(0,0,0,0)},ccui.LayoutParameter=ccui.Class.extend({_margin:null,_layoutParameterType:null,ctor:function(){this._margin=new ccui.Margin,this._layoutParameterType=ccui.LayoutParameter.NONE},setMargin:function(a){cc.isObject(a)?(this._margin.left=a.left,this._margin.top=a.top,this._margin.right=a.right,this._margin.bottom=a.bottom):(this._margin.left=arguments[0],this._margin.top=arguments[1],this._margin.right=arguments[2],this._margin.bottom=arguments[3])},getMargin:function(){return this._margin},getLayoutType:function(){return this._layoutParameterType},clone:function(){var a=this._createCloneInstance();return a._copyProperties(this),a},_createCloneInstance:function(){return new ccui.LayoutParameter},_copyProperties:function(a){this._margin.bottom=a._margin.bottom,this._margin.left=a._margin.left,this._margin.right=a._margin.right,this._margin.top=a._margin.top}}),ccui.LayoutParameter.create=function(){return new ccui.LayoutParameter},ccui.LayoutParameter.NONE=0,ccui.LayoutParameter.LINEAR=1,ccui.LayoutParameter.RELATIVE=2,ccui.LinearLayoutParameter=ccui.LayoutParameter.extend({_linearGravity:null,ctor:function(){ccui.LayoutParameter.prototype.ctor.call(this),this._linearGravity=ccui.LinearLayoutParameter.NONE,this._layoutParameterType=ccui.LayoutParameter.LINEAR},setGravity:function(a){this._linearGravity=a},getGravity:function(){return this._linearGravity},_createCloneInstance:function(){return new ccui.LinearLayoutParameter},_copyProperties:function(a){ccui.LayoutParameter.prototype._copyProperties.call(this,a),a instanceof ccui.LinearLayoutParameter&&this.setGravity(a._linearGravity)}}),ccui.LinearLayoutParameter.create=function(){return new ccui.LinearLayoutParameter},ccui.LinearLayoutParameter.NONE=0,ccui.LinearLayoutParameter.LEFT=1,ccui.LinearLayoutParameter.TOP=2,ccui.LinearLayoutParameter.RIGHT=3,ccui.LinearLayoutParameter.BOTTOM=4,ccui.LinearLayoutParameter.CENTER_VERTICAL=5,ccui.LinearLayoutParameter.CENTER_HORIZONTAL=6,ccui.RelativeLayoutParameter=ccui.LayoutParameter.extend({_relativeAlign:null,_relativeWidgetName:"",_relativeLayoutName:"",_put:!1,ctor:function(){ccui.LayoutParameter.prototype.ctor.call(this),this._relativeAlign=ccui.RelativeLayoutParameter.NONE,this._relativeWidgetName="",this._relativeLayoutName="",this._put=!1,this._layoutParameterType=ccui.LayoutParameter.RELATIVE},setAlign:function(a){this._relativeAlign=a},getAlign:function(){return this._relativeAlign},setRelativeToWidgetName:function(a){this._relativeWidgetName=a},getRelativeToWidgetName:function(){return this._relativeWidgetName},setRelativeName:function(a){this._relativeLayoutName=a},getRelativeName:function(){return this._relativeLayoutName},_createCloneInstance:function(){return new ccui.RelativeLayoutParameter},_copyProperties:function(a){ccui.LayoutParameter.prototype._copyProperties.call(this,a),a instanceof ccui.RelativeLayoutParameter&&(this.setAlign(a._relativeAlign),this.setRelativeToWidgetName(a._relativeWidgetName),this.setRelativeName(a._relativeLayoutName))}}),ccui.RelativeLayoutParameter.create=function(){return new ccui.RelativeLayoutParameter},ccui.RelativeLayoutParameter.NONE=0,ccui.RelativeLayoutParameter.PARENT_TOP_LEFT=1,ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL=2,ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT=3,ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL=4,ccui.RelativeLayoutParameter.CENTER_IN_PARENT=5,ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL=6,ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM=7,ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL=8,ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM=9,ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN=10,ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER=11,ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN=12,ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN=13,ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER=14,ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN=15,ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN=16,ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER=17,ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN=18,ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN=19,ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER=20,ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN=21,
ccui.LINEAR_GRAVITY_NONE=0,ccui.LINEAR_GRAVITY_LEFT=1,ccui.LINEAR_GRAVITY_TOP=2,ccui.LINEAR_GRAVITY_RIGHT=3,ccui.LINEAR_GRAVITY_BOTTOM=4,ccui.LINEAR_GRAVITY_CENTER_VERTICAL=5,ccui.LINEAR_GRAVITY_CENTER_HORIZONTAL=6,ccui.RELATIVE_ALIGN_NONE=0,ccui.RELATIVE_ALIGN_PARENT_TOP_LEFT=1,ccui.RELATIVE_ALIGN_PARENT_TOP_CENTER_HORIZONTAL=2,ccui.RELATIVE_ALIGN_PARENT_TOP_RIGHT=3,ccui.RELATIVE_ALIGN_PARENT_LEFT_CENTER_VERTICAL=4,ccui.RELATIVE_ALIGN_PARENT_CENTER=5,ccui.RELATIVE_ALIGN_PARENT_RIGHT_CENTER_VERTICAL=6,ccui.RELATIVE_ALIGN_PARENT_LEFT_BOTTOM=7,ccui.RELATIVE_ALIGN_PARENT_BOTTOM_CENTER_HORIZONTAL=8,ccui.RELATIVE_ALIGN_PARENT_RIGHT_BOTTOM=9,ccui.RELATIVE_ALIGN_LOCATION_ABOVE_LEFT=10,ccui.RELATIVE_ALIGN_LOCATION_ABOVE_CENTER=11,ccui.RELATIVE_ALIGN_LOCATION_ABOVE_RIGHT=12,ccui.RELATIVE_ALIGN_LOCATION_LEFT_TOP=13,ccui.RELATIVE_ALIGN_LOCATION_LEFT_CENTER=14,ccui.RELATIVE_ALIGN_LOCATION_LEFT_BOTTOM=15,ccui.RELATIVE_ALIGN_LOCATION_RIGHT_TOP=16,ccui.RELATIVE_ALIGN_LOCATION_RIGHT_CENTER=17,ccui.RELATIVE_ALIGN_LOCATION_RIGHT_BOTTOM=18,ccui.RELATIVE_ALIGN_LOCATION_BELOW_TOP=19,ccui.RELATIVE_ALIGN_LOCATION_BELOW_CENTER=20,ccui.RELATIVE_ALIGN_LOCATION_BELOW_BOTTOM=21,ccui.getLayoutManager=function(a){switch(a){case ccui.Layout.LINEAR_VERTICAL:return ccui.linearVerticalLayoutManager;case ccui.Layout.LINEAR_HORIZONTAL:return ccui.linearHorizontalLayoutManager;case ccui.Layout.RELATIVE:return ccui.relativeLayoutManager}return null},ccui.linearVerticalLayoutManager={_doLayout:function(a){for(var b=a._getLayoutContentSize(),c=a._getLayoutElements(),d=b.height,e=0,f=c.length;e<f;e++){var g=c[e];if(g){var h=g.getLayoutParameter();if(h){var i=h.getGravity(),j=g.getAnchorPoint(),k=g.getContentSize(),l=j.x*k.width,m=d-(1-j.y)*k.height;switch(i){case ccui.LinearLayoutParameter.NONE:case ccui.LinearLayoutParameter.LEFT:break;case ccui.LinearLayoutParameter.RIGHT:l=b.width-(1-j.x)*k.width;break;case ccui.LinearLayoutParameter.CENTER_HORIZONTAL:l=b.width/2-k.width*(.5-j.x)}var n=h.getMargin();l+=n.left,m-=n.top,g.setPosition(l,m),d=g.getPositionY()-j.y*k.height-n.bottom}}}}},ccui.linearHorizontalLayoutManager={_doLayout:function(a){for(var b=a._getLayoutContentSize(),c=a._getLayoutElements(),d=0,e=0,f=c.length;e<f;e++){var g=c[e];if(g){var h=g.getLayoutParameter();if(h){var i=h.getGravity(),j=g.getAnchorPoint(),k=g.getContentSize(),l=d+j.x*k.width,m=b.height-(1-j.y)*k.height;switch(i){case ccui.LinearLayoutParameter.NONE:case ccui.LinearLayoutParameter.TOP:break;case ccui.LinearLayoutParameter.BOTTOM:m=j.y*k.height;break;case ccui.LinearLayoutParameter.CENTER_VERTICAL:m=b.height/2-k.height*(.5-j.y)}var n=h.getMargin();l+=n.left,m-=n.top,g.setPosition(l,m),d=g.getRightBoundary()+n.right}}}}},ccui.relativeLayoutManager={_unlayoutChildCount:0,_widgetChildren:[],_widget:null,_finalPositionX:0,_finalPositionY:0,_relativeWidgetLP:null,_doLayout:function(a){this._widgetChildren=this._getAllWidgets(a);for(var b=this._widgetChildren;this._unlayoutChildCount>0;){for(var c=0,d=b.length;c<d;c++){this._widget=b[c];var e=this._widget.getLayoutParameter();if(e){if(e._put)continue;var f=this._calculateFinalPositionWithRelativeWidget(a);if(!f)continue;this._calculateFinalPositionWithRelativeAlign(),this._widget.setPosition(this._finalPositionX,this._finalPositionY),e._put=!0}}this._unlayoutChildCount--}this._widgetChildren.length=0},_getAllWidgets:function(a){var b=a._getLayoutElements(),c=this._widgetChildren;c.length=0;for(var d=0,e=b.length;d<e;d++){var f=b[d];if(f&&f instanceof ccui.Widget){var g=f.getLayoutParameter();g._put=!1,this._unlayoutChildCount++,c.push(f)}}return c},_getRelativeWidget:function(a){var b=null,c=a.getLayoutParameter(),d=c.getRelativeToWidgetName();if(d&&0!==d.length)for(var e=this._widgetChildren,f=0,g=e.length;f<g;f++){var h=e[f];if(h){var i=h.getLayoutParameter();if(i&&i.getRelativeName()===d){b=h,this._relativeWidgetLP=i;break}}}return b},_calculateFinalPositionWithRelativeWidget:function(a){var b=this._widget,c=b.getAnchorPoint(),d=b.getContentSize();this._finalPositionX=0,this._finalPositionY=0;var e=this._getRelativeWidget(b),f=b.getLayoutParameter(),g=f.getAlign(),h=a._getLayoutContentSize();switch(g){case ccui.RelativeLayoutParameter.NONE:case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:this._finalPositionX=c.x*d.width,this._finalPositionY=h.height-(1-c.y)*d.height;break;case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:this._finalPositionX=.5*h.width-d.width*(.5-c.x),this._finalPositionY=h.height-(1-c.y)*d.height;break;case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:this._finalPositionX=h.width-(1-c.x)*d.width,this._finalPositionY=h.height-(1-c.y)*d.height;break;case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:this._finalPositionX=c.x*d.width,this._finalPositionY=.5*h.height-d.height*(.5-c.y);break;case ccui.RelativeLayoutParameter.CENTER_IN_PARENT:this._finalPositionX=.5*h.width-d.width*(.5-c.x),this._finalPositionY=.5*h.height-d.height*(.5-c.y);break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:this._finalPositionX=h.width-(1-c.x)*d.width,this._finalPositionY=.5*h.height-d.height*(.5-c.y);break;case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:this._finalPositionX=c.x*d.width,this._finalPositionY=c.y*d.height;break;case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:this._finalPositionX=.5*h.width-d.width*(.5-c.x),this._finalPositionY=c.y*d.height;break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:this._finalPositionX=h.width-(1-c.x)*d.width,this._finalPositionY=c.y*d.height;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getTopBoundary()+c.y*d.height,this._finalPositionX=e.getLeftBoundary()+c.x*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;var i=e.getContentSize();this._finalPositionY=e.getTopBoundary()+c.y*d.height,this._finalPositionX=e.getLeftBoundary()+.5*i.width+c.x*d.width-.5*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getTopBoundary()+c.y*d.height,this._finalPositionX=e.getRightBoundary()-(1-c.x)*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getTopBoundary()-(1-c.y)*d.height,this._finalPositionX=e.getLeftBoundary()-(1-c.x)*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;var i=e.getContentSize();this._finalPositionX=e.getLeftBoundary()-(1-c.x)*d.width,this._finalPositionY=e.getBottomBoundary()+.5*i.height+c.y*d.height-.5*d.height}break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getBottomBoundary()+c.y*d.height,this._finalPositionX=e.getLeftBoundary()-(1-c.x)*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getTopBoundary()-(1-c.y)*d.height,this._finalPositionX=e.getRightBoundary()+c.x*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;var i=e.getContentSize(),j=e.getRightBoundary();this._finalPositionX=j+c.x*d.width,this._finalPositionY=e.getBottomBoundary()+.5*i.height+c.y*d.height-.5*d.height}break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getBottomBoundary()+c.y*d.height,this._finalPositionX=e.getRightBoundary()+c.x*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getBottomBoundary()-(1-c.y)*d.height,this._finalPositionX=e.getLeftBoundary()+c.x*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;var i=e.getContentSize();this._finalPositionY=e.getBottomBoundary()-(1-c.y)*d.height,this._finalPositionX=e.getLeftBoundary()+.5*i.width+c.x*d.width-.5*d.width}break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:if(e){if(this._relativeWidgetLP&&!this._relativeWidgetLP._put)return!1;this._finalPositionY=e.getBottomBoundary()-(1-c.y)*d.height,this._finalPositionX=e.getRightBoundary()-(1-c.x)*d.width}}return!0},_calculateFinalPositionWithRelativeAlign:function(){var a=this._widget.getLayoutParameter(),b=a.getMargin(),c=a.getAlign();switch(c){case ccui.RelativeLayoutParameter.NONE:case ccui.RelativeLayoutParameter.PARENT_TOP_LEFT:this._finalPositionX+=b.left,this._finalPositionY-=b.top;break;case ccui.RelativeLayoutParameter.PARENT_TOP_CENTER_HORIZONTAL:this._finalPositionY-=b.top;break;case ccui.RelativeLayoutParameter.PARENT_TOP_RIGHT:this._finalPositionX-=b.right,this._finalPositionY-=b.top;break;case ccui.RelativeLayoutParameter.PARENT_LEFT_CENTER_VERTICAL:this._finalPositionX+=b.left;break;case ccui.RelativeLayoutParameter.CENTER_IN_PARENT:break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_CENTER_VERTICAL:this._finalPositionX-=b.right;break;case ccui.RelativeLayoutParameter.PARENT_LEFT_BOTTOM:this._finalPositionX+=b.left,this._finalPositionY+=b.bottom;break;case ccui.RelativeLayoutParameter.PARENT_BOTTOM_CENTER_HORIZONTAL:this._finalPositionY+=b.bottom;break;case ccui.RelativeLayoutParameter.PARENT_RIGHT_BOTTOM:this._finalPositionX-=b.right,this._finalPositionY+=b.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_LEFTALIGN:this._finalPositionY+=b.bottom,this._finalPositionX+=b.left;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_RIGHTALIGN:this._finalPositionY+=b.bottom,this._finalPositionX-=b.right;break;case ccui.RelativeLayoutParameter.LOCATION_ABOVE_CENTER:this._finalPositionY+=b.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_TOPALIGN:this._finalPositionX-=b.right,this._finalPositionY-=b.top;break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_BOTTOMALIGN:this._finalPositionX-=b.right,this._finalPositionY+=b.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_LEFT_OF_CENTER:this._finalPositionX-=b.right;break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_TOPALIGN:this._finalPositionX+=b.left,this._finalPositionY-=b.top;break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_BOTTOMALIGN:this._finalPositionX+=b.left,this._finalPositionY+=b.bottom;break;case ccui.RelativeLayoutParameter.LOCATION_RIGHT_OF_CENTER:this._finalPositionX+=b.left;break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_LEFTALIGN:this._finalPositionY-=b.top,this._finalPositionX+=b.left;break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_RIGHTALIGN:this._finalPositionY-=b.top,this._finalPositionX-=b.right;break;case ccui.RelativeLayoutParameter.LOCATION_BELOW_CENTER:this._finalPositionY-=b.top}}},ccui.HBox=ccui.Layout.extend({ctor:function(a){ccui.Layout.prototype.ctor.call(this),this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL),a&&this.setContentSize(a)}}),ccui.HBox.create=function(a){return new ccui.HBox(a)},ccui.RelativeBox=ccui.Layout.extend({ctor:function(a){ccui.Layout.prototype.ctor.call(this),this.setLayoutType(ccui.Layout.RELATIVE),a&&this.setContentSize(a)}}),ccui.RelativeBox.create=function(a){return new ccui.RelativeBox(a)},ccui.VBox=ccui.Layout.extend({ctor:function(a){ccui.Layout.prototype.ctor.call(this),this.setLayoutType(ccui.Layout.LINEAR_VERTICAL),a&&this.setContentSize(a)},initWithSize:function(a){return!!this.init()}}),ccui.VBox.create=function(a){return new ccui.VBox(a)},ccui.helper={seekWidgetByTag:function(a,b){if(!a)return null;if(a.getTag()===b)return a;for(var c=a.getChildren(),d=c.length,e=0;e<d;e++){var f=c[e],g=ccui.helper.seekWidgetByTag(f,b);if(null!==g)return g}return null},seekWidgetByName:function(a,b){if(!a)return null;if(a.getName()===b)return a;for(var c=a.getChildren(),d=c.length,e=0;e<d;e++){var f=c[e],g=ccui.helper.seekWidgetByName(f,b);if(null!==g)return g}return null},seekWidgetByRelativeName:function(a,b){if(!a)return null;for(var c=a.getChildren(),d=c.length,e=0;e<d;e++){var f=c[e],g=f.getLayoutParameter(ccui.LayoutParameter.RELATIVE);if(g&&g.getRelativeName()===b)return f}return null},seekActionWidgetByActionTag:function(a,b){if(!a)return null;if(a.getActionTag()===b)return a;for(var c=a.getChildren(),d=0;d<c.length;d++){var e=c[d],f=ccui.helper.seekActionWidgetByActionTag(e,b);if(null!==f)return f}return null},_activeLayout:!0,doLayout:function(a){if(this._activeLayout)for(var b,c=a.getChildren(),d=0,e=c.length;d<e;d++){b=c[d];var f=b.getComponent(ccui.LayoutComponent.NAME),g=b.getParent();null!=f&&null!==g&&f.refreshLayout&&f.refreshLayout()}},changeLayoutSystemActiveState:function(a){this._activeLayout=a},restrictCapInsetRect:function(a,b){var c=a.x,d=a.y,e=a.width,f=a.height;return b.width<e&&(c=0,e=0),b.height<f&&(d=0,f=0),cc.rect(c,d,e,f)},_createSpriteFromBase64:function(a,b){var c=cc.textureCache.getTextureForKey(b);if(!c){var d=new Image;d.src=a,cc.textureCache.cacheImage(b,d),c=cc.textureCache.getTextureForKey(b)}var e=new cc.Sprite(c);return e}},ccui.Button=ccui.Widget.extend({_buttonNormalRenderer:null,_buttonClickedRenderer:null,_buttonDisableRenderer:null,_titleRenderer:null,_normalFileName:"",_clickedFileName:"",_disabledFileName:"",_prevIgnoreSize:!0,_scale9Enabled:!1,_capInsetsNormal:null,_capInsetsPressed:null,_capInsetsDisabled:null,_normalTexType:ccui.Widget.LOCAL_TEXTURE,_pressedTexType:ccui.Widget.LOCAL_TEXTURE,_disabledTexType:ccui.Widget.LOCAL_TEXTURE,_normalTextureSize:null,_pressedTextureSize:null,_disabledTextureSize:null,pressedActionEnabled:!1,_titleColor:null,_normalTextureScaleXInSize:1,_normalTextureScaleYInSize:1,_pressedTextureScaleXInSize:1,_pressedTextureScaleYInSize:1,_zoomScale:.1,_normalTextureLoaded:!1,_pressedTextureLoaded:!1,_disabledTextureLoaded:!1,_className:"Button",_normalTextureAdaptDirty:!0,_pressedTextureAdaptDirty:!0,_disabledTextureAdaptDirty:!0,_fontName:"Thonburi",_fontSize:12,_type:0,ctor:function(a,b,c,d){this._capInsetsNormal=cc.rect(0,0,0,0),this._capInsetsPressed=cc.rect(0,0,0,0),this._capInsetsDisabled=cc.rect(0,0,0,0),this._normalTextureSize=cc.size(0,0),this._pressedTextureSize=cc.size(0,0),this._disabledTextureSize=cc.size(0,0),this._titleColor=cc.color.WHITE,ccui.Widget.prototype.ctor.call(this),this.setTouchEnabled(!0),a&&this.loadTextures(a,b,c,d)},_initRenderer:function(){this._buttonNormalRenderer=new cc.Sprite,this._buttonClickedRenderer=new cc.Sprite,this._buttonDisableRenderer=new cc.Sprite,this._titleRenderer=new cc.LabelTTF(""),this._titleRenderer.setAnchorPoint(.5,.5),this.addProtectedChild(this._buttonNormalRenderer,ccui.Button.NORMAL_RENDERER_ZORDER,-1),this.addProtectedChild(this._buttonClickedRenderer,ccui.Button.PRESSED_RENDERER_ZORDER,-1),this.addProtectedChild(this._buttonDisableRenderer,ccui.Button.DISABLED_RENDERER_ZORDER,-1),this.addProtectedChild(this._titleRenderer,ccui.Button.TITLE_RENDERER_ZORDER,-1)},setScale9Enabled:function(a){if(this._scale9Enabled!==a){if(this._brightStyle=ccui.Widget.BRIGHT_STYLE_NONE,this._scale9Enabled=a,this.removeProtectedChild(this._buttonNormalRenderer),this.removeProtectedChild(this._buttonClickedRenderer),this.removeProtectedChild(this._buttonDisableRenderer),this._scale9Enabled?(this._buttonNormalRenderer=new ccui.Scale9Sprite,this._buttonClickedRenderer=new ccui.Scale9Sprite,this._buttonDisableRenderer=new ccui.Scale9Sprite):(this._buttonNormalRenderer=new cc.Sprite,this._buttonClickedRenderer=new cc.Sprite,this._buttonDisableRenderer=new cc.Sprite),this._buttonClickedRenderer.setVisible(!1),this._buttonDisableRenderer.setVisible(!1),this.loadTextureNormal(this._normalFileName,this._normalTexType),this.loadTexturePressed(this._clickedFileName,this._pressedTexType),this.loadTextureDisabled(this._disabledFileName,this._disabledTexType),this.addProtectedChild(this._buttonNormalRenderer,ccui.Button.NORMAL_RENDERER_ZORDER,-1),this.addProtectedChild(this._buttonClickedRenderer,ccui.Button.PRESSED_RENDERER_ZORDER,-1),this.addProtectedChild(this._buttonDisableRenderer,ccui.Button.DISABLED_RENDERER_ZORDER,-1),this._scale9Enabled){var b=this._ignoreSize;this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=b}else this.ignoreContentAdaptWithSize(this._prevIgnoreSize);this.setCapInsetsNormalRenderer(this._capInsetsNormal),this.setCapInsetsPressedRenderer(this._capInsetsPressed),this.setCapInsetsDisabledRenderer(this._capInsetsDisabled),this.setBright(this._bright),this._normalTextureAdaptDirty=!0,this._pressedTextureAdaptDirty=!0,this._disabledTextureAdaptDirty=!0}},isScale9Enabled:function(){return this._scale9Enabled},ignoreContentAdaptWithSize:function(a){return this._unifySize?void this._updateContentSize():void((!this._scale9Enabled||this._scale9Enabled&&!a)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,a),this._prevIgnoreSize=a))},getVirtualRendererSize:function(){return this._unifySize?this._getNormalSize():!this._normalTextureLoaded&&this._titleRenderer.getString().length>0?this._titleRenderer.getContentSize():cc.size(this._normalTextureSize)},loadTextures:function(a,b,c,d){this.loadTextureNormal(a,d),this.loadTexturePressed(b,d),this.loadTextureDisabled(c,d)},loadTextureNormal:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._normalFileName=a,this._normalTexType=b;var c=this,d=this._buttonNormalRenderer;switch(d._textureLoaded||d.addEventListener("load",function(){c.loadTextureNormal(c._normalFileName,c._normalTexType)}),this._normalTexType){case ccui.Widget.LOCAL_TEXTURE:d.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:d.initWithSpriteFrameName(a)}this._normalTextureLoaded=d._textureLoaded,this._normalTextureSize=this._buttonNormalRenderer.getContentSize(),this._updateChildrenDisplayedRGBA(),this._unifySize?this._scale9Enabled&&(d.setCapInsets(this._capInsetsNormal),this._updateContentSizeWithTextureSize(this._getNormalSize())):this._updateContentSizeWithTextureSize(this._normalTextureSize),this._normalTextureAdaptDirty=!0,this._findLayout()}},loadTexturePressed:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._clickedFileName=a,this._pressedTexType=b;var c=this,d=this._buttonClickedRenderer;switch(d._textureLoaded||d.addEventListener("load",function(){c.loadTexturePressed(c._clickedFileName,c._pressedTexType)}),this._pressedTexType){case ccui.Widget.LOCAL_TEXTURE:d.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:d.initWithSpriteFrameName(a)}this._scale9Enabled&&d.setCapInsets(this._capInsetsPressed),this._pressedTextureSize=this._buttonClickedRenderer.getContentSize(),this._updateChildrenDisplayedRGBA(),this._pressedTextureLoaded=!0,this._pressedTextureAdaptDirty=!0,this._findLayout()}},loadTextureDisabled:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._disabledFileName=a,this._disabledTexType=b;var c=this,d=this._buttonDisableRenderer;switch(d._textureLoaded||d.addEventListener("load",function(){c.loadTextureDisabled(c._disabledFileName,c._disabledTexType)}),this._disabledTexType){case ccui.Widget.LOCAL_TEXTURE:d.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:d.initWithSpriteFrameName(a)}this._scale9Enabled&&d.setCapInsets(this._capInsetsDisabled),this._disabledTextureSize=this._buttonDisableRenderer.getContentSize(),this._updateChildrenDisplayedRGBA(),this._disabledTextureLoaded=!0,this._disabledTextureAdaptDirty=!0,this._findLayout()}},setCapInsets:function(a){this.setCapInsetsNormalRenderer(a),this.setCapInsetsPressedRenderer(a),this.setCapInsetsDisabledRenderer(a)},setCapInsetsNormalRenderer:function(a){if(a){var b=a.x,c=a.y,d=a.width,e=a.height;this._normalTextureSize.width<d&&(b=0,d=0),this._normalTextureSize.height<e&&(c=0,e=0);var f=this._capInsetsNormal;f.x=b,f.y=c,f.width=d,f.height=e,this._scale9Enabled&&this._buttonNormalRenderer.setCapInsets(f)}},getCapInsetsNormalRenderer:function(){return cc.rect(this._capInsetsNormal)},setCapInsetsPressedRenderer:function(a){if(a&&this._scale9Enabled){var b=a.x,c=a.y,d=a.width,e=a.height;this._pressedTextureSize.width<d&&(b=0,d=0),this._pressedTextureSize.height<e&&(c=0,e=0);var f=this._capInsetsPressed;f.x=b,f.y=c,f.width=d,f.height=e,this._buttonClickedRenderer.setCapInsets(f)}},getCapInsetsPressedRenderer:function(){return cc.rect(this._capInsetsPressed)},setCapInsetsDisabledRenderer:function(a){if(a&&this._scale9Enabled){var b=a.x,c=a.y,d=a.width,e=a.height;this._disabledTextureSize.width<d&&(b=0,d=0),this._disabledTextureSize.height<e&&(c=0,e=0);var f=this._capInsetsDisabled;f.x=b,f.y=c,f.width=d,f.height=e,this._buttonDisableRenderer.setCapInsets(f)}},getCapInsetsDisabledRenderer:function(){return cc.rect(this._capInsetsDisabled)},_onPressStateChangedToNormal:function(){if(this._buttonNormalRenderer.setVisible(!0),this._buttonClickedRenderer.setVisible(!1),this._buttonDisableRenderer.setVisible(!1),this._scale9Enabled&&this._buttonNormalRenderer.setState(ccui.Scale9Sprite.state.NORMAL),this._pressedTextureLoaded){if(this.pressedActionEnabled)if(this._buttonNormalRenderer.stopAllActions(),this._buttonClickedRenderer.stopAllActions(),this._buttonNormalRenderer.setScale(this._normalTextureScaleXInSize,this._normalTextureScaleYInSize),this._buttonClickedRenderer.setScale(this._pressedTextureScaleXInSize,this._pressedTextureScaleYInSize),this._titleRenderer.stopAllActions(),this._unifySize){var a=cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,1,1);this._titleRenderer.runAction(a)}else this._titleRenderer.setScaleX(1),this._titleRenderer.setScaleY(1)}else this._buttonNormalRenderer.stopAllActions(),this._buttonNormalRenderer.setScale(this._normalTextureScaleXInSize,this._normalTextureScaleYInSize),this._titleRenderer.stopAllActions(),this._scale9Enabled&&this._buttonNormalRenderer.setColor(cc.color.WHITE),this._titleRenderer.setScaleX(1),this._titleRenderer.setScaleY(1)},_onPressStateChangedToPressed:function(){var a=this._buttonNormalRenderer;if(this._scale9Enabled&&a.setState(ccui.Scale9Sprite.state.NORMAL),this._pressedTextureLoaded){if(a.setVisible(!1),this._buttonClickedRenderer.setVisible(!0),this._buttonDisableRenderer.setVisible(!1),this.pressedActionEnabled){a.stopAllActions(),this._buttonClickedRenderer.stopAllActions();var b=cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,this._pressedTextureScaleXInSize+this._zoomScale,this._pressedTextureScaleYInSize+this._zoomScale);this._buttonClickedRenderer.runAction(b),a.setScale(this._pressedTextureScaleXInSize+this._zoomScale,this._pressedTextureScaleYInSize+this._zoomScale),this._titleRenderer.stopAllActions(),this._titleRenderer.runAction(cc.scaleTo(ccui.Button.ZOOM_ACTION_TIME_STEP,1+this._zoomScale,1+this._zoomScale))}}else a.setVisible(!0),this._buttonClickedRenderer.setVisible(!0),this._buttonDisableRenderer.setVisible(!1),a.stopAllActions(),a.setScale(this._normalTextureScaleXInSize+this._zoomScale,this._normalTextureScaleYInSize+this._zoomScale),this._titleRenderer.stopAllActions(),this._titleRenderer.setScaleX(1+this._zoomScale),this._titleRenderer.setScaleY(1+this._zoomScale)},_onPressStateChangedToDisabled:function(){this._disabledTextureLoaded?(this._buttonNormalRenderer.setVisible(!1),this._buttonDisableRenderer.setVisible(!0)):this._normalTextureLoaded&&this._scale9Enabled&&this._buttonNormalRenderer.setState(ccui.Scale9Sprite.state.GRAY),this._buttonClickedRenderer.setVisible(!1),this._buttonNormalRenderer.setScale(this._normalTextureScaleXInSize,this._normalTextureScaleYInSize),this._buttonClickedRenderer.setScale(this._pressedTextureScaleXInSize,this._pressedTextureScaleYInSize)},_updateContentSize:function(){if(this._unifySize){if(this._scale9Enabled)ccui.ProtectedNode.setContentSize(this._customSize);else{var a=this._getNormalSize();ccui.ProtectedNode.setContentSize(a)}return void this._onSizeChanged()}this._ignoreSize&&this.setContentSize(this.getVirtualRendererSize())},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._updateTitleLocation(),this._normalTextureAdaptDirty=!0,this._pressedTextureAdaptDirty=!0,this._disabledTextureAdaptDirty=!0},getVirtualRenderer:function(){if(!this._bright)return this._buttonDisableRenderer;switch(this._brightStyle){case ccui.Widget.BRIGHT_STYLE_NORMAL:return this._buttonNormalRenderer;case ccui.Widget.BRIGHT_STYLE_HIGH_LIGHT:return this._buttonClickedRenderer;default:return null}},_normalTextureScaleChangedWithSize:function(){if(this._ignoreSize&&!this._unifySize)this._scale9Enabled||(this._buttonNormalRenderer.setScale(1),this._normalTextureScaleXInSize=this._normalTextureScaleYInSize=1);else if(this._scale9Enabled)this._buttonNormalRenderer.setPreferredSize(this._contentSize),this._normalTextureScaleXInSize=this._normalTextureScaleYInSize=1,this._buttonNormalRenderer.setScale(this._normalTextureScaleXInSize,this._normalTextureScaleYInSize);else{var a=this._normalTextureSize;if(a.width<=0||a.height<=0)return void this._buttonNormalRenderer.setScale(1);var b=this._contentSize.width/a.width,c=this._contentSize.height/a.height;this._buttonNormalRenderer.setScaleX(b),this._buttonNormalRenderer.setScaleY(c),this._normalTextureScaleXInSize=b,this._normalTextureScaleYInSize=c}this._buttonNormalRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},_pressedTextureScaleChangedWithSize:function(){if(this._ignoreSize&&!this._unifySize)this._scale9Enabled||(this._buttonClickedRenderer.setScale(1),this._pressedTextureScaleXInSize=this._pressedTextureScaleYInSize=1);else if(this._scale9Enabled)this._buttonClickedRenderer.setPreferredSize(this._contentSize),this._pressedTextureScaleXInSize=this._pressedTextureScaleYInSize=1,this._buttonClickedRenderer.setScale(this._pressedTextureScaleXInSize,this._pressedTextureScaleYInSize);else{var a=this._pressedTextureSize;if(a.width<=0||a.height<=0)return void this._buttonClickedRenderer.setScale(1);var b=this._contentSize.width/a.width,c=this._contentSize.height/a.height;this._buttonClickedRenderer.setScaleX(b),this._buttonClickedRenderer.setScaleY(c),this._pressedTextureScaleXInSize=b,this._pressedTextureScaleYInSize=c}this._buttonClickedRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},_disabledTextureScaleChangedWithSize:function(){if(this._ignoreSize&&!this._unifySize)this._scale9Enabled&&this._buttonDisableRenderer.setScale(1);else if(this._scale9Enabled)this._buttonDisableRenderer.setScale(1),this._buttonDisableRenderer.setPreferredSize(this._contentSize);else{var a=this._disabledTextureSize;if(a.width<=0||a.height<=0)return void this._buttonDisableRenderer.setScale(1);var b=this._contentSize.width/a.width,c=this._contentSize.height/a.height;this._buttonDisableRenderer.setScaleX(b),this._buttonDisableRenderer.setScaleY(c)}this._buttonDisableRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},_adaptRenderers:function(){this._normalTextureAdaptDirty&&(this._normalTextureScaleChangedWithSize(),this._normalTextureAdaptDirty=!1),this._pressedTextureAdaptDirty&&(this._pressedTextureScaleChangedWithSize(),this._pressedTextureAdaptDirty=!1),this._disabledTextureAdaptDirty&&(this._disabledTextureScaleChangedWithSize(),this._disabledTextureAdaptDirty=!1)},_updateTitleLocation:function(){this._titleRenderer.setPosition(.5*this._contentSize.width,.5*this._contentSize.height)},setPressedActionEnabled:function(a){this.pressedActionEnabled=a},setTitleText:function(a){if(a!==this.getTitleText())if(this._titleRenderer.setString(a),this._ignoreSize){var b=this.getVirtualRendererSize();this.setContentSize(b)}else this._titleRenderer._renderCmd._updateTTF()},getTitleText:function(){return this._titleRenderer.getString()},setTitleColor:function(a){this._titleRenderer.setFontFillColor(a)},getTitleColor:function(){return this._titleRenderer._getFillStyle()},setTitleFontSize:function(a){this._titleRenderer.setFontSize(a),this._fontSize=a},getTitleFontSize:function(){return this._titleRenderer.getFontSize()},setZoomScale:function(a){this._zoomScale=a},getZoomScale:function(){return this._zoomScale},getNormalTextureSize:function(){return this._normalTextureSize},setTitleFontName:function(a){this._titleRenderer.setFontName(a),this._fontName=a},getTitleRenderer:function(){return this._titleRenderer},getTitleFontName:function(){return this._titleRenderer.getFontName()},_setTitleFont:function(a){this._titleRenderer.font=a},_getTitleFont:function(){return this._titleRenderer.font},getDescription:function(){return"Button"},_createCloneInstance:function(){return new ccui.Button},_copySpecialProperties:function(a){this._prevIgnoreSize=a._prevIgnoreSize,this.setScale9Enabled(a._scale9Enabled),this.loadTextureNormal(a._normalFileName,a._normalTexType),this.loadTexturePressed(a._clickedFileName,a._pressedTexType),this.loadTextureDisabled(a._disabledFileName,a._disabledTexType),this.setCapInsetsNormalRenderer(a._capInsetsNormal),this.setCapInsetsPressedRenderer(a._capInsetsPressed),this.setCapInsetsDisabledRenderer(a._capInsetsDisabled),this.setTitleText(a.getTitleText()),this.setTitleFontName(a.getTitleFontName()),this.setTitleFontSize(a.getTitleFontSize()),this.setTitleColor(a.getTitleColor()),this.setPressedActionEnabled(a.pressedActionEnabled),this.setZoomScale(a._zoomScale)},_getNormalSize:function(){var a;null!==this._titleRenderer&&(a=this._titleRenderer.getContentSize());var b;null!==this._buttonNormalRenderer&&(b=this._buttonNormalRenderer.getContentSize());var c=a.width>b.width?a.width:b.width,d=a.height>b.height?a.height:b.height;return cc.size(c,d)}});var _p=ccui.Button.prototype;_p.titleText,cc.defineGetterSetter(_p,"titleText",_p.getTitleText,_p.setTitleText),_p.titleFont,cc.defineGetterSetter(_p,"titleFont",_p._getTitleFont,_p._setTitleFont),_p.titleFontSize,cc.defineGetterSetter(_p,"titleFontSize",_p.getTitleFontSize,_p.setTitleFontSize),_p.titleFontName,cc.defineGetterSetter(_p,"titleFontName",_p.getTitleFontName,_p.setTitleFontName),_p.titleColor,cc.defineGetterSetter(_p,"titleColor",_p.getTitleColor,_p.setTitleColor),_p=null,ccui.Button.create=function(a,b,c,d){return new ccui.Button(a,b,c,d)},ccui.Button.NORMAL_RENDERER_ZORDER=-2,ccui.Button.PRESSED_RENDERER_ZORDER=-2,ccui.Button.DISABLED_RENDERER_ZORDER=-2,ccui.Button.TITLE_RENDERER_ZORDER=-1,ccui.Button.ZOOM_ACTION_TIME_STEP=.05,ccui.Button.SYSTEM=0,ccui.Button.TTF=1,ccui.CheckBox=ccui.Widget.extend({_backGroundBoxRenderer:null,_backGroundSelectedBoxRenderer:null,_frontCrossRenderer:null,_backGroundBoxDisabledRenderer:null,_frontCrossDisabledRenderer:null,_isSelected:!0,_checkBoxEventListener:null,_checkBoxEventSelector:null,_backGroundTexType:ccui.Widget.LOCAL_TEXTURE,_backGroundSelectedTexType:ccui.Widget.LOCAL_TEXTURE,_frontCrossTexType:ccui.Widget.LOCAL_TEXTURE,_backGroundDisabledTexType:ccui.Widget.LOCAL_TEXTURE,_frontCrossDisabledTexType:ccui.Widget.LOCAL_TEXTURE,_backGroundFileName:"",_backGroundSelectedFileName:"",_frontCrossFileName:"",_backGroundDisabledFileName:"",_frontCrossDisabledFileName:"",_className:"CheckBox",_zoomScale:.1,_backgroundTextureScaleX:.1,_backgroundTextureScaleY:.1,_backGroundBoxRendererAdaptDirty:!0,_backGroundSelectedBoxRendererAdaptDirty:!0,_frontCrossRendererAdaptDirty:!0,_backGroundBoxDisabledRendererAdaptDirty:!0,_frontCrossDisabledRendererAdaptDirty:!0,ctor:function(a,b,c,d,e,f){ccui.Widget.prototype.ctor.call(this),this.setTouchEnabled(!0);for(var g=0,h=0;h<arguments.length;h++){var i=typeof arguments[h];"string"===i?isNaN(arguments[h]-0)?g++:(f=arguments[h],arguments[h]=void 0):"number"===i&&g++}switch(g){case 2:f=c,c=b,b=void 0}f=void 0===f?0:f,this._isSelected=!0,this.setSelected(!1),this.loadTextures(a,b,c,d,e,f)},_initRenderer:function(){this._backGroundBoxRenderer=new cc.Sprite,this._backGroundSelectedBoxRenderer=new cc.Sprite,
this._frontCrossRenderer=new cc.Sprite,this._backGroundBoxDisabledRenderer=new cc.Sprite,this._frontCrossDisabledRenderer=new cc.Sprite,this.addProtectedChild(this._backGroundBoxRenderer,ccui.CheckBox.BOX_RENDERER_ZORDER,-1),this.addProtectedChild(this._backGroundSelectedBoxRenderer,ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER,-1),this.addProtectedChild(this._frontCrossRenderer,ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER,-1),this.addProtectedChild(this._backGroundBoxDisabledRenderer,ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER,-1),this.addProtectedChild(this._frontCrossDisabledRenderer,ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER,-1)},loadTextures:function(a,b,c,d,e,f){a&&this.loadTextureBackGround(a,f),b&&this.loadTextureBackGroundSelected(b,f),c&&this.loadTextureFrontCross(c,f),d&&this.loadTextureBackGroundDisabled(d,f),e&&this.loadTextureFrontCrossDisabled(e,f)},loadTextureBackGround:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._backGroundFileName=a,this._backGroundTexType=b;var c=this._backGroundBoxRenderer;switch(c._textureLoaded?this._backGroundBoxRenderer.setContentSize(this._customSize):c.addEventListener("load",function(){this._updateContentSizeWithTextureSize(this._backGroundBoxRenderer.getContentSize()),this.loadTextureBackGround(this._backGroundFileName,this._backGroundTexType)},this),this._backGroundTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._updateContentSizeWithTextureSize(this._backGroundBoxRenderer.getContentSize()),this._backGroundBoxRendererAdaptDirty=!0,this._findLayout()}},loadTextureBackGroundSelected:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._backGroundSelectedFileName=a,this._backGroundSelectedTexType=b;var c=this._backGroundSelectedBoxRenderer;switch(c._textureLoaded||c.addEventListener("load",function(){this.loadTextureBackGroundSelected(this._backGroundSelectedFileName,this._backGroundSelectedTexType)},this),this._backGroundSelectedTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._backGroundSelectedBoxRendererAdaptDirty=!0,this._findLayout()}},loadTextureFrontCross:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._frontCrossFileName=a,this._frontCrossTexType=b;var c=this._frontCrossRenderer;switch(c._textureLoaded||c.addEventListener("load",function(){this.loadTextureFrontCross(this._frontCrossFileName,this._frontCrossTexType)},this),this._frontCrossTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._frontCrossRendererAdaptDirty=!0,this._findLayout()}},loadTextureBackGroundDisabled:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._backGroundDisabledFileName=a,this._backGroundDisabledTexType=b;var c=this._backGroundBoxDisabledRenderer;switch(c._textureLoaded||c.addEventListener("load",function(){this.loadTextureBackGroundDisabled(this._backGroundDisabledFileName,this._backGroundDisabledTexType)},this),this._backGroundDisabledTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._backGroundBoxDisabledRendererAdaptDirty=!0,this._findLayout()}},loadTextureFrontCrossDisabled:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._frontCrossDisabledFileName=a,this._frontCrossDisabledTexType=b;var c=this._frontCrossDisabledRenderer;switch(c._textureLoaded||c.addEventListener("load",function(){this.loadTextureFrontCrossDisabled(this._frontCrossDisabledFileName,this._frontCrossDisabledTexType)},this),this._frontCrossDisabledTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._frontCrossDisabledRendererAdaptDirty=!0,this._findLayout()}},_onPressStateChangedToNormal:function(){this._backGroundBoxRenderer.setVisible(!0),this._backGroundSelectedBoxRenderer.setVisible(!1),this._backGroundBoxDisabledRenderer.setVisible(!1),this._frontCrossDisabledRenderer.setVisible(!1),this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._frontCrossRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._isSelected&&(this._frontCrossRenderer.setVisible(!0),this._frontCrossRendererAdaptDirty=!0)},_onPressStateChangedToPressed:function(){this._backGroundSelectedFileName?(this._backGroundBoxRenderer.setVisible(!1),this._backGroundSelectedBoxRenderer.setVisible(!0),this._backGroundBoxDisabledRenderer.setVisible(!1),this._frontCrossDisabledRenderer.setVisible(!1)):(this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX+this._zoomScale,this._backgroundTextureScaleY+this._zoomScale),this._frontCrossRenderer.setScale(this._backgroundTextureScaleX+this._zoomScale,this._backgroundTextureScaleY+this._zoomScale))},_onPressStateChangedToDisabled:function(){this._backGroundDisabledFileName&&this._frontCrossDisabledFileName&&(this._backGroundBoxRenderer.setVisible(!1),this._backGroundBoxDisabledRenderer.setVisible(!0)),this._backGroundSelectedBoxRenderer.setVisible(!1),this._frontCrossRenderer.setVisible(!1),this._backGroundBoxRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._frontCrossRenderer.setScale(this._backgroundTextureScaleX,this._backgroundTextureScaleY),this._isSelected&&(this._frontCrossDisabledRenderer.setVisible(!0),this._frontCrossDisabledRendererAdaptDirty=!0)},setZoomScale:function(a){this._zoomScale=a},getZoomScale:function(){return this._zoomScale},setSelectedState:function(a){this.setSelected(a)},setSelected:function(a){a!==this._isSelected&&(this._isSelected=a,this._frontCrossRenderer.setVisible(this._isSelected))},getSelectedState:function(){return this.isSelected()},isSelected:function(){return this._isSelected},_selectedEvent:function(){this._checkBoxEventSelector&&(this._checkBoxEventListener?this._checkBoxEventSelector.call(this._checkBoxEventListener,this,ccui.CheckBox.EVENT_SELECTED):this._checkBoxEventSelector(this,ccui.CheckBox.EVENT_SELECTED))},_unSelectedEvent:function(){this._checkBoxEventSelector&&(this._checkBoxEventListener?this._checkBoxEventSelector.call(this._checkBoxEventListener,this,ccui.CheckBox.EVENT_UNSELECTED):this._checkBoxEventSelector(this,ccui.CheckBox.EVENT_UNSELECTED))},_releaseUpEvent:function(){ccui.Widget.prototype._releaseUpEvent.call(this),this._isSelected?(this.setSelected(!1),this._unSelectedEvent()):(this.setSelected(!0),this._selectedEvent())},addEventListenerCheckBox:function(a,b){this.addEventListener(a,b)},addEventListener:function(a,b){this._checkBoxEventSelector=a,this._checkBoxEventListener=b},getVirtualRendererSize:function(){return this._backGroundBoxRenderer.getContentSize()},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._backGroundBoxRendererAdaptDirty=!0,this._backGroundSelectedBoxRendererAdaptDirty=!0,this._frontCrossRendererAdaptDirty=!0,this._backGroundBoxDisabledRendererAdaptDirty=!0,this._frontCrossDisabledRendererAdaptDirty=!0},getVirtualRenderer:function(){return this._backGroundBoxRenderer},_backGroundTextureScaleChangedWithSize:function(){var a=this._backGroundBoxRenderer,b=this._contentSize;if(this._ignoreSize)a.setScale(1),this._backgroundTextureScaleX=this._backgroundTextureScaleY=1;else{var c=a.getContentSize();if(c.width<=0||c.height<=0)return a.setScale(1),void(this._backgroundTextureScaleX=this._backgroundTextureScaleY=1);var d=b.width/c.width,e=b.height/c.height;this._backgroundTextureScaleX=d,this._backgroundTextureScaleY=e,a.setScaleX(d),a.setScaleY(e)}a.setPosition(.5*b.width,.5*b.height)},_backGroundSelectedTextureScaleChangedWithSize:function(){var a=this._backGroundSelectedBoxRenderer,b=this._contentSize;if(this._ignoreSize)a.setScale(1);else{var c=a.getContentSize();if(c.width<=0||c.height<=0)return void a.setScale(1);var d=b.width/c.width,e=b.height/c.height;a.setScaleX(d),a.setScaleY(e)}a.setPosition(.5*b.width,.5*b.height)},_frontCrossTextureScaleChangedWithSize:function(){var a=this._frontCrossRenderer,b=this._contentSize;if(this._ignoreSize)a.setScale(1);else{var c=a.getContentSize();if(c.width<=0||c.height<=0)return void a.setScale(1);var d=b.width/c.width,e=b.height/c.height;a.setScaleX(d),a.setScaleY(e)}a.setPosition(.5*b.width,.5*b.height)},_backGroundDisabledTextureScaleChangedWithSize:function(){var a=this._backGroundBoxDisabledRenderer,b=this._contentSize;if(this._ignoreSize)a.setScale(1);else{var c=a.getContentSize();if(c.width<=0||c.height<=0)return void a.setScale(1);var d=b.width/c.width,e=b.height/c.height;a.setScaleX(d),a.setScaleY(e)}a.setPosition(.5*b.width,.5*b.height)},_frontCrossDisabledTextureScaleChangedWithSize:function(){var a=this._frontCrossDisabledRenderer,b=this._contentSize;if(this._ignoreSize)a.setScale(1);else{var c=a.getContentSize();if(c.width<=0||c.height<=0)return void a.setScale(1);var d=b.width/c.width,e=b.height/c.height;a.setScaleX(d),a.setScaleY(e)}a.setPosition(.5*b.width,.5*b.height)},getDescription:function(){return"CheckBox"},_createCloneInstance:function(){return new ccui.CheckBox},_copySpecialProperties:function(a){a instanceof ccui.CheckBox&&(this.loadTextureBackGround(a._backGroundFileName,a._backGroundTexType),this.loadTextureBackGroundSelected(a._backGroundSelectedFileName,a._backGroundSelectedTexType),this.loadTextureFrontCross(a._frontCrossFileName,a._frontCrossTexType),this.loadTextureBackGroundDisabled(a._backGroundDisabledFileName,a._backGroundDisabledTexType),this.loadTextureFrontCrossDisabled(a._frontCrossDisabledFileName,a._frontCrossDisabledTexType),this.setSelected(a._isSelected),this._checkBoxEventListener=a._checkBoxEventListener,this._checkBoxEventSelector=a._checkBoxEventSelector,this._ccEventCallback=a._ccEventCallback,this._zoomScale=a._zoomScale,this._backgroundTextureScaleX=a._backgroundTextureScaleX,this._backgroundTextureScaleY=a._backgroundTextureScaleY)},_adaptRenderers:function(){this._backGroundBoxRendererAdaptDirty&&(this._backGroundTextureScaleChangedWithSize(),this._backGroundBoxRendererAdaptDirty=!1),this._backGroundSelectedBoxRendererAdaptDirty&&(this._backGroundSelectedTextureScaleChangedWithSize(),this._backGroundSelectedBoxRendererAdaptDirty=!1),this._frontCrossRendererAdaptDirty&&(this._frontCrossTextureScaleChangedWithSize(),this._frontCrossRendererAdaptDirty=!1),this._backGroundBoxDisabledRendererAdaptDirty&&(this._backGroundDisabledTextureScaleChangedWithSize(),this._backGroundBoxDisabledRendererAdaptDirty=!1),this._frontCrossDisabledRendererAdaptDirty&&(this._frontCrossDisabledTextureScaleChangedWithSize(),this._frontCrossDisabledRendererAdaptDirty=!1)}});var _p=ccui.CheckBox.prototype;_p.selected,cc.defineGetterSetter(_p,"selected",_p.isSelected,_p.setSelected),_p=null,ccui.CheckBox.create=function(a,b,c,d,e,f){return new ccui.CheckBox(a,b,c,d,e,f)},ccui.CheckBox.EVENT_SELECTED=0,ccui.CheckBox.EVENT_UNSELECTED=1,ccui.CheckBox.BOX_RENDERER_ZORDER=-1,ccui.CheckBox.BOX_SELECTED_RENDERER_ZORDER=-1,ccui.CheckBox.BOX_DISABLED_RENDERER_ZORDER=-1,ccui.CheckBox.FRONT_CROSS_RENDERER_ZORDER=-1,ccui.CheckBox.FRONT_CROSS_DISABLED_RENDERER_ZORDER=-1,ccui.ImageView=ccui.Widget.extend({_scale9Enabled:!1,_prevIgnoreSize:!0,_capInsets:null,_imageRenderer:null,_textureFile:"",_imageTexType:ccui.Widget.LOCAL_TEXTURE,_imageTextureSize:null,_className:"ImageView",_imageRendererAdaptDirty:!0,ctor:function(a,b){this._capInsets=cc.rect(0,0,0,0),this._imageTextureSize=cc.size(this._capInsets.width,this._capInsets.height),ccui.Widget.prototype.ctor.call(this),b=void 0===b?0:b,a?this.loadTexture(a,b):this._imageTexType=ccui.Widget.LOCAL_TEXTURE},_initRenderer:function(){this._imageRenderer=new cc.Sprite,this.addProtectedChild(this._imageRenderer,ccui.ImageView.RENDERER_ZORDER,-1)},loadTexture:function(a,b){if(a){var c=this;b=b||ccui.Widget.LOCAL_TEXTURE,this._textureFile=a,this._imageTexType=b;var d=c._imageRenderer;switch(d._textureLoaded||d.addEventListener("load",function(){c.loadTexture(c._textureFile,c._imageTexType)}),c._imageTexType){case ccui.Widget.LOCAL_TEXTURE:c._scale9Enabled?(d.initWithFile(a),d.setCapInsets(c._capInsets)):d.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c._scale9Enabled?(d.initWithSpriteFrameName(a),d.setCapInsets(c._capInsets)):d.initWithSpriteFrameName(a)}c._imageTextureSize=d.getContentSize(),this._updateChildrenDisplayedRGBA(),c._updateContentSizeWithTextureSize(c._imageTextureSize),c._imageRendererAdaptDirty=!0,c._findLayout()}},setTextureRect:function(a){this._scale9Enabled||this._imageRenderer.setTextureRect(a)},setScale9Enabled:function(a){if(this._scale9Enabled!==a){if(this._scale9Enabled=a,this.removeProtectedChild(this._imageRenderer),this._imageRenderer=null,this._scale9Enabled?this._imageRenderer=new ccui.Scale9Sprite:this._imageRenderer=new cc.Sprite,this.loadTexture(this._textureFile,this._imageTexType),this.addProtectedChild(this._imageRenderer,ccui.ImageView.RENDERER_ZORDER,-1),this._scale9Enabled){var b=this._ignoreSize;this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=b}else this.ignoreContentAdaptWithSize(this._prevIgnoreSize);this.setCapInsets(this._capInsets),this._imageRendererAdaptDirty=!0}},isScale9Enabled:function(){return this._scale9Enabled},ignoreContentAdaptWithSize:function(a){(!this._scale9Enabled||this._scale9Enabled&&!a)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,a),this._prevIgnoreSize=a)},setCapInsets:function(a){if(a){var b=this._capInsets;b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,this._scale9Enabled&&this._imageRenderer.setCapInsets(a)}},getCapInsets:function(){return cc.rect(this._capInsets)},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._imageRendererAdaptDirty=!0},_adaptRenderers:function(){this._imageRendererAdaptDirty&&(this._imageTextureScaleChangedWithSize(),this._imageRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return cc.size(this._imageTextureSize)},getVirtualRenderer:function(){return this._imageRenderer},_imageTextureScaleChangedWithSize:function(){if(this._ignoreSize)this._scale9Enabled||this._imageRenderer.setScale(1);else if(this._scale9Enabled)this._imageRenderer.setPreferredSize(this._contentSize),this._imageRenderer.setScale(1);else{var a=this._imageTextureSize;if(a.width<=0||a.height<=0)return void this._imageRenderer.setScale(1);this._imageRenderer.setScaleX(this._contentSize.width/a.width),this._imageRenderer.setScaleY(this._contentSize.height/a.height)}this._imageRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getDescription:function(){return"ImageView"},_createCloneInstance:function(){return new ccui.ImageView},_copySpecialProperties:function(a){a instanceof ccui.ImageView&&(this._prevIgnoreSize=a._prevIgnoreSize,this.setScale9Enabled(a._scale9Enabled),this.loadTexture(a._textureFile,a._imageTexType),this.setCapInsets(a._capInsets))},setContentSize:function(a,b){if(null!=b&&(a=cc.size(a,b)),ccui.Widget.prototype.setContentSize.call(this,a),this._scale9Enabled)this._imageRenderer.setContentSize(a);else{var c=this._imageRenderer.getContentSize();this._imageRenderer.setScaleX(a.width/c.width),this._imageRenderer.setScaleY(a.height/c.height)}}}),ccui.ImageView.create=function(a,b){return new ccui.ImageView(a,b)},ccui.ImageView.RENDERER_ZORDER=-1,ccui.LoadingBar=ccui.Widget.extend({_direction:null,_percent:100,_totalLength:0,_barRenderer:null,_renderBarTexType:ccui.Widget.LOCAL_TEXTURE,_barRendererTextureSize:null,_scale9Enabled:!1,_prevIgnoreSize:!0,_capInsets:null,_textureFile:"",_isTextureLoaded:!1,_className:"LoadingBar",_barRendererAdaptDirty:!0,ctor:function(a,b){this._direction=ccui.LoadingBar.TYPE_LEFT,this._barRendererTextureSize=cc.size(0,0),this._capInsets=cc.rect(0,0,0,0),ccui.Widget.prototype.ctor.call(this),void 0!==a&&this.loadTexture(a),void 0!==b&&this.setPercent(b)},_initRenderer:function(){this._barRenderer=new cc.Sprite,this.addProtectedChild(this._barRenderer,ccui.LoadingBar.RENDERER_ZORDER,-1),this._barRenderer.setAnchorPoint(0,.5)},setDirection:function(a){if(this._direction!==a)switch(this._direction=a,this._direction){case ccui.LoadingBar.TYPE_LEFT:this._barRenderer.setAnchorPoint(0,.5),this._barRenderer.setPosition(0,.5*this._contentSize.height),this._scale9Enabled||this._barRenderer.setFlippedX(!1);break;case ccui.LoadingBar.TYPE_RIGHT:this._barRenderer.setAnchorPoint(1,.5),this._barRenderer.setPosition(this._totalLength,.5*this._contentSize.height),this._scale9Enabled||this._barRenderer.setFlippedX(!0)}},getDirection:function(){return this._direction},loadTexture:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._renderBarTexType=b,this._textureFile=a;var c=this._barRenderer,d=this;switch(c._textureLoaded||c.addEventListener("load",function(){d.loadTexture(d._textureFile,d._renderBarTexType),d._setPercent(d._percent)}),this._renderBarTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}var e=c.getContentSize();switch(this._barRendererTextureSize.width=e.width,this._barRendererTextureSize.height=e.height,this._direction){case ccui.LoadingBar.TYPE_LEFT:c.setAnchorPoint(0,.5),this._scale9Enabled||c.setFlippedX(!1);break;case ccui.LoadingBar.TYPE_RIGHT:c.setAnchorPoint(1,.5),this._scale9Enabled||c.setFlippedX(!0)}this._scale9Enabled&&c.setCapInsets(this._capInsets),this._updateChildrenDisplayedRGBA(),this._barRendererScaleChangedWithSize(),this._updateContentSizeWithTextureSize(this._barRendererTextureSize),this._barRendererAdaptDirty=!0,this._findLayout()}},setScale9Enabled:function(a){if(this._scale9Enabled!==a){if(this._scale9Enabled=a,this.removeProtectedChild(this._barRenderer),this._barRenderer=this._scale9Enabled?new ccui.Scale9Sprite:new cc.Sprite,this.loadTexture(this._textureFile,this._renderBarTexType),this.addProtectedChild(this._barRenderer,ccui.LoadingBar.RENDERER_ZORDER,-1),this._scale9Enabled){var b=this._ignoreSize;this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=b}else this.ignoreContentAdaptWithSize(this._prevIgnoreSize);this.setCapInsets(this._capInsets),this.setPercent(this._percent),this._barRendererAdaptDirty=!0}},isScale9Enabled:function(){return this._scale9Enabled},setCapInsets:function(a){if(a){var b=this._capInsets;b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,this._scale9Enabled&&this._barRenderer.setCapInsets(a)}},getCapInsets:function(){return cc.rect(this._capInsets)},setPercent:function(a){a>100&&(a=100),a<0&&(a=0),a!==this._percent&&(this._percent=a,this._setPercent(a))},_setPercent:function(){var a,b,c,d;this._totalLength<=0||(a=this._percent/100,this._scale9Enabled?this._setScale9Scale():(c=this._barRenderer,d=this._barRendererTextureSize,b=c.getTextureRect(),b.width=d.width*a,c.setTextureRect(cc.rect(b.x,b.y,d.width*a,d.height),c._rectRotated)))},setContentSize:function(a,b){ccui.Widget.prototype.setContentSize.call(this,a,b),this._totalLength=void 0===b?a.width:a},getPercent:function(){return this._percent},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._barRendererAdaptDirty=!0},_adaptRenderers:function(){this._barRendererAdaptDirty&&(this._barRendererScaleChangedWithSize(),this._barRendererAdaptDirty=!1)},ignoreContentAdaptWithSize:function(a){(!this._scale9Enabled||this._scale9Enabled&&!a)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,a),this._prevIgnoreSize=a)},getVirtualRendererSize:function(){return cc.size(this._barRendererTextureSize)},getVirtualRenderer:function(){return this._barRenderer},_barRendererScaleChangedWithSize:function(){var a=this._barRenderer,b=this._contentSize;if(this._unifySize)this._totalLength=this._contentSize.width,this.setPercent(this._percent);else if(this._ignoreSize)this._scale9Enabled||(this._totalLength=this._barRendererTextureSize.width,a.setScale(1));else if(this._totalLength=b.width,this._scale9Enabled)this._setScale9Scale(),a.setScale(1);else{var c=this._barRendererTextureSize;if(c.width<=0||c.height<=0)return void a.setScale(1);var d=b.width/c.width,e=b.height/c.height;a.setScaleX(d),a.setScaleY(e)}switch(this._direction){case ccui.LoadingBar.TYPE_LEFT:a.setPosition(0,.5*b.height);break;case ccui.LoadingBar.TYPE_RIGHT:a.setPosition(this._totalLength,.5*b.height)}},_setScale9Scale:function(){var a=this._percent/100*this._totalLength;this._barRenderer.setPreferredSize(cc.size(a,this._contentSize.height))},getDescription:function(){return"LoadingBar"},_createCloneInstance:function(){return new ccui.LoadingBar},_copySpecialProperties:function(a){a instanceof ccui.LoadingBar&&(this._prevIgnoreSize=a._prevIgnoreSize,this.setScale9Enabled(a._scale9Enabled),this.loadTexture(a._textureFile,a._renderBarTexType),this.setCapInsets(a._capInsets),this.setPercent(a._percent),this.setDirection(a._direction))}});var _p=ccui.LoadingBar.prototype;_p.direction,cc.defineGetterSetter(_p,"direction",_p.getDirection,_p.setDirection),_p.percent,cc.defineGetterSetter(_p,"percent",_p.getPercent,_p.setPercent),_p=null,ccui.LoadingBar.create=function(a,b){return new ccui.LoadingBar(a,b)},ccui.LoadingBar.TYPE_LEFT=0,ccui.LoadingBar.TYPE_RIGHT=1,ccui.LoadingBar.RENDERER_ZORDER=-1,ccui.Slider=ccui.Widget.extend({_barRenderer:null,_progressBarRenderer:null,_barTextureSize:null,_progressBarTextureSize:null,_slidBallNormalRenderer:null,_slidBallPressedRenderer:null,_slidBallDisabledRenderer:null,_slidBallRenderer:null,_barLength:0,_percent:0,_scale9Enabled:!1,_prevIgnoreSize:!0,_textureFile:"",_progressBarTextureFile:"",_slidBallNormalTextureFile:"",_slidBallPressedTextureFile:"",_slidBallDisabledTextureFile:"",_capInsetsBarRenderer:null,_capInsetsProgressBarRenderer:null,_sliderEventListener:null,_sliderEventSelector:null,_barTexType:ccui.Widget.LOCAL_TEXTURE,_progressBarTexType:ccui.Widget.LOCAL_TEXTURE,_ballNTexType:ccui.Widget.LOCAL_TEXTURE,_ballPTexType:ccui.Widget.LOCAL_TEXTURE,_ballDTexType:ccui.Widget.LOCAL_TEXTURE,_isTextureLoaded:!1,_className:"Slider",_barRendererAdaptDirty:!0,_progressBarRendererDirty:!0,_unifySize:!1,_zoomScale:.1,_sliderBallNormalTextureScaleX:1,_sliderBallNormalTextureScaleY:1,ctor:function(a,b,c){this._barTextureSize=cc.size(0,0),this._progressBarTextureSize=cc.size(0,0),this._capInsetsBarRenderer=cc.rect(0,0,0,0),this._capInsetsProgressBarRenderer=cc.rect(0,0,0,0),ccui.Widget.prototype.ctor.call(this),c=c||0,this.setTouchEnabled(!0),a&&this.loadBarTexture(a,c),b&&this.loadSlidBallTextures(b,c)},_initRenderer:function(){this._barRenderer=new cc.Sprite,this._progressBarRenderer=new cc.Sprite,this._progressBarRenderer.setAnchorPoint(0,.5),this.addProtectedChild(this._barRenderer,ccui.Slider.BASEBAR_RENDERER_ZORDER,-1),this.addProtectedChild(this._progressBarRenderer,ccui.Slider.PROGRESSBAR_RENDERER_ZORDER,-1),this._slidBallNormalRenderer=new cc.Sprite,this._slidBallPressedRenderer=new cc.Sprite,this._slidBallPressedRenderer.setVisible(!1),this._slidBallDisabledRenderer=new cc.Sprite,this._slidBallDisabledRenderer.setVisible(!1),this._slidBallRenderer=new cc.Node,this._slidBallRenderer.addChild(this._slidBallNormalRenderer),this._slidBallRenderer.addChild(this._slidBallPressedRenderer),this._slidBallRenderer.addChild(this._slidBallDisabledRenderer),this._slidBallRenderer.setCascadeColorEnabled(!0),this._slidBallRenderer.setCascadeOpacityEnabled(!0),this.addProtectedChild(this._slidBallRenderer,ccui.Slider.BALL_RENDERER_ZORDER,-1)},loadBarTexture:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._textureFile=a,this._barTexType=b;var c=this._barRenderer,d=this;switch(c._textureLoaded||c.addEventListener("load",function(){d.loadBarTexture(d._textureFile,d._barTexType)}),this._barTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._barRendererAdaptDirty=!0,this._progressBarRendererDirty=!0,this._updateContentSizeWithTextureSize(this._barRenderer.getContentSize()),this._findLayout(),this._barTextureSize=this._barRenderer.getContentSize()}},loadProgressBarTexture:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._progressBarTextureFile=a,this._progressBarTexType=b;var c=this._progressBarRenderer,d=this;switch(c._textureLoaded||c.addEventListener("load",function(){d.loadProgressBarTexture(d._progressBarTextureFile,d._progressBarTexType)}),this._progressBarTexType){case ccui.Widget.LOCAL_TEXTURE:c.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:c.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._progressBarRenderer.setAnchorPoint(cc.p(0,.5));var e=this._progressBarRenderer.getContentSize();this._progressBarTextureSize={width:e.width,height:e.height},this._progressBarRendererDirty=!0,this._findLayout()}},setScale9Enabled:function(a){if(this._scale9Enabled!==a){if(this._scale9Enabled=a,this.removeProtectedChild(this._barRenderer,!0),this.removeProtectedChild(this._progressBarRenderer,!0),this._barRenderer=null,this._progressBarRenderer=null,this._scale9Enabled?(this._barRenderer=new ccui.Scale9Sprite,this._progressBarRenderer=new ccui.Scale9Sprite):(this._barRenderer=new cc.Sprite,this._progressBarRenderer=new cc.Sprite),this.loadBarTexture(this._textureFile,this._barTexType),this.loadProgressBarTexture(this._progressBarTextureFile,this._progressBarTexType),this.addProtectedChild(this._barRenderer,ccui.Slider.BASEBAR_RENDERER_ZORDER,-1),this.addProtectedChild(this._progressBarRenderer,ccui.Slider.PROGRESSBAR_RENDERER_ZORDER,-1),this._scale9Enabled){var b=this._ignoreSize;this.ignoreContentAdaptWithSize(!1),this._prevIgnoreSize=b}else this.ignoreContentAdaptWithSize(this._prevIgnoreSize);this.setCapInsetsBarRenderer(this._capInsetsBarRenderer),this.setCapInsetProgressBarRenderer(this._capInsetsProgressBarRenderer),this._barRendererAdaptDirty=!0,this._progressBarRendererDirty=!0}},isScale9Enabled:function(){return this._scale9Enabled},ignoreContentAdaptWithSize:function(a){(!this._scale9Enabled||this._scale9Enabled&&!a)&&(ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,a),this._prevIgnoreSize=a)},setCapInsets:function(a){this.setCapInsetsBarRenderer(a),this.setCapInsetProgressBarRenderer(a)},setCapInsetsBarRenderer:function(a){if(a){var b=this._capInsetsBarRenderer;b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,this._scale9Enabled&&this._barRenderer.setCapInsets(a)}},getCapInsetsBarRenderer:function(){return cc.rect(this._capInsetsBarRenderer)},setCapInsetProgressBarRenderer:function(a){if(a){var b=this._capInsetsProgressBarRenderer;b.x=a.x,b.y=a.y,b.width=a.width,b.height=a.height,this._scale9Enabled&&this._progressBarRenderer.setCapInsets(a)}},getCapInsetsProgressBarRenderer:function(){return cc.rect(this._capInsetsProgressBarRenderer)},loadSlidBallTextures:function(a,b,c,d){this.loadSlidBallTextureNormal(a,d),this.loadSlidBallTexturePressed(b,d),this.loadSlidBallTextureDisabled(c,d)},loadSlidBallTextureNormal:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._slidBallNormalTextureFile=a,this._ballNTexType=b;var c=this;switch(this._slidBallNormalRenderer._textureLoaded||this._slidBallNormalRenderer.addEventListener("load",function(){c.loadSlidBallTextureNormal(c._slidBallNormalTextureFile,c._ballNTexType)}),this._ballNTexType){case ccui.Widget.LOCAL_TEXTURE:this._slidBallNormalRenderer.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:this._slidBallNormalRenderer.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._findLayout()}},loadSlidBallTexturePressed:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._slidBallPressedTextureFile=a,this._ballPTexType=b;var c=this;switch(this._slidBallPressedRenderer._textureLoaded||this._slidBallPressedRenderer.addEventListener("load",function(){c.loadSlidBallTexturePressed(c._slidBallPressedTextureFile,c._ballPTexType)}),this._ballPTexType){case ccui.Widget.LOCAL_TEXTURE:this._slidBallPressedRenderer.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:this._slidBallPressedRenderer.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._findLayout()}},loadSlidBallTextureDisabled:function(a,b){if(a){b=b||ccui.Widget.LOCAL_TEXTURE,this._slidBallDisabledTextureFile=a,this._ballDTexType=b;var c=this;switch(this._slidBallDisabledRenderer._textureLoaded||this._slidBallDisabledRenderer.addEventListener("load",function(){c.loadSlidBallTextureDisabled(c._slidBallDisabledTextureFile,c._ballDTexType)}),this._ballDTexType){case ccui.Widget.LOCAL_TEXTURE:this._slidBallDisabledRenderer.initWithFile(a);break;case ccui.Widget.PLIST_TEXTURE:this._slidBallDisabledRenderer.initWithSpriteFrameName(a)}this._updateChildrenDisplayedRGBA(),this._findLayout()}},setPercent:function(a){a>100&&(a=100),a<0&&(a=0),this._percent=a;var b=a/100,c=this._barLength*b;if(this._slidBallRenderer.setPosition(c,this._contentSize.height/2),this._scale9Enabled)this._progressBarRenderer.setPreferredSize(cc.size(c,this._contentSize.height));else{var d=this._progressBarRenderer,e=d.getTextureRect();d.setTextureRect(cc.rect(e.x,e.y,c/d._scaleX,e.height),d.isTextureRectRotated())}},hitTest:function(a){var b=this._slidBallNormalRenderer.convertToNodeSpace(a),c=this._slidBallNormalRenderer.getContentSize(),d=cc.rect(0,0,c.width,c.height);return b.x>=d.x&&b.x<=d.x+d.width&&b.y>=d.y&&b.y<=d.y+d.height},onTouchBegan:function(a,b){var c=ccui.Widget.prototype.onTouchBegan.call(this,a,b);if(this._hit){var d=this.convertToNodeSpace(this._touchBeganPosition);this.setPercent(this._getPercentWithBallPos(d.x)),this._percentChangedEvent()}return c},onTouchMoved:function(a,b){var c=a.getLocation(),d=this.convertToNodeSpace(c);this.setPercent(this._getPercentWithBallPos(d.x)),this._percentChangedEvent()},onTouchEnded:function(a,b){ccui.Widget.prototype.onTouchEnded.call(this,a,b)},onTouchCancelled:function(a,b){ccui.Widget.prototype.onTouchCancelled.call(this,a,b)},_getPercentWithBallPos:function(a){return a/this._barLength*100},addEventListenerSlider:function(a,b){this.addEventListener(a,b)},addEventListener:function(a,b){this._sliderEventSelector=a,this._sliderEventListener=b},_percentChangedEvent:function(){this._sliderEventSelector&&(this._sliderEventListener?this._sliderEventSelector.call(this._sliderEventListener,this,ccui.Slider.EVENT_PERCENT_CHANGED):this._sliderEventSelector(this,ccui.Slider.EVENT_PERCENT_CHANGED)),this._ccEventCallback&&this._ccEventCallback(this,ccui.Slider.EVENT_PERCENT_CHANGED)},getPercent:function(){return this._percent},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._barRendererAdaptDirty=!0,this._progressBarRendererDirty=!0},_adaptRenderers:function(){this._barRendererAdaptDirty&&(this._barRendererScaleChangedWithSize(),this._barRendererAdaptDirty=!1),this._progressBarRendererDirty&&(this._progressBarRendererScaleChangedWithSize(),this._progressBarRendererDirty=!1)},getVirtualRendererSize:function(){return this._barRenderer.getContentSize()},getVirtualRenderer:function(){return this._barRenderer},_barRendererScaleChangedWithSize:function(){if(this._unifySize)this._barLength=this._contentSize.width,this._barRenderer.setPreferredSize(this._contentSize);else if(this._ignoreSize)this._barRenderer.setScale(1),this._barLength=this._contentSize.width;else if(this._barLength=this._contentSize.width,this._scale9Enabled)this._barRenderer.setPreferredSize(this._contentSize),this._barRenderer.setScale(1);else{var a=this._barTextureSize;if(a.width<=0||a.height<=0)this._barRenderer.setScale(1);else{var b=this._contentSize.width/a.width,c=this._contentSize.height/a.height;this._barRenderer.setScaleX(b),this._barRenderer.setScaleY(c)}}this._barRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2),this.setPercent(this._percent)},_progressBarRendererScaleChangedWithSize:function(){if(this._unifySize)this._progressBarRenderer.setPreferredSize(this._contentSize);else if(this._ignoreSize){
if(!this._scale9Enabled){var a=this._progressBarTextureSize,b=this._contentSize.width/a.width,c=this._contentSize.height/a.height;this._progressBarRenderer.setScaleX(b),this._progressBarRenderer.setScaleY(c)}}else if(this._scale9Enabled)this._progressBarRenderer.setPreferredSize(this._contentSize),this._progressBarRenderer.setScale(1);else{var a=this._progressBarTextureSize;if(a.width<=0||a.height<=0)return void this._progressBarRenderer.setScale(1);var b=this._contentSize.width/a.width,c=this._contentSize.height/a.height;this._progressBarRenderer.setScaleX(b),this._progressBarRenderer.setScaleY(c)}this._progressBarRenderer.setPosition(0,this._contentSize.height/2),this.setPercent(this._percent)},_onPressStateChangedToNormal:function(){this._slidBallNormalRenderer.setVisible(!0),this._slidBallPressedRenderer.setVisible(!1),this._slidBallDisabledRenderer.setVisible(!1),this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX,this._sliderBallNormalTextureScaleY)},_onPressStateChangedToPressed:function(){this._slidBallPressedTextureFile?(this._slidBallNormalRenderer.setVisible(!1),this._slidBallPressedRenderer.setVisible(!0),this._slidBallDisabledRenderer.setVisible(!1)):this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX+this._zoomScale,this._sliderBallNormalTextureScaleY+this._zoomScale)},_onPressStateChangedToDisabled:function(){this._slidBallDisabledTextureFile&&(this._slidBallNormalRenderer.setVisible(!1),this._slidBallDisabledRenderer.setVisible(!0)),this._slidBallNormalRenderer.setScale(this._sliderBallNormalTextureScaleX,this._sliderBallNormalTextureScaleY),this._slidBallPressedRenderer.setVisible(!1)},setZoomScale:function(a){this._zoomScale=a},getZoomScale:function(){return this._zoomScale},getDescription:function(){return"Slider"},_createCloneInstance:function(){return new ccui.Slider},_copySpecialProperties:function(a){this._prevIgnoreSize=a._prevIgnoreSize,this.setScale9Enabled(a._scale9Enabled),this.loadBarTexture(a._textureFile,a._barTexType),this.loadProgressBarTexture(a._progressBarTextureFile,a._progressBarTexType),this.loadSlidBallTextureNormal(a._slidBallNormalTextureFile,a._ballNTexType),this.loadSlidBallTexturePressed(a._slidBallPressedTextureFile,a._ballPTexType),this.loadSlidBallTextureDisabled(a._slidBallDisabledTextureFile,a._ballDTexType),this.setPercent(a.getPercent()),this._sliderEventListener=a._sliderEventListener,this._sliderEventSelector=a._sliderEventSelector,this._zoomScale=a._zoomScale,this._ccEventCallback=a._ccEventCallback}});var _p=ccui.Slider.prototype;_p.percent,cc.defineGetterSetter(_p,"percent",_p.getPercent,_p.setPercent),_p=null,ccui.Slider.create=function(a,b,c){return new ccui.Slider(a,b,c)},ccui.Slider.EVENT_PERCENT_CHANGED=0,ccui.Slider.BASEBAR_RENDERER_ZORDER=-3,ccui.Slider.PROGRESSBAR_RENDERER_ZORDER=-2,ccui.Slider.BALL_RENDERER_ZORDER=-1,ccui.Text=ccui.Widget.extend({_touchScaleChangeEnabled:!1,_normalScaleValueX:1,_normalScaleValueY:1,_fontName:"Arial",_fontSize:16,_onSelectedScaleOffset:.5,_labelRenderer:null,_textAreaSize:null,_textVerticalAlignment:0,_textHorizontalAlignment:0,_className:"Text",_type:null,_labelRendererAdaptDirty:!0,ctor:function(a,b,c){this._type=ccui.Text.Type.SYSTEM,this._textAreaSize=cc.size(0,0),ccui.Widget.prototype.ctor.call(this),void 0!==c?(this.setFontName(b),this.setFontSize(c),this.setString(a)):this.setFontName(this._fontName)},_initRenderer:function(){this._labelRenderer=new cc.LabelTTF,this.addProtectedChild(this._labelRenderer,ccui.Text.RENDERER_ZORDER,-1)},setText:function(a){cc.log("Please use the setString"),this.setString(a)},setString:function(a){a!==this._labelRenderer.getString()&&(this._labelRenderer.setString(a),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()),this._labelRendererAdaptDirty=!0)},getStringValue:function(){return cc.log("Please use the getString"),this._labelRenderer.getString()},getString:function(){return this._labelRenderer.getString()},getStringLength:function(){return this._labelRenderer.getStringLength()},setFontSize:function(a){this._labelRenderer.setFontSize(a),this._fontSize=a,this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()),this._labelRendererAdaptDirty=!0},getFontSize:function(){return this._fontSize},setFontName:function(a){this._fontName=a,this._labelRenderer.setFontName(a),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()),this._labelRendererAdaptDirty=!0},getFontName:function(){return this._fontName},_setFont:function(a){var b=cc.LabelTTF._fontStyleRE.exec(a);b&&(this._fontSize=parseInt(b[1]),this._fontName=b[2],this._labelRenderer._setFont(a),this._labelScaleChangedWithSize())},_getFont:function(){return this._labelRenderer._getFont()},getType:function(){return this._type},setTextAreaSize:function(a){this._labelRenderer.setDimensions(a),this._ignoreSize||(this._customSize=a),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()),this._labelRendererAdaptDirty=!0},getTextAreaSize:function(){return this._labelRenderer.getDimensions()},setTextHorizontalAlignment:function(a){this._labelRenderer.setHorizontalAlignment(a),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()),this._labelRendererAdaptDirty=!0},getTextHorizontalAlignment:function(){return this._labelRenderer.getHorizontalAlignment()},setTextVerticalAlignment:function(a){this._labelRenderer.setVerticalAlignment(a),this._updateContentSizeWithTextureSize(this._labelRenderer.getContentSize()),this._labelRendererAdaptDirty=!0},getTextVerticalAlignment:function(){return this._labelRenderer.getVerticalAlignment()},setTouchScaleChangeEnabled:function(a){this._touchScaleChangeEnabled=a},isTouchScaleChangeEnabled:function(){return this._touchScaleChangeEnabled},_onPressStateChangedToNormal:function(){this._touchScaleChangeEnabled&&(this._labelRenderer.setScaleX(this._normalScaleValueX),this._labelRenderer.setScaleY(this._normalScaleValueY))},_onPressStateChangedToPressed:function(){this._touchScaleChangeEnabled&&(this._labelRenderer.setScaleX(this._normalScaleValueX+this._onSelectedScaleOffset),this._labelRenderer.setScaleY(this._normalScaleValueY+this._onSelectedScaleOffset))},_onPressStateChangedToDisabled:function(){},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._labelRendererAdaptDirty=!0},_adaptRenderers:function(){this._labelRendererAdaptDirty&&(this._labelScaleChangedWithSize(),this._labelRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return this._labelRenderer.getContentSize()},getVirtualRenderer:function(){return this._labelRenderer},getAutoRenderSize:function(){var a=this._labelRenderer.getContentSize();return this._ignoreSize||(this._labelRenderer.setDimensions(0,0),a=this._labelRenderer.getContentSize(),this._labelRenderer.setDimensions(this._contentSize.width,this._contentSize.height)),a},_labelScaleChangedWithSize:function(){var a=this._contentSize;if(this._ignoreSize)this._labelRenderer.setDimensions(0,0),this._labelRenderer.setScale(1),this._normalScaleValueX=this._normalScaleValueY=1;else{this._labelRenderer.setDimensions(cc.size(a.width,a.height));var b=this._labelRenderer.getContentSize();if(b.width<=0||b.height<=0)return void this._labelRenderer.setScale(1);var c=a.width/b.width,d=a.height/b.height;this._labelRenderer.setScaleX(c),this._labelRenderer.setScaleY(d),this._normalScaleValueX=c,this._normalScaleValueY=d}this._labelRenderer.setPosition(a.width/2,a.height/2)},getDescription:function(){return"Label"},enableShadow:function(a,b,c){this._labelRenderer.enableShadow(a,b,c)},enableOutline:function(a,b){this._labelRenderer.enableStroke(a,b)},enableGlow:function(a){this._type===ccui.Text.Type.TTF&&this._labelRenderer.enableGlow(a)},disableEffect:function(){this._labelRenderer.disableEffect&&this._labelRenderer.disableEffect()},_createCloneInstance:function(){return new ccui.Text},_copySpecialProperties:function(a){a instanceof ccui.Text&&(this.setFontName(a._fontName),this.setFontSize(a.getFontSize()),this.setString(a.getString()),this.setTouchScaleChangeEnabled(a.touchScaleEnabled),this.setTextAreaSize(a._textAreaSize),this.setTextHorizontalAlignment(a._labelRenderer.getHorizontalAlignment()),this.setTextVerticalAlignment(a._labelRenderer.getVerticalAlignment()),this.setContentSize(a.getContentSize()),this.setTextColor(a.getTextColor()))},_setBoundingWidth:function(a){this._textAreaSize.width=a,this._labelRenderer._setBoundingWidth(a),this._labelScaleChangedWithSize()},_setBoundingHeight:function(a){this._textAreaSize.height=a,this._labelRenderer._setBoundingHeight(a),this._labelScaleChangedWithSize()},_getBoundingWidth:function(){return this._textAreaSize.width},_getBoundingHeight:function(){return this._textAreaSize.height},_changePosition:function(){this._adaptRenderers()},setColor:function(a){cc.ProtectedNode.prototype.setColor.call(this,a),this._labelRenderer.setColor(a)},setTextColor:function(a){this._labelRenderer.setFontFillColor(a)},getTextColor:function(){return this._labelRenderer._getFillStyle()}});var _p=ccui.Text.prototype;_p.boundingWidth,cc.defineGetterSetter(_p,"boundingWidth",_p._getBoundingWidth,_p._setBoundingWidth),_p.boundingHeight,cc.defineGetterSetter(_p,"boundingHeight",_p._getBoundingHeight,_p._setBoundingHeight),_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p.stringLength,cc.defineGetterSetter(_p,"stringLength",_p.getStringLength),_p.font,cc.defineGetterSetter(_p,"font",_p._getFont,_p._setFont),_p.fontSize,cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),_p.fontName,cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),_p.textAlign,cc.defineGetterSetter(_p,"textAlign",_p.getTextHorizontalAlignment,_p.setTextHorizontalAlignment),_p.verticalAlign,cc.defineGetterSetter(_p,"verticalAlign",_p.getTextVerticalAlignment,_p.setTextVerticalAlignment),_p=null,ccui.Label=ccui.Text.create=function(a,b,c){return new ccui.Text(a,b,c)},ccui.Text.RENDERER_ZORDER=-1,ccui.Text.Type={SYSTEM:0,TTF:1},ccui.TextAtlas=ccui.Widget.extend({_labelAtlasRenderer:null,_stringValue:"",_charMapFileName:"",_itemWidth:0,_itemHeight:0,_startCharMap:"",_className:"TextAtlas",_labelAtlasRendererAdaptDirty:null,ctor:function(a,b,c,d,e){ccui.Widget.prototype.ctor.call(this),void 0!==e&&this.setProperty(a,b,c,d,e)},_initRenderer:function(){this._labelAtlasRenderer=new cc.LabelAtlas,this._labelAtlasRenderer.setAnchorPoint(cc.p(.5,.5)),this.addProtectedChild(this._labelAtlasRenderer,ccui.TextAtlas.RENDERER_ZORDER,-1)},setProperty:function(a,b,c,d,e){this._stringValue=a,this._charMapFileName=b,this._itemWidth=c,this._itemHeight=d,this._startCharMap=e,this._labelAtlasRenderer.initWithString(a,this._charMapFileName,this._itemWidth,this._itemHeight,this._startCharMap[0]),this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize()),this._labelAtlasRendererAdaptDirty=!0},setString:function(a){a!==this._labelAtlasRenderer.getString()&&(this._stringValue=a,this._labelAtlasRenderer.setString(a),this._updateContentSizeWithTextureSize(this._labelAtlasRenderer.getContentSize()),this._labelAtlasRendererAdaptDirty=!0)},setStringValue:function(a){cc.log("Please use the setString"),this.setString(a)},getStringValue:function(){return cc.log("Please use the getString"),this.getString()},getString:function(){return this._labelAtlasRenderer.getString()},getStringLength:function(){return this._labelAtlasRenderer.getStringLength()},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._labelAtlasRendererAdaptDirty=!0},_adaptRenderers:function(){this._labelAtlasRendererAdaptDirty&&(this._labelAtlasScaleChangedWithSize(),this._labelAtlasRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return this._labelAtlasRenderer.getContentSize()},getVirtualRenderer:function(){return this._labelAtlasRenderer},_labelAtlasScaleChangedWithSize:function(){var a=this._labelAtlasRenderer;if(this._ignoreSize)a.setScale(1);else{var b=a.getContentSize();if(b.width<=0||b.height<=0)return void a.setScale(1);a.setScaleX(this._contentSize.width/b.width),a.setScaleY(this._contentSize.height/b.height)}a.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getDescription:function(){return"LabelAtlas"},_copySpecialProperties:function(a){a&&this.setProperty(a._stringValue,a._charMapFileName,a._itemWidth,a._itemHeight,a._startCharMap)},_createCloneInstance:function(){return new ccui.TextAtlas}});var _p=ccui.TextAtlas.prototype;_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p=null,ccui.TextAtlas.create=function(a,b,c,d,e){return new ccui.TextAtlas(a,b,c,d,e)},ccui.TextAtlas.RENDERER_ZORDER=-1,ccui.LabelBMFont=ccui.TextBMFont=ccui.Widget.extend({_labelBMFontRenderer:null,_fntFileHasInit:!1,_fntFileName:"",_stringValue:"",_className:"TextBMFont",_labelBMFontRendererAdaptDirty:!0,ctor:function(a,b){ccui.Widget.prototype.ctor.call(this),void 0!==b&&(this.setFntFile(b),this.setString(a))},_initRenderer:function(){this._labelBMFontRenderer=new cc.LabelBMFont,this.addProtectedChild(this._labelBMFontRenderer,ccui.TextBMFont.RENDERER_ZORDER,-1)},setFntFile:function(a){if(a){this._fntFileName=a,this._fntFileHasInit=!0,this._labelBMFontRenderer.initWithString(this._stringValue,a),this._updateContentSizeWithTextureSize(this._labelBMFontRenderer.getContentSize()),this._labelBMFontRendererAdaptDirty=!0;var b=this,c=b._labelBMFontRenderer;c._textureLoaded||c.addEventListener("load",function(){b.setFntFile(b._fntFileName);for(var a=b.parent;a;){if(a.requestDoLayout){a.requestDoLayout();break}a=a.parent}})}},setText:function(a){cc.log("Please use the setString"),this.setString(a)},setString:function(a){a!==this._labelBMFontRenderer.getString()&&(this._stringValue=a,this._labelBMFontRenderer.setString(a),this._fntFileHasInit&&(this._updateContentSizeWithTextureSize(this._labelBMFontRenderer.getContentSize()),this._labelBMFontRendererAdaptDirty=!0))},getString:function(){return this._stringValue},getStringLength:function(){return this._labelBMFontRenderer.getStringLength()},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._labelBMFontRendererAdaptDirty=!0},_adaptRenderers:function(){this._labelBMFontRendererAdaptDirty&&(this._labelBMFontScaleChangedWithSize(),this._labelBMFontRendererAdaptDirty=!1)},getVirtualRendererSize:function(){return this._labelBMFontRenderer.getContentSize()},getVirtualRenderer:function(){return this._labelBMFontRenderer},_labelBMFontScaleChangedWithSize:function(){var a=this._labelBMFontRenderer;if(this._ignoreSize)a.setScale(1);else{var b=a.getContentSize();if(b.width<=0||b.height<=0)return void a.setScale(1);a.setScaleX(this._contentSize.width/b.width),a.setScaleY(this._contentSize.height/b.height)}a.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getDescription:function(){return"TextBMFont"},_createCloneInstance:function(){return new ccui.TextBMFont},_copySpecialProperties:function(a){this.setFntFile(a._fntFileName),this.setString(a._stringValue)}});var _p=ccui.TextBMFont.prototype;_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p=null,ccui.TextBMFont.create=function(a,b){return new ccui.TextBMFont(a,b)},ccui.TextBMFont.RENDERER_ZORDER=-1,ccui._TextFieldRenderer=cc.TextFieldTTF.extend({_maxLengthEnabled:!1,_maxLength:0,_passwordEnabled:!1,_passwordStyleText:"",_attachWithIME:!1,_detachWithIME:!1,_insertText:!1,_deleteBackward:!1,_className:"_TextFieldRenderer",ctor:function(){cc.TextFieldTTF.prototype.ctor.call(this),this._maxLengthEnabled=!1,this._maxLength=0,this._passwordEnabled=!1,this._passwordStyleText="*",this._attachWithIME=!1,this._detachWithIME=!1,this._insertText=!1,this._deleteBackward=!1},onEnter:function(){cc.TextFieldTTF.prototype.onEnter.call(this),cc.TextFieldTTF.prototype.setDelegate.call(this,this)},onTextFieldAttachWithIME:function(a){return this.setAttachWithIME(!0),!1},onTextFieldInsertText:function(a,b,c){return(1!==c||"\n"!==b)&&(this.setInsertText(!0),this._maxLengthEnabled&&cc.TextFieldTTF.prototype.getCharCount.call(this)>=this._maxLength)},onTextFieldDeleteBackward:function(a,b,c){return this.setDeleteBackward(!0),!1},onTextFieldDetachWithIME:function(a){return this.setDetachWithIME(!0),!1},insertText:function(a,b){var c=a;if("\n"!==a&&this._maxLengthEnabled){var d=this.getString().length;if(d>=this._maxLength)return void(this._passwordEnabled&&this.setPasswordText(this.getString()))}cc.TextFieldTTF.prototype.insertText.call(this,c,b),this._passwordEnabled&&cc.TextFieldTTF.prototype.getCharCount.call(this)>0&&this.setPasswordText(this.getString())},deleteBackward:function(){cc.TextFieldTTF.prototype.deleteBackward.call(this),cc.TextFieldTTF.prototype.getCharCount.call(this)>0&&this._passwordEnabled&&this.setPasswordText(this._inputText)},openIME:function(){cc.TextFieldTTF.prototype.attachWithIME.call(this)},closeIME:function(){cc.TextFieldTTF.prototype.detachWithIME.call(this)},setMaxLengthEnabled:function(a){this._maxLengthEnabled=a},isMaxLengthEnabled:function(){return this._maxLengthEnabled},setMaxLength:function(a){this._maxLength=a},getMaxLength:function(){return this._maxLength},getCharCount:function(){return cc.TextFieldTTF.prototype.getCharCount.call(this)},setPasswordEnabled:function(a){this._passwordEnabled=a},isPasswordEnabled:function(){return this._passwordEnabled},setPasswordStyleText:function(a){if(!(a.length>1)){var b=a.charCodeAt(0);b<33||b>126||(this._passwordStyleText=a)}},setPasswordText:function(a){var b="",c=a.length,d=c;this._maxLengthEnabled&&c>this._maxLength&&(d=this._maxLength);for(var e=0;e<d;++e)b+=this._passwordStyleText;cc.LabelTTF.prototype.setString.call(this,b)},setAttachWithIME:function(a){this._attachWithIME=a},getAttachWithIME:function(){return this._attachWithIME},setDetachWithIME:function(a){this._detachWithIME=a},getDetachWithIME:function(){return this._detachWithIME},setInsertText:function(a){this._insertText=a},getInsertText:function(){return this._insertText},setDeleteBackward:function(a){this._deleteBackward=a},getDeleteBackward:function(){return this._deleteBackward},onDraw:function(a){return!1}}),ccui._TextFieldRenderer.create=function(a,b,c){var d=new ccui._TextFieldRenderer;return d&&d.initWithString("",b,c)?(a&&d.setPlaceHolder(a),d):null},ccui.TextField=ccui.Widget.extend({_textFieldRenderer:null,_touchWidth:0,_touchHeight:0,_useTouchArea:!1,_textFieldEventListener:null,_textFieldEventSelector:null,_passwordStyleText:"",_textFieldRendererAdaptDirty:!0,_fontName:"",_fontSize:12,_ccEventCallback:null,ctor:function(a,b,c){ccui.Widget.prototype.ctor.call(this),this.setTouchEnabled(!0),b&&this.setFontName(b),c&&this.setFontSize(c),a&&this.setPlaceHolder(a)},onEnter:function(){ccui.Widget.prototype.onEnter.call(this),this.scheduleUpdate()},_initRenderer:function(){this._textFieldRenderer=ccui._TextFieldRenderer.create("input words here","Thonburi",20),this.addProtectedChild(this._textFieldRenderer,ccui.TextField.RENDERER_ZORDER,-1)},setTouchSize:function(a){this._touchWidth=a.width,this._touchHeight=a.height},setTouchAreaEnabled:function(a){this._useTouchArea=a},hitTest:function(a){if(this._useTouchArea){var b=this.convertToNodeSpace(a),c=cc.rect(-this._touchWidth*this._anchorPoint.x,-this._touchHeight*this._anchorPoint.y,this._touchWidth,this._touchHeight);return b.x>=c.x&&b.x<=c.x+c.width&&b.y>=c.y&&b.y<=c.y+c.height}return ccui.Widget.prototype.hitTest.call(this,a)},getTouchSize:function(){return cc.size(this._touchWidth,this._touchHeight)},setText:function(a){cc.log("Please use the setString"),this.setString(a)},setString:function(a){null!=a&&(a=String(a),this.isMaxLengthEnabled()&&(a=a.substr(0,this.getMaxLength())),this.isPasswordEnabled()?(this._textFieldRenderer.setPasswordText(a),this._textFieldRenderer.setString(""),this._textFieldRenderer.insertText(a,a.length)):this._textFieldRenderer.setString(a),this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()))},setPlaceHolder:function(a){this._textFieldRenderer.setPlaceHolder(a),this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())},getPlaceHolder:function(){return this._textFieldRenderer.getPlaceHolder()},getPlaceHolderColor:function(){return this._textFieldRenderer.getPlaceHolderColor()},setPlaceHolderColor:function(a){this._textFieldRenderer.setColorSpaceHolder(a)},setTextColor:function(a){this._textFieldRenderer.setTextColor(a)},setFontSize:function(a){this._textFieldRenderer.setFontSize(a),this._fontSize=a,this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())},getFontSize:function(){return this._fontSize},setFontName:function(a){this._textFieldRenderer.setFontName(a),this._fontName=a,this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize())},getFontName:function(){return this._fontName},didNotSelectSelf:function(){this._textFieldRenderer.detachWithIME()},getStringValue:function(){return cc.log("Please use the getString"),this.getString()},getString:function(){return this._textFieldRenderer.getString()},getStringLength:function(){return this._textFieldRenderer.getStringLength()},onTouchBegan:function(a,b){var c=this,d=ccui.Widget.prototype.onTouchBegan.call(c,a,b);return c._hit?setTimeout(function(){c._textFieldRenderer.attachWithIME()},0):setTimeout(function(){c._textFieldRenderer.detachWithIME()},0),d},setMaxLengthEnabled:function(a){this._textFieldRenderer.setMaxLengthEnabled(a)},isMaxLengthEnabled:function(){return this._textFieldRenderer.isMaxLengthEnabled()},setMaxLength:function(a){this._textFieldRenderer.setMaxLength(a),this.setString(this.getString())},getMaxLength:function(){return this._textFieldRenderer.getMaxLength()},setPasswordEnabled:function(a){this._textFieldRenderer.setPasswordEnabled(a)},isPasswordEnabled:function(){return this._textFieldRenderer.isPasswordEnabled()},setPasswordStyleText:function(a){this._textFieldRenderer.setPasswordStyleText(a),this._passwordStyleText=a,this.setString(this.getString())},getPasswordStyleText:function(){return this._passwordStyleText},update:function(a){this.getDetachWithIME()&&(this._detachWithIMEEvent(),this.setDetachWithIME(!1)),this.getAttachWithIME()&&(this._attachWithIMEEvent(),this.setAttachWithIME(!1)),this.getInsertText()&&(this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()),this._insertTextEvent(),this.setInsertText(!1)),this.getDeleteBackward()&&(this._textFieldRendererAdaptDirty=!0,this._updateContentSizeWithTextureSize(this._textFieldRenderer.getContentSize()),this._deleteBackwardEvent(),this.setDeleteBackward(!1))},getAttachWithIME:function(){return this._textFieldRenderer.getAttachWithIME()},setAttachWithIME:function(a){this._textFieldRenderer.setAttachWithIME(a)},getDetachWithIME:function(){return this._textFieldRenderer.getDetachWithIME()},setDetachWithIME:function(a){this._textFieldRenderer.setDetachWithIME(a)},getInsertText:function(){return this._textFieldRenderer.getInsertText()},setInsertText:function(a){this._textFieldRenderer.setInsertText(a)},getDeleteBackward:function(){return this._textFieldRenderer.getDeleteBackward()},setDeleteBackward:function(a){this._textFieldRenderer.setDeleteBackward(a)},_attachWithIMEEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_ATTACH_WITH_IME):this._textFieldEventSelector(this,ccui.TextField.EVENT_ATTACH_WITH_IME)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_ATTACH_WITH_IME)},_detachWithIMEEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_DETACH_WITH_IME):this._textFieldEventSelector(this,ccui.TextField.EVENT_DETACH_WITH_IME)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_DETACH_WITH_IME)},_insertTextEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_INSERT_TEXT):this._textFieldEventSelector(this,ccui.TextField.EVENT_INSERT_TEXT)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_INSERT_TEXT)},_deleteBackwardEvent:function(){this._textFieldEventSelector&&(this._textFieldEventListener?this._textFieldEventSelector.call(this._textFieldEventListener,this,ccui.TextField.EVENT_DELETE_BACKWARD):this._textFieldEventSelector(this,ccui.TextField.EVENT_DELETE_BACKWARD)),this._ccEventCallback&&this._ccEventCallback(this,ccui.TextField.EVENT_DELETE_BACKWARD)},addEventListenerTextField:function(a,b){this.addEventListener(a,b)},addEventListener:function(a,b){this._textFieldEventSelector=a,this._textFieldEventListener=b},_onSizeChanged:function(){ccui.Widget.prototype._onSizeChanged.call(this),this._textFieldRendererAdaptDirty=!0},_adaptRenderers:function(){this._textFieldRendererAdaptDirty&&(this._textfieldRendererScaleChangedWithSize(),this._textFieldRendererAdaptDirty=!1)},_textfieldRendererScaleChangedWithSize:function(){this._ignoreSize||this._textFieldRenderer.setDimensions(this._contentSize),this._textFieldRenderer.setPosition(this._contentSize.width/2,this._contentSize.height/2)},getAutoRenderSize:function(){var a=this._textFieldRenderer.getContentSize();return this._ignoreSize||(this._textFieldRenderer.setDimensions(0,0),a=this._textFieldRenderer.getContentSize(),this._textFieldRenderer.setDimensions(this._contentSize.width,this._contentSize.height)),a},getVirtualRendererSize:function(){return this._textFieldRenderer.getContentSize()},getVirtualRenderer:function(){return this._textFieldRenderer},getDescription:function(){return"TextField"},attachWithIME:function(){this._textFieldRenderer.attachWithIME()},_createCloneInstance:function(){return new ccui.TextField},_copySpecialProperties:function(a){this.setString(a._textFieldRenderer.getString()),this.setPlaceHolder(a.getString()),this.setFontSize(a._textFieldRenderer.getFontSize()),this.setFontName(a._textFieldRenderer.getFontName()),this.setMaxLengthEnabled(a.isMaxLengthEnabled()),this.setMaxLength(a.getMaxLength()),this.setPasswordEnabled(a.isPasswordEnabled()),this.setPasswordStyleText(a._passwordStyleText),this.setAttachWithIME(a.getAttachWithIME()),this.setDetachWithIME(a.getDetachWithIME()),this.setInsertText(a.getInsertText()),this.setDeleteBackward(a.getDeleteBackward()),this._ccEventCallback=a._ccEventCallback,this._textFieldEventListener=a._textFieldEventListener,this._textFieldEventSelector=a._textFieldEventSelector},setTextAreaSize:function(a){this.setContentSize(a)},setTextHorizontalAlignment:function(a){this._textFieldRenderer.setHorizontalAlignment(a)},setTextVerticalAlignment:function(a){this._textFieldRenderer.setVerticalAlignment(a)},_setFont:function(a){this._textFieldRenderer._setFont(a),this._textFieldRendererAdaptDirty=!0},_getFont:function(){return this._textFieldRenderer._getFont()},_changePosition:function(){this._adaptRenderers()}}),ccui.TextField.create=function(a,b,c){return new ccui.TextField(a,b,c)};var _p=ccui.TextField.prototype;_p.string,cc.defineGetterSetter(_p,"string",_p.getString,_p.setString),_p.placeHolder,cc.defineGetterSetter(_p,"placeHolder",_p.getPlaceHolder,_p.setPlaceHolder),_p.font,cc.defineGetterSetter(_p,"font",_p._getFont,_p._setFont),_p.fontSize,cc.defineGetterSetter(_p,"fontSize",_p.getFontSize,_p.setFontSize),_p.fontName,cc.defineGetterSetter(_p,"fontName",_p.getFontName,_p.setFontName),_p.maxLengthEnabled,cc.defineGetterSetter(_p,"maxLengthEnabled",_p.isMaxLengthEnabled,_p.setMaxLengthEnabled),_p.maxLength,cc.defineGetterSetter(_p,"maxLength",_p.getMaxLength,_p.setMaxLength),_p.passwordEnabled,cc.defineGetterSetter(_p,"passwordEnabled",_p.isPasswordEnabled,_p.setPasswordEnabled),_p=null,ccui.TextField.EVENT_ATTACH_WITH_IME=0,ccui.TextField.EVENT_DETACH_WITH_IME=1,ccui.TextField.EVENT_INSERT_TEXT=2,ccui.TextField.EVENT_DELETE_BACKWARD=3,ccui.TextField.RENDERER_ZORDER=-1,ccui.RichElement=ccui.Class.extend({_type:0,_tag:0,_color:null,_opacity:0,ctor:function(a,b,c){this._type=0,this._tag=a||0,this._color=cc.color(255,255,255,255),b&&(this._color.r=b.r,this._color.g=b.g,this._color.b=b.b),this._opacity=c||0,void 0===c?this._color.a=b.a:this._color.a=c}}),ccui.RichElementText=ccui.RichElement.extend({_text:"",_fontName:"",_fontSize:0,_fontDefinition:null,ctor:function(a,b,c,d,e,f){var g=b;b&&b instanceof cc.FontDefinition&&(g=b.fillStyle,e=b.fontName,f=b.fontSize,this._fontDefinition=b),ccui.RichElement.prototype.ctor.call(this,a,g,c),this._type=ccui.RichElement.TEXT,this._text=d,this._fontName=e,this._fontSize=f}}),ccui.RichElementText.create=function(a,b,c,d,e,f){return new ccui.RichElementText(a,b,c,d,e,f)},ccui.RichElementImage=ccui.RichElement.extend({_filePath:"",_textureRect:null,_textureType:0,ctor:function(a,b,c,d){ccui.RichElement.prototype.ctor.call(this,a,b,c),this._type=ccui.RichElement.IMAGE,this._filePath=d||"",this._textureRect=cc.rect(0,0,0,0),this._textureType=0}}),ccui.RichElementImage.create=function(a,b,c,d){return new ccui.RichElementImage(a,b,c,d)},ccui.RichElementCustomNode=ccui.RichElement.extend({_customNode:null,ctor:function(a,b,c,d){ccui.RichElement.prototype.ctor.call(this,a,b,c),this._type=ccui.RichElement.CUSTOM,this._customNode=d||null}}),ccui.RichElementCustomNode.create=function(a,b,c,d){return new ccui.RichElementCustomNode(a,b,c,d)},ccui.RichText=ccui.Widget.extend({_formatTextDirty:!1,_richElements:null,_elementRenders:null,_leftSpaceWidth:0,_verticalSpace:0,_elementRenderersContainer:null,_lineBreakOnSpace:!1,_textHorizontalAlignment:null,_textVerticalAlignment:null,ctor:function(){ccui.Widget.prototype.ctor.call(this),this._formatTextDirty=!1,this._richElements=[],this._elementRenders=[],this._leftSpaceWidth=0,this._verticalSpace=0,this._textHorizontalAlignment=cc.TEXT_ALIGNMENT_LEFT,this._textVerticalAlignment=cc.VERTICAL_TEXT_ALIGNMENT_TOP},_initRenderer:function(){this._elementRenderersContainer=new cc.Node,this._elementRenderersContainer.setAnchorPoint(.5,.5),this.addProtectedChild(this._elementRenderersContainer,0,-1)},insertElement:function(a,b){this._richElements.splice(b,0,a),this._formatTextDirty=!0},pushBackElement:function(a){this._richElements.push(a),this._formatTextDirty=!0},removeElement:function(a){cc.isNumber(a)?this._richElements.splice(a,1):cc.arrayRemoveObject(this._richElements,a),this._formatTextDirty=!0},formatText:function(){if(this._formatTextDirty){this._elementRenderersContainer.removeAllChildren(),this._elementRenders.length=0;var a,b,c=this._richElements;if(this._ignoreSize)for(this._addNewLine(),a=0;a<c.length;a++){b=c[a];var d=null;switch(b._type){case ccui.RichElement.TEXT:d=b._fontDefinition?new cc.LabelTTF(b._text,b._fontDefinition):new cc.LabelTTF(b._text,b._fontName,b._fontSize);break;case ccui.RichElement.IMAGE:d=new cc.Sprite(b._filePath);break;case ccui.RichElement.CUSTOM:d=b._customNode}d.setColor(b._color),d.setOpacity(b._color.a),this._pushToContainer(d)}else for(this._addNewLine(),a=0;a<c.length;a++)switch(b=c[a],b._type){case ccui.RichElement.TEXT:b._fontDefinition?this._handleTextRenderer(b._text,b._fontDefinition,b._fontDefinition.fontSize,b._fontDefinition.fillStyle):this._handleTextRenderer(b._text,b._fontName,b._fontSize,b._color);break;case ccui.RichElement.IMAGE:this._handleImageRenderer(b._filePath,b._color,b._color.a);break;case ccui.RichElement.CUSTOM:this._handleCustomRenderer(b._customNode)}this.formatRenderers(),this._formatTextDirty=!1}},_handleTextRenderer:function(a,b,c,d){if(""!==a){if("\n"===a)return void this._addNewLine();var e=b instanceof cc.FontDefinition?new cc.LabelTTF(a,b):new cc.LabelTTF(a,b,c),f=e.getContentSize().width;if(this._leftSpaceWidth-=f,this._leftSpaceWidth<0){
var g=-this._leftSpaceWidth/f,h=a,i=h.length,j=i*(1-g),k=h.substr(0,j),l=h.substr(j,h.length-1),m=j>0;if(this._lineBreakOnSpace){var n=k.lastIndexOf(" ");j=n===-1?j:n+1,l=h.substr(j,h.length-1),m=j>0&&" "!==l}if(m){var o=null;b instanceof cc.FontDefinition?(o=new cc.LabelTTF(k.substr(0,j),b),o.setOpacity(b.fillStyle.a)):(o=new cc.LabelTTF(k.substr(0,j),b,c),o.setColor(d),o.setOpacity(d.a)),this._pushToContainer(o)}this._addNewLine(),this._handleTextRenderer(l,b,c,d)}else b instanceof cc.FontDefinition?e.setOpacity(b.fillStyle.a):(e.setColor(d),e.setOpacity(d.a)),this._pushToContainer(e)}},_handleImageRenderer:function(a,b,c){var d=new cc.Sprite(a);this._handleCustomRenderer(d)},_handleCustomRenderer:function(a){var b=a.getContentSize();this._leftSpaceWidth-=b.width,this._leftSpaceWidth<0?(this._addNewLine(),this._pushToContainer(a),this._leftSpaceWidth-=b.width):this._pushToContainer(a)},_addNewLine:function(){this._leftSpaceWidth=this._customSize.width,this._elementRenders.push([])},formatRenderers:function(){var a,b,c,d,e,f,g,h=0,i=this._elementRenderersContainer,j=this._elementRenders;if(this._ignoreSize){var k=0;for(c=j[0],d=0,b=0;b<c.length;b++){e=c[b],e.setAnchorPoint(cc.p(0,0)),e.setPosition(d,0),i.addChild(e,1,b),f=e.getLineHeight?e.getLineHeight():h;var l=e.getContentSize();k+=l.width,h=Math.max(Math.min(h,f),l.height),d+=l.width}if(this._textHorizontalAlignment!==cc.TEXT_ALIGNMENT_LEFT)for(g=0,this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_RIGHT?g=this._contentSize.width-d:this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_CENTER&&(g=(this._contentSize.width-d)/2),b=0;b<c.length;b++)c[b].x+=g;i.setContentSize(k,h)}else{var m=[];for(a=0;a<j.length;a++){c=j[a];var n=0;for(b=0;b<c.length;b++)e=c[b],f=e.getLineHeight?e.getLineHeight():e.getContentSize().height,n=Math.max(Math.min(e.getContentSize().height,f),n);m[a]=n,h+=m[a]}var o=this._customSize.height;for(a=0;a<j.length;a++){for(c=j[a],d=0,o-=m[a]+this._verticalSpace,b=0;b<c.length;b++)e=c[b],e.setAnchorPoint(cc.p(0,0)),e.setPosition(cc.p(d,o)),i.addChild(e,1),d+=e.getContentSize().width;if(this._textHorizontalAlignment!==cc.TEXT_ALIGNMENT_LEFT||this._textVerticalAlignment!==cc.VERTICAL_TEXT_ALIGNMENT_TOP){g=0,this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_RIGHT?g=this._contentSize.width-d:this._textHorizontalAlignment===cc.TEXT_ALIGNMENT_CENTER&&(g=(this._contentSize.width-d)/2);var p=0;for(this._textVerticalAlignment===cc.VERTICAL_TEXT_ALIGNMENT_BOTTOM?p=this._customSize.height-h:this._textVerticalAlignment===cc.VERTICAL_TEXT_ALIGNMENT_CENTER&&(p=(this._customSize.height-h)/2),b=0;b<c.length;b++)e=c[b],e.x+=g,e.y-=p}}i.setContentSize(this._contentSize)}var q=j.length;for(a=0;a<q;a++)j[a].length=0;this._elementRenders.length=0,this.setContentSize(this._ignoreSize?this.getVirtualRendererSize():this._customSize),this._updateContentSizeWithTextureSize(this._contentSize),i.setPosition(.5*this._contentSize.width,.5*this._contentSize.height)},_pushToContainer:function(a){this._elementRenders.length<=0||this._elementRenders[this._elementRenders.length-1].push(a)},_adaptRenderers:function(){this.formatText()},setVerticalSpace:function(a){this._verticalSpace=a},setAnchorPoint:function(a){ccui.Widget.prototype.setAnchorPoint.call(this,a),this._elementRenderersContainer.setAnchorPoint(a)},_setAnchorX:function(a){ccui.Widget.prototype._setAnchorX.call(this,a),this._elementRenderersContainer._setAnchorX(a)},_setAnchorY:function(a){ccui.Widget.prototype._setAnchorY.call(this,a),this._elementRenderersContainer._setAnchorY(a)},getVirtualRendererSize:function(){return this._elementRenderersContainer.getContentSize()},ignoreContentAdaptWithSize:function(a){this._ignoreSize!==a&&(this._formatTextDirty=!0,ccui.Widget.prototype.ignoreContentAdaptWithSize.call(this,a))},getContentSize:function(){return this.formatText(),cc.Node.prototype.getContentSize.call(this)},_getWidth:function(){return this.formatText(),cc.Node.prototype._getWidth.call(this)},_getHeight:function(){return this.formatText(),cc.Node.prototype._getHeight.call(this)},setContentSize:function(a,b){var c=void 0===b?a.width:a,d=void 0===b?a.height:b;ccui.Widget.prototype.setContentSize.call(this,c,d),this._formatTextDirty=!0},getDescription:function(){return"RichText"},setCascadeOpacityEnabled:function(a){this._super(a),this._elementRenderersContainer.setCascadeOpacityEnabled(a)},setLineBreakOnSpace:function(a){this._lineBreakOnSpace=a,this._formatTextDirty=!0,this.formatText()},setTextHorizontalAlignment:function(a){a!==this._textHorizontalAlignment&&(this._textHorizontalAlignment=a,this.formatText())},setTextVerticalAlignment:function(a){a!==this._textVerticalAlignment&&(this._textVerticalAlignment=a,this.formatText())}}),ccui.RichText.create=function(){return new ccui.RichText},ccui.RichElement.TEXT=0,ccui.RichElement.IMAGE=1,ccui.RichElement.CUSTOM=2,ccui.ScrollViewBar=ccui.ProtectedNode.extend({_parentScroll:null,_direction:null,_upperHalfCircle:null,_lowerHalfCircle:null,_body:null,_opacity:255,_marginFromBoundary:0,_marginForLength:0,_touching:!1,_autoHideEnabled:!0,autoHideTime:0,_autoHideRemainingTime:0,_className:"ScrollViewBar",ctor:function(a,b){cc.ProtectedNode.prototype.ctor.call(this),this._direction=b,this._parentScroll=a,this._marginFromBoundary=ccui.ScrollViewBar.DEFAULT_MARGIN,this._marginForLength=ccui.ScrollViewBar.DEFAULT_MARGIN,this.opacity=255*ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY,this.autoHideTime=ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME,this._autoHideEnabled=!0,ccui.ScrollViewBar.prototype.init.call(this),this.setCascadeColorEnabled(!0),this.setCascadeOpacityEnabled(!0)},init:function(){this._upperHalfCircle=ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.HALF_CIRCLE_IMAGE,ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY),this._upperHalfCircle.setAnchorPoint(cc.p(.5,0)),this._lowerHalfCircle=ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.HALF_CIRCLE_IMAGE,ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY),this._lowerHalfCircle.setAnchorPoint(cc.p(.5,0)),this._lowerHalfCircle.setScaleY(-1),this.addProtectedChild(this._upperHalfCircle),this.addProtectedChild(this._lowerHalfCircle),this._body=ccui.helper._createSpriteFromBase64(ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT,ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY),this._body.setAnchorPoint(cc.p(.5,0)),this.addProtectedChild(this._body),this.setColor(ccui.ScrollViewBar.DEFAULT_COLOR),this.onScrolled(cc.p(0,0)),cc.ProtectedNode.prototype.setOpacity.call(this,0),this._autoHideRemainingTime=0,this._direction===ccui.ScrollView.DIR_HORIZONTAL&&this.setRotation(90)},setPositionFromCorner:function(a){this._direction===ccui.ScrollView.DIR_VERTICAL?(this._marginForLength=a.y,this._marginFromBoundary=a.x):(this._marginForLength=a.x,this._marginFromBoundary=a.y)},onEnter:function(){cc.ProtectedNode.prototype.onEnter.call(this),this.scheduleUpdate()},getPositionFromCorner:function(){return this._direction===ccui.ScrollView.DIR_VERTICAL?cc.p(this._marginFromBoundary,this._marginForLength):cc.p(this._marginForLength,this._marginFromBoundary)},setWidth:function(a){var b=a/this._body.width;this._body.setScaleX(b),this._upperHalfCircle.setScale(b),this._lowerHalfCircle.setScale(-b)},getWidth:function(){return this._body.getBoundingBox().width},setAutoHideEnabled:function(a){this._autoHideEnabled=a,!this._autoHideEnabled&&!this._touching&&this._autoHideRemainingTime<=0?cc.ProtectedNode.prototype.setOpacity.call(this,this.opacity):cc.ProtectedNode.prototype.setOpacity.call(this,0)},isAutoHideEnabled:function(){return this._autoHideEnabled},setOpacity:function(a){this._opacity=a},getOpacity:function(){return this._opacity},_updateLength:function(a){var b=a/this._body.getTextureRect().height;this._body.setScaleY(b),this._upperHalfCircle.setPositionY(this._body.getPositionY()+a)},_processAutoHide:function(a){!this._autoHideEnabled||this._autoHideRemainingTime<=0||this._touching||(this._autoHideRemainingTime-=a,this._autoHideRemainingTime<=this.autoHideTime&&(this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime),cc.ProtectedNode.prototype.setOpacity.call(this,this._opacity*(this._autoHideRemainingTime/this.autoHideTime))))},update:function(a){this._processAutoHide(a)},onTouchBegan:function(){this._autoHideEnabled&&(this._touching=!0)},onTouchEnded:function(){this._autoHideEnabled&&(this._touching=!1,this._autoHideRemainingTime<=0||(this._autoHideRemainingTime=this.autoHideTime))},onScrolled:function(a){this._autoHideEnabled&&(this._autoHideRemainingTime=this.autoHideTime,cc.ProtectedNode.prototype.setOpacity.call(this,this.opacity));var b=this._parentScroll.getInnerContainer(),c=0,d=0,e=0,f=0;this._direction===ccui.ScrollView.DIR_VERTICAL?(c=b.height,d=this._parentScroll.height,e=a.y,f=-b.getPositionY()):this._direction===ccui.ScrollView.DIR_HORIZONTAL&&(c=b.width,d=this._parentScroll.width,e=a.x,f=-b.getPositionX());var g=this._calculateLength(c,d,e),h=this._calculatePosition(c,d,f,e,g);this._updateLength(g),this.setPosition(h)},_calculateLength:function(a,b,c){var d=a;if(0!==c){var e=20;d+=(c>0?c:-c)*e}var f=b/d;return Math.abs(b-2*this._marginForLength)*f},_calculatePosition:function(a,b,c,d,e){var f=a-b;0!==d&&(f+=Math.abs(d));var g=0;0!==f&&(g=c/f,g=Math.max(g,0),g=Math.min(g,1));var h=(b-e-2*this._marginForLength)*g+this._marginForLength;return this._direction===ccui.ScrollView.DIR_VERTICAL?cc.p(this._parentScroll.width-this._marginFromBoundary,h):cc.p(h,this._marginFromBoundary)}});var _p=ccui.ScrollViewBar.prototype;_p.opacity,cc.defineGetterSetter(_p,"opacity",_p.getOpacity,_p.setOpacity),_p.autoHideEnabled,cc.defineGetterSetter(_p,"autoHideEnabled",_p.isAutoHideEnabled,_p.setAutoHideEnabled),ccui.ScrollViewBar.DEFAULT_COLOR=cc.color(52,65,87),ccui.ScrollViewBar.DEFAULT_MARGIN=20,ccui.ScrollViewBar.DEFAULT_AUTO_HIDE_TIME=.2,ccui.ScrollViewBar.DEFAULT_SCROLLBAR_OPACITY=.4,ccui.ScrollViewBar.HALF_CIRCLE_IMAGE_KEY="/__half_circle_image",ccui.ScrollViewBar.HALF_CIRCLE_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAGCAMAAADAMI+zAAAAJ1BMVEX///////////////////////////////////////////////////9Ruv0SAAAADHRSTlMABgcbbW7Hz9Dz+PmlcJP5AAAAMElEQVR4AUXHwQ2AQAhFwYcLH1H6r1djzDK3ASxUpTBeK/uTCyz7dx54b44m4p5cD1MwAooEJyk3AAAAAElFTkSuQmCC",ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT_KEY="/__body_image_height",ccui.ScrollViewBar.BODY_IMAGE_1_PIXEL_HEIGHT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAABCAMAAADdNb8LAAAAA1BMVEX///+nxBvIAAAACklEQVR4AWNABgAADQABYc2cpAAAAABJRU5ErkJggg==",ccui.ScrollView=ccui.Layout.extend({_innerContainer:null,_direction:null,_topBoundary:0,_bottomBoundary:0,_leftBoundary:0,_rightBoundary:0,_touchMoveDisplacements:null,_touchMoveTimeDeltas:null,_touchMovePreviousTimestamp:0,_touchTotalTimeThreshold:.5,_autoScrolling:!1,_autoScrollTargetDelta:null,_autoScrollAttenuate:!0,_autoScrollStartPosition:null,_autoScrollTotalTime:0,_autoScrollAccumulatedTime:0,_autoScrollCurrentlyOutOfBoundary:!1,_autoScrollBraking:!1,_autoScrollBrakingStartPosition:null,_bePressed:!1,_childFocusCancelOffset:0,bounceEnabled:!1,_outOfBoundaryAmount:null,_outOfBoundaryAmountDirty:!0,inertiaScrollEnabled:!1,_scrollBarEnabled:!0,_verticalScrollBar:null,_horizontalScrollBar:null,_scrollViewEventListener:null,_scrollViewEventSelector:null,_className:"ScrollView",ctor:function(){ccui.Layout.prototype.ctor.call(this),this.setClippingEnabled(!0),this._innerContainer.setTouchEnabled(!1),this._direction=ccui.ScrollView.DIR_NONE,this._childFocusCancelOffset=5,this.inertiaScrollEnabled=!0,this._outOfBoundaryAmount=cc.p(0,0),this._autoScrollTargetDelta=cc.p(0,0),this._autoScrollStartPosition=cc.p(0,0),this._autoScrollBrakingStartPosition=cc.p(0,0),this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this._touchMovePreviousTimestamp=0,this._scrollBarEnabled=!0,this._initScrollBar(),this.setTouchEnabled(!0)},init:function(){return!!ccui.Layout.prototype.init.call(this)},onEnter:function(){ccui.Layout.prototype.onEnter.call(this),this.scheduleUpdate()},onExit:function(){cc.renderer._removeCache(this.__instanceId),ccui.Layout.prototype.onExit.call(this)},findNextFocusedWidget:function(a,b){return this.getLayoutType()===ccui.Layout.LINEAR_VERTICAL||this.getLayoutType()===ccui.Layout.LINEAR_HORIZONTAL?this._innerContainer.findNextFocusedWidget(a,b):ccui.Widget.prototype.findNextFocusedWidget.call(this,a,b)},_initRenderer:function(){ccui.Layout.prototype._initRenderer.call(this),this._innerContainer=new ccui.Layout,this._innerContainer.setColor(cc.color(255,255,255)),this._innerContainer.setOpacity(255),this._innerContainer.setCascadeColorEnabled(!0),this._innerContainer.setCascadeOpacityEnabled(!0),this.addProtectedChild(this._innerContainer,1,1)},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_WEBGL?new ccui.ScrollView.WebGLRenderCmd(this):new ccui.ScrollView.CanvasRenderCmd(this)},_onSizeChanged:function(){ccui.Layout.prototype._onSizeChanged.call(this);var a=this._contentSize;this._topBoundary=a.height,this._rightBoundary=a.width;var b=this._innerContainer.getContentSize();this._innerContainer.setContentSize(cc.size(Math.max(b.width,a.width),Math.max(b.height,a.height))),this._innerContainer.setPosition(0,a.height-this._innerContainer.getContentSize().height),this._verticalScrollBar&&this._verticalScrollBar.onScrolled(this._getHowMuchOutOfBoundary()),this._horizontalScrollBar&&this._horizontalScrollBar.onScrolled(this._getHowMuchOutOfBoundary())},setInnerContainerSize:function(a){var b=this._innerContainer,c=this._contentSize,d=c.width,e=c.height;a.width<c.width?cc.log("Inner width <= ScrollView width, it will be force sized!"):d=a.width,a.height<c.height?cc.log("Inner height <= ScrollView height, it will be force sized!"):e=a.height,b.setContentSize(cc.size(d,e));var f=this._innerContainer.getPosition(),g=this._innerContainer.getAnchorPoint();0!=this._innerContainer.getLeftBoundary()&&(f.x=g.x*d),this._innerContainer.getTopBoundary()!=this._contentSize.height&&(f.y=this._contentSize.height-(1-g.y)*e),this.setInnerContainerPosition(f),this._updateScrollBar(cc.p(0,0))},_setInnerWidth:function(a){var b=this._contentSize.width,c=b,d=this._innerContainer,e=d.width;switch(a<b?cc.log("Inner width <= scrollview width, it will be force sized!"):c=a,d.width=c,this._direction){case ccui.ScrollView.DIR_HORIZONTAL:case ccui.ScrollView.DIR_BOTH:if(d.getRightBoundary()<=b){var f=d.width,g=e-f;this._scrollChildren(g,0)}}var h=d.anchorX;d.getLeftBoundary()>0&&(d.x=h*c),d.getRightBoundary()<b&&(d.x=b-(1-h)*c)},_setInnerHeight:function(a){var b=this._contentSize.height,c=b,d=this._innerContainer,e=d.height;switch(a<b?cc.log("Inner height <= scrollview height, it will be force sized!"):c=a,d.height=c,this._direction){case ccui.ScrollView.DIR_VERTICAL:case ccui.ScrollView.DIR_BOTH:var f=c,g=e-f;this._scrollChildren(0,g)}var h=d.anchorY;d.getLeftBoundary()>0&&(d.y=h*c),d.getRightBoundary()<b&&(d.y=b-(1-h)*c)},setInnerContainerPosition:function(a){if(a.x!==this._innerContainer.getPositionX()||a.y!==this._innerContainer.getPositionY()){if(this._innerContainer.setPosition(a),this._outOfBoundaryAmountDirty=!0,this.bounceEnabled)for(var b=ccui.ScrollView.MOVEDIR_TOP;b<ccui.ScrollView.MOVEDIR_RIGHT;++b)this._isOutOfBoundary(b)&&this._processScrollEvent(b,!0);this._dispatchEvent(ccui.ScrollView.EVENT_CONTAINER_MOVED)}},getInnerContainerPosition:function(){return this._innerContainer.getPosition()},getInnerContainerSize:function(){return this._innerContainer.getContentSize()},_getInnerWidth:function(){return this._innerContainer.width},_getInnerHeight:function(){return this._innerContainer.height},_isInContainer:function(a){if(!this._clippingEnabled)return!0;var b=a._position,c=a._contentSize,d=a._anchorPoint,e=this._customSize,f=this._innerContainer._position,g=0,h=0;return!((g=b.y-d.y*c.height)>=e.height-f.y||g+c.height<=-f.y||(h=b.x-d.x*c.width)>=e.width-f.x||h+c.width<=-f.x)},updateChildren:function(){var a,b,c,d=this._innerContainer._children;for(b=0,c=d.length;b<c;b++)a=d[b],a._inViewRect===!0&&this._isInContainer(a)===!1?a._inViewRect=!1:a._inViewRect===!1&&this._isInContainer(a)===!0&&(a._inViewRect=!0)},addChild:function(a,b,c){return!!a&&(this._isInContainer(a)===!1&&(a._inViewRect=!1),b=b||a.getLocalZOrder(),c=c||a.getTag(),this._innerContainer.addChild(a,b,c))},removeAllChildren:function(){this.removeAllChildrenWithCleanup(!0)},removeAllChildrenWithCleanup:function(a){this._innerContainer.removeAllChildrenWithCleanup(a)},removeChild:function(a,b){return this._innerContainer.removeChild(a,b)},getChildren:function(){return this._innerContainer.getChildren()},getChildrenCount:function(){return this._innerContainer.getChildrenCount()},getChildByTag:function(a){return this._innerContainer.getChildByTag(a)},getChildByName:function(a){return this._innerContainer.getChildByName(a)},_flattenVectorByDirection:function(a){var b=cc.p(0,0);return b.x=this._direction===ccui.ScrollView.DIR_VERTICAL?0:a.x,b.y=this._direction===ccui.ScrollView.DIR_HORIZONTAL?0:a.y,b},_getHowMuchOutOfBoundary:function(a){if(void 0===a&&(a=cc.p(0,0)),0===a.x&&0===a.y&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var b=cc.p(0,0);return this._innerContainer.getLeftBoundary()+a.x>this._leftBoundary?b.x=this._leftBoundary-(this._innerContainer.getLeftBoundary()+a.x):this._innerContainer.getRightBoundary()+a.x<this._rightBoundary&&(b.x=this._rightBoundary-(this._innerContainer.getRightBoundary()+a.x)),this._innerContainer.getTopBoundary()+a.y<this._topBoundary?b.y=this._topBoundary-(this._innerContainer.getTopBoundary()+a.y):this._innerContainer.getBottomBoundary()+a.y>this._bottomBoundary&&(b.y=this._bottomBoundary-(this._innerContainer.getBottomBoundary()+a.y)),0===a.x&&0===a.y&&(this._outOfBoundaryAmount=b,this._outOfBoundaryAmountDirty=!1),b},_isOutOfBoundary:function(a){var b=this._getHowMuchOutOfBoundary();if(void 0===a)return!this._fltEqualZero(b);switch(a){case ccui.ScrollView.MOVEDIR_TOP:return b.y>0;case ccui.ScrollView.MOVEDIR_BOTTOM:return b.y<0;case ccui.ScrollView.MOVEDIR_LEFT:return b.x<0;case ccui.ScrollView.MOVEDIR_RIGHT:return b.x>0}return!1},_moveInnerContainer:function(a,b){var c=this._flattenVectorByDirection(a);this.setInnerContainerPosition(cc.pAdd(this.getInnerContainerPosition(),c));var d=this._getHowMuchOutOfBoundary();this._updateScrollBar(d),this.bounceEnabled&&b&&this._startBounceBackIfNeeded()},_updateScrollBar:function(a){this._verticalScrollBar&&this._verticalScrollBar.onScrolled(a),this._horizontalScrollBar&&this._horizontalScrollBar.onScrolled(a)},_calculateTouchMoveVelocity:function(){for(var a=0,b=0;b<this._touchMoveTimeDeltas.length;++b)a+=this._touchMoveTimeDeltas[b];if(0==a||a>=this._touchTotalTimeThreshold)return cc.p(0,0);for(var c=cc.p(0,0),b=0;b<this._touchMoveDisplacements.length;++b)c.x+=this._touchMoveDisplacements[b].x,c.y+=this._touchMoveDisplacements[b].y;return cc.pMult(c,1/a)},setTouchTotalTimeThreshold:function(a){this._touchTotalTimeThreshold=a},getTouchTotalTimeThreshold:function(){return this._touchTotalTimeThreshold},_startInertiaScroll:function(a){var b=.7,c=cc.pMult(a,b);this._startAttenuatingAutoScroll(c,a)},_startBounceBackIfNeeded:function(){if(!this.bounceEnabled)return!1;var a=this._getHowMuchOutOfBoundary();if(this._fltEqualZero(a))return!1;var b=1;return this._startAutoScroll(a,b,!0),!0},_startAutoScrollToDestination:function(a,b,c){this._startAutoScroll(cc.pSub(a,this._innerContainer.getPosition()),b,c)},_calculateAutoScrollTimeByInitialSpeed:function(a){return Math.sqrt(Math.sqrt(a/5))},_startAttenuatingAutoScroll:function(a,b){var c=this._calculateAutoScrollTimeByInitialSpeed(cc.pLength(b));this._startAutoScroll(a,c,!0)},_startAutoScroll:function(a,b,c){var d=this._flattenVectorByDirection(a);this._autoScrolling=!0,this._autoScrollTargetDelta=d,this._autoScrollAttenuate=c,this._autoScrollStartPosition=this._innerContainer.getPosition(),this._autoScrollTotalTime=b,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.p(0,0);var e=this._getHowMuchOutOfBoundary();if(!this._fltEqualZero(e)){this._autoScrollCurrentlyOutOfBoundary=!0;var f=this._getHowMuchOutOfBoundary(d);(e.x*f.x>0||e.y*f.y>0)&&(this._autoScrollBraking=!0)}},stopAutoScroll:function(){this._autoScrolling=!1,this._autoScrollAttenuate=!0,this._autoScrollTotalTime=0,this._autoScrollAccumulatedTime=0},_isNecessaryAutoScrollBrake:function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getInnerContainerPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},_getAutoScrollStopEpsilon:function(){return 1e-4},_fltEqualZero:function(a){return Math.abs(a.x)<=1e-4&&Math.abs(a.y)<=1e-4},_processAutoScrolling:function(a){var b=.05,c=this._isNecessaryAutoScrollBrake()?b:1;this._autoScrollAccumulatedTime+=a*(1/c);var d=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(d-=1,d=d*d*d*d*d+1);var e=cc.pAdd(this._autoScrollStartPosition,cc.pMult(this._autoScrollTargetDelta,d)),f=Math.abs(d-1)<=this._getAutoScrollStopEpsilon();if(this.bounceEnabled)e=cc.pAdd(this._autoScrollBrakingStartPosition,cc.pMult(cc.pSub(e,this._autoScrollBrakingStartPosition),c));else{var g=cc.pSub(e,this.getInnerContainerPosition()),h=this._getHowMuchOutOfBoundary(g);this._fltEqualZero(h)||(e.x+=h.x,e.y+=h.y,f=!0)}f&&(this._autoScrolling=!1,this._dispatchEvent(ccui.ScrollView.EVENT_AUTOSCROLL_ENDED)),this._moveInnerContainer(cc.pSub(e,this.getInnerContainerPosition()),f)},_jumpToDestination:function(a,b){void 0===a.x&&(a=cc.p(a,b)),this._autoScrolling=!1,this._moveInnerContainer(cc.pSub(a,this.getInnerContainerPosition()),!0)},_scrollChildren:function(a){var b=a;if(this.bounceEnabled){var c=this._getHowMuchOutOfBoundary();b.x*=0==c.x?1:.5,b.y*=0==c.y?1:.5}if(!this.bounceEnabled){var c=this._getHowMuchOutOfBoundary(b);b.x+=c.x,b.y+=c.y}var d=!1,e=!1,f=!1,g=!1;if(b.y>0){var h=this._innerContainer.getBottomBoundary();h+b.y>=this._bottomBoundary&&(g=!0)}else if(b.y<0){var i=this._innerContainer.getTopBoundary();i+b.y<=this._topBoundary&&(f=!0)}if(b.x<0){var j=this._innerContainer.getRightBoundary();j+b.x<=this._rightBoundary&&(e=!0)}else if(b.x>0){var k=this._innerContainer.getLeftBoundary();k+b.x>=this._leftBoundary&&(d=!0)}this._moveInnerContainer(b,!1),0==b.x&&0==b.y||this._processScrollingEvent(),g&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_BOTTOM,!1),f&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_TOP,!1),d&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_LEFT,!1),e&&this._processScrollEvent(ccui.ScrollView.MOVEDIR_RIGHT,!1)},scrollToBottom:function(a,b){this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(),0),a,b)},scrollToTop:function(a,b){this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(),this._contentSize.height-this._innerContainer.getContentSize().height),a,b)},scrollToLeft:function(a,b){this._startAutoScrollToDestination(cc.p(0,this._innerContainer.getPositionY()),a,b)},scrollToRight:function(a,b){this._startAutoScrollToDestination(cc.p(this._contentSize.width-this._innerContainer.getContentSize().width,this._innerContainer.getPositionY()),a,b)},scrollToTopLeft:function(a,b){return this._direction!==ccui.ScrollView.DIR_BOTH?void cc.log("Scroll direction is not both!"):void this._startAutoScrollToDestination(cc.p(0,this._contentSize.height-this._innerContainer.getContentSize().height),a,b)},scrollToTopRight:function(a,b){if(this._direction!==ccui.ScrollView.DIR_BOTH)return void cc.log("Scroll direction is not both!");var c=this._innerContainer.getContentSize();this._startAutoScrollToDestination(cc.p(this._contentSize.width-c.width,this._contentSize.height-c.height),a,b)},scrollToBottomLeft:function(a,b){return this._direction!==ccui.ScrollView.DIR_BOTH?void cc.log("Scroll direction is not both!"):void this._startAutoScrollToDestination(cc.p(0,0),a,b)},scrollToBottomRight:function(a,b){return this._direction!==ccui.ScrollView.DIR_BOTH?void cc.log("Scroll direction is not both!"):void this._startAutoScrollToDestination(cc.p(this._contentSize.width-this._innerContainer.getContentSize().width,0),a,b)},scrollToPercentVertical:function(a,b,c){var d=this._contentSize.height-this._innerContainer.getContentSize().height,e=-d;this._startAutoScrollToDestination(cc.p(this._innerContainer.getPositionX(),d+a*e/100),b,c)},scrollToPercentHorizontal:function(a,b,c){var d=this._innerContainer.getContentSize().width-this._contentSize.width;this._startAutoScrollToDestination(cc.p(-(a*d/100),this._innerContainer.getPositionY()),b,c)},scrollToPercentBothDirection:function(a,b,c){if(this._direction===ccui.ScrollView.DIR_BOTH){var d=this._contentSize.height-this._innerContainer.getContentSize().height,e=-d,f=this._innerContainer.getContentSize().width-this._contentSize.width;this._startAutoScrollToDestination(cc.p(-(a.x*f/100),d+a.y*e/100),b,c)}},jumpToBottom:function(){this._jumpToDestination(this._innerContainer.getPositionX(),0)},jumpToTop:function(){this._jumpToDestination(this._innerContainer.getPositionX(),this._contentSize.height-this._innerContainer.getContentSize().height)},jumpToLeft:function(){this._jumpToDestination(0,this._innerContainer.getPositionY())},jumpToRight:function(){this._jumpToDestination(this._contentSize.width-this._innerContainer.getContentSize().width,this._innerContainer.getPositionY())},jumpToTopLeft:function(){return this._direction!==ccui.ScrollView.DIR_BOTH?void cc.log("Scroll _direction is not both!"):void this._jumpToDestination(0,this._contentSize.height-this._innerContainer.getContentSize().height)},jumpToTopRight:function(){if(this._direction!==ccui.ScrollView.DIR_BOTH)return void cc.log("Scroll _direction is not both!");var a=this._innerContainer.getContentSize();this._jumpToDestination(this._contentSize.width-a.width,this._contentSize.height-a.height)},jumpToBottomLeft:function(){return this._direction!==ccui.ScrollView.DIR_BOTH?void cc.log("Scroll _direction is not both!"):void this._jumpToDestination(0,0)},jumpToBottomRight:function(){return this._direction!==ccui.ScrollView.DIR_BOTH?void cc.log("Scroll _direction is not both!"):void this._jumpToDestination(this._contentSize.width-this._innerContainer.getContentSize().width,0)},jumpToPercentVertical:function(a){var b=this._contentSize.height-this._innerContainer.getContentSize().height,c=-b;this._jumpToDestination(this._innerContainer.getPositionX(),b+a*c/100)},jumpToPercentHorizontal:function(a){var b=this._innerContainer.getContentSize().width-this._contentSize.width;this._jumpToDestination(-(a*b/100),this._innerContainer.getPositionY())},jumpToPercentBothDirection:function(a){if(this._direction===ccui.ScrollView.DIR_BOTH){var b=this._innerContainer.getContentSize(),c=this._contentSize.height-b.height,d=-c,e=b.width-this._contentSize.width;this._jumpToDestination(-(a.x*e/100),c+a.y*d/100)}},_gatherTouchMove:function(a){for(var b=5;this._touchMoveDisplacements.length>=b;)this._touchMoveDisplacements.splice(0,1),this._touchMoveTimeDeltas.splice(0,1);this._touchMoveDisplacements.push(a);var c=(new Date).getTime();this._touchMoveTimeDeltas.push((c-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=c},_handlePressLogic:function(a){this._bePressed=!0,this._autoScrolling=!1,this._touchMovePreviousTimestamp=(new Date).getTime(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._verticalScrollBar&&this._verticalScrollBar.onTouchBegan(),this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan()},_handleMoveLogic:function(a){var b=this.convertToNodeSpace(a.getLocation()),c=this.convertToNodeSpace(a.getPreviousLocation()),d=cc.pSub(b,c);this._scrollChildren(d),this._gatherTouchMove(d)},_handleReleaseLogic:function(a){var b=this.convertToNodeSpace(a.getLocation()),c=this.convertToNodeSpace(a.getPreviousLocation()),d=cc.pSub(b,c);this._gatherTouchMove(d),this._bePressed=!1;var e=this._startBounceBackIfNeeded();if(!e&&this.inertiaScrollEnabled){var f=this._calculateTouchMoveVelocity();0===f.x&&0===f.y||this._startInertiaScroll(f)}this._verticalScrollBar&&this._verticalScrollBar.onTouchEnded(),this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded()},onTouchBegan:function(a,b){var c=ccui.Layout.prototype.onTouchBegan.call(this,a,b);return this._isInterceptTouch||this._hit&&this._handlePressLogic(a),c},onTouchMoved:function(a,b){ccui.Layout.prototype.onTouchMoved.call(this,a,b),this._isInterceptTouch||this._handleMoveLogic(a)},onTouchEnded:function(a,b){ccui.Layout.prototype.onTouchEnded.call(this,a,b),this._isInterceptTouch||this._handleReleaseLogic(a),this._isInterceptTouch=!1},onTouchCancelled:function(a,b){ccui.Layout.prototype.onTouchCancelled.call(this,a,b),this._isInterceptTouch||this._handleReleaseLogic(a),this._isInterceptTouch=!1},update:function(a){this._autoScrolling&&this._processAutoScrolling(a)},interceptTouchEvent:function(a,b,c){if(!this._touchEnabled)return void ccui.Layout.prototype.interceptTouchEvent.call(this,a,b,c);if(this._direction!==ccui.ScrollView.DIR_NONE){var d=c.getLocation();switch(a){case ccui.Widget.TOUCH_BEGAN:this._isInterceptTouch=!0,this._touchBeganPosition.x=d.x,this._touchBeganPosition.y=d.y,this._handlePressLogic(c);break;case ccui.Widget.TOUCH_MOVED:var e=cc.pLength(cc.pSub(b.getTouchBeganPosition(),d));this._touchMovePosition.x=d.x,this._touchMovePosition.y=d.y,e>this._childFocusCancelOffset&&(b.setHighlighted(!1),this._handleMoveLogic(c));break;case ccui.Widget.TOUCH_CANCELED:case ccui.Widget.TOUCH_ENDED:this._touchEndPosition.x=d.x,this._touchEndPosition.y=d.y,this._handleReleaseLogic(c),b.isSwallowTouches()&&(this._isInterceptTouch=!1)}}},_processScrollEvent:function(a,b){var c=0;switch(a){case ccui.ScrollView.MOVEDIR_TOP:c=b?ccui.ScrollView.EVENT_BOUNCE_TOP:ccui.ScrollView.EVENT_SCROLL_TO_TOP;break;case ccui.ScrollView.MOVEDIR_BOTTOM:c=b?ccui.ScrollView.EVENT_BOUNCE_BOTTOM:ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM;break;case ccui.ScrollView.MOVEDIR_LEFT:c=b?ccui.ScrollView.EVENT_BOUNCE_LEFT:ccui.ScrollView.EVENT_SCROLL_TO_LEFT;break;case ccui.ScrollView.MOVEDIR_RIGHT:c=b?ccui.ScrollView.EVENT_BOUNCE_RIGHT:ccui.ScrollView.EVENT_SCROLL_TO_RIGHT}this._dispatchEvent(c)},_processScrollingEvent:function(){this._dispatchEvent(ccui.ScrollView.EVENT_SCROLLING)},_dispatchEvent:function(a){this._scrollViewEventSelector&&(this._scrollViewEventListener?this._scrollViewEventSelector.call(this._scrollViewEventListener,this,a):this._scrollViewEventSelector(this,a)),this._ccEventCallback&&this._ccEventCallback(this,a)},addEventListenerScrollView:function(a,b){this._scrollViewEventSelector=a,this._scrollViewEventListener=b},addEventListener:function(a){this._ccEventCallback=a},setDirection:function(a){this._direction=a,this._scrollBarEnabled&&(this._removeScrollBar(),this._initScrollBar())},getDirection:function(){return this._direction},setBounceEnabled:function(a){this.bounceEnabled=a},isBounceEnabled:function(){return this.bounceEnabled},setInertiaScrollEnabled:function(a){this.inertiaScrollEnabled=a},isInertiaScrollEnabled:function(){return this.inertiaScrollEnabled},setScrollBarEnabled:function(a){this._scrollBarEnabled!==a&&(this._scrollBarEnabled&&this._removeScrollBar(),this._scrollBarEnabled=a,this._scrollBarEnabled&&this._initScrollBar())},isScrollBarEnabled:function(){return this._scrollBarEnabled},setScrollBarPositionFromCorner:function(a){this._direction!==ccui.ScrollView.DIR_HORIZONTAL&&this.setScrollBarPositionFromCornerForVertical(a),this._direction!==ccui.ScrollView.DIR_VERTICAL&&this.setScrollBarPositionFromCornerForHorizontal(a)},setScrollBarPositionFromCornerForVertical:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_HORIZONTAL,"Scroll view doesn't have a vertical scroll bar!"),this._verticalScrollBar.setPositionFromCorner(a)},getScrollBarPositionFromCornerForVertical:function(){
return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_HORIZONTAL,"Scroll view doesn't have a vertical scroll bar!"),this._verticalScrollBar.getPositionFromCorner()},setScrollBarPositionFromCornerForHorizontal:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_VERTICAL,"Scroll view doesn't have a horizontal scroll bar!"),this._horizontalScrollBar.setPositionFromCorner(a)},getScrollBarPositionFromCornerForHorizontal:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),cc.assert(this._direction!==ccui.ScrollView.DIR_VERTICAL,"Scroll view doesn't have a horizontal scroll bar!"),this._horizontalScrollBar.getPositionFromCorner()},setScrollBarWidth:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&this._verticalScrollBar.setWidth(a),this._horizontalScrollBar&&this._horizontalScrollBar.setWidth(a)},getScrollBarWidth:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.getWidth():this._horizontalScrollBar?this._horizontalScrollBar.getWidth():0},setScrollBarColor:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&this._verticalScrollBar.setColor(a),this._horizontalScrollBar&&this._horizontalScrollBar.setColor(a)},getScrollBarColor:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&this._verticalScrollBar.getColor(),this._horizontalScrollBar&&this._horizontalScrollBar.getColor(),cc.color.WHITE},setScrollBarOpacity:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&(this._verticalScrollBar.opacity=a),this._horizontalScrollBar&&(this._horizontalScrollBar.opacity=a)},getScrollBarOpacity:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.opacity:this._horizontalScrollBar?this._horizontalScrollBar.opacity:-1},setScrollBarAutoHideEnabled:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&(this._verticalScrollBar.autoHideEnabled=a),this._horizontalScrollBar&&(this._horizontalScrollBar.autoHideEnabled=a)},isScrollBarAutoHideEnabled:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.autoHideEnabled:!!this._horizontalScrollBar&&this._horizontalScrollBar.autoHideEnabled},setScrollBarAutoHideTime:function(a){cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar&&(this._verticalScrollBar.autoHideTime=a),this._horizontalScrollBar&&(this._horizontalScrollBar.autoHideTime=a)},getScrollBarAutoHideTime:function(){return cc.assert(this._scrollBarEnabled,"Scroll bar should be enabled!"),this._verticalScrollBar?this._verticalScrollBar.autoHideTime:this._horizontalScrollBar?this._horizontalScrollBar.autoHideTime:0},getInnerContainer:function(){return this._innerContainer},setLayoutType:function(a){this._innerContainer.setLayoutType(a)},getLayoutType:function(){return this._innerContainer.getLayoutType()},_doLayout:function(){this._doLayoutDirty&&(this._doLayoutDirty=!1)},getDescription:function(){return"ScrollView"},_createCloneInstance:function(){return new ccui.ScrollView},_copyClonedWidgetChildren:function(a){ccui.Layout.prototype._copyClonedWidgetChildren.call(this,a)},_copySpecialProperties:function(a){a instanceof ccui.ScrollView&&(ccui.Layout.prototype._copySpecialProperties.call(this,a),this.setInnerContainerSize(a.getInnerContainerSize()),this.setInnerContainerPosition(a.getInnerContainerPosition()),this.setDirection(a._direction),this._topBoundary=a._topBoundary,this._bottomBoundary=a._bottomBoundary,this._leftBoundary=a._leftBoundary,this._rightBoundary=a._rightBoundary,this._bePressed=a._bePressed,this._childFocusCancelOffset=a._childFocusCancelOffset,this._touchMoveDisplacements=a._touchMoveDisplacements,this._touchMoveTimeDeltas=a._touchMoveTimeDeltas,this._touchMovePreviousTimestamp=a._touchMovePreviousTimestamp,this._autoScrolling=a._autoScrolling,this._autoScrollAttenuate=a._autoScrollAttenuate,this._autoScrollStartPosition=a._autoScrollStartPosition,this._autoScrollTargetDelta=a._autoScrollTargetDelta,this._autoScrollTotalTime=a._autoScrollTotalTime,this._autoScrollAccumulatedTime=a._autoScrollAccumulatedTime,this._autoScrollCurrentlyOutOfBoundary=a._autoScrollCurrentlyOutOfBoundary,this._autoScrollBraking=a._autoScrollBraking,this._autoScrollBrakingStartPosition=a._autoScrollBrakingStartPosition,this.setBounceEnabled(a.bounceEnabled),this.setInertiaScrollEnabled(a.inertiaScrollEnabled),this._scrollViewEventListener=a._scrollViewEventListener,this._scrollViewEventSelector=a._scrollViewEventSelector,this._ccEventCallback=a._ccEventCallback,this.setScrollBarEnabled(a.isScrollBarEnabled()),this.isScrollBarEnabled()&&(this._direction!==ccui.ScrollView.DIR_HORIZONTAL&&this.setScrollBarPositionFromCornerForVertical(a.getScrollBarPositionFromCornerForVertical()),this._direction!==ccui.ScrollView.DIR_VERTICAL&&this.setScrollBarPositionFromCornerForHorizontal(a.getScrollBarPositionFromCornerForHorizontal()),this.setScrollBarWidth(a.getScrollBarWidth()),this.setScrollBarColor(a.getScrollBarColor()),this.setScrollBarAutoHideEnabled(a.isScrollBarAutoHideEnabled()),this.setScrollBarAutoHideTime(a.getScrollBarAutoHideTime())))},_initScrollBar:function(){this._direction===ccui.ScrollView.DIR_HORIZONTAL||this._verticalScrollBar||(this._verticalScrollBar=new ccui.ScrollViewBar(this,ccui.ScrollView.DIR_VERTICAL),this.addProtectedChild(this._verticalScrollBar,2)),this._direction===ccui.ScrollView.DIR_VERTICAL||this._horizontalScrollBar||(this._horizontalScrollBar=new ccui.ScrollViewBar(this,ccui.ScrollView.DIR_HORIZONTAL),this.addProtectedChild(this._horizontalScrollBar,2))},_removeScrollBar:function(){this._verticalScrollBar&&(this.removeProtectedChild(this._verticalScrollBar),this._verticalScrollBar=null),this._horizontalScrollBar&&(this.removeProtectedChild(this._horizontalScrollBar),this._horizontalScrollBar=null)},getNodeByTag:function(a){return this._innerContainer.getNodeByTag(a)},getNodes:function(){return this._innerContainer.getNodes()},removeNode:function(a){this._innerContainer.removeNode(a)},removeNodeByTag:function(a){this._innerContainer.removeNodeByTag(a)},removeAllNodes:function(){this._innerContainer.removeAllNodes()},addNode:function(a,b,c){this._innerContainer.addNode(a,b,c)}});var _p=ccui.ScrollView.prototype;_p.innerWidth,cc.defineGetterSetter(_p,"innerWidth",_p._getInnerWidth,_p._setInnerWidth),_p.innerHeight,cc.defineGetterSetter(_p,"innerHeight",_p._getInnerHeight,_p._setInnerHeight),_p.direction,cc.defineGetterSetter(_p,"direction",_p.getDirection,_p.setDirection),_p.touchTotalTimeThreshold,cc.defineGetterSetter(_p,"touchTotalTimeThreshold",_p.getTouchTotalTimeThreshold,_p.setTouchTotalTimeThreshold),_p=null,ccui.ScrollView.create=function(){return new ccui.ScrollView},ccui.ScrollView.DIR_NONE=0,ccui.ScrollView.DIR_VERTICAL=1,ccui.ScrollView.DIR_HORIZONTAL=2,ccui.ScrollView.DIR_BOTH=3,ccui.ScrollView.EVENT_SCROLL_TO_TOP=0,ccui.ScrollView.EVENT_SCROLL_TO_BOTTOM=1,ccui.ScrollView.EVENT_SCROLL_TO_LEFT=2,ccui.ScrollView.EVENT_SCROLL_TO_RIGHT=3,ccui.ScrollView.EVENT_SCROLLING=4,ccui.ScrollView.EVENT_BOUNCE_TOP=5,ccui.ScrollView.EVENT_BOUNCE_BOTTOM=6,ccui.ScrollView.EVENT_BOUNCE_LEFT=7,ccui.ScrollView.EVENT_BOUNCE_RIGHT=8,ccui.ScrollView.EVENT_CONTAINER_MOVED=9,ccui.ScrollView.EVENT_AUTOSCROLL_ENDED=10,ccui.ScrollView.MOVEDIR_TOP=0,ccui.ScrollView.MOVEDIR_BOTTOM=1,ccui.ScrollView.MOVEDIR_LEFT=2,ccui.ScrollView.MOVEDIR_RIGHT=3,function(){if(ccui.ProtectedNode.CanvasRenderCmd){ccui.ScrollView.CanvasRenderCmd=function(a){ccui.Layout.CanvasRenderCmd.call(this,a),this._dirty=!1};var a=ccui.ScrollView.CanvasRenderCmd.prototype=Object.create(ccui.Layout.CanvasRenderCmd.prototype);a.constructor=ccui.ScrollView.CanvasRenderCmd,a.visit=function(a){var b=this._node;if(b._visible){b.__instanceId;cc.renderer.pushRenderCommand(this),this.layoutVisit(a),this._dirtyFlag=0}},a.rendering=function(a){var b,c,d=this._node.__instanceId,e=cc.renderer._cacheToCanvasCmds[d],f=cc.view.getScaleX(),g=cc.view.getScaleY(),h=a||cc._renderContext;for(h.computeRealOffsetY(),this._node.updateChildren(),b=0,c=e.length;b<c;b++){var i=e[b]._node;i instanceof ccui.ScrollView||i&&i._parent&&i._parent._inViewRect===!1||e[b].rendering(h,f,g)}}}}(),function(){if(ccui.ProtectedNode.WebGLRenderCmd){ccui.ScrollView.WebGLRenderCmd=function(a){ccui.Layout.WebGLRenderCmd.call(this,a),this._needDraw=!0,this._dirty=!1};var a=ccui.ScrollView.WebGLRenderCmd.prototype=Object.create(ccui.Layout.WebGLRenderCmd.prototype);a.constructor=ccui.ScrollView.WebGLRenderCmd,a.visit=function(a){var b=this._node;if(b._visible){var c=this._node.__instanceId;cc.renderer.pushRenderCommand(this),cc.renderer._turnToCacheMode(c),this.layoutVisit(a),b.updateChildren(),this._dirtyFlag=0,cc.renderer._turnToNormalMode()}},a.rendering=function(a){var b,c,d,e,f=this._node.__instanceId,g=cc.renderer._cacheToBufferCmds[f],h=a||cc._renderContext;if(g)for(this._node.updateChildren(),h.bindBuffer(gl.ARRAY_BUFFER,null),b=0,c=g.length;b<c;b++)e=g[b],d=e._node,d instanceof ccui.ScrollView||d&&d._parent&&d._parent._inViewRect===!1||(e.uploadData?cc.renderer._uploadBufferData(e):(e._batchingSize>0&&cc.renderer._batchRendering(),e.rendering(h)),cc.renderer._batchRendering())}}}(),ccui.ListView=ccui.ScrollView.extend({_model:null,_items:null,_gravity:null,_itemsMargin:0,_curSelectedIndex:0,_refreshViewDirty:!0,_listViewEventListener:null,_listViewEventSelector:null,_ccListViewEventCallback:null,_magneticAllowedOutOfBoundary:!0,_magneticType:0,_className:"ListView",ctor:function(){this._items=[],ccui.ScrollView.prototype.ctor.call(this),this._gravity=ccui.ListView.GRAVITY_CENTER_VERTICAL,this.setTouchEnabled(!0),this.setDirection(ccui.ScrollView.DIR_VERTICAL)},setItemModel:function(a){return a?void(this._model=a):void cc.log("Can't set a null to item model!")},_handleReleaseLogic:function(a){ccui.ScrollView.prototype._handleReleaseLogic.call(this,a),this._autoScrolling||this._startMagneticScroll()},_onItemListChanged:function(){this._outOfBoundaryAmountDirty=!0},_updateInnerContainerSize:function(){var a,b,c=this._items;switch(this.direction){case ccui.ScrollView.DIR_VERTICAL:a=c.length;var d=(a-1)*this._itemsMargin;for(b=0;b<a;b++)d+=c[b].getContentSize().height;this.setInnerContainerSize(cc.size(this._contentSize.width,d));break;case ccui.ScrollView.DIR_HORIZONTAL:a=c.length;var e=(a-1)*this._itemsMargin;for(b=0;b<a;b++)e+=c[b].getContentSize().width;this.setInnerContainerSize(cc.size(e,this._contentSize.height))}},_remedyLayoutParameter:function(a){cc.assert(null!=a,"ListView Item can't be nil!");var b=a.getLayoutParameter(ccui.LayoutParameter.LINEAR),c=!0;b||(b=new ccui.LinearLayoutParameter,c=!1);var d=this.getIndex(a);switch(this.direction){case ccui.ScrollView.DIR_VERTICAL:this._remedyVerticalLayoutParameter(b,d);break;case ccui.ScrollView.DIR_HORIZONTAL:this._remedyHorizontalLayoutParameter(b,d)}c||a.setLayoutParameter(b)},_remedyVerticalLayoutParameter:function(a,b){switch(cc.assert(null!=a,"Layout parameter can't be nil!"),this._gravity){case ccui.ListView.GRAVITY_LEFT:a.setGravity(ccui.LinearLayoutParameter.LEFT);break;case ccui.ListView.GRAVITY_RIGHT:a.setGravity(ccui.LinearLayoutParameter.RIGHT);break;case ccui.ListView.GRAVITY_CENTER_HORIZONTAL:a.setGravity(ccui.LinearLayoutParameter.CENTER_HORIZONTAL)}0===b?a.setMargin(ccui.MarginZero()):a.setMargin(new ccui.Margin(0,this._itemsMargin,0,0))},_remedyHorizontalLayoutParameter:function(a,b){switch(cc.assert(null!=a,"Layout parameter can't be nil!"),this._gravity){case ccui.ListView.GRAVITY_TOP:a.setGravity(ccui.LinearLayoutParameter.TOP);break;case ccui.ListView.GRAVITY_BOTTOM:a.setGravity(ccui.LinearLayoutParameter.BOTTOM);break;case ccui.ListView.GRAVITY_CENTER_VERTICAL:a.setGravity(ccui.LinearLayoutParameter.CENTER_VERTICAL)}0===b?a.setMargin(ccui.MarginZero()):a.setMargin(new ccui.Margin(this._itemsMargin,0,0,0))},pushBackDefaultItem:function(){if(null!=this._model){var a=this._model.clone();this._remedyLayoutParameter(a),this.addChild(a),this._refreshViewDirty=!0}},insertDefaultItem:function(a){if(null!=this._model){var b=this._model.clone();this._items.splice(a,0,b),ccui.ScrollView.prototype.addChild.call(this,b),this._remedyLayoutParameter(b),this._refreshViewDirty=!0}},pushBackCustomItem:function(a){this._remedyLayoutParameter(a),this.addChild(a),this._refreshViewDirty=!0},addChild:function(a,b,c){a&&(b=b||a.getLocalZOrder(),c=c||a.getName(),ccui.ScrollView.prototype.addChild.call(this,a,b,c),a instanceof ccui.Widget&&(this._items.push(a),this._onItemListChanged()))},removeChild:function(a,b){if(a){var c=this._items.indexOf(a);c>-1&&this._items.splice(c,1),this._onItemListChanged(),ccui.ScrollView.prototype.removeChild.call(this,a,b)}},removeAllChildren:function(){this.removeAllChildrenWithCleanup(!0)},removeAllChildrenWithCleanup:function(a){ccui.ScrollView.prototype.removeAllChildrenWithCleanup.call(this,a),this._items=[],this._onItemListChanged()},insertCustomItem:function(a,b){this._items.splice(b,0,a),this._onItemListChanged(),ccui.ScrollView.prototype.addChild.call(this,a),this._remedyLayoutParameter(a),this._refreshViewDirty=!0},removeItem:function(a){var b=this.getItem(a);null!=b&&(this.removeChild(b,!0),this._refreshViewDirty=!0)},removeLastItem:function(){this.removeItem(this._items.length-1)},removeAllItems:function(){this.removeAllChildren()},getItem:function(a){return a<0||a>=this._items.length?null:this._items[a]},getItems:function(){return this._items},getIndex:function(a){return null==a?-1:this._items.indexOf(a)},setGravity:function(a){this._gravity!==a&&(this._gravity=a,this._refreshViewDirty=!0)},setMagneticType:function(a){this._magneticType=a,this._onItemListChanged(),this._startMagneticScroll()},getMagneticType:function(){return this._magneticType},setMagneticAllowedOutOfBoundary:function(a){this._magneticAllowedOutOfBoundary=a},getMagneticAllowedOutOfBoundary:function(){return this._magneticAllowedOutOfBoundary},setItemsMargin:function(a){this._itemsMargin!==a&&(this._itemsMargin=a,this._refreshViewDirty=!0)},getItemsMargin:function(){return this._itemsMargin},setDirection:function(a){switch(a){case ccui.ScrollView.DIR_VERTICAL:this.setLayoutType(ccui.Layout.LINEAR_VERTICAL);break;case ccui.ScrollView.DIR_HORIZONTAL:this.setLayoutType(ccui.Layout.LINEAR_HORIZONTAL);break;case ccui.ScrollView.DIR_BOTH:return;default:return}ccui.ScrollView.prototype.setDirection.call(this,a)},_getHowMuchOutOfBoundary:function(a){if(void 0===a&&(a=cc.p(0,0)),!this._magneticAllowedOutOfBoundary||0===this._items.length)return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this,a);if(this._magneticType===ccui.ListView.MAGNETIC_NONE||this._magneticType===ccui.ListView.MAGNETIC_BOTH_END)return ccui.ScrollView.prototype._getHowMuchOutOfBoundary.call(this,a);if(0===a.x&&0===a.y&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var b=this._leftBoundary,c=this._rightBoundary,d=this._topBoundary,e=this._bottomBoundary,f=this._items.length-1,g=this.getContentSize(),h=cc.p(0,0),i=cc.p(0,0);switch(this._magneticType){case ccui.ListView.MAGNETIC_CENTER:h.x=(g.width-this._items[0].width)/2,h.y=(g.height-this._items[0].height)/2,i.x=(g.width-this._items[f].width)/2,i.y=(g.height-this._items[f].height)/2;break;case ccui.ListView.MAGNETIC_LEFT:case ccui.ListView.MAGNETIC_TOP:i.x=g.width-this._items[f].width,i.y=g.height-this._items[f].height;break;case ccui.ListView.MAGNETIC_RIGHT:case ccui.ListView.MAGNETIC_BOTTOM:h.x=g.width-this._items[0].width,h.y=g.height-this._items[0].height}b+=h.x,c-=i.x,d-=h.y,e+=i.y;var j=cc.p(0,0);return this._innerContainer.getLeftBoundary()+a.x>b?j.x=b-(this._innerContainer.getLeftBoundary()+a.x):this._innerContainer.getRightBoundary()+a.x<c&&(j.x=c-(this._innerContainer.getRightBoundary()+a.x)),this._innerContainer.getTopBoundary()+a.y<d?j.y=d-(this._innerContainer.getTopBoundary()+a.y):this._innerContainer.getBottomBoundary()+a.y>e&&(j.y=e-(this._innerContainer.getBottomBoundary()+a.y)),0===a.x&&0===a.y&&(this._outOfBoundaryAmount=j,this._outOfBoundaryAmountDirty=!1),j},_calculateItemPositionWithAnchor:function(a,b){var c=cc.p(a.getLeftBoundary(),a.getBottomBoundary()),d=a.getContentSize();return cc.p(c.x+d.width*b.x,c.y+d.height*b.y)},_findClosestItem:function(a,b,c,d,e,f,g){if(cc.assert(d>=0&&f<b.length&&d<=f,""),d===f)return b[d];if(f-d===1)return e<=g?b[d]:b[f];var h=Math.floor((d+f)/2),i=this._calculateItemPositionWithAnchor(b[h],c),j=cc.pLength(cc.pSub(a,i));return e<=g?this._findClosestItem(a,b,c,d,e,h,j):this._findClosestItem(a,b,c,h,j,f,g)},getClosestItemToPosition:function(a,b){if(0===this._items.length)return null;var c=0,d=this._calculateItemPositionWithAnchor(this._items[c],b),e=cc.pLength(cc.pSub(a,d)),f=this._items.length-1,g=this._calculateItemPositionWithAnchor(this._items[f],b),h=cc.pLength(cc.pSub(a,g));return this._findClosestItem(a,this._items,b,c,e,f,h)},getClosestItemToPositionInCurrentView:function(a,b){var c=this.getContentSize(),d=cc.pMult(this._innerContainer.getPosition(),-1);return d.x+=c.width*a.x,d.y+=c.height*a.y,this.getClosestItemToPosition(d,b)},getCenterItemInCurrentView:function(){return this.getClosestItemToPositionInCurrentView(cc.p(.5,.5),cc.p(.5,.5))},getLeftmostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_HORIZONTAL?this.getClosestItemToPositionInCurrentView(cc.p(0,.5),cc.p(.5,.5)):null},getRightmostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_HORIZONTAL?this.getClosestItemToPositionInCurrentView(cc.p(1,.5),cc.p(.5,.5)):null},getTopmostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_VERTICAL?this.getClosestItemToPositionInCurrentView(cc.p(.5,1),cc.p(.5,.5)):null},getBottommostItemInCurrentView:function(){return this._direction===ccui.ScrollView.DIR_VERTICAL?this.getClosestItemToPositionInCurrentView(cc.p(.5,0),cc.p(.5,.5)):null},_calculateItemDestination:function(a,b,c){var d=this.getContentSize(),e=cc.p(0,0);e.x+=d.width*a.x,e.y+=d.height*a.y;var f=this._calculateItemPositionWithAnchor(b,c);return cc.pMult(cc.pSub(f,e),-1)},jumpToBottom:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToBottom.call(this)},jumpToTop:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToTop.call(this)},jumpToLeft:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToLeft.call(this)},jumpToRight:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToRight.call(this)},jumpToTopLeft:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToTopLeft.call(this)},jumpToTopRight:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToTopRight.call(this)},jumpToBottomLeft:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToBottomLeft.call(this)},jumpToBottomRight:function(){this.doLayout(),ccui.ScrollView.prototype.jumpToBottomRight.call(this)},jumpToPercentVertical:function(a){this.doLayout(),ccui.ScrollView.prototype.jumpToPercentVertical.call(this,a)},jumpToPercentHorizontal:function(a){this.doLayout(),ccui.ScrollView.prototype.jumpToPercentHorizontal.call(this,a)},jumpToPercentBothDirection:function(a){this.doLayout(),ccui.ScrollView.prototype.jumpToPercentBothDirection.call(this,a)},jumpToItem:function(a,b,c){var d=this.getItem(a);if(d){this.doLayout();var e=this._calculateItemDestination(b,d,c);if(!this.bounceEnabled){var f=cc.pSub(e,this._innerContainer.getPosition()),g=this._getHowMuchOutOfBoundary(f);e.x+=g.x,e.y+=g.y}this._jumpToDestination(e)}},scrollToItem:function(a,b,c,d){void 0===d&&(d=1);var e=this.getItem(a);if(e){var f=this._calculateItemDestination(b,e,c);this._startAutoScrollToDestination(f,d,!0)}},requestRefreshView:function(){this._refreshViewDirty=!0},refreshView:function(){this.forceDoLayout()},doLayout:function(){this._doLayout()},requestDoLayout:function(){this._refreshViewDirty=!0},_doLayout:function(){if(this._refreshViewDirty){for(var a=this._items,b=0;b<a.length;b++){var c=a[b];c.setLocalZOrder(b),this._remedyLayoutParameter(c)}this._updateInnerContainerSize(),this._innerContainer.forceDoLayout(),this._refreshViewDirty=!1}},addEventListenerListView:function(a,b){this._listViewEventListener=b,this._listViewEventSelector=a},addEventListener:function(a){this._ccListViewEventCallback=a},_selectedItemEvent:function(a){var b=a===ccui.Widget.TOUCH_BEGAN?ccui.ListView.ON_SELECTED_ITEM_START:ccui.ListView.ON_SELECTED_ITEM_END;this._listViewEventSelector&&(this._listViewEventListener?this._listViewEventSelector.call(this._listViewEventListener,this,b):this._listViewEventSelector(this,b)),this._ccListViewEventCallback&&this._ccListViewEventCallback(this,b)},interceptTouchEvent:function(a,b,c){if(ccui.ScrollView.prototype.interceptTouchEvent.call(this,a,b,c),this._touchEnabled&&a!==ccui.Widget.TOUCH_MOVED){for(var d=b;d;){if(d&&d.getParent()===this._innerContainer){this._curSelectedIndex=this.getIndex(d);break}d=d.getParent()}b.isHighlighted()&&this._selectedItemEvent(a)}},getCurSelectedIndex:function(){return this._curSelectedIndex},_onSizeChanged:function(){ccui.ScrollView.prototype._onSizeChanged.call(this),this._refreshViewDirty=!0},getDescription:function(){return"ListView"},_createCloneInstance:function(){return new ccui.ListView},_copyClonedWidgetChildren:function(a){for(var b=a.getItems(),c=0;c<b.length;c++){var d=b[c];this.pushBackCustomItem(d.clone())}},_copySpecialProperties:function(a){a instanceof ccui.ListView&&(ccui.ScrollView.prototype._copySpecialProperties.call(this,a),this.setItemModel(a._model),this.setItemsMargin(a._itemsMargin),this.setGravity(a._gravity),this._listViewEventListener=a._listViewEventListener,this._listViewEventSelector=a._listViewEventSelector)},_startAttenuatingAutoScroll:function(a,b){var c=a;if(0!==this._items.length&&this._magneticType!==ccui.ListView.MAGNETIC_NONE){c=this._flattenVectorByDirection(c);var d=this._getHowMuchOutOfBoundary(c);if(0===d.x&&0===d.y){var e=this._magneticType;e===ccui.ListView.MAGNETIC_BOTH_END&&(this._direction===ccui.ScrollView.DIR_HORIZONTAL?e=c.x>0?ccui.ListView.MAGNETIC_LEFT:ccui.ListView.MAGNETIC_RIGHT:this._direction===ccui.ScrollView.DIR_VERTICAL&&(e=c.y>0?ccui.ListView.MAGNETIC_BOTTOM:ccui.ListView.MAGNETIC_TOP));var f=this._getAnchorPointByMagneticType(e),g=cc.pMult(this._innerContainer.getPosition(),-1);g.x+=this.width*f.x,g.y+=this.height*f.y;var h=this.getClosestItemToPosition(cc.pSub(g,c),f),i=this._calculateItemPositionWithAnchor(h,f);c=cc.pSub(g,i)}}ccui.ScrollView.prototype._startAttenuatingAutoScroll.call(this,c,b)},_getAnchorPointByMagneticType:function(a){switch(a){case ccui.ListView.MAGNETIC_NONE:return cc.p(0,0);case ccui.ListView.MAGNETIC_BOTH_END:return cc.p(0,1);case ccui.ListView.MAGNETIC_CENTER:return cc.p(.5,.5);case ccui.ListView.MAGNETIC_LEFT:return cc.p(0,.5);case ccui.ListView.MAGNETIC_RIGHT:return cc.p(1,.5);case ccui.ListView.MAGNETIC_TOP:return cc.p(.5,1);case ccui.ListView.MAGNETIC_BOTTOM:return cc.p(.5,0)}return cc.p(0,0)},_startMagneticScroll:function(){if(0!==this._items.length&&this._magneticType!==ccui.ListView.MAGNETIC_NONE){var a=this._getAnchorPointByMagneticType(this._magneticType),b=cc.pMult(this._innerContainer.getPosition(),-1);b.x+=this.width*a.x,b.y+=this.height*a.y;var c=this.getClosestItemToPosition(b,a);this.scrollToItem(this.getIndex(c),a,a)}}}),ccui.ListView.create=function(){return new ccui.ListView},ccui.ListView.EVENT_SELECTED_ITEM=0,ccui.ListView.ON_SELECTED_ITEM_START=0,ccui.ListView.ON_SELECTED_ITEM_END=1,ccui.ListView.GRAVITY_LEFT=0,ccui.ListView.GRAVITY_RIGHT=1,ccui.ListView.GRAVITY_CENTER_HORIZONTAL=2,ccui.ListView.GRAVITY_TOP=3,ccui.ListView.GRAVITY_BOTTOM=4,ccui.ListView.GRAVITY_CENTER_VERTICAL=5,ccui.ListView.MAGNETIC_NONE=0,ccui.ListView.MAGNETIC_CENTER=1,ccui.ListView.MAGNETIC_BOTH_END=2,ccui.ListView.MAGNETIC_LEFT=3,ccui.ListView.MAGNETIC_RIGHT=4,ccui.ListView.MAGNETIC_TOP=5,ccui.ListView.MAGNETIC_BOTTOM=6,ccui.PageView=ccui.ListView.extend({_curPageIdx:0,_childFocusCancelOffset:0,_pageViewEventListener:null,_pageViewEventSelector:null,_className:"PageView",_indicator:null,_indicatorPositionAsAnchorPoint:null,ctor:function(){ccui.ListView.prototype.ctor.call(this),this._childFocusCancelOffset=5,this._indicatorPositionAsAnchorPoint=cc.p(.5,.1),this._pageViewEventListener=null,this._pageViewEventSelector=null,this.setDirection(ccui.ScrollView.DIR_HORIZONTAL),this.setMagneticType(ccui.ListView.MAGNETIC_CENTER),this.setScrollBarEnabled(!1)},addWidgetToPage:function(a,b,c){this.insertCustomItem(a,b)},addPage:function(a){this.pushBackCustomItem(a)},insertPage:function(a,b){this.insertCustomItem(a,b)},removePage:function(a){this.removeItem(this.getIndex(a))},removePageAtIndex:function(a){this.removeItem(a)},removeAllPages:function(){this.removeAllItems()},scrollToItem:function(a){ccui.ListView.prototype.scrollToItem.call(this,a,cc.p(.5,.5),cc.p(.5,.5))},scrollToPage:function(a){this.scrollToItem(a)},_doLayout:function(){if(this._refreshViewDirty){if(ccui.ListView.prototype._doLayout.call(this),this._indicator){var a=this.getIndex(this.getCenterItemInCurrentView());this._indicator.indicate(a)}this._refreshViewDirty=!1}},setDirection:function(a){ccui.ListView.prototype.setDirection.call(this,a),a===ccui.ScrollView.DIR_HORIZONTAL?this._indicatorPositionAsAnchorPoint=cc.p(.5,.1):a===ccui.ScrollView.DIR_VERTICAL&&(this._indicatorPositionAsAnchorPoint=cc.p(.1,.5)),this._indicator&&(this._indicator.setDirection(a),this._refreshIndicatorPosition())},setCustomScrollThreshold:function(a){},getCustomScrollThreshold:function(){return 0},setUsingCustomScrollThreshold:function(a){},isUsingCustomScrollThreshold:function(){return!1},_moveInnerContainer:function(a,b){ccui.ListView.prototype._moveInnerContainer.call(this,a,b),this._curPageIdx=this.getIndex(this.getCenterItemInCurrentView()),this._indicator&&this._indicator.indicate(this._curPageIdx)},_onItemListChanged:function(){ccui.ListView.prototype._onItemListChanged.call(this),this._indicator&&this._indicator.reset(this._items.length)},_onSizeChanged:function(){ccui.ListView.prototype._onSizeChanged.call(this),this._refreshIndicatorPosition()},_remedyLayoutParameter:function(a){a.setContentSize(this.getContentSize()),ccui.ListView.prototype._remedyLayoutParameter.call(this,a)},_refreshIndicatorPosition:function(){if(this._indicator){var a=this.getContentSize(),b=a.width*this._indicatorPositionAsAnchorPoint.x,c=a.height*this._indicatorPositionAsAnchorPoint.y;this._indicator.setPosition(cc.p(b,c))}},_handleReleaseLogic:function(a){if(ccui.ScrollView.prototype._handleReleaseLogic.call(this,a),!(this._items.length<=0)){var b=this._flattenVectorByDirection(this._calculateTouchMoveVelocity()),c=500;if(cc.pLength(b)<c)this._startMagneticScroll();else{var d=this.getItem(this._curPageIdx),e=this._calculateItemDestination(cc.p(.5,.5),d,cc.p(.5,.5)),f=cc.pSub(e,this.getInnerContainerPosition());f=this._flattenVectorByDirection(f),b.x*f.x>0||b.y*f.y>0?this._startMagneticScroll():(b.x<0||b.y>0?++this._curPageIdx:--this._curPageIdx,this._curPageIdx=Math.min(this._curPageIdx,this._items.length),this._curPageIdx=Math.max(this._curPageIdx,0),this.scrollToItem(this._curPageIdx))}}},_getAutoScrollStopEpsilon:function(){return.001},_pageTurningEvent:function(){this._pageViewEventSelector&&(this._pageViewEventListener?this._pageViewEventSelector.call(this._pageViewEventListener,this,ccui.PageView.EVENT_TURNING):this._pageViewEventSelector(this,ccui.PageView.EVENT_TURNING)),this._ccEventCallback&&this._ccEventCallback(this,ccui.PageView.EVENT_TURNING)},addEventListenerPageView:function(a,b){this._pageViewEventSelector=a,this._pageViewEventListener=b},addEventListener:function(a){this._ccEventCallback=function(b,c){c==ccui.ScrollView.EVENT_AUTOSCROLL_ENDED&&a(this,c)}},setCurrentPageIndex:function(a){this.jumpToItem(a,cc.p(.5,.5),cc.p(.5,.5))},setCurPageIndex:function(a){this.setCurrentPageIndex(a)},getCurrentPageIndex:function(){return this._curPageIdx},getCurPageIndex:function(){var a=this.getCenterItemInCurrentView();return this.getIndex(a)},getPages:function(){return this.getItems()},getPage:function(a){return this.getItem(a)},getDescription:function(){return"PageView"},_createCloneInstance:function(){return new ccui.PageView},_copyClonedWidgetChildren:function(a){for(var b=a.getPages(),c=0;c<b.length;c++){var d=b[c];this.addPage(d.clone())}},_copySpecialProperties:function(a){ccui.ListView.prototype._copySpecialProperties.call(this,a),this._ccEventCallback=a._ccEventCallback,this._pageViewEventListener=a._pageViewEventListener,this._pageViewEventSelector=a._pageViewEventSelector,this._customScrollThreshold=a._customScrollThreshold},setIndicatorEnabled:function(a){a!=(null!==this._indicator)&&(a?(this._indicator=new ccui.PageViewIndicator,this._indicator.setDirection(this.getDirection()),this.addProtectedChild(this._indicator,1e4),this.setIndicatorSelectedIndexColor(cc.color(100,100,255)),this._refreshIndicatorPosition()):(this.removeProtectedChild(this._indicator),this._indicator=null))},getIndicatorEnabled:function(){return null!==this._indicator},setIndicatorPositionAsAnchorPoint:function(a){this._indicatorPositionAsAnchorPoint=a,this._refreshIndicatorPosition()},getIndicatorPositionAsAnchorPoint:function(){return this._indicatorPositionAsAnchorPoint},setIndicatorPosition:function(a){if(this._indicator){var b=this.getContentSize();this._indicatorPositionAsAnchorPoint.x=a.x/b.width,this._indicatorPositionAsAnchorPoint.y=a.y/b.height,this._indicator.setPosition(a)}},getIndicatorPosition:function(){return cc.assert(null!==this._indicator,""),this._indicator.getPosition()},setIndicatorSpaceBetweenIndexNodes:function(a){this._indicator&&this._indicator.setSpaceBetweenIndexNodes(a)},getIndicatorSpaceBetweenIndexNodes:function(){return cc.assert(null!==this._indicator,""),this._indicator.getSpaceBetweenIndexNodes()},setIndicatorSelectedIndexColor:function(a){this._indicator&&this._indicator.setSelectedIndexColor(a)},getIndicatorSelectedIndexColor:function(){return cc.assert(null!==this._indicator,""),this._indicator.getSelectedIndexColor()},setIndicatorIndexNodesColor:function(a){this._indicator&&this._indicator.setIndexNodesColor(a)},getIndicatorIndexNodesColor:function(){return cc.assert(null!==this._indicator,""),this._indicator.getIndexNodesColor()},setIndicatorIndexNodesScale:function(a){this._indicator&&(this._indicator.setIndexNodesScale(a),this._indicator.indicate(this._curPageIdx))},getIndicatorIndexNodesScale:function(){return cc.assert(null!==this._indicator,""),this._indicator.getIndexNodesScale()},setIndicatorIndexNodesTexture:function(a,b){this._indicator&&(this._indicator.setIndexNodesTexture(a,b),this._indicator.indicate(this._curPageIdx))}}),ccui.PageView.create=function(){return new ccui.PageView},ccui.PageView.EVENT_TURNING=0,ccui.PageView.TOUCH_DIR_LEFT=0,ccui.PageView.TOUCH_DIR_RIGHT=1,ccui.PageView.DIRECTION_LEFT=0,ccui.PageView.DIRECTION_RIGHT=1,ccui.PageViewIndicator=ccui.ProtectedNode.extend({_direction:null,_indexNodes:null,_currentIndexNode:null,_spaceBetweenIndexNodes:0,_indexNodesScale:1,_indexNodesColor:null,_useDefaultTexture:!0,_indexNodesTextureFile:"",_indexNodesTexType:ccui.Widget.LOCAL_TEXTURE,_className:"PageViewIndicator",ctor:function(){cc.ProtectedNode.prototype.ctor.call(this),this._direction=ccui.ScrollView.DIR_HORIZONTAL,this._indexNodes=[],this._spaceBetweenIndexNodes=ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT,this._indexNodesColor=cc.color.WHITE,this._currentIndexNode=ccui.helper._createSpriteFromBase64(ccui.PageViewIndicator.CIRCLE_IMAGE,ccui.PageViewIndicator.CIRCLE_IMAGE_KEY),this._currentIndexNode.setVisible(!1),this.addProtectedChild(this._currentIndexNode,1);
},setDirection:function(a){this._direction=a,this._rearrange()},reset:function(a){for(;this._indexNodes.length<a;)this._increaseNumberOfPages();for(;this._indexNodes.length>a;)this._decreaseNumberOfPages();this._rearrange(),this._currentIndexNode.setVisible(this._indexNodes.length>0)},indicate:function(a){a<0||a>=this._indexNodes.length||this._currentIndexNode.setPosition(this._indexNodes[a].getPosition())},_rearrange:function(){if(0!==this._indexNodes.length)for(var a=this._direction===ccui.ScrollView.DIR_HORIZONTAL,b=this._indexNodes[0].getContentSize(),c=a?b.width:b.height,d=this._indexNodes.length,e=c*d+this._spaceBetweenIndexNodes*(d-1),f=-(e/2)+c/2,g=0;g<this._indexNodes.length;++g){var h;h=a?cc.p(f,b.height/2):cc.p(b.width/2,-f),this._indexNodes[g].setPosition(h),f+=c+this._spaceBetweenIndexNodes}},setSpaceBetweenIndexNodes:function(a){this._spaceBetweenIndexNodes!==a&&(this._spaceBetweenIndexNodes=a,this._rearrange())},getSpaceBetweenIndexNodes:function(){return this._spaceBetweenIndexNodes},setSelectedIndexColor:function(a){this._currentIndexNode.setColor(a)},getSelectedIndexColor:function(){return this._currentIndexNode.getColor()},setIndexNodesColor:function(a){this._indexNodesColor=a;for(var b=0;b<this._indexNodes.length;++b)this._indexNodes[b].setColor(a)},getIndexNodesColor:function(){var a=this._indexNodesColor;return cc.color(a.r,a.g,a.b,a.a)},setIndexNodesScale:function(a){if(this._indexNodesScale!==a){this._indexNodesScale=a,this._currentIndexNode.setScale(a);for(var b=0;b<this._indexNodes.length;++b)this._indexNodes[b].setScale(this,_indexNodesScale);this._rearrange()}},getIndexNodesScale:function(){return this._indexNodesScale},setIndexNodesTexture:function(a,b){switch(void 0===b&&(b=ccui.Widget.LOCAL_TEXTURE),this._useDefaultTexture=!1,this._indexNodesTextureFile=a,this._indexNodesTexType=b,b){case ccui.Widget.LOCAL_TEXTURE:this._currentIndexNode.setTexture(a);for(var c=0;c<this._indexNodes.length;++c)this._indexNodes[c].setTexture(a);break;case ccui.Widget.PLIST_TEXTURE:this._currentIndexNode.setSpriteFrame(a);for(var c=0;c<this._indexNodes.length;++c)this._indexNodes[c].setSpriteFrame(a)}this._rearrange()},_increaseNumberOfPages:function(){var a;if(this._useDefaultTexture)a=ccui.helper._createSpriteFromBase64(ccui.PageViewIndicator.CIRCLE_IMAGE,ccui.PageViewIndicator.CIRCLE_IMAGE_KEY);else switch(a=new cc.Sprite,this._indexNodesTexType){case ccui.Widget.LOCAL_TEXTURE:a.initWithFile(this._indexNodesTextureFile);break;case ccui.Widget.PLIST_TEXTURE:a.initWithSpriteFrameName(this._indexNodesTextureFile)}a.setColor(this._indexNodesColor),a.setScale(this._indexNodesScale),this.addProtectedChild(a),this._indexNodes.push(a)},_decreaseNumberOfPages:function(){0!==this._indexNodes.length&&(this.removeProtectedChild(this._indexNodes[0]),this._indexNodes.splice(0,1))},clear:function(){for(var a=0;a<this._indexNodes.length;++a)this.removeProtectedChild(this._indexNodes[a]);this._indexNodes.length=0,this._currentIndexNode.setVisible(!1)}});var _p=ccui.PageViewIndicator.prototype;_p.spaceBetweenIndexNodes,cc.defineGetterSetter(_p,"spaceBetweenIndexNodes",_p.getSpaceBetweenIndexNodes,_p.setSpaceBetweenIndexNodes),ccui.PageViewIndicator.SPACE_BETWEEN_INDEX_NODES_DEFAULT=23,ccui.PageViewIndicator.CIRCLE_IMAGE_KEY="/__circle_image",ccui.PageViewIndicator.CIRCLE_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAA8ElEQVRIx62VyRGCQBBF+6gWRCEmYDIQkhiBCgHhSclC8YqWzOV5oVzKAYZp3r1/9fpbxAIBMTsKrjx5cqVgR0wgLhCRUWOjJiPqD56xoaGPhpRZV/iSEy6crHmw5oIrF9b/lVeMofrJgjlnxlIy/wik+JB+mme8BExbBhm+5CJC2LE2LtSEQoyGWDioBA5CoRIohJtK4CYDxzNEM4GAugR1E9VjVC+SZpXvhCJCrjomESLvc17pDGX7bWmlh6UtpjPVCWy9zaJ0TD7qfm3pwERMz2trRVZk3K3BD/L34AY+dEDCniMVBkPFkT2J/b2/AIV+dRpFLOYoAAAAAElFTkSuQmCC",ccui.VideoPlayer=ccui.Widget.extend({_played:!1,_playing:!1,_stopped:!0,ctor:function(a){ccui.Widget.prototype.ctor.call(this),this._EventList={},a&&this.setURL(a)},_createRenderCmd:function(){return new ccui.VideoPlayer.RenderCmd(this)},setURL:function(a){this._renderCmd.updateURL(a)},getURL:function(){return this._renderCmd._url},play:function(){var a=this,b=this._renderCmd._video;b&&(this._played=!0,b.pause(),this._stopped===!1&&this._playing===!1&&this._played===!0||(b.currentTime=0),ccui.VideoPlayer._polyfill.autoplayAfterOperation?setTimeout(function(){b.play(),a._playing=!0,a._stopped=!1},20):(b.play(),this._playing=!0,this._stopped=!1))},pause:function(){var a=this._renderCmd._video;a&&this._playing===!0&&this._stopped===!1&&(a.pause(),this._playing=!1)},resume:function(){this._stopped===!1&&this._playing===!1&&this._played===!0&&this.play()},stop:function(){var a=this,b=this._renderCmd._video;b&&(b.pause(),b.currentTime=0,this._playing=!1,this._stopped=!0),setTimeout(function(){a._dispatchEvent(ccui.VideoPlayer.EventType.STOPPED)},0)},seekTo:function(a){var b=this._renderCmd._video;b&&(b.currentTime=a,ccui.VideoPlayer._polyfill.autoplayAfterOperation&&this.isPlaying()&&setTimeout(function(){b.play()},20))},isPlaying:function(){return ccui.VideoPlayer._polyfill.autoplayAfterOperation&&this._playing&&setTimeout(function(){video.play()},20),this._playing},setKeepAspectRatioEnabled:function(a){cc.log("On the web is always keep the aspect ratio")},isKeepAspectRatioEnabled:function(){return!1},setFullScreenEnabled:function(a){var b=this._renderCmd._video;b&&(a?cc.screen.requestFullScreen(b):cc.screen.exitFullScreen(b))},isFullScreenEnabled:function(){cc.log("Can't know status")},setEventListener:function(a,b){this._EventList[a]=b},removeEventListener:function(a){this._EventList[a]=null},_dispatchEvent:function(a){var b=this._EventList[a];b&&b.call(this,this,this._renderCmd._video.src)},onPlayEvent:function(){var a=this._EventList[ccui.VideoPlayer.EventType.PLAYING];if(a)for(var b=0;b<a.length;b++)a[b].call(this,this,this._renderCmd._video.src)},setContentSize:function(a,b){ccui.Widget.prototype.setContentSize.call(this,a,b),void 0===b&&(b=a.height,a=a.width),this._renderCmd.changeSize(a,b)},cleanup:function(){this._renderCmd.removeDom(),this.stopAllActions(),this.unscheduleAllCallbacks()},onEnter:function(){ccui.Widget.prototype.onEnter.call(this);var a=ccui.VideoPlayer.elements;a.indexOf(this)===-1&&a.push(this)},onExit:function(){ccui.Widget.prototype.onExit.call(this);var a=ccui.VideoPlayer.elements,b=a.indexOf(this);b!==-1&&a.splice(b,1)}}),ccui.VideoPlayer.elements=[],ccui.VideoPlayer.pauseElements=[],cc.eventManager.addCustomListener(cc.game.EVENT_HIDE,function(){for(var a,b=ccui.VideoPlayer.elements,c=0;c<b.length;c++)a=b[c],b[c]._playing&&(a.pause(),ccui.VideoPlayer.pauseElements.push(a))}),cc.eventManager.addCustomListener(cc.game.EVENT_SHOW,function(){for(var a=ccui.VideoPlayer.pauseElements,b=a.pop();b;)b.play(),b=a.pop()}),ccui.VideoPlayer.EventType={PLAYING:"play",PAUSED:"pause",STOPPED:"stop",COMPLETED:"complete"},function(a){a._polyfill={devicePixelRatio:!1,event:"canplay",canPlayType:[]},function(){var b=document.createElement("video");b.canPlayType("video/ogg")&&(a._polyfill.canPlayType.push(".ogg"),a._polyfill.canPlayType.push(".ogv")),b.canPlayType("video/mp4")&&a._polyfill.canPlayType.push(".mp4"),b.canPlayType("video/webm")&&a._polyfill.canPlayType.push(".webm")}(),cc.sys.OS_IOS===cc.sys.os&&(a._polyfill.devicePixelRatio=!0,a._polyfill.event="progress"),cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX&&(a._polyfill.autoplayAfterOperation=!0);var b=document.createElement("style");b.innerHTML=".cocosVideo:-moz-full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:full-screen{transform:matrix(1,0,0,1,0,0) !important;}.cocosVideo:-webkit-full-screen{transform:matrix(1,0,0,1,0,0) !important;}",document.head.appendChild(b)}(ccui.VideoPlayer),function(a){var b=null;b=cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.Node.WebGLRenderCmd:cc.Node.CanvasRenderCmd,ccui.VideoPlayer.RenderCmd=function(a){b.call(this,a),this._listener=null,this._url="",this.initStyle()};var c=ccui.VideoPlayer.RenderCmd.prototype=Object.create(b.prototype);c.constructor=ccui.VideoPlayer.RenderCmd,c.visit=function(){var a=this,b=cc.container,c=cc.eventManager;if(this._node._visible)b.appendChild(this._video),null===this._listener&&(this._listener=cc.eventManager.addCustomListener(cc.game.EVENT_RESIZE,function(){a.resize()}));else{var d=!1;d="contains"in b?b.contains(this._video):b.compareDocumentPosition(this._video)%16,d&&b.removeChild(this._video),c.removeListener(this._listener),this._listener=null}this.updateStatus()},c.transform=function(a,b){this.originTransform(a,b),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY)},c.updateStatus=function(){a.devicePixelRatio=cc.view.isRetinaEnabled();var b=cc.Node._dirtyFlags,c=this._dirtyFlag;c&b.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY),this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.transformDirty^this._dirtyFlag),c&b.orderDirty&&(this._dirtyFlag=this._dirtyFlag&b.orderDirty^this._dirtyFlag)},c.resize=function(a){a=a||cc.view;var b=this._node,c=cc.eventManager;b._parent&&b._visible?this.updateMatrix(this._worldTransform,a._scaleX,a._scaleY):(c.removeListener(this._listener),this._listener=null)},c.updateMatrix=function(b,c,d){var e=this._node;if(a.devicePixelRatio){var f=cc.view.getDevicePixelRatio();c/=f,d/=f}if(this._loaded!==!1){var g=e._contentSize.width,h=e._contentSize.height,i=b.a*c,j=b.b,k=b.c,l=b.d*d,m=b.tx*c-g/2+g*e._scaleX/2*c,n=b.ty*d-h/2+h*e._scaleY/2*d,o="matrix("+i+","+j+","+k+","+l+","+m+","+-n+")";this._video.style.transform=o,this._video.style["-webkit-transform"]=o}},c.updateURL=function(b){var c,d,e,f,g,h=this._node;if(this._url!=b){this._url=b,cc.loader.resPath&&!/^http/.test(b)&&(b=cc.path.join(cc.loader.resPath,b)),e=!1,f=cc.container,e="contains"in f?f.contains(this._video):f.compareDocumentPosition(this._video)%16,e&&f.removeChild(this._video),this._video=document.createElement("video"),d=this._video,this.bindEvent();var i=this,j=function(){1!=i._loaded&&(i._loaded=!0,i.changeSize(),i.setDirtyFlag(cc.Node._dirtyFlags.transformDirty),d.removeEventListener(a.event,j),d.currentTime=0,d.style.visibility="visible",d.play(),h._played||(d.pause(),d.currentTime=0))};d.addEventListener(a.event,j),d.preload="metadata",d.style.visibility="hidden",this._loaded=!1,h._played=!1,h._playing=!1,h._stopped=!0,this.initStyle(),this.visit(),c=document.createElement("source"),c.src=b,d.appendChild(c),g=cc.path.extname(b);for(var k=0;k<a.canPlayType.length;k++)g!==a.canPlayType[k]&&(c=document.createElement("source"),c.src=b.replace(g,a.canPlayType[k]),d.appendChild(c))}},c.bindEvent=function(){var a=this,b=this._node,c=this._video;c.addEventListener("ended",function(){b._renderCmd.updateMatrix(a._worldTransform,cc.view._scaleX,cc.view._scaleY),b._playing=!1,b._dispatchEvent(ccui.VideoPlayer.EventType.COMPLETED)}),c.addEventListener("play",function(){b._dispatchEvent(ccui.VideoPlayer.EventType.PLAYING)}),c.addEventListener("pause",function(){b._dispatchEvent(ccui.VideoPlayer.EventType.PAUSED)})},c.initStyle=function(){if(this._video){var a=this._video;a.style.position="absolute",a.style.bottom="0px",a.style.left="0px",a.className="cocosVideo"}},c.changeSize=function(a,b){var c=this._node._contentSize;a=a||c.width,b=b||c.height;var d=this._video;d&&(0!==a&&(d.width=a),0!==b&&(d.height=b))},c.removeDom=function(){var a=this._video;if(a){var b=!1;b="contains"in cc.container?cc.container.contains(a):cc.container.compareDocumentPosition(a)%16,b&&cc.container.removeChild(a)}}}(ccui.VideoPlayer._polyfill),ccui.WebView=ccui.Widget.extend({ctor:function(a){ccui.Widget.prototype.ctor.call(this),this._EventList={},a&&this.loadURL(a)},setJavascriptInterfaceScheme:function(a){},loadData:function(a,b,c,d){},loadHTMLString:function(a,b){},loadURL:function(a){this._renderCmd.updateURL(a),this._dispatchEvent(ccui.WebView.EventType.LOADING)},stopLoading:function(){cc.log("Web does not support loading")},reload:function(){var a=this._renderCmd._iframe;if(a){var b=a.contentWindow;b&&b.location&&b.location.reload()}},canGoBack:function(){return cc.log("Web does not support query history"),!0},canGoForward:function(){return cc.log("Web does not support query history"),!0},goBack:function(){try{if(ccui.WebView._polyfill.closeHistory)return cc.log("The current browser does not support the GoBack");var a=this._renderCmd._iframe;if(a){var b=a.contentWindow;if(b&&b.location)try{b.history.back.call(b)}catch(a){b.history.back()}}}catch(a){cc.log(a)}},goForward:function(){try{if(ccui.WebView._polyfill.closeHistory)return cc.log("The current browser does not support the GoForward");var a=this._renderCmd._iframe;if(a){var b=a.contentWindow;if(b&&b.location)try{b.history.forward.call(b)}catch(a){b.history.forward()}}}catch(a){cc.log(a)}},evaluateJS:function(a){var b=this._renderCmd._iframe;if(b){var c=b.contentWindow;try{c.eval(a),this._dispatchEvent(ccui.WebView.EventType.JS_EVALUATED)}catch(a){console.error(a)}}},setScalesPageToFit:function(){cc.log("Web does not support zoom")},setEventListener:function(a,b){this._EventList[a]=b},removeEventListener:function(a){this._EventList[a]=null},_dispatchEvent:function(a){var b=this._EventList[a];b&&b.call(this,this,this._renderCmd._iframe.src)},_createRenderCmd:function(){return new ccui.WebView.RenderCmd(this)},setContentSize:function(a,b){ccui.Widget.prototype.setContentSize.call(this,a,b),void 0===b&&(b=a.height,a=a.width),this._renderCmd.changeSize(a,b)},cleanup:function(){this._renderCmd.removeDom(),this.stopAllActions(),this.unscheduleAllCallbacks()}}),ccui.WebView.EventType={LOADING:"loading",LOADED:"load",ERROR:"error",JS_EVALUATED:"js"},function(){var a=ccui.WebView._polyfill={devicePixelRatio:!1,enableDiv:!1};cc.sys.os===cc.sys.OS_IOS&&(a.enableDiv=!0),cc.sys.isMobile?cc.sys.browserType===cc.sys.BROWSER_TYPE_FIREFOX&&(a.enableBG=!0):cc.sys.browserType===cc.sys.BROWSER_TYPE_IE&&(a.closeHistory=!0)}(),function(a){var b=null;b=cc._renderType===cc.game.RENDER_TYPE_WEBGL?cc.Node.WebGLRenderCmd:cc.Node.CanvasRenderCmd,ccui.WebView.RenderCmd=function(c){b.call(this,c),this._div=null,this._iframe=null,a.enableDiv?(this._div=document.createElement("div"),this._div.style["-webkit-overflow"]="auto",this._div.style["-webkit-overflow-scrolling"]="touch",this._iframe=document.createElement("iframe"),this._iframe.style.width="100%",this._iframe.style.height="100%",this._div.appendChild(this._iframe)):this._div=this._iframe=document.createElement("iframe"),a.enableBG&&(this._div.style.background="#FFF"),this._iframe.addEventListener("load",function(){c._dispatchEvent(ccui.WebView.EventType.LOADED)}),this._iframe.addEventListener("error",function(){c._dispatchEvent(ccui.WebView.EventType.ERROR)}),this._div.style.background="#FFF",this._div.style.height="200px",this._div.style.width="300px",this._div.style.overflow="scroll",this._listener=null,this.initStyle()};var c=ccui.WebView.RenderCmd.prototype=Object.create(b.prototype);c.constructor=ccui.WebView.RenderCmd,c.transform=function(a,b){this.originTransform(a,b),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY)},c.updateStatus=function(){a.devicePixelRatio=cc.view.isRetinaEnabled();var b=cc.Node._dirtyFlags,c=this._dirtyFlag;c&b.transformDirty&&(this.transform(this.getParentRenderCmd(),!0),this.updateMatrix(this._worldTransform,cc.view._scaleX,cc.view._scaleY),this._dirtyFlag=this._dirtyFlag&cc.Node._dirtyFlags.transformDirty^this._dirtyFlag),c&b.orderDirty&&(this._dirtyFlag=this._dirtyFlag&b.orderDirty^this._dirtyFlag)},c.visit=function(){var a=this,b=cc.container,c=cc.eventManager;if(this._node._visible)b.appendChild(this._div),null===this._listener&&(this._listener=c.addCustomListener(cc.game.EVENT_RESIZE,function(){a.resize()}));else{var d=!1;d="contains"in b?b.contains(this._div):b.compareDocumentPosition(this._div)%16,d&&b.removeChild(this._div);var e=c._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners();c._removeListenerInVector(e,this._listener),this._listener=null}this.updateStatus(),this.resize(cc.view)},c.resize=function(a){a=a||cc.view;var b=this._node,c=cc.eventManager;if(b._parent&&b._visible)this.updateMatrix(this._worldTransform,a._scaleX,a._scaleY);else{var d=c._listenersMap[cc.game.EVENT_RESIZE].getFixedPriorityListeners();c._removeListenerInVector(d,this._listener),this._listener=null}},c.updateMatrix=function(b,c,d){var e=this._node;if(a.devicePixelRatio&&1!==c&&1!==c){var f=cc.view.getDevicePixelRatio();c/=f,d/=f}if(this._loaded!==!1){var g=e._contentSize.width,h=e._contentSize.height,i=b.a*c,j=b.b,k=b.c,l=b.d*d,m=b.tx*c-g/2+g*e._scaleX/2*c,n=b.ty*d-h/2+h*e._scaleY/2*d,o="matrix("+i+","+j+","+k+","+l+","+m+","+-n+")";this._div.style.transform=o,this._div.style["-webkit-transform"]=o}},c.initStyle=function(){if(this._div){var a=this._div;a.style.position="absolute",a.style.bottom="0px",a.style.left="0px"}},c.updateURL=function(a){var b=this._iframe;b.src=a;var c=this,d=function(){c._loaded=!0,b.removeEventListener("load",d)};b.addEventListener("load",d)},c.changeSize=function(a,b){var c=this._div;c&&(c.style.width=a+"px",c.style.height=b+"px")},c.removeDom=function(){var a=this._div;if(a){var b=!1;b="contains"in cc.container?cc.container.contains(a):cc.container.compareDocumentPosition(a)%16,b&&cc.container.removeChild(a)}}}(ccui.WebView._polyfill);!function(){var a={_ignoreBodyRotation:!1,_body:null,_rotation:1,ctor:function(a,b){if(cc.Sprite.prototype.ctor.call(this),void 0===a)cc.PhysicsSprite.prototype.init.call(this);else if(cc.isString(a))if("#"===a[0]){var c=a.substr(1,a.length-1),d=cc.spriteFrameCache.getSpriteFrame(c);this.initWithSpriteFrame(d)}else this.init(a,b);else cc.isObject(a)&&(a instanceof cc.Texture2D?this.initWithTexture(a,b):a instanceof cc.SpriteFrame&&this.initWithSpriteFrame(a));cc.renderer.pushRenderCommand(this._renderCmd)},visit:function(){cc.renderer.pushRenderCommand(this._renderCmd),cc.Sprite.prototype.visit.call(this)},setBody:function(a){this._body=a},getBody:function(){return this._body},getPosition:function(){var a=this._body;return{x:a.p.x,y:a.p.y}},getPositionX:function(){return this._body.p.x},getPositionY:function(){return this._body.p.y},setPosition:function(a,b){void 0===b?(this._body.p.x=a.x,this._body.p.y=a.y):(this._body.p.x=a,this._body.p.y=b)},setPositionX:function(a){this._body.p.x=a},setPositionY:function(a){this._body.p.y=a},_syncPosition:function(){var a=this._position,b=this._body;a.x===b.p.x&&a.y===b.p.y||cc.Sprite.prototype.setPosition.call(this,b.p.x,b.p.y)},getRotation:function(){return this._ignoreBodyRotation?this._rotationX:-cc.radiansToDegrees(this._body.a)},setRotation:function(a){this._ignoreBodyRotation?cc.Sprite.prototype.setRotation.call(this,a):this._body.a=-cc.degreesToRadians(a)},_syncRotation:function(){var a=-cc.radiansToDegrees(this._body.a);this._rotationX!==a&&cc.Sprite.prototype.setRotation.call(this,a)},getNodeToParentTransform:function(){return this._renderCmd.getNodeToParentTransform()},isDirty:function(){return!this._body.isSleeping()},setDirty:function(){},setIgnoreBodyRotation:function(a){this._ignoreBodyRotation=a},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.PhysicsSprite.CanvasRenderCmd(this):new cc.PhysicsSprite.WebGLRenderCmd(this)}};cc.PhysicsSprite=cc.Sprite.extend(a),cc.PhysicsSprite._className="PhysicsSprite";var b=cc.PhysicsSprite.prototype;b.body,cc.defineGetterSetter(b,"body",b.getBody,b.setBody),b.dirty,cc.defineGetterSetter(b,"dirty",b.isDirty,b.setDirty),cc.PhysicsSprite.create=function(a,b){return new cc.PhysicsSprite(a,b)},cc.PhysicsSprite.createWithSpriteFrameName=cc.PhysicsSprite.create,cc.PhysicsSprite.createWithSpriteFrame=cc.PhysicsSprite.create}(),function(){cc.PhysicsSprite.CanvasRenderCmd=function(a){cc.Sprite.CanvasRenderCmd.call(this,a),this._needDraw=!0};var a=cc.PhysicsSprite.CanvasRenderCmd.prototype=Object.create(cc.Sprite.CanvasRenderCmd.prototype);a.constructor=cc.PhysicsSprite.CanvasRenderCmd,a.rendering=function(a,b,c){var d=this._node;d._syncPosition(),d._ignoreBodyRotation||d._syncRotation(),this.transform(this.getParentRenderCmd()),cc.Sprite.CanvasRenderCmd.prototype.rendering.call(this,a,b,c)}}(),cc.__convertVerts=function(a){for(var b=[],c=0;c<a.length/2;c++)b[c]={x:a[2*c],y:a[2*c+1]};return b},cc.ColorForBody=function(a){return a.isRogue()||a.isSleeping()?cc.color(128,128,128,128):a.nodeIdleTime>a.space.sleepTimeThreshold?cc.color(84,84,84,128):cc.color(255,0,0,128)},cc.DrawShape=function(a,b){var c=a.body,d=cc.ColorForBody(c);switch(a.collisionCode){case cp.CircleShape.prototype.collisionCode:this.drawDot(a.tc,Math.max(a.r,1),d),this.drawSegment(a.tc,cp.v.add(a.tc,cp.v.mult(c.rot,a.r)),1,d);break;case cp.SegmentShape.prototype.collisionCode:this.drawSegment(a.ta,a.tb,Math.max(a.r,2),d);break;case cp.PolyShape.prototype.collisionCode:var e=cc.color(d.r,d.g,d.b,cc.lerp(d.a,255,.5));this.drawPoly(cc.__convertVerts(a.tVerts),d,1,e);break;default:cc.log("cc.DrawShape(): Bad assertion in DrawShape()")}},cc.DrawConstraint=function(a,b){var c,d,e=a.a,f=a.b;if(a instanceof cp.PinJoint)c=e.local2World(a.anchr1),d=f.local2World(a.anchr2),this.drawDot(c,3,cc.CONSTRAINT_COLOR),this.drawDot(d,3,cc.CONSTRAINT_COLOR),this.drawSegment(c,d,1,cc.CONSTRAINT_COLOR);else if(a instanceof cp.SlideJoint)c=e.local2World(a.anchr1),d=f.local2World(a.anchr2),this.drawDot(c,3,cc.CONSTRAINT_COLOR),this.drawDot(d,3,cc.CONSTRAINT_COLOR),this.drawSegment(c,d,1,cc.CONSTRAINT_COLOR);else if(a instanceof cp.PivotJoint)c=e.local2World(a.anchr1),d=f.local2World(a.anchr2),this.drawDot(c,3,cc.CONSTRAINT_COLOR),this.drawDot(d,3,cc.CONSTRAINT_COLOR);else if(a instanceof cp.GrooveJoint){c=e.local2World(a.grv_a),d=e.local2World(a.grv_b);var g=f.local2World(a.anchr2);this.drawDot(g,3,cc.CONSTRAINT_COLOR),this.drawSegment(c,d,1,cc.CONSTRAINT_COLOR)}else a instanceof cp.DampedSpring},cc.CONSTRAINT_COLOR=cc.color(0,255,0,128),cc.PhysicsDebugNode=cc.DrawNode.extend({_space:null,_className:"PhysicsDebugNode",ctor:function(a){cc.DrawNode.prototype.ctor.call(this),this._space=a},getSpace:function(){return this._space},setSpace:function(a){this._space=a},draw:function(a){this._space&&(this._space.eachShape(cc.DrawShape.bind(this)),this._space.eachConstraint(cc.DrawConstraint.bind(this)),cc.DrawNode.prototype.draw.call(this),this.clear())},_createRenderCmd:function(){return cc._renderType===cc.game.RENDER_TYPE_CANVAS?new cc.PhysicsDebugNode.CanvasRenderCmd(this):new cc.PhysicsDebugNode.WebGLRenderCmd(this)}}),cc.PhysicsDebugNode.create=function(a){return new cc.PhysicsDebugNode(a)},function(){cc.PhysicsDebugNode.CanvasRenderCmd=function(a){cc.Node.CanvasRenderCmd.call(this,a),this._buffer=a._buffer,this._needDraw=!0};var a=cc.PhysicsDebugNode.CanvasRenderCmd.prototype=Object.create(cc.Node.CanvasRenderCmd.prototype);a.constructor=cc.PhysicsDebugNode.CanvasRenderCmd,a.rendering=function(a,b,c){var d=this._node;d._space&&(d._space.eachShape(cc.DrawShape.bind(d)),d._space.eachConstraint(cc.DrawConstraint.bind(d)),cc.DrawNode.CanvasRenderCmd.prototype.rendering.call(this,a,b,c),d.clear())},a._drawDot=cc.DrawNode.CanvasRenderCmd.prototype._drawDot,a._drawSegment=cc.DrawNode.CanvasRenderCmd.prototype._drawSegment,a._drawPoly=cc.DrawNode.CanvasRenderCmd.prototype._drawPoly}();!function(){Object.create=Object.create||function(a){function b(){}return b.prototype=a,new b};var a;"undefined"==typeof exports?(a={},"object"==typeof window&&(window.cp=a)):a=exports;var b,c,d=function(a,b){if(!a)throw new Error("Assertion failed: "+b)},e=function(a,b){!a&&console&&console.warn&&(console.warn("ASSERTION FAILED: "+b),console.trace&&console.trace())},f=function(a,b){return a<b?a:b},g=function(a,b){return a>b?a:b};"object"==typeof window&&window.navigator.userAgent.indexOf("Firefox")>-1?(b=Math.min,c=Math.max):(b=f,c=g);var h=function(a,b){return a<b?a+" "+b:b+" "+a},i=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return a[c]=a[a.length-1],void a.length--},j=function(a,b,c){var d=y(b,c),e=q(t(d,y(a,c))/H(d));return x(c,A(d,e))},k=function(a,b,c,d,e,f){var g=c-e,h=d-f,i=q(u(g,h,a-e,b-f)/I(g,h));return new r(e+g*i,f+h*i)};a.momentForCircle=function(a,b,c,d){return a*(.5*(b*b+c*c)+H(d))},a.areaForCircle=function(a,b){return Math.PI*Math.abs(a*a-b*b)},a.momentForSegment=function(a,b,c){var d=A(x(b,c),.5);return a*(O(c,b)/12+H(d))},a.areaForSegment=function(a,b,c){return c*(Math.PI*c+2*N(a,b))},a.momentForPoly=function(a,b,c){for(var d=0,e=0,f=b.length,g=0;g<f;g+=2){var h=b[g]+c.x,i=b[g+1]+c.y,j=b[(g+2)%f]+c.x,k=b[(g+3)%f]+c.y,l=C(j,k,h,i),m=u(h,i,h,i)+u(h,i,j,k)+u(j,k,j,k);d+=l*m,e+=l}return a*d/(6*e)},a.areaForPoly=function(a){for(var b=0,c=0,d=a.length;c<d;c+=2)b+=B(new r(a[c],a[c+1]),new r(a[(c+2)%d],a[(c+3)%d]));return-b/2},a.centroidForPoly=function(a){for(var b=0,c=new r(0,0),d=0,e=a.length;d<e;d+=2){var f=new r(a[d],a[d+1]),g=new r(a[(d+2)%e],a[(d+3)%e]),h=B(f,g);b+=h,c=x(c,A(x(f,g),h))}return A(c,1/(3*b))},a.recenterPoly=function(b){for(var c=a.centroidForPoly(b),d=0;d<b.length;d+=2)b[d]-=c.x,b[d+1]-=c.y},a.momentForBox=function(a,b,c){return a*(b*b+c*c)/12},a.momentForBox2=function(b,c){var d=c.r-c.l,e=c.t-c.b,f=A([c.l+c.r,c.b+c.t],.5);return a.momentForBox(b,d,e)+b*H(f)};var l=a.loopIndexes=function(a){var b,c,d,e,f=0,g=0;b=d=a[0],c=e=a[1];for(var h=a.length>>1,i=1;i<h;i++){var j=a[2*i],k=a[2*i+1];j<b||j==b&&k<c?(b=j,c=k,f=i):(j>d||j==d&&k>e)&&(d=j,e=k,g=i)}return[f,g]},m=function(a,b,c){var d=a[2*b];a[2*b]=a[2*c],a[2*c]=d,d=a[2*b+1],a[2*b+1]=a[2*c+1],a[2*c+1]=d},n=function(a,b,c,d,e,f){if(0===c)return 0;for(var g=0,h=b,i=y(e,d),j=f*v(i),k=b,l=b+c-1;k<=l;){var n=new r(a[2*k],a[2*k+1]),o=B(i,y(n,d));o>j?(o>g&&(g=o,h=k),k++):(m(a,k,l),l--)}return h!=b&&m(a,b,h),k-b},o=function(a,b,c,d,e,f,g,h){if(d<0)return 0;if(0==d)return b[2*h]=f.x,b[2*h+1]=f.y,1;var i=n(b,c,d,e,f,a),j=new r(b[2*c],b[2*c+1]),k=o(a,b,c+1,i-1,e,j,f,h),l=h+k++;b[2*l]=f.x,b[2*l+1]=f.y;var m=n(b,c+i,d-i,f,g,a),p=new r(b[2*(c+i)],b[2*(c+i)+1]);return k+o(a,b,c+i+1,m-1,f,p,g,h+k)};a.convexHull=function(a,b,c){if(b)for(var d=0;d<a.length;d++)b[d]=a[d];else b=a;var f=l(a),g=f[0],h=f[1];if(g==h)return b.length=2,b;m(b,0,g),m(b,1,0==h?g:h);var i=new r(b[0],b[1]),j=new r(b[2],b[3]),k=a.length>>1,n=o(c,b,2,k-2,i,j,i,1)+1;return b.length=2*n,e(aa(b),"Internal error: cpConvexHull() and cpPolyValidate() did not agree.Please report this error with as much info as you can."),b};var p=function(a,d,e){return b(c(a,d),e)},q=function(a){return c(0,b(a,1))},r=a.Vect=function(a,b){this.x=a,this.y=b};a.v=function(a,b){return new r(a,b)};var s=a.vzero=new r(0,0),t=a.v.dot=function(a,b){return a.x*b.x+a.y*b.y},u=function(a,b,c,d){return a*c+b*d},v=a.v.len=function(a){return Math.sqrt(t(a,a))},w=a.v.len2=function(a,b){return Math.sqrt(a*a+b*b)},x=(a.v.eql=function(a,b){return a.x===b.x&&a.y===b.y},a.v.add=function(a,b){return new r(a.x+b.x,a.y+b.y)});r.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this};var y=a.v.sub=function(a,b){return new r(a.x-b.x,a.y-b.y)};r.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this};var z=a.v.neg=function(a){return new r(-a.x,-a.y)};r.prototype.neg=function(){return this.x=-this.x,this.y=-this.y,this};var A=a.v.mult=function(a,b){return new r(a.x*b,a.y*b)};r.prototype.mult=function(a){return this.x*=a,this.y*=a,this};var B=a.v.cross=function(a,b){return a.x*b.y-a.y*b.x},C=function(a,b,c,d){return a*d-b*c},D=a.v.perp=function(a){return new r(-a.y,a.x)},E=(a.v.pvrperp=function(a){return new r(a.y,-a.x)},a.v.project=function(a,b){return A(b,t(a,b)/H(b))});r.prototype.project=function(a){return this.mult(t(this,a)/H(a)),this};var F=a.v.rotate=function(a,b){return new r(a.x*b.x-a.y*b.y,a.x*b.y+a.y*b.x)};r.prototype.rotate=function(a){return this.x=this.x*a.x-this.y*a.y,this.y=this.x*a.y+this.y*a.x,this};var G=a.v.unrotate=function(a,b){return new r(a.x*b.x+a.y*b.y,a.y*b.x-a.x*b.y)},H=a.v.lengthsq=function(a){return t(a,a)},I=a.v.lengthsq2=function(a,b){return a*a+b*b},J=a.v.lerp=function(a,b,c){return x(A(a,1-c),A(b,c))},K=a.v.normalize=function(a){return A(a,1/v(a))},L=a.v.normalize_safe=function(a){return 0===a.x&&0===a.y?s:K(a)},M=a.v.clamp=function(a,b){return t(a,a)>b*b?A(K(a),b):a},N=(a.v.lerpconst=function(a,b,c){return x(a,M(y(b,a),c))},a.v.dist=function(a,b){return v(y(a,b))}),O=a.v.distsq=function(a,b){return H(y(a,b))},P=(a.v.near=function(a,b,c){return O(a,b)<c*c},a.v.slerp=function(a,b,c){var d=Math.acos(t(a,b));if(d){var e=1/Math.sin(d);return x(A(a,Math.sin((1-c)*d)*e),A(b,Math.sin(c*d)*e))}return a}),Q=(a.v.slerpconst=function(a,c,d){var e=Math.acos(t(a,c));return P(a,c,b(d,e)/e)},a.v.forangle=function(a){return new r(Math.cos(a),Math.sin(a))},a.v.toangle=function(a){return Math.atan2(a.y,a.x)},a.v.str=function(a){return"("+a.x.toFixed(3)+", "+a.y.toFixed(3)+")"},0),R=a.BB=function(a,b,c,d){this.l=a,this.b=b,this.r=c,this.t=d,Q++};a.bb=function(a,b,c,d){return new R(a,b,c,d)};var S=function(a,b){return new R(a.x-b,a.y-b,a.x+b,a.y+b)},T=function(a,b,c,d,e){return a.l<=d&&b<=a.r&&a.b<=e&&c<=a.t},U=0,V=(a.NO_GROUP=0,a.ALL_LAYERS=-1);a.ALL_CATEGORIES=-1;a.resetShapeIdCounter=function(){U=0};var W=a.Shape=function(a){this.body=a,this.bb_l=this.bb_b=this.bb_r=this.bb_t=0,this.hashid=U++,this.sensor=!1,this.e=0,this.u=0,this.surface_v=s,this.collision_type=0,this.group=0,this.layers=V,this.space=null,this.collisionCode=this.collisionCode};W.prototype.setElasticity=function(a){this.e=a},W.prototype.setFriction=function(a){this.body.activate(),this.u=a},W.prototype.setLayers=function(a){this.body.activate(),this.layers=a},W.prototype.setSensor=function(a){this.body.activate(),this.sensor=a},W.prototype.setCollisionType=function(a){this.body.activate(),this.collision_type=a},W.prototype.getBody=function(){return this.body},W.prototype.active=function(){return this.body&&this.body.shapeList.indexOf(this)!==-1},W.prototype.setBody=function(a){d(!this.active(),"You cannot change the body on an active shape. You must remove the shape from the space before changing the body."),this.body=a},W.prototype.cacheBB=function(){return this.update(this.body.p,this.body.rot)},W.prototype.update=function(a,b){d(!isNaN(b.x),"Rotation is NaN"),d(!isNaN(a.x),"Position is NaN"),this.cacheData(a,b)},W.prototype.pointQuery=function(a){var b=this.nearestPointQuery(a);if(b.d<0)return b},W.prototype.getBB=function(){return new R(this.bb_l,this.bb_b,this.bb_r,this.bb_t)};var X=function(a,b,c){this.shape=a,this.p=b,this.d=c},Y=function(a,b,c){this.shape=a,this.t=b,this.n=c};Y.prototype.hitPoint=function(a,b){return J(a,b,this.t)},Y.prototype.hitDist=function(a,b){return N(a,b)*this.t};var Z=a.CircleShape=function(a,b,c){this.c=this.tc=c,this.r=b,this.type="circle",W.call(this,a)};Z.prototype=Object.create(W.prototype),Z.prototype.cacheData=function(a,b){var c=this.tc=F(this.c,b).add(a),d=this.r;this.bb_l=c.x-d,this.bb_b=c.y-d,this.bb_r=c.x+d,this.bb_t=c.y+d},Z.prototype.nearestPointQuery=function(a){var b=a.x-this.tc.x,c=a.y-this.tc.y,d=w(b,c),e=this.r,f=new r(this.tc.x+b*e/d,this.tc.y+c*e/d);return new X(this,f,d-e)};var $=function(a,b,c,d,e,f){d=y(d,b),e=y(e,b);var g=t(d,d)-2*t(d,e)+t(e,e),h=-2*t(d,d)+2*t(d,e),i=t(d,d)-c*c,j=h*h-4*g*i;if(j>=0){var k=(-h-Math.sqrt(j))/(2*g);if(0<=k&&k<=1)return new Y(a,k,K(J(d,e,k)))}};Z.prototype.segmentQuery=function(a,b){return $(this,this.tc,this.r,a,b)};var _=a.SegmentShape=function(a,b,c,d){this.a=b,this.b=c,this.n=D(K(y(c,b))),this.ta=this.tb=this.tn=null,this.r=d,this.a_tangent=s,this.b_tangent=s,this.type="segment",W.call(this,a)};_.prototype=Object.create(W.prototype),_.prototype.cacheData=function(a,b){this.ta=x(a,F(this.a,b)),this.tb=x(a,F(this.b,b)),this.tn=F(this.n,b);var c,d,e,f;this.ta.x<this.tb.x?(c=this.ta.x,d=this.tb.x):(c=this.tb.x,d=this.ta.x),this.ta.y<this.tb.y?(e=this.ta.y,f=this.tb.y):(e=this.tb.y,f=this.ta.y);var g=this.r;this.bb_l=c-g,this.bb_b=e-g,this.bb_r=d+g,this.bb_t=f+g},_.prototype.nearestPointQuery=function(a){var b=j(a,this.ta,this.tb),c=a.x-b.x,d=a.y-b.y,e=w(c,d),f=this.r,g=e?x(b,A(new r(c,d),f/e)):b;return new X(this,g,e-f)},_.prototype.segmentQuery=function(a,b){var c=this.tn,d=t(y(this.ta,a),c),e=this.r,f=d>0?z(c):c,g=y(A(f,e),a),h=x(this.ta,g),i=x(this.tb,g),j=y(b,a);if(B(j,h)*B(j,i)<=0){var k=d+(d>0?-e:e),l=-k,m=t(j,c)-k;if(l*m<0)return new Y(this,l/(l-m),f)}else if(0!==e){var n=$(this,this.ta,this.r,a,b),o=$(this,this.tb,this.r,a,b);return n?o&&o.t<n.t?o:n:o}},_.prototype.setNeighbors=function(a,b){this.a_tangent=y(a,this.a),this.b_tangent=y(b,this.b)},_.prototype.setEndpoints=function(a,b){this.a=a,this.b=b,this.n=D(K(y(b,a)))};var aa=function(a){for(var b=a.length,c=0;c<b;c+=2){var d=a[c],e=a[c+1],f=a[(c+2)%b],g=a[(c+3)%b],h=a[(c+4)%b],i=a[(c+5)%b];if(C(f-d,g-e,h-f,i-g)>0)return!1}return!0},ba=a.PolyShape=function(a,b,c){this.setVerts(b,c),this.type="poly",W.call(this,a)};ba.prototype=Object.create(W.prototype);var ca=function(a,b){this.n=a,this.d=b};ca.prototype.compare=function(a){return t(this.n,a)-this.d},ba.prototype.setVerts=function(a,b){d(a.length>=4,"Polygons require some verts"),d("number"==typeof a[0],"Polygon verticies should be specified in a flattened list (eg [x1,y1,x2,y2,x3,y3,...])"),d(aa(a),"Polygon is concave or has a reversed winding. Consider using cpConvexHull()");var c=a.length,e=c>>1;this.verts=new Array(c),this.tVerts=new Array(c),this.planes=new Array(e),this.tPlanes=new Array(e);for(var f=0;f<c;f+=2){var g=a[f]+b.x,h=a[f+1]+b.y,i=a[(f+2)%c]+b.x,j=a[(f+3)%c]+b.y,k=K(D(new r(i-g,j-h)));this.verts[f]=g,this.verts[f+1]=h,this.planes[f>>1]=new ca(k,u(k.x,k.y,g,h)),this.tPlanes[f>>1]=new ca(new r(0,0),0)}};var da=(a.BoxShape=function(a,b,c){var d=b/2,e=c/2;return da(a,new R(-d,-e,d,e))},a.BoxShape2=function(a,b){var c=[b.l,b.b,b.l,b.t,b.r,b.t,b.r,b.b];return new ba(a,c,s)});ba.prototype.transformVerts=function(a,d){for(var e=this.verts,f=this.tVerts,g=1/0,h=-(1/0),i=1/0,j=-(1/0),k=0;k<e.length;k+=2){var l=e[k],m=e[k+1],n=a.x+l*d.x-m*d.y,o=a.y+l*d.y+m*d.x;f[k]=n,f[k+1]=o,g=b(g,n),h=c(h,n),i=b(i,o),j=c(j,o)}this.bb_l=g,this.bb_b=i,this.bb_r=h,this.bb_t=j},ba.prototype.transformAxes=function(a,b){for(var c=this.planes,d=this.tPlanes,e=0;e<c.length;e++){var f=F(c[e].n,b);d[e].n=f,d[e].d=t(a,f)+c[e].d}},ba.prototype.cacheData=function(a,b){this.transformAxes(a,b),this.transformVerts(a,b)},ba.prototype.nearestPointQuery=function(a){for(var b=this.tPlanes,c=this.tVerts,d=c[c.length-2],e=c[c.length-1],f=1/0,g=s,h=!1,i=0;i<b.length;i++){b[i].compare(a)>0&&(h=!0);var j=c[2*i],l=c[2*i+1],m=k(a.x,a.y,d,e,j,l),n=N(a,m);n<f&&(f=n,g=m),d=j,e=l}return new X(this,g,h?f:-f)},ba.prototype.segmentQuery=function(a,b){for(var c=this.tPlanes,d=this.tVerts,e=c.length,f=2*e,g=0;g<e;g++){var h=c[g].n,i=t(a,h);if(!(c[g].d>i)){var j=t(b,h),k=(c[g].d-i)/(j-i);if(!(k<0||1<k)){var l=J(a,b,k),m=-B(h,l),n=-C(h.x,h.y,d[2*g],d[2*g+1]),o=-C(h.x,h.y,d[(2*g+2)%f],d[(2*g+3)%f]);if(n<=m&&m<=o)return new Y(this,k,h)}}}},ba.prototype.valueOnAxis=function(a,c){for(var d=this.tVerts,e=u(a.x,a.y,d[0],d[1]),f=2;f<d.length;f+=2)e=b(e,u(a.x,a.y,d[f],d[f+1]));return e-c},ba.prototype.containsVert=function(a,b){for(var c=this.tPlanes,d=0;d<c.length;d++){var e=c[d].n,f=u(e.x,e.y,a,b)-c[d].d;if(f>0)return!1}return!0},ba.prototype.containsVertPartial=function(a,b,c){for(var d=this.tPlanes,e=0;e<d.length;e++){var f=d[e].n;if(!(t(f,c)<0)){var g=u(f.x,f.y,a,b)-d[e].d;if(g>0)return!1}}return!0},ba.prototype.getNumVerts=function(){return this.verts.length/2},ba.prototype.getCount=ba.prototype.getNumVerts,ba.prototype.getVert=function(a){return new r(this.verts[2*a],this.verts[2*a+1])};var ea=a.Body=function(a,b){this.p=new r(0,0),this.vx=this.vy=0,this.f=new r(0,0),this.w=0,this.t=0,this.v_limit=1/0,this.w_limit=1/0,this.v_biasx=this.v_biasy=0,this.w_bias=0,this.space=null,this.shapeList=[],this.arbiterList=null,this.constraintList=null,this.nodeRoot=null,this.nodeNext=null,this.nodeIdleTime=0,this.setMass(a),this.setMoment(b),this.rot=new r(0,0),this.setAngle(0)},fa=function(){var a=new ea(1/0,1/0);return a.nodeIdleTime=1/0,a};a.StaticBody=fa;var ga=function(a,b){d(a.x==a.x&&a.y==a.y,b)},ha=function(a,b){d(Math.abs(a.x)!==1/0&&Math.abs(a.y)!==1/0,b)},ia=function(a,b){ga(a,b),ha(a,b)};ea.prototype.sanityCheck=function(){d(this.m===this.m&&this.m_inv===this.m_inv,"Body's mass is invalid."),d(this.i===this.i&&this.i_inv===this.i_inv,"Body's moment is invalid."),ia(this.p,"Body's position is invalid."),ia(this.f,"Body's force is invalid."),d(this.vx===this.vx&&Math.abs(this.vx)!==1/0,"Body's velocity is invalid."),d(this.vy===this.vy&&Math.abs(this.vy)!==1/0,"Body's velocity is invalid."),d(this.a===this.a&&Math.abs(this.a)!==1/0,"Body's angle is invalid."),d(this.w===this.w&&Math.abs(this.w)!==1/0,"Body's angular velocity is invalid."),d(this.t===this.t&&Math.abs(this.t)!==1/0,"Body's torque is invalid."),ia(this.rot,"Body's rotation vector is invalid."),d(this.v_limit===this.v_limit,"Body's velocity limit is invalid."),d(this.w_limit===this.w_limit,"Body's angular velocity limit is invalid.")},ea.prototype.getPos=function(){return this.p},ea.prototype.getVel=function(){return new r(this.vx,this.vy)},ea.prototype.getAngVel=function(){return this.w},ea.prototype.getPosition=ea.prototype.getPos,ea.prototype.getVelocity=ea.prototype.getVel,ea.prototype.getAngularVelocity=ea.prototype.getAngVel,ea.prototype.getCenterOfGravity=function(){return this.p},ea.prototype.isSleeping=function(){return null!==this.nodeRoot},ea.prototype.isStatic=function(){return this.nodeIdleTime===1/0},ea.prototype.isRogue=function(){return null===this.space},ea.prototype.setMass=function(a){d(a>0,"Mass must be positive and non-zero."),this.activate(),this.m=a,this.m_inv=1/a},ea.prototype.setMoment=function(a){d(a>0,"Moment of Inertia must be positive and non-zero."),this.activate(),this.i=a,this.i_inv=1/a},ea.prototype.addShape=function(a){this.shapeList.push(a)},ea.prototype.removeShape=function(a){i(this.shapeList,a)};var ja=function(a,b,c){return a===c?a.next(b):(a.a===b?a.next_a=ja(a.next_a,b,c):a.next_b=ja(a.next_b,b,c),a)};ea.prototype.removeConstraint=function(a){this.constraintList=ja(this.constraintList,this,a)},ea.prototype.setPos=function(b){this.activate(),this.sanityCheck(),b===s&&(b=a.v(0,0)),this.p=b},ea.prototype.setVel=function(a){this.activate(),this.vx=a.x,this.vy=a.y},ea.prototype.setAngVel=function(a){this.activate(),this.w=a},ea.prototype.setAngleInternal=function(a){d(!isNaN(a),"Internal Error: Attempting to set body's angle to NaN"),this.a=a,this.rot.x=Math.cos(a),this.rot.y=Math.sin(a)},ea.prototype.setAngle=function(a){this.activate(),this.sanityCheck(),this.setAngleInternal(a)},ea.prototype.velocity_func=function(a,b,c){var d=this.vx*b+(a.x+this.f.x*this.m_inv)*c,e=this.vy*b+(a.y+this.f.y*this.m_inv)*c,f=this.v_limit,g=d*d+e*e,h=g>f*f?f/Math.sqrt(g):1;this.vx=d*h,this.vy=e*h;var i=this.w_limit;this.w=p(this.w*b+this.t*this.i_inv*c,-i,i),this.sanityCheck()},ea.prototype.position_func=function(a){this.p.x+=(this.vx+this.v_biasx)*a,this.p.y+=(this.vy+this.v_biasy)*a,this.setAngleInternal(this.a+(this.w+this.w_bias)*a),this.v_biasx=this.v_biasy=0,this.w_bias=0,this.sanityCheck()},ea.prototype.resetForces=function(){this.activate(),this.f=new r(0,0),this.t=0},ea.prototype.applyForce=function(a,b){this.activate(),this.f=x(this.f,a),this.t+=B(b,a)},ea.prototype.applyImpulse=function(a,b){this.activate(),lb(this,a.x,a.y,b)},ea.prototype.getVelAtPoint=function(a){return x(new r(this.vx,this.vy),A(D(a),this.w))},ea.prototype.getVelAtWorldPoint=function(a){return this.getVelAtPoint(y(a,this.p))},ea.prototype.getVelAtLocalPoint=function(a){return this.getVelAtPoint(F(a,this.rot))},ea.prototype.eachShape=function(a){for(var b=0,c=this.shapeList.length;b<c;b++)a(this.shapeList[b])},ea.prototype.eachConstraint=function(a){for(var b=this.constraintList;b;){var c=b.next(this);a(b),b=c}},ea.prototype.eachArbiter=function(a){for(var b=this.arbiterList;b;){var c=b.next(this);b.swappedColl=this===b.body_b,a(b),b=c}},ea.prototype.local2World=function(a){return x(this.p,F(a,this.rot))},ea.prototype.world2Local=function(a){return G(y(a,this.p),this.rot)},ea.prototype.localToWorld=ea.prototype.local2World,ea.prototype.worldToLocal=ea.prototype.world2Local,ea.prototype.kineticEnergy=function(){var a=this.vx*this.vx+this.vy*this.vy,b=this.w*this.w;return(a?a*this.m:0)+(b?b*this.i:0)};var ka=a.SpatialIndex=function(a){if(this.staticIndex=a,a){if(a.dynamicIndex)throw new Error("This static index is already associated with a dynamic index.");a.dynamicIndex=this}};ka.prototype.collideStatic=function(a,b){if(a.count>0){var c=a.query;this.each(function(a){c(a,new R(a.bb_l,a.bb_b,a.bb_r,a.bb_t),b)})}};var la=a.BBTree=function(a){ka.call(this,a),this.velocityFunc=null,this.leaves={},this.count=0,this.root=null,this.pooledNodes=null,this.pooledPairs=null,this.stamp=0};la.prototype=Object.create(ka.prototype);var ma=0,na=function(a,d,e){this.obj=null,this.bb_l=b(d.bb_l,e.bb_l),this.bb_b=b(d.bb_b,e.bb_b),this.bb_r=c(d.bb_r,e.bb_r),this.bb_t=c(d.bb_t,e.bb_t),this.parent=null,this.setA(d),this.setB(e)};la.prototype.makeNode=function(a,b){var c=this.pooledNodes;return c?(this.pooledNodes=c.parent,c.constructor(this,a,b),c):(ma++,new na(this,a,b))};var oa=0,pa=function(a,b){this.obj=b,a.getBB(b,this),this.parent=null,this.stamp=1,this.pairs=null,oa++};la.prototype.getBB=function(a,d){var e=this.velocityFunc;if(e){var f=.1,g=(a.bb_r-a.bb_l)*f,h=(a.bb_t-a.bb_b)*f,i=A(e(a),.1);d.bb_l=a.bb_l+b(-g,i.x),d.bb_b=a.bb_b+b(-h,i.y),d.bb_r=a.bb_r+c(g,i.x),d.bb_t=a.bb_t+c(h,i.y)}else d.bb_l=a.bb_l,d.bb_b=a.bb_b,d.bb_r=a.bb_r,d.bb_t=a.bb_t},la.prototype.getStamp=function(){var a=this.dynamicIndex;return a&&a.stamp?a.stamp:this.stamp},la.prototype.incrementStamp=function(){this.dynamicIndex&&this.dynamicIndex.stamp?this.dynamicIndex.stamp++:this.stamp++};var qa=0,ra=function(a,b,c,d){this.prevA=null,this.leafA=a,this.nextA=b,this.prevB=null,this.leafB=c,this.nextB=d};la.prototype.makePair=function(a,b,c,d){var e=this.pooledPairs;return e?(this.pooledPairs=e.prevA,e.prevA=null,e.leafA=a,e.nextA=b,e.prevB=null,e.leafB=c,e.nextB=d,e):(qa++,new ra(a,b,c,d))},ra.prototype.recycle=function(a){this.prevA=a.pooledPairs,a.pooledPairs=this};var sa=function(a,b,c){c&&(c.leafA===b?c.prevA=a:c.prevB=a),a?a.leafA===b?a.nextA=c:a.nextB=c:b.pairs=c};pa.prototype.clearPairs=function(a){var b,c=this.pairs;for(this.pairs=null;c;)c.leafA===this?(b=c.nextA,sa(c.prevB,c.leafB,c.nextB)):(b=c.nextB,sa(c.prevA,c.leafA,c.nextA)),c.recycle(a),c=b};var ta=function(a,b,c){var d=a.pairs,e=b.pairs,f=c.makePair(a,d,b,e);a.pairs=b.pairs=f,d&&(d.leafA===a?d.prevA=f:d.prevB=f),e&&(e.leafA===b?e.prevA=f:e.prevB=f)};na.prototype.recycle=function(a){this.parent=a.pooledNodes,a.pooledNodes=this},pa.prototype.recycle=function(a){},na.prototype.setA=function(a){this.A=a,a.parent=this},na.prototype.setB=function(a){this.B=a,a.parent=this},pa.prototype.isLeaf=!0,na.prototype.isLeaf=!1,na.prototype.otherChild=function(a){return this.A==a?this.B:this.A},na.prototype.replaceChild=function(a,d,f){e(a==this.A||a==this.B,"Node is not a child of parent."),this.A==a?(this.A.recycle(f),this.setA(d)):(this.B.recycle(f),this.setB(d));for(var g=this;g;g=g.parent){var h=g.A,i=g.B;g.bb_l=b(h.bb_l,i.bb_l),g.bb_b=b(h.bb_b,i.bb_b),g.bb_r=c(h.bb_r,i.bb_r),g.bb_t=c(h.bb_t,i.bb_t)}},na.prototype.bbArea=pa.prototype.bbArea=function(){return(this.bb_r-this.bb_l)*(this.bb_t-this.bb_b)};var ua=function(a,d){return(c(a.bb_r,d.bb_r)-b(a.bb_l,d.bb_l))*(c(a.bb_t,d.bb_t)-b(a.bb_b,d.bb_b))},va=function(a,b){return Math.abs(a.bb_l+a.bb_r-b.bb_l-b.bb_r)+Math.abs(a.bb_b+a.bb_t-b.bb_b-b.bb_t)},wa=function(a,d,e){if(null==a)return d;if(a.isLeaf)return e.makeNode(d,a);var f=a.B.bbArea()+ua(a.A,d),g=a.A.bbArea()+ua(a.B,d);return f===g&&(f=va(a.A,d),g=va(a.B,d)),g<f?a.setB(wa(a.B,d,e)):a.setA(wa(a.A,d,e)),a.bb_l=b(a.bb_l,d.bb_l),a.bb_b=b(a.bb_b,d.bb_b),a.bb_r=c(a.bb_r,d.bb_r),a.bb_t=c(a.bb_t,d.bb_t),a};na.prototype.intersectsBB=pa.prototype.intersectsBB=function(a){return this.bb_l<=a.r&&a.l<=this.bb_r&&this.bb_b<=a.t&&a.b<=this.bb_t};var xa=function(a,b,c){a.intersectsBB(b)&&(a.isLeaf?c(a.obj):(xa(a.A,b,c),xa(a.B,b,c)))},ya=function(a,d,e){var f=1/(e.x-d.x),g=a.bb_l==d.x?-(1/0):(a.bb_l-d.x)*f,h=a.bb_r==d.x?1/0:(a.bb_r-d.x)*f,i=b(g,h),j=c(g,h),k=1/(e.y-d.y),l=a.bb_b==d.y?-(1/0):(a.bb_b-d.y)*k,m=a.bb_t==d.y?1/0:(a.bb_t-d.y)*k,n=b(l,m),o=c(l,m);if(n<=j&&i<=o){var p=c(i,n),q=b(j,o);if(0<=q&&p<=1)return c(p,0)}return 1/0},za=function(a,c,d,e,f){if(a.isLeaf)return f(a.obj);var g=ya(a.A,c,d),h=ya(a.B,c,d);return g<h?(g<e&&(e=b(e,za(a.A,c,d,e,f))),h<e&&(e=b(e,za(a.B,c,d,e,f)))):(h<e&&(e=b(e,za(a.B,c,d,e,f))),g<e&&(e=b(e,za(a.A,c,d,e,f)))),e};la.prototype.subtreeRecycle=function(a){a.isLeaf&&(this.subtreeRecycle(a.A),this.subtreeRecycle(a.B),a.recycle(this))};var Aa=function(a,b,c){if(b==a)return null;var d=b.parent;if(d==a){var e=a.otherChild(b);return e.parent=a.parent,a.recycle(c),e}return d.parent.replaceChild(d,d.otherChild(b),c),a},Ba=function(a,b){return a.bb_l<=b.bb_r&&b.bb_l<=a.bb_r&&a.bb_b<=b.bb_t&&b.bb_b<=a.bb_t};pa.prototype.markLeafQuery=function(a,b,c,d){Ba(a,this)&&(b?ta(a,this,c):(this.stamp<a.stamp&&ta(this,a,c),d&&d(a.obj,this.obj)))},na.prototype.markLeafQuery=function(a,b,c,d){Ba(a,this)&&(this.A.markLeafQuery(a,b,c,d),this.B.markLeafQuery(a,b,c,d))},pa.prototype.markSubtree=function(a,b,c){if(this.stamp==a.getStamp()){b&&b.markLeafQuery(this,!1,a,c);for(var d=this;d.parent;d=d.parent)d==d.parent.A?d.parent.B.markLeafQuery(this,!0,a,c):d.parent.A.markLeafQuery(this,!1,a,c)}else for(var e=this.pairs;e;)this===e.leafB?(c&&c(e.leafA.obj,this.obj),e=e.nextB):e=e.nextA},na.prototype.markSubtree=function(a,b,c){this.A.markSubtree(a,b,c),this.B.markSubtree(a,b,c)},pa.prototype.containsObj=function(a){return this.bb_l<=a.bb_l&&this.bb_r>=a.bb_r&&this.bb_b<=a.bb_b&&this.bb_t>=a.bb_t},pa.prototype.update=function(a){var b=a.root,c=this.obj;return!this.containsObj(c)&&(a.getBB(this.obj,this),b=Aa(b,this,a),a.root=wa(b,this,a),this.clearPairs(a),this.stamp=a.getStamp(),!0)},pa.prototype.addPairs=function(a){var b=a.dynamicIndex;if(b){var c=b.root;c&&c.markLeafQuery(this,!0,b,null)}else{var d=a.staticIndex.root;this.markSubtree(a,d,null)}},la.prototype.insert=function(a,b){var c=new pa(this,a);this.leaves[b]=c,this.root=wa(this.root,c,this),this.count++,c.stamp=this.getStamp(),c.addPairs(this),this.incrementStamp()},la.prototype.remove=function(a,b){var c=this.leaves[b];delete this.leaves[b],this.root=Aa(this.root,c,this),this.count--,c.clearPairs(this),c.recycle(this)},la.prototype.contains=function(a,b){return null!=this.leaves[b]};var Ca=function(a,b){};la.prototype.reindexQuery=function(a){if(this.root){var b,c=this.leaves;for(b in c)c[b].update(this);var d=this.staticIndex,e=d&&d.root;this.root.markSubtree(this,e,a),d&&!e&&this.collideStatic(this,d,a),this.incrementStamp()}},la.prototype.reindex=function(){this.reindexQuery(Ca)},la.prototype.reindexObject=function(a,b){var c=this.leaves[b];c&&(c.update(this)&&c.addPairs(this),this.incrementStamp())},la.prototype.pointQuery=function(a,b){this.query(new R(a.x,a.y,a.x,a.y),b)},la.prototype.segmentQuery=function(a,b,c,d){this.root&&za(this.root,a,b,c,d)},la.prototype.query=function(a,b){this.root&&xa(this.root,a,b)},la.prototype.count=function(){return this.count},la.prototype.each=function(a){var b;for(b in this.leaves)a(this.leaves[b].obj)};var Da=function(a,d,e,f,g){return(c(a.bb_r,f)-b(a.bb_l,d))*(c(a.bb_t,g)-b(a.bb_b,e))},Ea=function(a,d,e,f){if(1==f)return d[e];if(2==f)return a.makeNode(d[e],d[e+1]);for(var g=d[e],h=g.bb_l,i=g.bb_b,j=g.bb_r,k=g.bb_t,l=e+f,m=e+1;m<l;m++)g=d[m],h=b(h,g.bb_l),i=b(i,g.bb_b),j=c(j,g.bb_r),k=c(k,g.bb_t);var n=j-h>k-i,o=new Array(2*f);if(n)for(var m=e;m<l;m++)o[2*m+0]=d[m].bb_l,o[2*m+1]=d[m].bb_r;else for(var m=e;m<l;m++)o[2*m+0]=d[m].bb_b,o[2*m+1]=d[m].bb_t;o.sort(function(a,b){return a-b});var p=.5*(o[f-1]+o[f]),q=h,r=i,s=j,t=k,u=h,v=i,w=j,x=k;n?s=u=p:t=v=p;for(var y=l,z=e;z<y;){var g=d[z];Da(g,u,v,w,x)<Da(g,q,r,s,t)?(y--,d[z]=d[y],d[y]=g):z++}if(y==f){for(var g=null,m=e;m<l;m++)g=wa(g,d[m],a);return g}return NodeNew(a,Ea(a,d,e,y-e),Ea(a,d,y,l-y))};la.prototype.optimize=function(){var a=new Array(this.count),b=0;for(var c in this.leaves)a[b++]=this.nodes[c];tree.subtreeRecycle(root),this.root=Ea(tree,a,a.length)};var Fa=function(a,b){!a.isLeaf&&b<=10&&(Fa(a.A,b+1),Fa(a.B,b+1));for(var c="",d=0;d<b;d++)c+=" ";console.log(c+a.bb_b+" "+a.bb_t)};la.prototype.log=function(){this.root&&Fa(this.root,0)};var Ga=a.CollisionHandler=function(){this.a=this.b=0};Ga.prototype.begin=function(a,b){return!0},Ga.prototype.preSolve=function(a,b){return!0},Ga.prototype.postSolve=function(a,b){},Ga.prototype.separate=function(a,b){};var Ha=function(a,b){this.e=0,this.u=0,this.surface_vr=s,this.a=a,this.body_a=a.body,this.b=b,this.body_b=b.body,this.thread_a_next=this.thread_a_prev=null,this.thread_b_next=this.thread_b_prev=null,this.contacts=null,this.stamp=0,this.handler=null,this.swappedColl=!1,this.state="first coll"};Ha.prototype.getShapes=function(){return this.swappedColl?[this.b,this.a]:[this.a,this.b]},Ha.prototype.totalImpulse=function(){for(var a=this.contacts,b=new r(0,0),c=0,d=a.length;c<d;c++){var e=a[c];b.add(A(e.n,e.jnAcc))}return this.swappedColl?b:b.neg()},Ha.prototype.totalImpulseWithFriction=function(){for(var a=this.contacts,b=new r(0,0),c=0,d=a.length;c<d;c++){var e=a[c];b.add(new r(e.jnAcc,e.jtAcc).rotate(e.n))}return this.swappedColl?b:b.neg()},Ha.prototype.totalKE=function(){for(var a=(1-this.e)/(1+this.e),b=0,c=this.contacts,d=0,e=c.length;d<e;d++){var f=c[d],g=f.jnAcc,h=f.jtAcc;b+=a*g*g/f.nMass+h*h/f.tMass}return b},Ha.prototype.ignore=function(){this.state="ignore"},Ha.prototype.getA=function(){return this.swappedColl?this.b:this.a},Ha.prototype.getB=function(){return this.swappedColl?this.a:this.b},Ha.prototype.isFirstContact=function(){return"first coll"===this.state};var Ia=function(a,b,c){this.point=a,this.normal=b,this.dist=c};Ha.prototype.getContactPointSet=function(){var a,b=new Array(this.contacts.length);for(a=0;a<b.length;a++)b[a]=new Ia(this.contacts[a].p,this.contacts[a].n,this.contacts[a].dist);return b},Ha.prototype.getNormal=function(a){var b=this.contacts[a].n;return this.swappedColl?z(b):b},Ha.prototype.getPoint=function(a){return this.contacts[a].p},Ha.prototype.getDepth=function(a){return this.contacts[a].dist};var Ja=function(a,b,c,d){c?c.body_a===b?c.thread_a_next=d:c.thread_b_next=d:b.arbiterList=d,d&&(d.body_a===b?d.thread_a_prev=c:d.thread_b_prev=c)};Ha.prototype.unthread=function(){Ja(this,this.body_a,this.thread_a_prev,this.thread_a_next),Ja(this,this.body_b,this.thread_b_prev,this.thread_b_next),this.thread_a_prev=this.thread_a_next=null,this.thread_b_prev=this.thread_b_next=null},Ha.prototype.update=function(a,b,c,d){if(this.contacts)for(var e=0;e<this.contacts.length;e++)for(var f=this.contacts[e],g=0;g<a.length;g++){var h=a[g];h.hash===f.hash&&(h.jnAcc=f.jnAcc,h.jtAcc=f.jtAcc)}this.contacts=a,this.handler=b,this.swappedColl=c.collision_type!==b.a,this.e=c.e*d.e,this.u=c.u*d.u,this.surface_vr=y(c.surface_v,d.surface_v),this.a=c,this.body_a=c.body,this.b=d,this.body_b=d.body,"cached"==this.state&&(this.state="first coll")},Ha.prototype.preStep=function(a,c,d){for(var e=this.body_a,f=this.body_b,g=0;g<this.contacts.length;g++){var h=this.contacts[g];h.r1=y(h.p,e.p),h.r2=y(h.p,f.p),h.nMass=1/pb(e,f,h.r1,h.r2,h.n),h.tMass=1/pb(e,f,h.r1,h.r2,D(h.n)),h.bias=-d*b(0,h.dist+c)/a,h.jBias=0,h.bounce=kb(e,f,h.r1,h.r2,h.n)*this.e}},Ha.prototype.applyCachedImpulse=function(a){if(!this.isFirstContact())for(var b=this.body_a,c=this.body_b,d=0;d<this.contacts.length;d++){var e=this.contacts[d],f=e.n.x,g=e.n.y,h=f*e.jnAcc-g*e.jtAcc,i=f*e.jtAcc+g*e.jnAcc;mb(b,c,e.r1,e.r2,h*a,i*a)}};var Ka=0,La=0;Ha.prototype.applyImpulse=function(){Ka++;for(var a=this.body_a,b=this.body_b,d=this.surface_vr,e=this.u,f=0;f<this.contacts.length;f++){La++;var g=this.contacts[f],h=g.nMass,i=g.n,j=g.r1,k=g.r2,l=b.vx-k.y*b.w-(a.vx-j.y*a.w),m=b.vy+k.x*b.w-(a.vy+j.x*a.w),n=i.x*(b.v_biasx-k.y*b.w_bias-a.v_biasx+j.y*a.w_bias)+i.y*(k.x*b.w_bias+b.v_biasy-j.x*a.w_bias-a.v_biasy),o=u(l,m,i.x,i.y),q=u(l+d.x,m+d.y,-i.y,i.x),r=(g.bias-n)*h,s=g.jBias;g.jBias=c(s+r,0);var t=-(g.bounce+o)*h,v=g.jnAcc;g.jnAcc=c(v+t,0);var w=e*g.jnAcc,x=-q*g.tMass,y=g.jtAcc;g.jtAcc=p(y+x,-w,w);var z=i.x*(g.jBias-s),A=i.y*(g.jBias-s);nb(a,-z,-A,j),nb(b,z,A,k);var B=g.jnAcc-v,C=g.jtAcc-y;mb(a,b,j,k,i.x*B-i.y*C,i.x*C+i.y*B)}},Ha.prototype.callSeparate=function(a){var b=a.lookupHandler(this.a.collision_type,this.b.collision_type);b.separate(this,a)},Ha.prototype.next=function(a){return this.body_a==a?this.thread_a_next:this.thread_b_next};var Ma=0,Na=function(a,b,c,d){this.p=a,this.n=b,this.dist=c,this.r1=this.r2=s,this.nMass=this.tMass=this.bounce=this.bias=0,this.jnAcc=this.jtAcc=this.jBias=0,this.hash=d,Ma++},Oa=[],Pa=function(a,b,c,d){var e=c+d,f=y(b,a),g=H(f);if(!(g>=e*e)){var h=Math.sqrt(g);return new Na(x(a,A(f,.5+(c-.5*e)/(h?h:1/0))),h?A(f,1/h):new r(1,0),h-e,0)}},Qa=function(a,b){var c=Pa(a.tc,b.tc,a.r,b.r);return c?[c]:Oa},Ra=function(a,b){var c=b.ta,d=b.tb,e=a.tc,f=y(d,c),g=q(t(f,y(e,c))/H(f)),h=x(c,A(f,g)),i=Pa(e,h,a.r,b.r);if(i){var j=i.n;return 0===g&&t(j,b.a_tangent)<0||1===g&&t(j,b.b_tangent)<0?Oa:[i]}return Oa},Sa=0,Ta=function(a,b){var c=0,d=a.valueOnAxis(b[0].n,b[0].d);if(d>0)return-1;for(var e=1;e<b.length;e++){var f=a.valueOnAxis(b[e].n,b[e].d);if(f>0)return-1;f>d&&(d=f,c=e)}return Sa=d,c},Ua=function(a,b,c,d){for(var e=[],f=a.tVerts,g=0;g<f.length;g+=2){var i=f[g],j=f[g+1];b.containsVertPartial(i,j,z(c))&&e.push(new Na(new r(i,j),c,d,h(a.hashid,g)))}for(var k=b.tVerts,g=0;g<k.length;g+=2){var i=k[g],j=k[g+1];a.containsVertPartial(i,j,c)&&e.push(new Na(new r(i,j),c,d,h(b.hashid,g)))}return e},Va=function(a,b,c,d){for(var e=[],f=a.tVerts,g=0;g<f.length;g+=2){var i=f[g],j=f[g+1];b.containsVert(i,j)&&e.push(new Na(new r(i,j),c,d,h(a.hashid,g>>1)))}for(var k=b.tVerts,g=0;g<k.length;g+=2){var i=k[g],j=k[g+1];a.containsVert(i,j)&&e.push(new Na(new r(i,j),c,d,h(b.hashid,g>>1)))}return e.length?e:Ua(a,b,c,d)},Wa=function(a,b){var c=Ta(b,a.tPlanes);if(c==-1)return Oa;var d=Sa,e=Ta(a,b.tPlanes);if(e==-1)return Oa;var f=Sa;return d>f?Va(a,b,a.tPlanes[c].n,d):Va(a,b,z(b.tPlanes[e].n),f)},Xa=function(a,c,d){var e=t(c,a.ta)-a.r,f=t(c,a.tb)-a.r;return b(e,f)-d},Ya=function(a,b,c,d,e){for(var f=B(b.tn,b.ta),g=B(b.tn,b.tb),i=A(b.tn,e),j=c.tVerts,k=0;k<j.length;k+=2){var l=j[k],m=j[k+1];if(u(l,m,i.x,i.y)<t(b.tn,b.ta)*e+b.r){var n=C(b.tn.x,b.tn.y,l,m);f>=n&&n>=g&&a.push(new Na(new r(l,m),i,d,h(c.hashid,k)))}}},Za=function(a,b){var c=[],d=b.tPlanes,e=d.length,f=t(a.tn,a.ta),g=b.valueOnAxis(a.tn,f)-a.r,i=b.valueOnAxis(z(a.tn),-f)-a.r;if(i>0||g>0)return Oa;var j=0,k=Xa(a,d[0].n,d[0].d);if(k>0)return Oa;for(var l=0;l<e;l++){var m=Xa(a,d[l].n,d[l].d);if(m>0)return Oa;m>k&&(k=m,j=l)}var n=z(d[j].n),o=x(a.ta,A(n,a.r)),p=x(a.tb,A(n,a.r));if(b.containsVert(o.x,o.y)&&c.push(new Na(o,n,k,h(a.hashid,0))),b.containsVert(p.x,p.y)&&c.push(new Na(p,n,k,h(a.hashid,1))),(g>=k||i>=k)&&(g>i?Ya(c,a,b,g,1):Ya(c,a,b,i,-1)),0===c.length){var q,s=2*j,u=b.tVerts,v=new r(u[s],u[s+1]);if(q=Pa(a.ta,v,a.r,0,c))return[q];if(q=Pa(a.tb,v,a.r,0,c))return[q];var w=2*e,y=new r(u[(s+2)%w],u[(s+3)%w]);if(q=Pa(a.ta,y,a.r,0,c))return[q];if(q=Pa(a.tb,y,a.r,0,c))return[q]}return c;
},$a=function(a,b){for(var c=b.tPlanes,d=0,e=t(c[0].n,a.tc)-c[0].d-a.r,f=0;f<c.length;f++){var g=t(c[f].n,a.tc)-c[f].d-a.r;if(g>0)return Oa;g>e&&(e=g,d=f)}var h=c[d].n,i=b.tVerts,j=i.length,k=d<<1,l=i[k],m=i[k+1],n=i[(k+2)%j],o=i[(k+3)%j],p=C(h.x,h.y,l,m),q=C(h.x,h.y,n,o),s=B(h,a.tc);if(s<q){var u=Pa(a.tc,new r(n,o),a.r,0,u);return u?[u]:Oa}if(s<p)return[new Na(y(a.tc,A(h,a.r+e/2)),z(h),e,0)];var u=Pa(a.tc,new r(l,m),a.r,0,u);return u?[u]:Oa};Z.prototype.collisionCode=0,_.prototype.collisionCode=1,ba.prototype.collisionCode=2,Z.prototype.collisionTable=[Qa,Ra,$a],_.prototype.collisionTable=[null,function(a,b){return Oa},Za],ba.prototype.collisionTable=[null,null,Wa];var _a=a.collideShapes=function(a,b){return d(a.collisionCode<=b.collisionCode,"Collided shapes must be sorted by type"),a.collisionTable[b.collisionCode](a,b)},ab=new Ga,bb=a.Space=function(){this.stamp=0,this.curr_dt=0,this.bodies=[],this.rousedBodies=[],this.sleepingComponents=[],this.staticShapes=new la(null),this.activeShapes=new la(this.staticShapes),this.arbiters=[],this.contactBuffersHead=null,this.cachedArbiters={},this.constraints=[],this.locked=0,this.collisionHandlers={},this.defaultHandler=ab,this.postStepCallbacks=[],this.iterations=10,this.gravity=s,this.damping=1,this.idleSpeedThreshold=0,this.sleepTimeThreshold=1/0,this.collisionSlop=.1,this.collisionBias=Math.pow(.9,60),this.collisionPersistence=3,this.enableContactGraph=!1,this.staticBody=new ea(1/0,1/0),this.staticBody.nodeIdleTime=1/0,this.collideShapes=this.makeCollideShapes()};bb.prototype.getCurrentTimeStep=function(){return this.curr_dt},bb.prototype.setIterations=function(a){this.iterations=a},bb.prototype.isLocked=function(){return this.locked};var cb=function(a){d(!a.locked,"This addition/removal cannot be done safely during a call to cpSpaceStep()  or during a query. Put these calls into a post-step callback.")};bb.prototype.addCollisionHandler=function(a,b,c,d,e,f){cb(this),this.removeCollisionHandler(a,b);var g=new Ga;g.a=a,g.b=b,c&&(g.begin=c),d&&(g.preSolve=d),e&&(g.postSolve=e),f&&(g.separate=f),this.collisionHandlers[h(a,b)]=g},bb.prototype.removeCollisionHandler=function(a,b){cb(this),delete this.collisionHandlers[h(a,b)]},bb.prototype.setDefaultCollisionHandler=function(a,b,c,d){cb(this);var e=new Ga;a&&(e.begin=a),b&&(e.preSolve=b),c&&(e.postSolve=c),d&&(e.separate=d),this.defaultHandler=e},bb.prototype.lookupHandler=function(a,b){return this.collisionHandlers[h(a,b)]||this.defaultHandler},bb.prototype.addShape=function(a){var b=a.body;return b.isStatic()?this.addStaticShape(a):(d(!a.space,"This shape is already added to a space and cannot be added to another."),cb(this),b.activate(),b.addShape(a),a.update(b.p,b.rot),this.activeShapes.insert(a,a.hashid),a.space=this,a)},bb.prototype.addStaticShape=function(a){d(!a.space,"This shape is already added to a space and cannot be added to another."),cb(this);var b=a.body;return b.addShape(a),a.update(b.p,b.rot),this.staticShapes.insert(a,a.hashid),a.space=this,a},bb.prototype.addBody=function(a){return d(!a.isStatic(),"Static bodies cannot be added to a space as they are not meant to be simulated."),d(!a.space,"This body is already added to a space and cannot be added to another."),cb(this),this.bodies.push(a),a.space=this,a},bb.prototype.addConstraint=function(a){d(!a.space,"This shape is already added to a space and cannot be added to another."),cb(this);var b=a.a,c=a.b;return b.activate(),c.activate(),this.constraints.push(a),a.next_a=b.constraintList,b.constraintList=a,a.next_b=c.constraintList,c.constraintList=a,a.space=this,a},bb.prototype.filterArbiters=function(a,b){for(var c in this.cachedArbiters){var d=this.cachedArbiters[c];(a!==d.body_a||b!==d.a&&null!==b)&&(a!==d.body_b||b!==d.b&&null!==b)||(b&&"cached"!==d.state&&d.callSeparate(this),d.unthread(),i(this.arbiters,d),delete this.cachedArbiters[c])}},bb.prototype.removeShape=function(a){var b=a.body;b.isStatic()?this.removeStaticShape(a):(d(this.containsShape(a),"Cannot remove a shape that was not added to the space. (Removed twice maybe?)"),cb(this),b.activate(),b.removeShape(a),this.filterArbiters(b,a),this.activeShapes.remove(a,a.hashid),a.space=null)},bb.prototype.removeStaticShape=function(a){d(this.containsShape(a),"Cannot remove a static or sleeping shape that was not added to the space. (Removed twice maybe?)"),cb(this);var b=a.body;b.isStatic()&&b.activateStatic(a),b.removeShape(a),this.filterArbiters(b,a),this.staticShapes.remove(a,a.hashid),a.space=null},bb.prototype.removeBody=function(a){d(this.containsBody(a),"Cannot remove a body that was not added to the space. (Removed twice maybe?)"),cb(this),a.activate(),i(this.bodies,a),a.space=null},bb.prototype.removeConstraint=function(a){d(this.containsConstraint(a),"Cannot remove a constraint that was not added to the space. (Removed twice maybe?)"),cb(this),a.a.activate(),a.b.activate(),i(this.constraints,a),a.a.removeConstraint(a),a.b.removeConstraint(a),a.space=null},bb.prototype.containsShape=function(a){return a.space===this},bb.prototype.containsBody=function(a){return a.space==this},bb.prototype.containsConstraint=function(a){return a.space==this},bb.prototype.uncacheArbiter=function(a){delete this.cachedArbiters[h(a.a.hashid,a.b.hashid)],i(this.arbiters,a)},bb.prototype.eachBody=function(a){this.lock();for(var b=this.bodies,c=0;c<b.length;c++)a(b[c]);for(var d=this.sleepingComponents,c=0;c<d.length;c++)for(var e=d[c],f=e;f;){var g=f.nodeNext;a(f),f=g}this.unlock(!0)},bb.prototype.eachShape=function(a){this.lock(),this.activeShapes.each(a),this.staticShapes.each(a),this.unlock(!0)},bb.prototype.eachConstraint=function(a){this.lock();for(var b=this.constraints,c=0;c<b.length;c++)a(b[c]);this.unlock(!0)},bb.prototype.reindexStatic=function(){d(!this.locked,"You cannot manually reindex objects while the space is locked. Wait until the current query or step is complete."),this.staticShapes.each(function(a){var b=a.body;a.update(b.p,b.rot)}),this.staticShapes.reindex()},bb.prototype.reindexShape=function(a){d(!this.locked,"You cannot manually reindex objects while the space is locked. Wait until the current query or step is complete.");var b=a.body;a.update(b.p,b.rot),this.activeShapes.reindexObject(a,a.hashid),this.staticShapes.reindexObject(a,a.hashid)},bb.prototype.reindexShapesForBody=function(a){for(var b=a.shapeList;b;b=b.next)this.reindexShape(b)},bb.prototype.useSpatialHash=function(a,b){throw new Error("Spatial Hash not implemented.")},bb.prototype.activateBody=function(a){if(d(!a.isRogue(),"Internal error: Attempting to activate a rogue body."),this.locked)this.rousedBodies.indexOf(a)===-1&&this.rousedBodies.push(a);else{this.bodies.push(a);for(var b=0;b<a.shapeList.length;b++){var c=a.shapeList[b];this.staticShapes.remove(c,c.hashid),this.activeShapes.insert(c,c.hashid)}for(var e=a.arbiterList;e;e=e.next(a)){var f=e.body_a;if(a===f||f.isStatic()){var g=e.a,i=e.b;this.cachedArbiters[h(g.hashid,i.hashid)]=e,e.stamp=this.stamp,e.handler=this.lookupHandler(g.collision_type,i.collision_type),this.arbiters.push(e)}}for(var j=a.constraintList;j;j=j.nodeNext){var f=j.a;(a===f||f.isStatic())&&this.constraints.push(j)}}},bb.prototype.deactivateBody=function(a){d(!a.isRogue(),"Internal error: Attempting to deactivate a rogue body."),i(this.bodies,a);for(var b=0;b<a.shapeList.length;b++){var c=a.shapeList[b];this.activeShapes.remove(c,c.hashid),this.staticShapes.insert(c,c.hashid)}for(var e=a.arbiterList;e;e=e.next(a)){var f=e.body_a;(a===f||f.isStatic())&&this.uncacheArbiter(e)}for(var g=a.constraintList;g;g=g.nodeNext){var f=g.a;(a===f||f.isStatic())&&i(this.constraints,g)}};var db=function(a){return a?a.nodeRoot:null},eb=function(a){if(a&&a.isSleeping(a)){d(!a.isRogue(),"Internal Error: componentActivate() called on a rogue body.");for(var b=a.space,c=a;c;){var e=c.nodeNext;c.nodeIdleTime=0,c.nodeRoot=null,c.nodeNext=null,b.activateBody(c),c=e}i(b.sleepingComponents,a)}};ea.prototype.activate=function(){this.isRogue()||(this.nodeIdleTime=0,eb(db(this)))},ea.prototype.activateStatic=function(a){d(this.isStatic(),"Body.activateStatic() called on a non-static body.");for(var b=this.arbiterList;b;b=b.next(this))a&&a!=b.a&&a!=b.b||(b.body_a==this?b.body_b:b.body_a).activate()},ea.prototype.pushArbiter=function(a){e(null===(a.body_a===this?a.thread_a_next:a.thread_b_next),"Internal Error: Dangling contact graph pointers detected. (A)"),e(null===(a.body_a===this?a.thread_a_prev:a.thread_b_prev),"Internal Error: Dangling contact graph pointers detected. (B)");var b=this.arbiterList;e(null===b||null===(b.body_a===this?b.thread_a_prev:b.thread_b_prev),"Internal Error: Dangling contact graph pointers detected. (C)"),a.body_a===this?a.thread_a_next=b:a.thread_b_next=b,b&&(b.body_a===this?b.thread_a_prev=a:b.thread_b_prev=a),this.arbiterList=a};var fb=function(a,b){b.nodeRoot=a,b!==a&&(b.nodeNext=a.nodeNext,a.nodeNext=b)},gb=function(a,b){if(!b.isRogue()){var c=db(b);if(null==c){fb(a,b);for(var d=b.arbiterList;d;d=d.next(b))gb(a,b==d.body_a?d.body_b:d.body_a);for(var f=b.constraintList;f;f=f.next(b))gb(a,b==f.a?f.b:f.a)}else e(c===a,"Internal Error: Inconsistency detected in the contact graph.")}},hb=function(a,b){for(var c=a;c;c=c.nodeNext)if(c.nodeIdleTime<b)return!0;return!1};bb.prototype.processComponents=function(a){for(var b=this.sleepTimeThreshold!==1/0,c=this.bodies,d=0;d<c.length;d++){var f=c[d];e(null===f.nodeNext,"Internal Error: Dangling next pointer detected in contact graph."),e(null===f.nodeRoot,"Internal Error: Dangling root pointer detected in contact graph.")}if(b)for(var g=this.idleSpeedThreshold,h=g?g*g:H(this.gravity)*a*a,d=0;d<c.length;d++){var f=c[d],i=h?f.m*h:0;f.nodeIdleTime=f.kineticEnergy()>i?0:f.nodeIdleTime+a}for(var j=this.arbiters,d=0,k=j.length;d<k;d++){var l=j[d],m=l.body_a,n=l.body_b;b&&((n.isRogue()&&!n.isStatic()||m.isSleeping())&&m.activate(),(m.isRogue()&&!m.isStatic()||n.isSleeping())&&n.activate()),m.pushArbiter(l),n.pushArbiter(l)}if(b){for(var o=this.constraints,d=0;d<o.length;d++){var p=o[d],m=p.a,n=p.b;n.isRogue()&&!n.isStatic()&&m.activate(),m.isRogue()&&!m.isStatic()&&n.activate()}for(var d=0;d<c.length;){var f=c[d];if(null!==db(f)||(gb(f,f),hb(f,this.sleepTimeThreshold)))d++,f.nodeRoot=null,f.nodeNext=null;else{this.sleepingComponents.push(f);for(var q=f;q;q=q.nodeNext)this.deactivateBody(q)}}}},ea.prototype.sleep=function(){this.sleepWithGroup(null)},ea.prototype.sleepWithGroup=function(a){d(!this.isStatic()&&!this.isRogue(),"Rogue and static bodies cannot be put to sleep.");var b=this.space;if(d(b,"Cannot put a rogue body to sleep."),d(!b.locked,"Bodies cannot be put to sleep during a query or a call to cpSpaceStep(). Put these calls into a post-step callback."),d(null===a||a.isSleeping(),"Cannot use a non-sleeping body as a group identifier."),this.isSleeping())return void d(db(this)===db(a),"The body is already sleeping and it's group cannot be reassigned.");for(var c=0;c<this.shapeList.length;c++)this.shapeList[c].update(this.p,this.rot);if(b.deactivateBody(this),a){var e=db(a);this.nodeRoot=e,this.nodeNext=e.nodeNext,this.nodeIdleTime=0,e.nodeNext=this}else this.nodeRoot=this,this.nodeNext=null,this.nodeIdleTime=0,b.sleepingComponents.push(this);i(b.bodies,this)},bb.prototype.activateShapesTouchingShape=function(a){this.sleepTimeThreshold!==1/0&&this.shapeQuery(a,function(a,b){a.body.activate()})},bb.prototype.pointQuery=function(a,b,c,d){var e=function(e){(!e.group||c!==e.group)&&b&e.layers&&e.pointQuery(a)&&d(e)},f=new R(a.x,a.y,a.x,a.y);this.lock(),this.activeShapes.query(f,e),this.staticShapes.query(f,e),this.unlock(!0)},bb.prototype.pointQueryFirst=function(a,b,c){var d=null;return this.pointQuery(a,b,c,function(a){a.sensor||(d=a)}),d},bb.prototype.nearestPointQuery=function(a,b,c,d,e){var f=function(f){if((!f.group||d!==f.group)&&c&f.layers){var g=f.nearestPointQuery(a);g.d<b&&e(f,g.d,g.p)}},g=S(a,b);this.lock(),this.activeShapes.query(g,f),this.staticShapes.query(g,f),this.unlock(!0)},bb.prototype.nearestPointQueryNearest=function(a,b,c,d){var e,f=function(f){if((!f.group||d!==f.group)&&c&f.layers&&!f.sensor){var g=f.nearestPointQuery(a);g.d<b&&(!e||g.d<e.d)&&(e=g)}},g=S(a,b);return this.activeShapes.query(g,f),this.staticShapes.query(g,f),e},a.SHAPE_FILTER_ALL={group:a.NO_GROUP,categories:a.ALL_CATEGORIES,mask:a.ALL_CATEGORIES},bb.prototype.pointQueryNearest=function(a,b,c){var d=this.nearestPointQueryNearest(a,b,c.mask,c.group);return"undefined"!=typeof d&&(d.distance=d.d,d.point=d.p),d},bb.prototype.segmentQuery=function(a,b,c,d,e){var f=function(f){var g;return(!f.group||d!==f.group)&&c&f.layers&&(g=f.segmentQuery(a,b))&&e(f,g.t,g.n),1};this.lock(),this.staticShapes.segmentQuery(a,b,1,f),this.activeShapes.segmentQuery(a,b,1,f),this.unlock(!0)},bb.prototype.segmentQueryFirst=function(b,c,d,e){var f=null,g=function(a){var g;return(!a.group||e!==a.group)&&d&a.layers&&!a.sensor&&(g=a.segmentQuery(b,c))&&(null===f||g.t<f.t)&&(f=g),f?f.t:1};return this.staticShapes.segmentQuery(b,c,1,g),this.activeShapes.segmentQuery(b,c,f?f.t:1,g),f&&"null"!==f&&"undefined"!==f&&(f.normal=f.n,f.alpha=f.t,f.p=f.point=a.v.lerp(b,c,f.t)),f},bb.prototype.bbQuery=function(a,b,c,d){var e=function(e){(!e.group||c!==e.group)&&b&e.layers&&T(a,e.bb_l,e.bb_b,e.bb_r,e.bb_t)&&d(e)};this.lock(),this.activeShapes.query(a,e),this.staticShapes.query(a,e),this.unlock(!0)},bb.prototype.shapeQuery=function(a,b){var c=a.body;c&&a.update(c.p,c.rot);var d=new R(a.bb_l,a.bb_b,a.bb_r,a.bb_t),e=!1,f=function(c){var d=a;if((!d.group||d.group!==c.group)&&d.layers&c.layers&&d!==c){var f;if(d.collisionCode<=c.collisionCode)f=_a(d,c);else{f=_a(c,d);for(var g=0;g<f.length;g++)f[g].n=z(f[g].n)}if(f.length&&(e=!(d.sensor||c.sensor),b)){for(var h=new Array(f.length),g=0;g<f.length;g++)h[g]=new Ia(f[g].p,f[g].n,f[g].dist);b(c,h)}}};return this.lock(),this.activeShapes.query(d,f),this.staticShapes.query(d,f),this.unlock(!0),e},bb.prototype.addPostStepCallback=function(a){e(this.locked,"Adding a post-step callback when the space is not locked is unnecessary. Post-step callbacks will not called until the end of the next call to cpSpaceStep() or the next query."),this.postStepCallbacks.push(a)},bb.prototype.runPostStepCallbacks=function(){for(var a=0;a<this.postStepCallbacks.length;a++)this.postStepCallbacks[a]();this.postStepCallbacks=[]},bb.prototype.lock=function(){this.locked++},bb.prototype.unlock=function(a){if(this.locked--,d(this.locked>=0,"Internal Error: Space lock underflow."),0===this.locked&&a){for(var b=this.rousedBodies,c=0;c<b.length;c++)this.activateBody(b[c]);b.length=0,this.runPostStepCallbacks()}},bb.prototype.makeCollideShapes=function(){var a=this;return function(b,c){var d=a;if(b.bb_l<=c.bb_r&&c.bb_l<=b.bb_r&&b.bb_b<=c.bb_t&&c.bb_b<=b.bb_t&&b.body!==c.body&&(!b.group||b.group!==c.group)&&b.layers&c.layers){var e=d.lookupHandler(b.collision_type,c.collision_type),f=b.sensor||c.sensor;if(!f||e!==ab){if(b.collisionCode>c.collisionCode){var g=b;b=c,c=g}var i=_a(b,c);if(0!==i.length){var j=h(b.hashid,c.hashid),k=d.cachedArbiters[j];k||(k=d.cachedArbiters[j]=new Ha(b,c)),k.update(i,e,b,c),"first coll"!=k.state||e.begin(k,d)||k.ignore(),"ignore"!==k.state&&e.preSolve(k,d)&&!f?d.arbiters.push(k):(k.contacts=null,"ignore"!==k.state&&(k.state="normal")),k.stamp=d.stamp}}}}},bb.prototype.arbiterSetFilter=function(a){var b=this.stamp-a.stamp,c=a.body_a,d=a.body_b;return!(!c.isStatic()&&!c.isSleeping()||!d.isStatic()&&!d.isSleeping())||(b>=1&&"cached"!=a.state&&(a.callSeparate(this),a.state="cached"),!(b>=this.collisionPersistence)||(a.contacts=null,!1))};var ib=function(a){var b=a.body;a.update(b.p,b.rot)};bb.prototype.step=function(a){if(0!==a){d(0===s.x&&0===s.y,"vzero is invalid"),this.stamp++;var b=this.curr_dt;this.curr_dt=a;var c,e,f,g=this.bodies,h=this.constraints,i=this.arbiters;for(c=0;c<i.length;c++){var j=i[c];j.state="normal",j.body_a.isSleeping()||j.body_b.isSleeping()||j.unthread()}for(i.length=0,this.lock(),c=0;c<g.length;c++)g[c].position_func(a);this.activeShapes.each(ib),this.activeShapes.reindexQuery(this.collideShapes),this.unlock(!1),this.processComponents(a),this.lock();for(f in this.cachedArbiters)this.arbiterSetFilter(this.cachedArbiters[f])||delete this.cachedArbiters[f];var k=this.collisionSlop,l=1-Math.pow(this.collisionBias,a);for(c=0;c<i.length;c++)i[c].preStep(a,k,l);for(c=0;c<h.length;c++){var m=h[c];m.preSolve(this),m.preStep(a)}var n=Math.pow(this.damping,a),o=this.gravity;for(c=0;c<g.length;c++)g[c].velocity_func(o,n,a);var p=0===b?0:a/b;for(c=0;c<i.length;c++)i[c].applyCachedImpulse(p);for(c=0;c<h.length;c++)h[c].applyCachedImpulse(p);for(c=0;c<this.iterations;c++){for(e=0;e<i.length;e++)i[e].applyImpulse();for(e=0;e<h.length;e++)h[e].applyImpulse()}for(c=0;c<h.length;c++)h[c].postSolve(this);for(c=0;c<i.length;c++)i[c].handler.postSolve(i[c],this);this.unlock(!0)}};var jb=function(a,b,c,d){var e=a.vx+-c.y*a.w,f=a.vy+c.x*a.w,g=b.vx+-d.y*b.w,h=b.vy+d.x*b.w;return new r(g-e,h-f)},kb=function(a,b,c,d,e){var f=a.vx+-c.y*a.w,g=a.vy+c.x*a.w,h=b.vx+-d.y*b.w,i=b.vy+d.x*b.w;return u(h-f,i-g,e.x,e.y)},lb=function(a,b,c,d){a.vx+=b*a.m_inv,a.vy+=c*a.m_inv,a.w+=a.i_inv*(d.x*c-d.y*b)},mb=function(a,b,c,d,e,f){lb(a,-e,-f,c),lb(b,e,f,d)},nb=function(a,b,c,d){a.v_biasx+=b*a.m_inv,a.v_biasy+=c*a.m_inv,a.w_bias+=a.i_inv*C(d.x,d.y,b,c)},ob=function(a,b,c){var d=B(b,c);return a.m_inv+a.i_inv*d*d},pb=function(a,b,c,d,f){var g=ob(a,c,f)+ob(b,d,f);return e(0!==g,"Unsolvable collision or constraint."),g},qb=function(a,b,c,d,f,g){var h,i,j,k,l=a.m_inv+b.m_inv;h=l,i=0,j=0,k=l;var m=a.i_inv,n=c.x*c.x*m,o=c.y*c.y*m,p=-c.x*c.y*m;h+=o,i+=p,j+=p,k+=n;var q=b.i_inv,r=d.x*d.x*q,s=d.y*d.y*q,t=-d.x*d.y*q;h+=s,i+=t,j+=t,k+=r;var u=h*k-i*j;e(0!==u,"Unsolvable constraint.");var v=1/u;f.x=k*v,f.y=-i*v,g.x=-j*v,g.y=h*v},rb=function(a,b,c){return new r(t(a,b),t(a,c))},sb=function(a,b){return 1-Math.pow(a,b)},tb=a.Constraint=function(a,b){this.a=a,this.b=b,this.space=null,this.next_a=null,this.next_b=null,this.maxForce=1/0,this.errorBias=Math.pow(.9,60),this.maxBias=1/0};tb.prototype.activateBodies=function(){this.a&&this.a.activate(),this.b&&this.b.activate()},tb.prototype.preStep=function(a){},tb.prototype.applyCachedImpulse=function(a){},tb.prototype.applyImpulse=function(){},tb.prototype.getImpulse=function(){return 0},tb.prototype.preSolve=function(a){},tb.prototype.postSolve=function(a){},tb.prototype.next=function(a){return this.a===a?this.next_a:this.next_b};var ub=a.PinJoint=function(a,b,c,d){tb.call(this,a,b),this.anchr1=c,this.anchr2=d;var f=a?x(a.p,F(c,a.rot)):c,g=b?x(b.p,F(d,b.rot)):d;this.dist=v(y(g,f)),e(this.dist>0,"You created a 0 length pin joint. A pivot joint will be much more stable."),this.r1=this.r2=null,this.n=null,this.nMass=0,this.jnAcc=this.jnMax=0,this.bias=0};ub.prototype=Object.create(tb.prototype),ub.prototype.preStep=function(a){var b=this.a,c=this.b;this.r1=F(this.anchr1,b.rot),this.r2=F(this.anchr2,c.rot);var d=y(x(c.p,this.r2),x(b.p,this.r1)),e=v(d);this.n=A(d,1/(e?e:1/0)),this.nMass=1/pb(b,c,this.r1,this.r2,this.n);var f=this.maxBias;this.bias=p(-sb(this.errorBias,a)*(e-this.dist)/a,-f,f),this.jnMax=this.maxForce*a},ub.prototype.applyCachedImpulse=function(a){var b=A(this.n,this.jnAcc*a);mb(this.a,this.b,this.r1,this.r2,b.x,b.y)},ub.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=this.n,d=kb(a,b,this.r1,this.r2,c),e=(this.bias-d)*this.nMass,f=this.jnAcc;this.jnAcc=p(f+e,-this.jnMax,this.jnMax),e=this.jnAcc-f,mb(a,b,this.r1,this.r2,c.x*e,c.y*e)},ub.prototype.getImpulse=function(){return Math.abs(this.jnAcc)};var vb=a.SlideJoint=function(a,b,c,d,e,f){tb.call(this,a,b),this.anchr1=c,this.anchr2=d,this.min=e,this.max=f,this.r1=this.r2=this.n=null,this.nMass=0,this.jnAcc=this.jnMax=0,this.bias=0};vb.prototype=Object.create(tb.prototype),vb.prototype.preStep=function(a){var b=this.a,c=this.b;this.r1=F(this.anchr1,b.rot),this.r2=F(this.anchr2,c.rot);var d=y(x(c.p,this.r2),x(b.p,this.r1)),e=v(d),f=0;e>this.max?(f=e-this.max,this.n=L(d)):e<this.min?(f=this.min-e,this.n=z(L(d))):(this.n=s,this.jnAcc=0),this.nMass=1/pb(b,c,this.r1,this.r2,this.n);var g=this.maxBias;this.bias=p(-sb(this.errorBias,a)*f/a,-g,g),this.jnMax=this.maxForce*a},vb.prototype.applyCachedImpulse=function(a){var b=this.jnAcc*a;mb(this.a,this.b,this.r1,this.r2,this.n.x*b,this.n.y*b)},vb.prototype.applyImpulse=function(){if(0!==this.n.x||0!==this.n.y){var a=this.a,b=this.b,c=this.n,d=this.r1,e=this.r2,f=jb(a,b,d,e),g=t(f,c),h=(this.bias-g)*this.nMass,i=this.jnAcc;this.jnAcc=p(i+h,-this.jnMax,0),h=this.jnAcc-i,mb(a,b,this.r1,this.r2,c.x*h,c.y*h)}},vb.prototype.getImpulse=function(){return Math.abs(this.jnAcc)};var wb=a.PivotJoint=function(a,b,c,d){if(tb.call(this,a,b),"undefined"==typeof d){var e=c;c=a?a.world2Local(e):e,d=b?b.world2Local(e):e}this.anchr1=c,this.anchr2=d,this.r1=this.r2=s,this.k1=new r(0,0),this.k2=new r(0,0),this.jAcc=s,this.jMaxLen=0,this.bias=s};wb.prototype=Object.create(tb.prototype),wb.prototype.preStep=function(a){var b=this.a,c=this.b;this.r1=F(this.anchr1,b.rot),this.r2=F(this.anchr2,c.rot),qb(b,c,this.r1,this.r2,this.k1,this.k2),this.jMaxLen=this.maxForce*a;var d=y(x(c.p,this.r2),x(b.p,this.r1));this.bias=M(A(d,-sb(this.errorBias,a)/a),this.maxBias)},wb.prototype.applyCachedImpulse=function(a){mb(this.a,this.b,this.r1,this.r2,this.jAcc.x*a,this.jAcc.y*a)},wb.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=this.r1,d=this.r2,e=jb(a,b,c,d),f=rb(y(this.bias,e),this.k1,this.k2),g=this.jAcc;this.jAcc=M(x(this.jAcc,f),this.jMaxLen),mb(a,b,this.r1,this.r2,this.jAcc.x-g.x,this.jAcc.y-g.y)},wb.prototype.getImpulse=function(){return v(this.jAcc)};var xb=a.GrooveJoint=function(a,b,c,d,e){tb.call(this,a,b),this.grv_a=c,this.grv_b=d,this.grv_n=D(K(y(d,c))),this.anchr2=e,this.grv_tn=null,this.clamp=0,this.r1=this.r2=null,this.k1=new r(0,0),this.k2=new r(0,0),this.jAcc=s,this.jMaxLen=0,this.bias=null};xb.prototype=Object.create(tb.prototype),xb.prototype.preStep=function(a){var b=this.a,c=this.b,d=b.local2World(this.grv_a),e=b.local2World(this.grv_b),f=F(this.grv_n,b.rot),g=t(d,f);this.grv_tn=f,this.r2=F(this.anchr2,c.rot);var h=B(x(c.p,this.r2),f);h<=B(d,f)?(this.clamp=1,this.r1=y(d,b.p)):h>=B(e,f)?(this.clamp=-1,this.r1=y(e,b.p)):(this.clamp=0,this.r1=y(x(A(D(f),-h),A(f,g)),b.p)),qb(b,c,this.r1,this.r2,this.k1,this.k2),this.jMaxLen=this.maxForce*a;var i=y(x(c.p,this.r2),x(b.p,this.r1));this.bias=M(A(i,-sb(this.errorBias,a)/a),this.maxBias)},xb.prototype.applyCachedImpulse=function(a){mb(this.a,this.b,this.r1,this.r2,this.jAcc.x*a,this.jAcc.y*a)},xb.prototype.grooveConstrain=function(a){var b=this.grv_tn,c=this.clamp*B(a,b)>0?a:E(a,b);return M(c,this.jMaxLen)},xb.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=this.r1,d=this.r2,e=jb(a,b,c,d),f=rb(y(this.bias,e),this.k1,this.k2),g=this.jAcc;this.jAcc=this.grooveConstrain(x(g,f)),mb(a,b,this.r1,this.r2,this.jAcc.x-g.x,this.jAcc.y-g.y)},xb.prototype.getImpulse=function(){return v(this.jAcc)},xb.prototype.setGrooveA=function(a){this.grv_a=a,this.grv_n=D(K(y(this.grv_b,a))),this.activateBodies()},xb.prototype.setGrooveB=function(a){this.grv_b=a,this.grv_n=D(K(y(a,this.grv_a))),this.activateBodies()};var yb=function(a,b){return(a.restLength-b)*a.stiffness},zb=a.DampedSpring=function(a,b,c,d,e,f,g){tb.call(this,a,b),this.anchr1=c,this.anchr2=d,this.restLength=e,this.stiffness=f,this.damping=g,this.springForceFunc=yb,this.target_vrn=this.v_coef=0,this.r1=this.r2=null,this.nMass=0,this.n=null};zb.prototype=Object.create(tb.prototype),zb.prototype.preStep=function(a){var b=this.a,c=this.b;this.r1=F(this.anchr1,b.rot),this.r2=F(this.anchr2,c.rot);var d=y(x(c.p,this.r2),x(b.p,this.r1)),f=v(d);this.n=A(d,1/(f?f:1/0));var g=pb(b,c,this.r1,this.r2,this.n);e(0!==g,"Unsolvable this."),this.nMass=1/g,this.target_vrn=0,this.v_coef=1-Math.exp(-this.damping*a*g);var h=this.springForceFunc(this,f);mb(b,c,this.r1,this.r2,this.n.x*h*a,this.n.y*h*a)},zb.prototype.applyCachedImpulse=function(a){},zb.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=this.n,d=this.r1,e=this.r2,f=kb(a,b,d,e,c),g=(this.target_vrn-f)*this.v_coef;this.target_vrn=f+g,g*=this.nMass,mb(a,b,this.r1,this.r2,this.n.x*g,this.n.y*g)},zb.prototype.getImpulse=function(){return 0};var Ab=function(a,b){return(b-a.restAngle)*a.stiffness},Bb=a.DampedRotarySpring=function(a,b,c,d,e){tb.call(this,a,b),this.restAngle=c,this.stiffness=d,this.damping=e,this.springTorqueFunc=Ab,this.target_wrn=0,this.w_coef=0,this.iSum=0};Bb.prototype=Object.create(tb.prototype),Bb.prototype.preStep=function(a){var b=this.a,c=this.b,d=b.i_inv+c.i_inv;e(0!==d,"Unsolvable spring."),this.iSum=1/d,this.w_coef=1-Math.exp(-this.damping*a*d),this.target_wrn=0;var f=this.springTorqueFunc(this,b.a-c.a)*a;b.w-=f*b.i_inv,c.w+=f*c.i_inv},Bb.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=a.w-b.w,d=(this.target_wrn-c)*this.w_coef;this.target_wrn=c+d;var e=d*this.iSum;a.w+=e*a.i_inv,b.w-=e*b.i_inv};var Cb=a.RotaryLimitJoint=function(a,b,c,d){tb.call(this,a,b),this.min=c,this.max=d,this.jAcc=0,this.iSum=this.bias=this.jMax=0};Cb.prototype=Object.create(tb.prototype),Cb.prototype.preStep=function(a){var b=this.a,c=this.b,d=c.a-b.a,e=0;d>this.max?e=this.max-d:d<this.min&&(e=this.min-d),this.iSum=1/(1/b.i+1/c.i);var f=this.maxBias;this.bias=p(-sb(this.errorBias,a)*e/a,-f,f),this.jMax=this.maxForce*a,this.bias||(this.jAcc=0)},Cb.prototype.applyCachedImpulse=function(a){var b=this.a,c=this.b,d=this.jAcc*a;b.w-=d*b.i_inv,c.w+=d*c.i_inv},Cb.prototype.applyImpulse=function(){if(this.bias){var a=this.a,b=this.b,c=b.w-a.w,d=-(this.bias+c)*this.iSum,e=this.jAcc;this.bias<0?this.jAcc=p(e+d,0,this.jMax):this.jAcc=p(e+d,-this.jMax,0),d=this.jAcc-e,a.w-=d*a.i_inv,b.w+=d*b.i_inv}},Cb.prototype.getImpulse=function(){return Math.abs(joint.jAcc)};var Db=a.RatchetJoint=function(a,b,c,d){tb.call(this,a,b),this.angle=0,this.phase=c,this.ratchet=d,this.angle=(b?b.a:0)-(a?a.a:0),this.iSum=this.bias=this.jAcc=this.jMax=0};Db.prototype=Object.create(tb.prototype),Db.prototype.preStep=function(a){var b=this.a,c=this.b,d=this.angle,e=this.phase,f=this.ratchet,g=c.a-b.a,h=d-g,i=0;h*f>0?i=h:this.angle=Math.floor((g-e)/f)*f+e,this.iSum=1/(b.i_inv+c.i_inv);var j=this.maxBias;this.bias=p(-sb(this.errorBias,a)*i/a,-j,j),this.jMax=this.maxForce*a,this.bias||(this.jAcc=0)},Db.prototype.applyCachedImpulse=function(a){var b=this.a,c=this.b,d=this.jAcc*a;b.w-=d*b.i_inv,c.w+=d*c.i_inv},Db.prototype.applyImpulse=function(){if(this.bias){var a=this.a,b=this.b,c=b.w-a.w,d=this.ratchet,e=-(this.bias+c)*this.iSum,f=this.jAcc;this.jAcc=p((f+e)*d,0,this.jMax*Math.abs(d))/d,e=this.jAcc-f,a.w-=e*a.i_inv,b.w+=e*b.i_inv}},Db.prototype.getImpulse=function(a){return Math.abs(a.jAcc)};var Eb=a.GearJoint=function(a,b,c,d){tb.call(this,a,b),this.phase=c,this.ratio=d,this.ratio_inv=1/d,this.jAcc=0,this.iSum=this.bias=this.jMax=0};Eb.prototype=Object.create(tb.prototype),Eb.prototype.preStep=function(a){var b=this.a,c=this.b;this.iSum=1/(b.i_inv*this.ratio_inv+this.ratio*c.i_inv);var d=this.maxBias;this.bias=p(-sb(this.errorBias,a)*(c.a*this.ratio-b.a-this.phase)/a,-d,d),this.jMax=this.maxForce*a},Eb.prototype.applyCachedImpulse=function(a){var b=this.a,c=this.b,d=this.jAcc*a;b.w-=d*b.i_inv*this.ratio_inv,c.w+=d*c.i_inv},Eb.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=b.w*this.ratio-a.w,d=(this.bias-c)*this.iSum,e=this.jAcc;this.jAcc=p(e+d,-this.jMax,this.jMax),d=this.jAcc-e,a.w-=d*a.i_inv*this.ratio_inv,b.w+=d*b.i_inv},Eb.prototype.getImpulse=function(){return Math.abs(this.jAcc)},Eb.prototype.setRatio=function(a){this.ratio=a,this.ratio_inv=1/a,this.activateBodies()};var Fb=a.SimpleMotor=function(a,b,c){tb.call(this,a,b),this.rate=c,this.jAcc=0,this.iSum=this.jMax=0};Fb.prototype=Object.create(tb.prototype),Fb.prototype.preStep=function(a){this.iSum=1/(this.a.i_inv+this.b.i_inv),this.jMax=this.maxForce*a},Fb.prototype.applyCachedImpulse=function(a){var b=this.a,c=this.b,d=this.jAcc*a;b.w-=d*b.i_inv,c.w+=d*c.i_inv},Fb.prototype.applyImpulse=function(){var a=this.a,b=this.b,c=b.w-a.w+this.rate,d=-c*this.iSum,e=this.jAcc;this.jAcc=p(e+d,-this.jMax,this.jMax),d=this.jAcc-e,a.w-=d*a.i_inv,b.w+=d*b.i_inv},Fb.prototype.getImpulse=function(){return Math.abs(this.jAcc)}}();
    </script>
    <script type="text/javascript">
          window.onload = function(){
              cc.game.onStart = function(){
                  //load resources
                  var sys = cc.sys;
                if(!sys.isNative && document.getElementById("cocosLoading")) //If referenced loading.js, please remove it
                    document.body.removeChild(document.getElementById("cocosLoading"));

                // Pass true to enable retina display, on Android disabled by default to improve performance
                cc.view.enableRetina(sys.os === sys.OS_IOS ? true : true);

                // Disable auto full screen on baidu and wechat, you might also want to eliminate sys.BROWSER_TYPE_MOBILE_QQ
                if (sys.isMobile && 
                    sys.browserType !== sys.BROWSER_TYPE_BAIDU &&
                    sys.browserType !== sys.BROWSER_TYPE_WECHAT) {
                    cc.view.enableAutoFullScreen(true);
                }

                // Adjust viewport meta
                cc.view.adjustViewPort(true);

                // Uncomment the following line to set a fixed orientation for your game
                cc.view.setOrientation(cc.ORIENTATION_AUTO);

                // Setup the resolution policy and design resolution size
                //cc.view.setDesignResolutionSize(640, 1136, cc.ResolutionPolicy.SHOW_ALL);
                
                var rectSize = cc.view.getFrameSize();
                cc.view.setDesignResolutionSize(rectSize.width, rectSize.height, cc.ResolutionPolicy.SHOW_ALL);

                var logoImgSrc="data:image/png;base64,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";
                var logoImgKey="logoImgKey";

                var handImgSrc = "data:image/png;base64,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";
                var handImgKey = "handImgKey";

                var gamePlayBgImgSrc = "data:image/png;base64,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AAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYMABAAAAAAAAAIDAgAMAAAAAAAAAAIEBBwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBhwAAAAAAAAAAAgMOAAAAAAAAAAAEBgwAEAAAAAAAAAgMCAAwAAAAAAAAAAgQEHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGHAAAAAAAAAAACAw4AAAAAAAAAAAQGDAAQAAAAAAAACAwIADAAAAAAAAAACBAQcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAIDDgAAAAAAAAAABAYcAAAAAAAAAAAILjs2rEAAAAAwCB/60HsLY4EHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAQcAAAAAAAAAAAYBBwAAAAAAAAAABgEHAAAAAAAAAAAGAIAAP//AwCukQt7nf7xvAAAAABJRU5ErkJggg==";
                var gamePlayBgImgKey = "gamePlayBgImgKey";

                var holeImgSrc = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAIkhJREFUeNrs3X2MXXeZH/DvzIhZrA41Gtast6ampkahRqaOkmZlGhoamm1Ss6GmpqyCUiULTQoFwUYLYtUV7KJmQVBRVmETEUHXbUq0tBERKRFRo42wiLCIsBjFwtooFhEW1o4YMcJi1BGjHaV/nN+EiTP2zL1zX87L5yNd3bzYM3Ofc+Y8z3l+L2ciQFPsTrKn/PPBJNNJZpJccYk/s5F9SWYv8f8Wkzx3mb97Psn8un9/JslSkpUkpy/xZxii559/XhDo24QQwNjtS7IryaGSvHeXpD5TkvzBhn6u06U4WCrFwnwpEOaSLGxSbKAAQAEAjbeW1A+V971JDpSkf0XHY/NMKQbOJDlXioS5dcUCCgAUANCIO/kDJakfKAn/QJIdQtOX5VIYzJX3Z8q7zoECAAUAjM1VJcGvva6S6EdaGJwqhcHa65QCABQAMGh7kxxOcm15HRKSWppL8mR5nUw1pKAAAAUA9HR3f+26pL9HSBrp/Lpi4Mk2dgkUACgAoH8z6xL94fKaEZZWWirFwMl1hcGSAgAFAHTHNUluTHJDSfx015NJHk/yWJKnFAAoAKBddiW5PsnR8r5LSNjAQpInkjxc3hcUACgAoHmuLXf4N5Y7fujVU6Uz8HjpFCgAUABADc0kOZLkWLnLnxUSBmixdAUeSvJoajJ3QAGAAoCu2lHu8G8t79bhMwrLpTPwQOkOjK0YUACgAKCrSf+GmLFPfYqBx8q/KwBQAMCATJekf0uqNr+kTx0tpRoeeLAUAysKABQA0J8byp3+zUl2CgcNciHJI/nVMIECAAUAbGJ3kveW1z7hoAWeS/KV8ppXAKAAgBc7kuSOcrcPbfVIkvtTDRUoAFAA0Fl7y53+HeXOH7pivhQCX8k2HlqkAEABQJNMpdqR745UY/zQdY+XYuCR9DhxUAGAAoAmmE3ywfKyFS+81EKSL5bXogIABQBNtz/JXUlui416YCuWkxxP8vkkZxUAKABomsMl8R8TCujbQ6UQOKkAQAFA3R0rif+wUMDAnCyFwEMKABQA1MmOVC3+u1K1/IHhOFsKgeNJlhUAKAAYl5lUk/o+Gk/fg1FaTPK5VBMGl4QDGOUd/11JfpbkeS8vr7G9flZ+F02wBYZqutzx/9SF18urVq+flt9NhQAw8MR/R5KfuNB6edX69ZPyuzrtsgVsx1SqrXp/5MLq5dWo14/K7+6UyxjQq1uTPOtC6uXV6NezqVbowEtYBcDFrkvyhSSHhAJaYy7JR5KcEArWTAoBxd4k/zvJtyV/aJ1D5Xf76+V3HYwPkZkkn0jy1ST/WDig1f5Rkv+QarXAU+nx6YMoAGiPW5P8nyT/KsnLhAM64WVJ/lmS30vy8yQ/EJJuMgegm65Jck95B7rtqSQfKu90iDkA3bI3Vav/e5I/sO6G4Hvl2mB+QIcYAujOcf79VJP8rhIOYAMHk/z7JL8s3QBPGmo5QwDd+KX+sjt+oAenktye5LRQ6ADQPDuS/HGS/x5tPaA3fy/VToIvT3Iyyd8KiQ4AzXBdki8luUIogG16JsmdsYlQ65gE2C47k9ybasMPyR8YhCvKNeXeco1BB4CaOZpqad8eoQCG5HyqJYMPC4UCgPHbVSrzY0IBjMhDST6QZEEoFACMx5Ekf1GKAIBRWki1UuBRoWgmcwCaaUeqdv83JX9gTHaVa9A95ZqEDgBDdjDVhj4m+QF18UySd8W+AY1iH4BmuSvJ/0ryG0IB1Mivp9o34JdJviscOgAMzp5UY/03CAVQc4+nmhtwXijqzRyA+jua5GnJH2iIG8o166hQKADoz45Uu/l9PcmscAANMluuXV+KCYK1ZQignvaXX56DQgE03Okk70xyVih0ALi8I0m+L/kDLXGwXNOOCEW9WAVQL3+SqmX2cqEAWuTlSW4pN53fFo56MARQD7NJvprkRqEAWu6xJO9JsigUCoCuO5RqvH+fUAAd8VyqeQFzQjE+5gCM162pNs2Q/IEu2VeufbcKxfiYAzAe06n2z/7TJC8TDqCDXpZqr4DfSLV50KqQjJYhgNHbnarlf1goAJIkJ1MNCcwLhQKgrfYn+b/R8ge42HNJfjv2CxgZcwBG57ok35P8ATa0r1wjrxMKBUCb3Fru/G3pC3Bps+VaeZtQDJ9JgMP38SR/LtYAW85L/zrVo4WfFA4FQBNNJ/lykj8QCoCe/Ysk/yDJt2KFwFCYBDgcM0m+GWNZANt1IsnbkywJhQKg7vaW5O9hPgCDcboUAeeEQgFQV4dStat2CwXAQM0nuSm2Dx4YqwAG53CSv5L8AYZid7nG2kRNB6BWrkvV9p8RCoChWko1HHBCKHQAxu3GVG1/yR9g+GbKNdfj0xUAY3UsyTeS7BAKgJHZUa69x4Sif/YB6N+tSf5nPM0PYFz569+keobA08KhABiVO5L8t+igAIzTZKpHCv9NklPCoQAYtruS3CMMALXxO0n+X5LvCoUCYFg+keTTwgBQOzckeT5WBygAhpT8/0QYAGrrnysCFACDdpc7f4DGFAG/SHJSKBQA23VHjPkDNMm/jImBCoBtujXVbH8AmuV3kvwolggqAPpwLNU6f0v9AJrp5iRnyouLeBbAxo4k+XqSaaEAaLSVJO9M8qhQKAA2c32qB/vY3hegHZZTPUDoCaFQAFzKNakeN+nBPgDtKwLemuQpoVAAXOxQkm8n2SkUAK10oRQBc0KhAFizJ8kPkuwSCoBWW0hyZZLzXQ+EGe7VHf+3JH+ATthVrvmd7/Z2vQCYTjXb/6DfCYDOOBgrvTq/D8D/SLVOFIBu2ZfkH5ZCQAHQMR9P8vt+BwA63Qn42yTfUQB0xy1J7nXuA3Te9UmeTXK6ax98oqMH+1uxyx8AlZUkN6VjGwV1rQC4Isn3YvYnAC92IclbutQJ6FIBsCvJd5Psd54DsIGzSd6caq+A1uvKMsDpJN+Q/AG4jP0lV3RiiLgrkwDvSXLUuQ3AJv5+kl9PB54e2IUC4LYk/9k5DcAW/ZMkP07LnxnQ9jkAh1KN+3u0LwC9WE41H6C1RUCbC4DZJN9PtdsTAPTquSRXJ1ls44dr6yTAqSRflfwB2IZ9JZe0cri8rXMA/jjJe527AGzT2uqxb7ftg7VxCOBIkm86ZwEYoLenZSsD2lYA7E817m+nPwAG6UKq+QBn2/KB2jQHYEeqxzpK/gAM2s6SY1qzqqxNBcA9qR7tCADDcDAtepJsWyYBvjvJnzo3ARiyQ0n+OskPm/5B2jAHYF+SH0TrH4DRuJDkylT7BDRW04cAppP8peQPwAjtLLmn0Q8NavoQwKeT/FvnIgAjtifJy5M83tQP0OQhgOuS/FW680RDAOplNcnbkpxQAIzOzlTj/rb6BWCcziV5U6p5AY3S1DkAX5D8AaiBvSUn6QCMwNFUmzEAQF28M8nDCoDh2Z3k6SS7nGsA1MhikjcmmW/KD9y0IYB7JX8Aamg2DdslsEkFwLtTtf8BoI6OllzVCE0ZAphNtfWiu38A6mwxyRuSLOgADIbWPwBNuWG9RwdgMMz6B6Bpar8qoO4FwM5UT1za41wCoEHOp1oVUNsNguq+je5/TXK98wiAhvm75Sb2UR2A3l2T5Lux1z8AzbSa5C1JTioAtm4qyfeTHHL+ANBgc0muLsVA7RJtHf1BkludNwA03O4ky0me1AHY3J5Ua/5nnDcAtMBSqr0Bztfph6rjPgCflfwBaJGZktt0AC7j2iTfca4A0EJvSY2GAupUAJj4B0CbzaVGEwLrNAnwPyb5PecHAC21O9V8gO/qAPzKriQ/irF/ANptKcnrk8zrAFT+S5J/6rwAoOWmk/yd1GCHwDp0AA4keTp2/AOgG1aTXJnk9Dh/iDosA/ys5A9Ah0wl+XTXOwA3JvmWcwGADropyWNdLAAs+wOgy+YyxmWB4xwCuFXyB6DDDmWMz70ZVwdgOtV+//scfwA67FyqZYErXekA3CH5A0D2lpzYiQ7ATJJnU+2IBABdN1+6AEtt7wB8WPIHgBfsLrmx1R2AnUl+XN4BgMqFJK9LstjWDsBdkj8AbHiDPNIuwMSIP5y7fwC4dBfgteW9VR2AD0v+AHDZG+W72tYBcPcPADXqAoyqA+DuHwC2dsM8krkAo+gAzJS7/1nHFQA2tVi6AEPdF2AUHYA7JH8A2LLZjGB3wGF3AKZT7fq31/EEgC07n2pfgKE9I2DYHYBbJH8A6NmekkMb2QGYSvJ0kgOOIwD07EySNyVZbVoH4IjkDwB9O1By6VAMswC4y7EDgHrm0mENARxK8gPHDQC27cokc03pALj7B4Aa59RhdAB2p9r4Z9oxA4BtW0m1MdB83TsAH5T8AWBgpkturXUHYDrJT5LscrwAYGAWkrwmA9wYaNAdgGOSPwAM3K4kRwf5BQddANzhGAHAULx/kF9skEMAB5L80PEBgKF5Y6odAmvVAXD3DwAN6QIMqgOwI8nfJNnp2ADA0FxI8ptJluvSAXi35A8AQ7ez5NxtG1QBcJtjAgAjMZCcO4ghgP1JnnU8AGBkXp/k7Lg7AO7+AaBhXYDtdgCmUu37v8exAICROZ/q+QCr4+oAXC/5A8DI7Sk5uG/bLQBucwwAYCy2lYO3MwSwI8nPyjsAMFrLSV6VPvcE2E4H4KjkDwBjsyPbeEDQdgqAW8QeAMaq71zc7xDAbKqtf6fFHgDGZjXJq5MsjqoDcEzyB4Cxm0qfWwP3WwC8W8wBoBaO9fOX+hkCmE3y01J1AADj1dcwQD8dgGOSPwDUxlQ/XYB+CoCbxRoAaqXn3NzrEIDZ/wBQPytJfjM9DAP02gG4UfIHgNqZLjl6y3otAI6IMQDUUk85upchgKlUs/9nxRgAamcxyWuyxWcD9NIBuFHyB4Damk0PjwjupQDQ/geAettyru5lCODHSfaKLQDU1rkkrx1kB+Cg5A8Atbe35OyBFQDXiykANMINgywAbhBPAGiELd20b2UOwI4kPyvvAEC9LSd5VTZZDriVDsBVkj8ANMaOJNds9oe2UgBY/gcAzbLptsBbKQCM/wNAywqAzeYAzKba/ndKLAGgMVaTvDqXeTrgZh2Aw5I/ADTOVMnh6bcAuE4MAaCRrlMAAIAC4EUuNwdgJsnPYwgAAJpoNckrkyz12gG4VvIHgMaaKrk8vRYAh8UOABrtsAIAABQAL7jUHICpVPv/7xQ7AGisC6meC7C61Q7AFZI/ADTezpLTs9UC4BoxA4BWuKaXAsD4PwC0w+FeCoCrxAsAWmHDnL7RJMDpJL8o7wBAs60keUV5v2wH4KDkDwCtMV1yezYrAA6JFQC0yiEFAAB0z1UKAADQAXjJJMCpVE8AnBErAGiNpVRPBly9VAdgn+QPAK0zk2Tv+v9wcQFwQIwAoJUOXq4AOCg+ANBKB3QAAEABoAAAgK4VAOtXAVgBAADt9aKVAOs7AHskfwBorZmS63NxAbBPbACg1fZtVABcIS4A0GpXbFQA7BcXAGi1/QoAANABSGIOAAC03QvbAa9fBviLWAUAAG22lOQV6zsAs5I/ALTeTMn5LxQAe8UEADph7/oCYI94AEAn7NEBAICOdwAUAACgAAAAulAA7BYPAOiE3esLgF3iAQCdsEsHAAA62gGYSDKV5JflHQBot9UkvzZZWgGSPwB0w1SSXWsFAADQHQoAAOig3ZMpDwUAADpj52SSneIAAN0rAHQAAKBbZnUAAKCjHQAFAAB0sAAwBAAA3WIIAAA6aGYyybQ4AECn7JhMskMcAKB7BcCMOABApxgCAIAOmtYBAICOdgDMAQCADhYAhgAAoFumJsUAALpHAQAAHS0ApoQBADpleiLJ8+IAAN3rAAAACgAAQAEAALSyAFgSBgDolOXJJKviAACdsmIIAAA6SAEAAB0tAAwBAEC3rJoECADds6QAAICOFgAr4gAAnbKiAwAAHe0ALIsDAHTKsiEAAOhoAXBBHACgU5YUAADQPYuTSRbFAQA65YIOAAB0tADQAQCAblnUAQCAjnYAFAAA0MECYEEcAKBTFiaTzIsDAHTK/ESSqSS/LO8AQLutJvm1yfIPVgIAQDcsJlmdXGsFiAcAdMJ8kqwVACYCAkA3LKwvAHQAAKCDHYBz4gEAnXBOAQAACgAAoGsFwHnxAIBOOK8DAAAd7QBMrPsPv0gyIy4A0FpLSV6xvgOQJGfFBQBa7YVcP3lxSwAAaK1zGxUAz4gLALTaMxsVAIYAAKDdzuoAAIAOQJLkOXEBgFZ7YQ7A+mWAU0l+HksBAaCNlpK8MsnqxR2A1ZgHAABtdXYt+V9cACTJGfEBgFY6vf5fFAAA0A1nFAAAoAB4kdPiAwDtLwAmLvqfVgIAQPssp3oI0CUnAa4mmRMnAGiV0+uT/0YFwNofAgDa49TF/2FyK38IAGh/ATAnTgDQKi/J7RMb/KHpJL8o7wBAs62kmgC4slkHYCXmAQBAW5y5OPlfqgBIzAMAgLbYMKdfqgB4SrwAoBVO9lIAnBQvAGhvATBxiT88leRnSXaKGwA01oUkr8pFmwBdrgOwGsMAANB0T22U/C9XACSGAQCg6S6ZyxUAANDBAmDiMn9pJtWTAafEDwAaZzXJK5Ms9doBWIr9AACgqU5dKvlvVgAkyQnxA4BGumwOVwAAQAcLgIlN/vJskp/GPAAAaJLVJK9OsthvB2AxHgwEAE1z+nLJfysFQJI8Jo4A0Cib5m4FAAB0sACY2MIX2ZHquQA7xBMAam851f7/y9vtACwneUI8AaARntgs+W+1AIgCAAAaVQBsaqsFwOPiCQCNsKWcPdHDF/xxkr3iCgC1dS7JawfZAUiSR8UVAGpty7laAQAAHSwAehkCsBwQAOprS8v/+ukALCd5WHwBoJYe22ry77UASAwDAEBdPdTLH57o8Yt7OiAA1M+mT//bbgdgMZ4NAAB181gvyb+fAiBJHhFnAKiVnofoJ/r4JoYBAKA+em7/99sBWEzypHgDQC082Wvy77cASJKviTcA1EJfOXmiz29mGAAAxq+v9v92OgBWAwDA+PU8+3+7BUCSPCjuADBWfefiiW18U88GAIDx6Wnv/0F2ADwbAADG5+F+k/92C4AkeUD8AWAstpWDJ7b5zaeS/DjJHscBAEbmfJLXploFMJYOwGqS444DAIzU8e0k/0F0AJJkf5JnHQsAGJnXJzm7nS8wOYAf4mxsDQwAo/LkdpP/oAqAJPmK4wEAI3F8EF9kYkA/zEySnyTZ6bgAwNBcSPKaJEt16QAsxZJAABi2BwaR/AfZAUiSA0l+6NgAwNC8McmZQXyhyQH+UGeSnHBsAGAoTgwq+Q+6AEiS+x0fABiKgebYiQH/cNOpJgPucpwAYGAWUk3+W6lrB2BFFwAAhnL3vzLILzgxhB9yd6rnA0w7XgAwkJvr1yaZH+QXnRzCDzqf5GuOFwAMxNcGnfyH1QFIkkNJfuCYAcC2XZlkbtBfdHJIP+xcLAkEgO06MYzkP8wCIEk+77gBQD1z6cQQf+ipJE+n2iEQAOjNM6l2/lttWgdgVRcAAPr2uWEl/2F3AJJqKeCPkuxxHAFgy84neV0GvPZ/VB2AlB9cFwAAevNnw0z+STLx/PPPD/UTTExMzKTaHnin4wkAm7qQ5DXPP//80jC/yeQIPshSqWQAgK3d/S8N+5uMogOQcvf/Y10AANj07v+1SS4MOz9PjvAD6QIAwOZ3/xdG8Y1G1QFIktlUKwJ0AQBg45vl1yVZTJK2dABSPpAuAABc+u5/cVTfbJQdAF0AANjYUqqx/xcKgDZ1ANa6APYFAIAX+9wo7/7H0QFIkpnSBdjleANAFlKN/b9o6V/bOgApH/BuxxsAkpITl0b9TcfRAUiqZwQ8m2Sv4w5Ah51L8vpssO1vGzsAKR/0k447AB33yQx5z/+6dQCSZCrJ95MccvwB6KC5JFfnEo/8bWsHIOUD/5HjD0BH/dGlkv8oTI75wz9aXgDQJWPPf+McAlhzKNVQwJTzAYAOWE3V+p+73B9q8xDAmrkk9zsfAOiI+zdL/l3pACTJ7lTLAmecFwC02FKSNyQ5v9kf7EIHIEnmY3MgANrv7q0k/y51AJJqc6AfJtnv/ACghc4meWO2uO6/Kx2AlIB8xPkBQEt9JGPa9KfuBUBSLYl40DkCQMvUbtl7nYYA1uxJ8tcxIRCAdlhO8qZUQwBb1qUhgDXnY0IgAO3xqV6Tf1c7AEk1IfB78ZwAAJrtdKpNf3oe++9iByAlUB9y3gDQcB9IjSb+NaEASJInk9zn3AGgoe4ruayW6joEsGY21d4Au51HADTIfKo1/4v9foGuDgGsWYyhAACa50PbSf6jMNmAID5UXgDQBI3IW3UfAlizK9XeALPOKwBqbDHVw34WtvuFuj4EsGYh1UxKAKizjwwi+esAvNTXkxx1fgFQQ48kecegvtjQ83PDCoDdqVYFGAoAoE4WU836n29KATDZsADPJ7nTeQZAzdw5yOQ/CpMNDPJDSR5wrgFQEw+mgavVmjYEsGZnkqeT7HXeATBG51I96e/CoL+wIYCNXUhyu/MOgDG7fRjJfxQmGxz0J5J8zrkHwJh8ruSiRmrqEMCa6STfSXKN8xCAETqV5M0Z4pP+LAPc3P4kP0gy43wEYASWklyd5JlhfhNzADZ3NnYJBGB0PjDs5D8Kky05GA/E0kAA5Jsta8MQwJqZJN9LcsD5CcAQnEnyW6mGAIbOEMDWLSV5Zxq6HAOAWrtQcsxSWz7QZMsO0DOxPwAAg3d7WjDu3+YCIEkeTvIZ5yoAA/KZkltapU1zANabSvLNJDc6bwHYhseT3JRkddTf2D4A/ZtN8v0k+5y/APThXKr1/gvj+OYmAfZvMdWEjWXnMAA9Wik5ZKGtH3Cy5QdwLjYJAqB3d6ba7re1JjtwEI8nuc+5DMAW3VdyR6u1eQ7AetNJvp3ksPMagMs4meStGeJDfrbKJMDB2ZVqUuBe5zcAGzif5MrUZNzfJMDBWUjy9tgpEICXupBqud9CVz7wZMcO8OlUszpXnOsAFGsz/k936UNPdvBAPxHbBQPwK7eX3NApkx092A8m+ZRzHqDzPlNyQud0aRLgRr6a5BbnP0BnbwbfU9cfziqA4ZpO8q0k1/s9AOiUJ1JN+qvtnDAFwPDtTPKdJAf9PgB0wpkkb07NV4VZBjh8F9Ly/Z4BeMFCknfEknAFQHE2VSvIHgEA7b7hu6lc8ztPAfArp8qJ4emBAO2zXK7xp4RCAbCRk6l2C1QEALQr+b+9XONRAFzSE0neFbsFArTBSpLfTQc3+lEA9OfRJP8uyapQADTWarmWPyIUCoBefC3J+4QBoLHeV67lKAB6djzJh4QBoHE+VK7hKAD69sUkHxMGgMb4WLl2owDYts/Fw4MAmuBT5ZqNAmBgPpnkbmEAqK27y7WaLfAsgN59NMlnnToAtfKxtt35exhQPb0/yb1+3wBq4QNJ7mvbh1IA1NdtSb6cZMrvHsBYrKZa6ne8jR9OAVBvx5J8Ncm030OAkVpJ8p4kD7X1A3occL09lOpRwp4dADA6y6m2bH9IKHQAxu36JN9MssMpBTD05P/2dGBvfx2AZngiydtSPWsagOG4UK61HuyjAKiVk+XEnBcKgIGbL9dYj/RVANTSqSS/leSMUAAMzJlybT0lFAqAOjuX5C1JTggFwLadKNfUc0KhAGiCxSS/HU+iAtiO4+VauigUCoAmWUlyezxECKAfnyrX0BWhGA7LAEfjtiRfig2DALZy83RndFDtBNgi1yX5epJZoQDY0GKqzdXMoVIAtM6BJN9KslcoAF7kXKoNfk4LxWgKAHMARmttKYt1rAC/8lS5Nkr+I6QAGL35JG9Ncr9QAOT+VMv8bKKmAOiEtUku74sHCQHdtFyugXfGTP+xMAdg/K5KNTnQvACgK86lmuxnZ7/LMAeg/U4luTLJ40IBdMDj5Zon+Y+ZAqAeFpPclORuoQBa7O5yrbOzXw0YAqifm5N8NcmMUAAtsZTkPUkeEYqtsw9AN+1P8o1U+wYANNmZJO9IclYo6lUAGAKop7Op1sQeFwqgwY6Xa5nkX0M6APV3NMlfJNkpFEBDXEj1IJ+HhUIHgP49nOSNSZ4QCqABTpRrluRfcwqAZjif5G1J/jA2zADqaaVco95arlnUnCGA5jmU5C+TXCEUQE08k+R3k8wJxeAYAuBic6k20fAsAaAO7i/XJMlfB0AHYIRuTvLlJLuEAhixhVR7+VvbrwPAGDyS5E1+AYExXHuudO1pNgVA882n2mTjPaUiBxiWxXKteUdM9Gs8QwDtsivJvUmOCQUwYA+nenSvG40RMQRALxaSvCvVYzbnhQMYgPlyTXmn5N8uCoD2VupvSHKfUADbcF+5ltjUp4UMAbTf4SRfSnJQKIAtOp2q3X9SKMbHEADbdTLVbN0/TLIsHMBlLJdrxdWSvw6ADkC77E3y6SS3CAVwkQdL8j8nFN3oACgAuulwqtUCh4QCOm8uyYeSPCkU3SoADAF009qwwPtitQB01Xy5Blwp+XeTDgAzST6e5KNJpoUDWm8lyeeT3J1kSTi62wFQALBmf5LPJjkqFNBaDyf5WJKzQqEAUABwseuSfCHmB0CbzCX5SJITQqEAWGMOABc7kWpM8PYkzwkHNNpz5Xf5askfHQB6MZXkvUn+U6olhEAznEs1xv+VJKvCoQOgAKBf06UQ+ESS3cIBtTVfEv/9qSb7oQBQADAQO5LcUToCu4QDamNhXeK346cCQAHA0MwkeX+q5YOzwgFjs5jkM6ke2mNJnwJAAcBIC4G7knxYIQAjT/x/lmo9v8SvAFAAMNZC4LZSDOwTDhia50rSP55kadjXb9pNAcCgvbsUAtcIBQzMUyXxf22Ud4goABQA9OPaVEMDx4QC+vZwSfwb7tWvAEABQJ3tLx2B21KtIgAubzlVi//z2WTLXgUACgCaYDbJB8vLEkJ4qYUkXyyvxa38BQUACgCaZDrJzan2E7hBOCCPp1q//0h63LxHAYACgKbaWwqB98YOg3TLfKpteu9PtW1vXxQAKABog5tLIXCzUNBij6672982BQAKANpk97qugAcQ0Qbn1t3tzw/yCysAUADQVjemWj1wJNVmQ9AUS+Vu/3iSx4b1TRQAKABoux2lGHi3YoCaJ/3HkjxY3of+UB4FAAoAulgM3Fre7S3AOC2XZP/AqJK+AgAFAFSdgCNJbinFwLSQMAIr6+70H80YH8ajAEABAMnOVCsIjia5vvw7DMqFJE+k2pr3kfLvY6cAQAEAL3V9eR1Jckg46MNcucN/orxqRwGAAgAub3eqXQdvLkXBrJCwgcWS6B9JtTvffN1/YAUACgDozbWlILgxHlvcdU+lGs9/PJd44p4CAAWAAoB22pnkcCkKDpeXlQXttJzkZHk9Wd4vNPkDKQBQAMBgHV73ujaeU9BU8+sS/dqrVRQAKABguPaVYuC6VEMGh4SkluZStfRPlGT/XNs/sAIABQCM3qEkBy967RGWkTif5PRFr7kuBkIBgAIA6mH2ooLgqvJug6L+rJTkfuqiZL8oNAoAFADQBPuS7Cpdg92lU3Cw/PO+jsfmuVRj9afLnf18uZtfSAda+AoAFADQbVeUAuFAqkcgrxULU6lWKexv6Oc6m2qW/eq6pH4uyZnyz8849AoAFADA1joJa5sYXVXed5WiYc1a4bCR6dJ5uJwzufQDbdYS+ZpzJZEnVZs+qdrz7twVADTA/x8AMTiy6J5Oo20AAAAASUVORK5CYII=";
                var holeImgKey = "holeImgKey";

                var pieceImgSrc = "data:image/png;base64,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";
                var pieceImgKey = "pieceImgKey";

                var playBoardImgSrc = "data:image/png;base64,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";
                var playBoardImgKey = "playBoardImgKey";

                var pieceRedImgSrc = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAIAAAAlC+aJAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAUElEQVRo3u3PQREAAAQAMMTRP44wUni42xospzs+q3hOQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBA4N4Cjp0BsMQ1TFQAAAAASUVORK5CYII=";
                var pieceRedImgKey = "pieceRedImgKey";

                var indicatorImgSrc = "data:image/png;base64,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";
                var indicatorImgKey = "indicatorImgKey";

                var lineImgSrc = "";
                var lineImgKey = "lineImgKey";

                var testSoundSrc = "";
                var testSoundKey = "testSoundKey";

                const panel=
                {        
                    panelGame : 1,
                    panelTest : 2
                };

                const delegateFunc=
                {
                    remove : 1
                };

                var StorePanel=cc.Layer.extend({
    
                    appDelegate:null,
                    isSmallWindow:false,

                    imgBackground:null,
                    btnCross:null,
                    loadingLayer:null,
                    lblTitle:null,

                    initDefaultValue:function()
                    {
                        appDelegate=AppDelegate.sharedApplication();
                        this.isSmallWindow=false;
                    },

                    init:function()
                    {
                        if (this._super())
                        {
                            this.initDefaultValue();

                            return true;
                        }
                        return false;
                    },

                    initSubClass:function()
                    {
                        this.initDefaultValue();
                    },
                    
                    initWithSmallWindow:function()
                    {
                        this.initDefaultValue();
                        this.isSmallWindow=true;
                        this.setContentSize(cc.winSize);
                        cc.eventManager.addListener({
                            event: cc.EventListener.TOUCH_ONE_BY_ONE,
                            swallowTouches: true,
                                onTouchBegan: function(touch,event){
                                return event.getCurrentTarget().onTouchBegan(touch,event);
                                },
                                onTouchMoved: function(touch,event){
                                //cc.log("TOUCH MOVED");
                                event.getCurrentTarget().onTouchMoved(touch,event);
                                },
                                onTouchEnded: function(touch,event){
                                //cc.log("TOUCH ENDED");
                                event.getCurrentTarget().onTouchEnded(touch,event);
                                }
                            }, this);
                    },

                    //#pragma mark- Background

                    loadBackground:function(strImageName, strImageKey)
                    {
                        this.imgBackground=StorePanel.createSprite(strImageName, strImageKey);
                        //this.imgBackground.setScale(appDelegate.deviceScaleFloat);
                                            
                        this.imgBackground.setScaleX(cc.winSize.width/this.imgBackground.getContentSize().width);
                        this.imgBackground.setScaleY(cc.winSize.height/this.imgBackground.getContentSize().height);
                        this.imgBackground.setPosition(cc.winSize.width/2, cc.winSize.height/2);
                        this.addChild(this.imgBackground);
                    },
                                            
                    loadSmallBackground:function(strImageName, strImageKey)
                    {
                        this.imgBackground=StorePanel.createSprite(strImageName, strImageKey);
                        this.imgBackground.setScale(appDelegate.deviceScaleFloat);
                        this.imgBackground.setPosition(cc.winSize.width/2, cc.winSize.height/2);
                        this.addChild(this.imgBackground);
                    },

                    loadTitle:function(title)
                    {
                        this.lblTitle=new cc.LabelTTF(title, "Arial", 50*appDelegate.deviceScaleFloat);
                        if (this.isSmallWindow && this.imgBackground!=null)
                            this.lblTitle.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2+this.imgBackground.getScaleY()*this.imgBackground.getContentSize().height/2-40*appDelegate.deviceScaleFloat));
                        else 
                            this.lblTitle.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height-40*appDelegate.deviceScaleFloat));
                        this.lblTitle.setAnchorPoint(cc.p(0.5,0.5));
                        this.lblTitle.setFontFillColor(cc.color(255,255,255));
                        this.lblTitle.enableShadow(cc.color(0,0,0), cc.size(2, -2), 10);
                        this.addChild(this.lblTitle);
                    },

                    loadCrossButton:function(strImageName, strImageKey)
                    {
                        this.btnCross=StorePanel.createButton(strImageName, strImageKey);
                        this.btnCross.setScale(appDelegate.deviceScaleFloat);
                        this.btnCross.addTouchEventListener(this.crossCallBack,this);
                        //this.btnCross.setPosition(cc.p(cc.winSize.width/2-225*appDelegate.deviceScaleFloat,75*appDelegate.deviceScaleFloat));
                        this.btnCross.setTag(0);

                        if (this.isSmallWindow && this.imgBackground!=null)
                            this.btnCross.setPosition(cc.p(cc.winSize.width/2-this.imgBackground.getScaleX()*this.imgBackground.getContentSize().width/2+this.btnCross.getScaleX()*this.btnCross.getContentSize().width/2+5*appDelegate.deviceScaleFloat,
                                                        cc.winSize.height/2+this.imgBackground.getScaleY()*this.imgBackground.getContentSize().height/2-this.btnCross.getScaleY()*this.btnCross.getContentSize().height/2-5*appDelegate.deviceScaleFloat));
                        else
                            this.btnCross.setPosition(cc.p(this.btnCross.getScaleX()*this.btnCross.getContentSize().width/2+5*appDelegate.deviceScaleFloat,cc.winSize.height-this.btnCross.getScaleY()*this.btnCross.getContentSize().height/2-5*appDelegate.deviceScaleFloat));
                        
                        this.addChild(this.btnCross, 2);
                    },

                    crossCallBack:function(pSender,type)
                    {
                        switch (type)
                        {
                            case ccui.Widget.TOUCH_ENDED:
                                this.removeFromParent(true);
                            break;
                        }
                    },

                    loadLoading:function()
                    {
                        this.scheduleOnce(this.removeLoading,10);
                        this.loadingLayer = new cc.LayerColor(cc.color(0, 0, 0, 200));
                        this.addChild(this.loadingLayer, 100);

                        var strLB = 'Loading...';
                        var lblLBText=new cc.LabelTTF(strLB, StorePanel.getFont(res.fontGeorgiaBoldTtf), 60*appDelegate.deviceScaleFloat);
                        lblLBText.setPosition(cc.p(cc.winSize.width/2,cc.winSize.height/2));
                        lblLBText.setAnchorPoint(cc.p(0.5,0.5));
                        lblLBText.setFontFillColor(cc.color(255,255,255));
                        lblLBText.enableStroke(cc.color(96,63,44), 3.0, true);
                        this.loadingLayer.addChild(lblLBText);
                    },

                    removeLoading:function()
                    {
                        //   cc.log('removeLoadingLayer..............');
                        this.unschedule(this.removeLoading);
                        this.loadingLayer.removeFromParent();
                    },

                    onTouchBegan:function(touch,event){

                        return true;
                    },

                    onTouchMoved:function(touch,event){
                    },

                    onTouchEnded:function(touch,event){
                        
                        if(this.isSmallWindow==true)
                        {
                            if(this.imgBackground!=null)
                            {
                                var touchPoint = touch.getLocation();
                                //touchPoint = cc.director.convertToGL(touchPoint);
                                
                                //touchPoint=this.convertToNodeSpace(touchPoint);
                                
                                var smallWindowRect=cc.rect(this.imgBackground.getPosition().x-this.imgBackground.getScaleX()*this.imgBackground.getContentSize().width/2,
                                                            this.imgBackground.getPosition().y-this.imgBackground.getScaleY()*this.imgBackground.getContentSize().height/2 ,
                                                            this.imgBackground.getScaleX()*this.imgBackground.getContentSize().width, 
                                                            this.imgBackground.getScaleY()*this.imgBackground.getContentSize().height);
                                
                                if (!cc.rectContainsPoint(smallWindowRect,touchPoint))
                                {
                                    this.removeFromParent(true);
                                }
                            }
                        }
                    }
                    
                });

                StorePanel.cacheBase64Image = function(_imgSrc, _imgKey){
                    var imgElement = new cc.newElement("IMG");
                    imgElement.setAttribute("src", _imgSrc);

                    cc.textureCache.cacheImage(_imgKey, imgElement);
                }

                StorePanel.createSprite = function(_imgSrc, _imgKey){
                    StorePanel.cacheBase64Image(_imgSrc, _imgKey);

                    var sprite = new cc.Sprite(_imgKey);
                    return sprite;
                }
                StorePanel.createPhysicsSprite = function(_imgSrc, _imgKey){
                    StorePanel.cacheBase64Image(_imgSrc, _imgKey);

                    var physicsSprite = new cc.PhysicsSprite.create(_imgKey);
                    return physicsSprite;
                }
                StorePanel.createButton = function(_imgSrc, _imgKey){
                    StorePanel.cacheBase64Image(_imgSrc, _imgKey);

                    var btn = new ccui.Button(_imgKey, _imgKey);
                    return btn;
                }

                StorePanel.getRandomInt=function(lowerlimit,higherLimit) {
                    return Math.floor(Math.random() * Math.floor(higherLimit-lowerlimit)+lowerlimit);
                }


                StorePanel.createLabel=function(strText,fontSize, isBold)
                {
                    var strFontName="Arial";
                    
                    var lbl=new cc.LabelTTF(strText, strFontName, fontSize);
                    lbl.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER);
                    lbl.setVerticalAlignment(cc.VERTICAL_TEXT_ALIGNMENT_CENTER);
                    lbl.setColor(cc.color.BLACK);
                    
                    return lbl;
                }

                StorePanel.checkSpriteTouch=function(mainSprite,touchLocation)
                {
                    var point=mainSprite.convertToNodeSpace(touchLocation);
                    var size=mainSprite.getContentSize();
                    
                    if(point.x>0 && point.y>0 && point.x<size.width && point.y<size.height)
                        return true;
                    else
                        return false;
                }
                StorePanel.insertString=function(str, index, value) {
                    return str.substr(0, index) + value + str.substr(index);
                }
                StorePanel.getStringCommaFormated=function(value)
                {
                    var returnString = value.toString();
                    var insertPosition = returnString.length-3;

                    if(insertPosition > 0) {
                        returnString = StorePanel.insertString(returnString, insertPosition, ",");
                        insertPosition-=3;
                    }

                    while (insertPosition > 0) {
                        returnString = StorePanel.insertString(returnString, insertPosition, ",");
                        insertPosition-=3;
                    }
                    // cc.log("value: "+value+" ret: "+returnString);
                    return returnString;
                }

                StorePanel.setImageGray=function(image)
                {
                    image.setBlendFunc(cc.ZERO, cc.ONE_MINUS_SRC_ALPHA); // ciluate black
                }

                StorePanel.getFocusAction=function(){
                    var scaleUp = cc.ScaleTo.create(0.1, 1.2 * appDelegate.deviceScaleFloat, 1.2 * appDelegate.deviceScaleFloat);
                    var scaleDown = cc.ScaleTo.create(0.1, 1 * appDelegate.deviceScaleFloat, 1 * appDelegate.deviceScaleFloat);
                    var sequence = cc.Sequence.create(scaleUp, scaleDown);
                    var repeat = cc.RepeatForever.create(sequence);
                    
                    return repeat;
                }

                StorePanel.getTintAction=function(){
                    var tintDark = cc.TintTo.create(0.2, 255, 100, 100);
                    var tintBright = cc.TintTo.create(0.2, 255, 255, 255);
                    var sequence = cc.Sequence.create(tintDark, tintBright);
                    var repeat = cc.RepeatForever.create(sequence);
                    
                    return repeat;
                }

                //Main
                
                var GameOver = StorePanel.extend({
                    appDelegate:null,
                    
                    init:function(){
                        if (this._super()){
                            this.initWithSmallWindow();
                            this.appDelegate = AppDelegate.sharedApplication();
                            cc.log("Game Over!");

                            this.laodAll();
                            return true;
                        }
                        return false;   
                    },
                    laodAll: function(){
                        var colr = cc.color(106, 138, 162);
                        var layerColor = cc.LayerColor.create(colr, cc.winSize.width, cc.winSize.height);
                        layerColor.setPosition(cc.p(0, 0));
                        this.addChild(layerColor);
                        // layerColor.setOpacity(0.8);

                        var score = localStorage.getItem("currentScore");
                        cc.log("your score: " + score);
                        var bestScore = localStorage.getItem("bestScore");
                        cc.log("best score: " + bestScore);

                        var scoreLabel = StorePanel.createLabel(score, 80*appDelegate.deviceScaleFloat, true);
                        scoreLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 100*appDelegate.deviceScaleFloat));
                        scoreLabel.setColor(cc.color(255,255,255));
                        // label.setDimensions(cc.size(this.imgBackground.getContentSize().width-50*appDelegate.deviceScaleFloat,200*appDelegate.deviceScaleFloat));
                        this.addChild(scoreLabel,1);

                        var overLabel = StorePanel.createLabel("Tap and Try", 60*appDelegate.deviceScaleFloat, false);
                        overLabel.setPosition(cc.p(scoreLabel.getPosition().x, scoreLabel.getPosition().y - 100*appDelegate.deviceScaleFloat));
                        overLabel.setColor(cc.color(255,255,255));
                        // label.setDimensions(cc.size(this.imgBackground.getContentSize().width-50*appDelegate.deviceScaleFloat,200*appDelegate.deviceScaleFloat));
                        this.addChild(overLabel,1);
                    },
                    onTouchBegan:function(touch,event){
                        // this.removeFromParentAndCleanup(true);
                        // appDelegate.ghud.loadStorePanel(panel.panelTest);

                        var appLink = "https://play.google.com/store/apps/details?id=com.itiw.dragonjump";
                        // var appLink = "“market://details?id=com.itiw.dragonjump”";
                      cc.sys.openURL("" + appLink);

                        return true;
                    },

                    onTouchMoved:function(touch,event){

                    },

                    onTouchEnded:function(touch,event){

                    },
                });
                GameOver.create=function(){
                    var ret=new GameOver();

                    if(ret && ret.init()) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var mainPanel = null;

                var SpriteWithPhysicsBody = cc.Class.extend({
                    appDelegate:null,
                    mass: null,
                    nodeSize: null,
                    phBody: null,
                    shape: null,
                    phNode: null,
                    moment: null,
                    
                    init:function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag){
                        //cc.sys.localStorage.clear();
                        this.appDelegate = AppDelegate.sharedApplication();
                        cc.log(name + " created");

                        mainPanel = GamePlay.sharedManager();

                        this.loadSpriteWithPhysicsBody(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag);

                        return true;        
                    },
                    loadSpriteWithPhysicsBody: function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag){                        
                        var sprite = StorePanel.createSprite(imgSrc, imgKey);                        

                        //#2
                        this.nodeSize = sprite.getContentSize();
                        this.phNode = StorePanel.createPhysicsSprite(imgSrc, imgKey);
                        this.phBody = null;
                        var    phShape = null;
                        var    scaleX = 1;
                        var    scaleY = 1;
                        
                        var nodeScale = scaleX;

                        this.nodeSize.width *= scaleX;
                        this.nodeSize.height *= scaleY;                        

                        //#3
                        this.mass = 1;
                        this.moment = cp.momentForBox(this.mass, this.nodeSize.width, this.nodeSize.height);
                        if(name == "Circle"){
                            this.moment = cp.momentForCircle(this.mass, this.nodeSize.width/2, this.nodeSize.height/2, cp.v(0, 0));
                        }
                        // cc.log(name + "--> " + "mass: " + this.mass + ", w: " + this.nodeSize.width + ", h: " + this.nodeSize.height);
                        if(!isDynamic){
                            this.mass = Infinity;
                            this.moment = Infinity;
                        }
                        this.phBody = new cp.Body(this.mass, this.moment);
                        this.phBody.setPos(cc.p(pos));
                        mainPanel.space.addBody(this.phBody);

                        //#4
                        this.shape = new cp.BoxShape(this.phBody, this.nodeSize.width, this.nodeSize.height);
                        if(name == "Circle"){
                            this.shape = (new cp.CircleShape(this.phBody, this.nodeSize.width/2, cp.v(0, 0)));
                        }
                        mainPanel.space.addShape(this.shape);
                        // this.shape.setFriction(1);
                        // this.shape.setElasticity(1);
                        this.shape.setCollisionType(collisionType);
                        this.shape.name = name;
                        this.shape.tag = tag;
                        // this.shape.image = sprite;

                        this.phNode.setBody(this.phBody);
                        this.phNode.setScale(nodeScale * appDelegate.deviceScaleFloat);
                        this.phNode.setTag(tag);
                    }

                });
                SpriteWithPhysicsBody.create=function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag){
                    var ret=new SpriteWithPhysicsBody();

                    if(ret && ret.init(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag)) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var FinishLine = cc.Class.extend({
                    appDelegate:null,
                    mass: null,
                    nodeSize: null,
                    phBody: null,
                    shape: null,
                    phNode: null,
                    moment: null,
                    node: null,
                    staticNode: null,

                    imgSrc: null,
                    imgKey: null,
                    pos: null,
                    isDynamic: null,
                    collisionType: null,
                    name: null,
                    tag: null,
                    angle: 0,

                    isCollidedWithPopcorn: false,
                    
                    init:function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                        //cc.sys.localStorage.clear();
                        this.appDelegate = AppDelegate.sharedApplication();
                        cc.log(name + " created");

                        this.imgSrc = imgSrc;
                        this.imgKey = imgKey;
                        this.pos = pos;
                        this.isDynamic = isDynamic;
                        this.collisionType = collisionType;
                        this.name = name;
                        this.tag = tag;

                        this.loadFinishLine(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale);

                        return true;        
                    },
                    loadFinishLine: function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                        this.staticNode = StorePanel.createSprite(imgSrc,imgKey);
                        // mainPanel.addChild(this.staticNode);
                        this.staticNode.setPosition(pos);
                        this.staticNode.setScale(scale * appDelegate.deviceScaleFloat);

                        this.nodeSize = this.staticNode.getContentSize();
                        // this.phNode = StorePanel.createPhysicsSprite(imgSrc, imgKey);

                        this.phBody = null;
                        var    phShape = null;
                        var    scaleX = scale * appDelegate.deviceScaleFloat;
                        var    scaleY = scale * appDelegate.deviceScaleFloat;
                        
                        var nodeScale = scaleX;

                        this.nodeSize.width *= scaleX;
                        this.nodeSize.height *= scaleY; 
                        
                        this.phBody = new cp.Body(Infinity, Infinity);
                        this.phBody.setPos(this.staticNode.getPosition());
                        // this.phBody.setRotation(20);

                        this.shape = new cp.BoxShape(this.phBody, this.nodeSize.width, this.nodeSize.height);
                        // this.shape.setElasticity(0);
                        // this.shape.setFriction(0);
                        this.shape.setCollisionType(collisionType);
                        this.shape.name = name;
                        this.shape.tag = tag;
                        mainPanel.space.addShape(this.shape);

                        this.phNode = this.staticNode;

                        // this.phNode.setBody(this.phBody);
                        // this.phNode.setScale(nodeScale * appDelegate.deviceScaleFloat);
                        // this.phNode.setTag(tag);
                    }

                });
                FinishLine.create=function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                    var ret = new FinishLine();

                    if(ret && ret.init(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale)) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var Line = cc.Class.extend({
                    appDelegate:null,
                    mass: null,
                    nodeSize: null,
                    phBody: null,
                    shape: null,
                    phNode: null,
                    moment: null,

                    isCollidedWithPopcorn: false,

                    imgSrc: null,
                    imgKey: null,
                    pos: null,
                    isDynamic: null,
                    collisionType: null,
                    name: null,
                    tag: null,
                    angle: 0,
                    
                    init:function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                        //cc.sys.localStorage.clear();
                        this.appDelegate = AppDelegate.sharedApplication();
                        cc.log(name + " created");

                        mainPanel = GamePlay.sharedManager();

                        this.imgSrc = imgSrc;
                        this.imgKey = imgKey;
                        this.pos = pos;
                        this.isDynamic = isDynamic;
                        this.collisionType = collisionType;
                        this.name = name;
                        this.tag = tag;

                        this.loadLine(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale);

                        return true;        
                    },
                    loadLine: function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){                        
                        
                        if(isDynamic){
                            var sprite = StorePanel.createSprite(imgSrc, imgKey);                        

                            //#2
                            this.nodeSize = sprite.getContentSize();
                            this.phNode = StorePanel.createPhysicsSprite(imgSrc, imgKey);
                            this.phBody = null;
                            var    phShape = null;
                            var    scaleX = scale * appDelegate.deviceScaleFloat;
                            var    scaleY = scale * appDelegate.deviceScaleFloat;
                            
                            var nodeScale = scaleX;

                            this.nodeSize.width *= scaleX;
                            this.nodeSize.height *= scaleY;                        

                            //#3
                            this.mass = 100000000;
                            this.moment = cp.momentForBox(this.mass, this.nodeSize.width, this.nodeSize.height);
                            // if(name == "Circle"){
                            //     this.moment = cp.momentForCircle(this.mass, this.nodeSize.width/2, this.nodeSize.height/2, cp.v(0, 0));
                            // }
                            // cc.log(name + "--> " + "mass: " + this.mass + ", w: " + this.nodeSize.width + ", h: " + this.nodeSize.height);
                            // if(!isDynamic){
                            //     this.mass = Infinity;
                            //     this.moment = Infinity;
                            // }
                            this.phBody = new cp.Body(this.mass, this.moment);
                            this.phBody.setPos(cc.p(pos));
                            mainPanel.space.addBody(this.phBody);

                            //#4
                            this.shape = new cp.BoxShape(this.phBody, this.nodeSize.width, this.nodeSize.height);
                            // if(name == "Circle"){
                            //     this.shape = (new cp.CircleShape(this.phBody, this.nodeSize.width/2, cp.v(0, 0)));
                            // }
                            mainPanel.space.addShape(this.shape);
                            this.shape.setFriction(1);
                            this.shape.setElasticity(0);
                            this.shape.setCollisionType(collisionType);
                            this.shape.name = name;
                            this.shape.tag = tag;
                            // this.shape.image = sprite;

                            this.phNode.setBody(this.phBody);
                            this.phNode.setScale(nodeScale);
                            this.phNode.setTag(tag);
                        }
                        else{
                            this.staticNode = StorePanel.createSprite(imgSrc,imgKey);
                            // mainPanel.addChild(this.staticNode);
                            this.staticNode.setPosition(pos);
                            this.staticNode.setScale(scale * appDelegate.deviceScaleFloat);

                            this.nodeSize = this.staticNode.getContentSize();
                            // this.phNode = StorePanel.createPhysicsSprite(imgSrc, imgKey);

                            this.phBody = null;
                            var    phShape = null;
                            var    scaleX = scale * appDelegate.deviceScaleFloat;
                            var    scaleY = scale * appDelegate.deviceScaleFloat;
                            
                            var nodeScale = scaleX;

                            this.nodeSize.width *= scaleX;
                            this.nodeSize.height *= scaleY; 
                            
                            this.phBody = new cp.Body(Infinity, Infinity);
                            this.phBody.setPos(this.staticNode.getPosition());
                            // this.phBody.setRotation(20);

                            this.shape = new cp.BoxShape(this.phBody, this.nodeSize.width, this.nodeSize.height);
                            this.shape.setFriction(0);
                            this.shape.setElasticity(0);
                            this.shape.setCollisionType(collisionType);
                            this.shape.name = name;
                            this.shape.tag = tag;
                            mainPanel.space.addShape(this.shape);

                            this.phNode = this.staticNode;

                            // this.phNode.setBody(this.phBody);
                            // this.phNode.setScale(nodeScale * appDelegate.deviceScaleFloat);
                            // this.phNode.setTag(tag);
                        }
                    }

                });
                Line.create=function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                    var ret=new Line();

                    if(ret && ret.init(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale)) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var Hole = cc.Class.extend({
                    appDelegate:null,
                    mass: null,
                    nodeSize: null,
                    phBody: null,
                    shape: null,
                    phNode: null,
                    moment: null,

                    imgSrc: null,
                    imgKey: null,
                    pos: null,
                    isDynamic: null,
                    collisionType: null,
                    name: null,
                    tag: null,
                    angle: 0,
                    
                    init:function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                        //cc.sys.localStorage.clear();
                        this.appDelegate = AppDelegate.sharedApplication();
                        cc.log(name + " created");

                        mainPanel = GamePlay.sharedManager();

                        this.imgSrc = imgSrc;
                        this.imgKey = imgKey;
                        this.pos = pos;
                        this.isDynamic = isDynamic;
                        this.collisionType = collisionType;
                        this.name = name;
                        this.tag = tag;

                        this.loadHole(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale);

                        return true;        
                    },
                    loadHole: function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){                        
                        var sprite = StorePanel.createSprite(imgSrc, imgKey);                        

                        //#2
                        this.nodeSize = sprite.getContentSize();
                        this.phNode = StorePanel.createPhysicsSprite(imgSrc, imgKey);
                        var    phShape = null;
                        var    scaleX = scale * 0.5 * appDelegate.deviceScaleFloat;
                        var    scaleY = scale * 0.5 * appDelegate.deviceScaleFloat;
                        
                        var nodeScale = scaleX;

                        this.nodeSize.width *= scaleX;
                        this.nodeSize.height *= scaleY;                        

                        //#3
                        this.mass = 1;
                        // this.moment = cp.momentForBox(this.mass, this.nodeSize.width, this.nodeSize.height);
                        // if(name == "Circle"){
                            this.moment = cp.momentForCircle(this.mass, this.nodeSize.width/2, this.nodeSize.height/2, cp.v(0, 0));
                        // }
                        // cc.log(name + "--> " + "mass: " + this.mass + ", w: " + this.nodeSize.width + ", h: " + this.nodeSize.height);
                        // if(!isDynamic){
                        //     this.mass = Infinity;
                        //     this.moment = Infinity;
                        // }
                        this.phBody = new cp.Body(this.mass, this.moment);
                        this.phBody.setPos(cc.p(pos));
                        mainPanel.space.addBody(this.phBody);

                        // this.phBody.vx = 0;
                        // this.phBody.vy = 0;

                        //#4
                        // this.shape = new cp.BoxShape(this.phBody, this.nodeSize.width, this.nodeSize.height);
                        // if(name == "Circle"){
                            this.shape = new cp.CircleShape(this.phBody, this.nodeSize.width/2, cp.v(0, 0));
                        // }
                        mainPanel.space.addShape(this.shape);
                        this.shape.setFriction(1);
                        this.shape.setElasticity(0);
                        this.shape.setCollisionType(collisionType);
                        this.shape.name = name;
                        this.shape.tag = tag;
                        // this.shape.image = sprite;

                        this.phNode.setBody(this.phBody);
                        this.phNode.setScale(nodeScale);
                        this.phNode.setTag(tag);
                    }

                });
                Hole.create=function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                    var ret=new Hole();

                    if(ret && ret.init(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale)) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var Piece = cc.Class.extend({
                    appDelegate:null,
                    mass: null,
                    nodeSize: null,
                    phBody: null,
                    shape: null,
                    phNode: null,
                    moment: null,

                    imgSrc: null,
                    imgKey: null,
                    pos: null,
                    isDynamic: null,
                    collisionType: null,
                    name: null,
                    tag: null,
                    angle: 0,
                    
                    init:function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                        //cc.sys.localStorage.clear();
                        this.appDelegate = AppDelegate.sharedApplication();
                        cc.log(name + " created");

                        mainPanel = GamePlay.sharedManager();

                        this.imgSrc = imgSrc;
                        this.imgKey = imgKey;
                        this.pos = pos;
                        this.isDynamic = isDynamic;
                        this.collisionType = collisionType;
                        this.name = name;
                        this.tag = tag;

                        this.loadPiece(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale);

                        return true;        
                    },
                    loadPiece: function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){                        
                        var sprite = StorePanel.createSprite(imgSrc, imgKey);                        

                        //#2
                        this.nodeSize = sprite.getContentSize();
                        this.phNode = StorePanel.createPhysicsSprite(imgSrc, imgKey);
                        this.phBody = null;
                        var    phShape = null;
                        var    scaleX = scale * appDelegate.deviceScaleFloat;
                        var    scaleY = scale * appDelegate.deviceScaleFloat;
                        
                        var nodeScale = scaleX;

                        this.nodeSize.width *= scaleX;
                        this.nodeSize.height *= scaleY;                        

                        //#3
                        this.mass = 1;
                        this.moment = cp.momentForBox(this.mass, this.nodeSize.width, this.nodeSize.height);
                        // if(name == "Circle"){
                        //     this.moment = cp.momentForCircle(this.mass, this.nodeSize.width/2, this.nodeSize.height/2, cp.v(0, 0));
                        // }
                        // cc.log(name + "--> " + "mass: " + this.mass + ", w: " + this.nodeSize.width + ", h: " + this.nodeSize.height);
                        // if(!isDynamic){
                        //     this.mass = Infinity;
                        //     this.moment = Infinity;
                        // }
                        this.phBody = new cp.Body(this.mass, this.moment);
                        this.phBody.setPos(cc.p(pos));
                        mainPanel.space.addBody(this.phBody);

                        // this.phBody.vx = 0;
                        // this.phBody.vy = 0;

                        //#4
                        this.shape = new cp.BoxShape(this.phBody, this.nodeSize.width, this.nodeSize.height);
                        // if(name == "Circle"){
                            // this.shape = new cp.CircleShape(this.phBody, this.nodeSize.width/2, cp.v(0, 0));
                        // }
                        mainPanel.space.addShape(this.shape);
                        this.shape.setFriction(1);
                        this.shape.setElasticity(0);
                        this.shape.setCollisionType(collisionType);
                        this.shape.name = name;
                        this.shape.tag = tag;
                        // this.shape.image = sprite;

                        this.phNode.setBody(this.phBody);
                        this.phNode.setScale(nodeScale);
                        this.phNode.setTag(tag);
                    }

                });
                Piece.create=function(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale){
                    var ret=new Piece();

                    if(ret && ret.init(imgSrc, imgKey, pos, isDynamic, collisionType, name, tag, scale)) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }


                var isTapEnabled = false;
                var canCountScore = false;
                var isLevelCompleted = false;
                var isGameOver = false;
                var scorePoint = 0;
                var scoreLimit = 10;
                var scoreLabel = null;
                var angle = 0;
                var targetScore;
                var panelName;
                var testList2d;    
                var startTouchPosition = cc.p(0, 0);

                var screenSize = 0;
                var gravityAmount = 98.00 * 0;

                //Color Hole
                var hole = null;
                var pieceList = new Array();
                var leftRightDistance = 50;
                var bottomUpDistance = 50;
                var totalRowForPiece = 5;
                var totalColoumnForPiece = 5;
                var pieceGapX = 15;
                var pieceGapY = 15;
                var collidedPieceList = [];
                var isHoleCollidedWithPiece = false;
                var currentPieceIndex;
                var obstacleList = new Array();
                var isHoleCollidedWithObstacle = false;
                var tutorialIndicatorList = [];
                var pieceCombination = 0;
                var totalNoOfPieces = 0;


                var GamePlay = StorePanel.extend({
                    layerOnGamePanel: null,
                    isFirstTouch: true,
                    isCompleted: false,
                    nextTask: "nothing",
                    hand: null,                   
                    noOfCurrentLevel: 0,

                    isCollided: false,

                    space: null,
                    COLLISION_TYPE_HOLE: 1,
                    COLLISION_TYPE_PIECE: 2,
                    COLLISION_TYPE_OBSTACLE: 3,

                    init:function(){
                        if (this._super()){
                            // cc.director.getPhysicsManager().enabled = true;
                            this.initWithSmallWindow();
                            GamePlay.sharedInstance=this;
                            var appDelegate=AppDelegate.sharedApplication();
                            mainPanel = this;

                            screenSize = cc.winSize;

                            this.initPhysics();
                            this.initDebugMode();

                            // this.loadLayerOnGamePanel();
                            this.loadColorHolePanel();
                            // this.loadScore();
                            this.loadNextSequence();

                            this.scheduleUpdate();
                            return true;
                        }
                        return false;
                    },
                    loadColorHolePanel: function(){
                        cc.log("This is ColorHole Panel");
                        var testLabel = StorePanel.createLabel("Hello Chipmunk", 60*appDelegate.deviceScaleFloat);
                        testLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 0 * appDelegate.deviceScaleFloat));
                        // scoreLabel.setColor(cc.color(255,255,255));
                        // this.addChild(testLabel,10);

                        this.loadBg(gamePlayBgImgSrc, gamePlayBgImgKey);
                        this.loadBg(playBoardImgSrc, playBoardImgKey);
                        this.loadHole();
                        this.loadPieces();
                        this.loadObstacle();
                    },
                    loadHole: function(){
                        //hole
                        hole = Hole.create(holeImgSrc, holeImgKey, cc.p(screenSize.width/2, screenSize.height/2 - 400 * appDelegate.deviceScaleFloat), true, this.COLLISION_TYPE_HOLE, "Hole", "hole", 0.4);
                        this.addChild(hole.phNode);
                    },
                    loadPieces: function(){
                        //piece
                        pieceCombination = this.randomNum(0, 2);
                        cc.log("combination: " + pieceCombination);

                        totalRowForPiece = this.randomNum(5, 20);
                        totalColoumnForPiece = this.randomNum(5, 20);

                        leftRightDistance = this.randomNum(-280, 0);
                        bottomUpDistance = this.randomNum(0, 180);
                        
                        if(pieceCombination == "0"){
                            // 55555
                            // 55555
                            // 55555
                            // 55555
                            // 55555
                            var k = 0;
                            for(var j = 0; j < totalRowForPiece; j++){
                                for(var i = 0; i < totalColoumnForPiece; i++){
                                    var piecePos = cc.p(screenSize.width/2 + i * pieceGapX * appDelegate.deviceScaleFloat + leftRightDistance * appDelegate.deviceScaleFloat, screenSize.height/2 + j * pieceGapY * appDelegate.deviceScaleFloat + bottomUpDistance * appDelegate.deviceScaleFloat);

                                    var piece = Piece.create(pieceImgSrc, pieceImgKey, piecePos, true, this.COLLISION_TYPE_PIECE, "Piece", k, 0.2);
                                    this.addChild(piece.phNode);

                                    pieceList.push(piece);
                                    k++;

                                    totalNoOfPieces++;
                                }
                            }
                        }
                        else if(pieceCombination == "1"){
                            // 55555
                            // 5555
                            // 555
                            // 55
                            // 5
                            var k = 0;
                            for(var j = 0; j < totalRowForPiece; j++){
                                for(var i = 0; i < j; i++){
                                    var piecePos = cc.p(screenSize.width/2 + i * pieceGapX * appDelegate.deviceScaleFloat + leftRightDistance * appDelegate.deviceScaleFloat, screenSize.height/2 + j * pieceGapY * appDelegate.deviceScaleFloat + bottomUpDistance * appDelegate.deviceScaleFloat);

                                    var piece = Piece.create(pieceImgSrc, pieceImgKey, piecePos, true, this.COLLISION_TYPE_PIECE, "Piece", k, 0.2);
                                    this.addChild(piece.phNode);

                                    pieceList.push(piece);
                                    k++;

                                    totalNoOfPieces++;
                                }
                            }
                        }
                        else{
                            var k = 0;
                            totalRowForPiece = this.randomNum(5, 20);
                            totalColoumnForPiece = this.randomNum(5, 20);

                            leftRightDistance = this.randomNum(-280, 0);
                            bottomUpDistance = this.randomNum(0, 180);

                            for(var j = 0; j < totalRowForPiece; j++){
                                for(var i = 0; i < totalColoumnForPiece; i++){
                                    // if(i < )
                                    var piecePos = cc.p(screenSize.width/2 + i * pieceGapX * appDelegate.deviceScaleFloat + leftRightDistance * appDelegate.deviceScaleFloat, screenSize.height/2 + j * pieceGapY * appDelegate.deviceScaleFloat + bottomUpDistance * appDelegate.deviceScaleFloat);

                                    var piece = Piece.create(pieceImgSrc, pieceImgKey, piecePos, true, this.COLLISION_TYPE_PIECE, "Piece", k, 0.2);
                                    this.addChild(piece.phNode);

                                    pieceList.push(piece);
                                    k++;

                                    totalNoOfPieces++;
                                }
                            }
                        }

                        cc.log("total piece: " + totalNoOfPieces);
                    },
                    loadObstacle: function(){
                        var k = 0;
                        totalRowForPiece = 8;//this.randomNum(5, 20);
                        totalColoumnForPiece = 1;//this.randomNum(5, 20);

                        leftRightDistance = this.randomNum(-250, 0);
                        bottomUpDistance = this.randomNum(-200, -170);

                        for(var j = 0; j < totalRowForPiece; j++){
                            for(var i = 0; i < totalColoumnForPiece; i++){
                                var piecePos = cc.p(screenSize.width/2 + i * pieceGapX * appDelegate.deviceScaleFloat + leftRightDistance * appDelegate.deviceScaleFloat, screenSize.height/2 + j * pieceGapY * appDelegate.deviceScaleFloat + bottomUpDistance * appDelegate.deviceScaleFloat);

                                var piece = Piece.create(pieceRedImgSrc, pieceRedImgKey, piecePos, true, this.COLLISION_TYPE_OBSTACLE, "Obstacle", k, 0.2);
                                this.addChild(piece.phNode);

                                obstacleList.push(piece);
                                k++;
                            }
                        }

                        var indexForExtraObs1 = this.randomNum(1, 7);
                        var indexForExtraObs2 = this.randomNum(1, 7);
                        for(var j = 0; j < this.randomNum(0, 2); j++){
                            for(var i = 0; i < this.randomNum(0, 3); i++){
                                var piecePos = cc.p(obstacleList[indexForExtraObs1].phNode.getPosition().x + (i+1) * pieceGapX * appDelegate.deviceScaleFloat, obstacleList[indexForExtraObs1].phNode.getPosition().y - (j+1) * pieceGapY * appDelegate.deviceScaleFloat);

                                var piece = Piece.create(pieceRedImgSrc, pieceRedImgKey, piecePos, true, this.COLLISION_TYPE_OBSTACLE, "Obstacle", k, 0.2);
                                this.addChild(piece.phNode);

                                obstacleList.push(piece);
                                k++;
                            }
                        }
                        for(var j = 0; j < 1; j++){
                            for(var i = 0; i < 2; i++){
                                var piecePos = cc.p(obstacleList[indexForExtraObs2].phNode.getPosition().x - (i+1) * pieceGapX * appDelegate.deviceScaleFloat, obstacleList[indexForExtraObs2].phNode.getPosition().y - (j+1) * pieceGapY * appDelegate.deviceScaleFloat);

                                var piece = Piece.create(pieceRedImgSrc, pieceRedImgKey, piecePos, true, this.COLLISION_TYPE_OBSTACLE, "Obstacle", k, 0.2);
                                this.addChild(piece.phNode);

                                obstacleList.push(piece);
                                k++;
                            }
                        }
                    },

                    loadNextSequence: function(){
                        cc.log("nextTask: " + this.nextTask);
                        if(this.nextTask == "nothing"){
                            //left indication arrow
                            var leftIndicator = StorePanel.createSprite(indicatorImgSrc, indicatorImgKey);
                            leftIndicator.setPosition(cc.p(screenSize.width/2 - 130 * appDelegate.deviceScaleFloat, screenSize.height/2 - 400 * appDelegate.deviceScaleFloat));
                            leftIndicator.setScale(-0.05 * appDelegate.deviceScaleFloat);
                            this.addChild(leftIndicator);
                            leftIndicator.setName("leftIndicator");
                            leftIndicator.runAction(cc.RepeatForever.create(cc.Sequence.create(cc.MoveTo.create(1, cc.p(leftIndicator.getPosition().x + 10 * appDelegate.deviceScaleFloat, leftIndicator.getPosition().y)), cc.MoveTo.create(1, cc.p(leftIndicator.getPosition().x - 10 * appDelegate.deviceScaleFloat, leftIndicator.getPosition().y)))));

                            tutorialIndicatorList.push(leftIndicator);

                            //right indication arrow
                            var rightIndicator = StorePanel.createSprite(indicatorImgSrc, indicatorImgKey);
                            rightIndicator.setPosition(cc.p(screenSize.width/2 + 130 * appDelegate.deviceScaleFloat, screenSize.height/2 -400 * appDelegate.deviceScaleFloat));
                            rightIndicator.setScale(0.05 * appDelegate.deviceScaleFloat, 0.05 * appDelegate.deviceScaleFloat);
                            this.addChild(rightIndicator);
                            rightIndicator.setName("rightIndicator");
                            rightIndicator.runAction(cc.RepeatForever.create(cc.Sequence.create(cc.MoveTo.create(1, cc.p(rightIndicator.getPosition().x - 10 * appDelegate.deviceScaleFloat, rightIndicator.getPosition().y)), cc.MoveTo.create(1, cc.p(rightIndicator.getPosition().x + 10 * appDelegate.deviceScaleFloat, rightIndicator.getPosition().y)))));

                            tutorialIndicatorList.push(rightIndicator);

                            //up indication arrow
                            var upIndicator = StorePanel.createSprite(indicatorImgSrc, indicatorImgKey);
                            upIndicator.setPosition(cc.p(screenSize.width/2 + 0 * appDelegate.deviceScaleFloat, screenSize.height/2 - 280 * appDelegate.deviceScaleFloat));
                            upIndicator.setScale(0.05 * appDelegate.deviceScaleFloat, 0.05 * appDelegate.deviceScaleFloat);
                            upIndicator.setRotation(-90);
                            this.addChild(upIndicator);
                            upIndicator.setName("upIndicator");
                            upIndicator.runAction(cc.RepeatForever.create(cc.Sequence.create(cc.MoveTo.create(1, cc.p(upIndicator.getPosition().x, upIndicator.getPosition().y - 10 * appDelegate.deviceScaleFloat)), cc.MoveTo.create(1, cc.p(upIndicator.getPosition().x, upIndicator.getPosition().y + 10 * appDelegate.deviceScaleFloat)))));

                            tutorialIndicatorList.push(upIndicator);

                            //instruction label
                            var instructionLabel = StorePanel.createLabel("SWIPE TO START", 20*appDelegate.deviceScaleFloat);
                            instructionLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 - 325 * appDelegate.deviceScaleFloat));
                            instructionLabel.setColor(cc.color(255,255,255));
                            this.addChild(instructionLabel,10);
                            instructionLabel.setName("instructionLabel");
                            instructionLabel.runAction(cc.RepeatForever.create(cc.Sequence.create(cc.ScaleTo.create(1.0, 0.9), cc.ScaleTo.create(1.0, 1.0))));

                            //hand
                            this.loadTutorialHandWithPos(cc.p(hole.phNode.getPosition().x +  40 * appDelegate.deviceScaleFloat, hole.phNode.getPosition().y - 50 * appDelegate.deviceScaleFloat));
                        }
                        else if(this.nextTask == "completeLevel"){

                            this.loadLayerOnGamePanel();
                            this.layerOnGamePanel.setOpacity(0.0 * 255);
                            var gameOver = cc.callFunc(function(){                                
                                this.layerOnGamePanel._localZOrder = 10;
                                this.layerOnGamePanel.setOpacity(0.8 * 255);

                                var gameOverLabel = StorePanel.createLabel("CONGRATULATIONS!", 40*appDelegate.deviceScaleFloat);
                                gameOverLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 0 * appDelegate.deviceScaleFloat));
                                gameOverLabel.setColor(cc.color(255,255,255));
                                this.addChild(gameOverLabel,10);

                                this.unscheduleAllCallbacks();
                            }, this);
                            this.runAction(cc.Sequence.create(cc.delayTime(0.5), gameOver));

                            this.nextTask = "";

                            // this.getChildByName("instructionLayer").removeFromParent();
                            // this.hand.removeFromParent();
                            // this.loadLayerOnGamePanel();
                            // this.layerOnGamePanel._localZOrder = 10;
                            // this.layerOnGamePanel.setOpacity(0.8 * 255);

                            // var levelCompleteLabel = StorePanel.createLabel("CONGRATULATIONS!!", 40*appDelegate.deviceScaleFloat);
                            // levelCompleteLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 0 * appDelegate.deviceScaleFloat));
                            // levelCompleteLabel.setColor(cc.color(255,255,255));
                            // this.addChild(levelCompleteLabel,10);
                        }
                        else if(this.nextTask == "gameOver"){
                            this.loadLayerOnGamePanel();
                            this.layerOnGamePanel.setOpacity(0.0 * 255);
                            var gameOver = cc.callFunc(function(){                                
                                this.layerOnGamePanel._localZOrder = 10;
                                this.layerOnGamePanel.setOpacity(0.8 * 255);

                                var gameOverLabel = StorePanel.createLabel("TRY AGAIN!", 40*appDelegate.deviceScaleFloat);
                                gameOverLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 0 * appDelegate.deviceScaleFloat));
                                gameOverLabel.setColor(cc.color(255,255,255));
                                this.addChild(gameOverLabel,10);

                                this.unscheduleAllCallbacks();
                            }, this);
                            this.runAction(cc.Sequence.create(cc.delayTime(0.5), gameOver));

                            this.nextTask = "";

                            // this.getChildByName("instructionLayer").removeFromParent();
                            // this.hand.removeFromParent();
                            // this.loadLayerOnGamePanel();
                            // this.layerOnGamePanel._localZOrder = 10;
                            // this.layerOnGamePanel.setOpacity(0.8 * 255);

                            // var gameOverLabel = StorePanel.createLabel("TRY AGAIN!", 40*appDelegate.deviceScaleFloat);
                            // gameOverLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 0 * appDelegate.deviceScaleFloat));
                            // gameOverLabel.setColor(cc.color(255,255,255));
                            // this.addChild(gameOverLabel,10);
                        }
                    },
                    loadTutorialHandWithPos: function(_pos){
                        // var addHand = cc.callFunc(function(){
                        //     this.hand = StorePanel.createSprite(handImgSrc, handImgKey);
                        //     this.hand.setPosition(_pos);
                        //     this.addChild(this.hand, 10);
                        //     this.hand.setScale(0.4 * appDelegate.deviceScaleFloat); //1.0

                        //     this.moveVertically(this.hand, 1.0, 5);     //10
                            
                        // }, this);
                        // return addHand;

                        this.hand = StorePanel.createSprite(handImgSrc, handImgKey);
                        this.hand.setPosition(_pos);
                        this.addChild(this.hand);
                        this.hand.setScale(0.7 * appDelegate.deviceScaleFloat); //1.0

                        this.moveVertically(this.hand, 1.0, 5);     //10
                    },
                    moveVertically: function(item, movingTime, moveAmount){
                        var moveUp = cc.MoveTo.create(movingTime, cc.p(item.x, item.y + moveAmount * appDelegate.deviceScaleFloat));
                        var moveDown = cc.MoveTo.create(movingTime, cc.p(item.x, item.y -moveAmount * appDelegate.deviceScaleFloat));
                        item.runAction(cc.RepeatForever.create(cc.Sequence.create(moveUp, moveDown)));
                    },
                    makeActive: function(dt){
                        canCountScore = true;
                    },
                    loadLayerOnGamePanel: function(){
                        var colr = cc.color(0, 0, 0);
                        this.layerOnGamePanel = cc.LayerColor.create(colr, cc.winSize.width, cc.winSize.height);
                        this.layerOnGamePanel.setPosition(cc.p(0, 0));
                        this.addChild(this.layerOnGamePanel);
                        this.layerOnGamePanel.setOpacity(1*255);
                    },
                    
                    loadSpriteWithPos: function(itemName, itemKey, _pos){
                        var sprite = StorePanel.createSprite(itemName, itemName);
                        sprite.setPosition(_pos);
                        this.addChild(sprite);
                        sprite.setScale(appDelegate.deviceScaleFloat);
                        return sprite;
                    },
                    loadBg: function(imgSrc, imgKey){
                        this.bg = StorePanel.createSprite(imgSrc, imgKey);
                        this.bg.setPosition(cc.winSize.width/2, cc.winSize.height/2);
                        this.addChild(this.bg);
                        this.bg.setScale(appDelegate.deviceScaleFloat);
                    },
                    loadScore: function(){
                        scoreLabel = StorePanel.createLabel("" + scorePoint.toString(), 60*appDelegate.deviceScaleFloat);
                        scoreLabel.setPosition(cc.p(cc.winSize.width/2, cc.winSize.height/2 + 450 * appDelegate.deviceScaleFloat));
                        // scoreLabel.setColor(cc.color(255,255,255));
                        // label.setDimensions(cc.size(this.imgBackground.getContentSize().width-50*appDelegate.deviceScaleFloat,200*appDelegate.deviceScaleFloat));
                        this.addChild(scoreLabel,10);
                    },

                    randomNum: function(min, max) {
                      return Math.floor(Math.random() * (max - min) ) + min;
                    },

                    //scheduleUpdate
                    update: function(dt){
                        this.space.step(dt);

                        if(isHoleCollidedWithObstacle){
                            //gameOver
                            this.nextTask = "gameOver";
                            isHoleCollidedWithObstacle = false;
                            this.loadNextSequence();
                        }
                        if(totalNoOfPieces < 1){
                            this.nextTask = "completeLevel";
                            isLevelCompleted = true;
                            this.loadNextSequence();
                        }

                    },
                    fallPieceIntoHole: function(){
                        for(var i = 0; i < collidedPieceList.length; i++){
                            
                            var dx = collidedPieceList[i].phNode.getPosition().x - hole.phNode.getPosition().x;
                            var dy = collidedPieceList[i].phNode.getPosition().y - hole.phNode.getPosition().y;

                            // var dxSq = dx*dx;
                            // var dySq = dy*dy;
                            // var distance = Math.sqrt(dxSq + dySq);

                            // cc.log(i);

                            collidedPieceList[i].phNode.runAction(cc.MoveBy.create(1, cc.p(-dx, -dy)));
                            collidedPieceList[i].phNode.runAction(cc.FadeOut.create(1, 0));
// var currentPieceIndex = i;
//                             var fallPieceIntoHole = cc.callFunc(function(){
//                                 collidedPieceList[currentPieceIndex].phNode.runAction(cc.MoveBy.create(1, cc.p(-dx, -dy)));
//                             }, this);

//                             var removePiece = cc.callFunc(function(){
//                                 // this.space.removeBody(collidedPieceList[currentPieceIndex].shape.getBody());
//                                 // this.space.removeShape(collidedPieceList[currentPieceIndex].shape);

//                                 // this.removeChild(collidedPieceList[currentPieceIndex].image);
//                                 // // space.removeBody(pieceList[currentPieceIndex].shape.body);
//                                 // collidedPieceList[currentPieceIndex].phNode.removeFromParent();
//                                 // collidedPieceList.splice(currentPieceIndex, 1);

//                                 collidedPieceList[currentPieceIndex].phNode.runAction(cc.FadeOut.create(1, 0));
//                             }, this);

//                             this.runAction(cc.Sequence.create(fallPieceIntoHole, cc.delayTime(0), removePiece));
                        }
                    },

                    //Physics
                    initPhysics: function() {
                        this.space = new cp.Space();
                        this.space.gravity = cp.v(0.0, -1 * gravityAmount);
                        // this.space.gravity = cp.v(0.0, 0.0);
                        this.space.iterations = 10;             //default 10
                        this.space.damping = 1 ;                //default 1.0
                        this.space.sleepTimeThreshold = Infinity;    //default 0.5
                        this.space.collisionSlop = Infinity;         //default 0.1

                        this.space.setDefaultCollisionHandler(this.collisionBegin, null, null, this.collisionSeparate);
                    },                    
                    initDebugMode: function() {
                        var phDebugNode = new cc.PhysicsDebugNode(this.space) ; 
                        phDebugNode.setVisible(false);  //true false
                        this.addChild(phDebugNode, 10) ; 
                    },
                    collisionBegin: function(arbiter, space){
                        var nA = arbiter.getA();
                        var nB = arbiter.getB();
                        // cc.log(nA.name + " and " + nB.name);

                        space.addPostStepCallback(function () {
                            //collision between Hole and Piece
                            if((nA.name == "Hole" && nB.name == "Piece") || (nA.name == "Piece" && nB.name == "Hole")){
                                var currentPieceIndex;
                                var currentPieceShape;
                                if(nA.name == "Hole" && nB.name == "Piece"){
                                    currentPieceShape = nB;
                                    currentPieceIndex = nB.tag;
                                }
                                else if(nA.name == "Piece" && nB.name == "Hole"){
                                    currentPieceShape = nA;
                                    currentPieceIndex = nA.tag;
                                }
                                cc.log("begin: Hole and Piece");


                                // cc.log(hole.phNode.getPosition());
                                // isHoleCollidedWithPiece = true;

                                var dx = pieceList[currentPieceIndex].phNode.getPosition().x - hole.phNode.getPosition().x;
                                var dy = pieceList[currentPieceIndex].phNode.getPosition().y - hole.phNode.getPosition().y;
                                pieceList[currentPieceIndex].phNode.runAction(cc.MoveBy.create(0.5, cc.p(-dx, -dy)));
                                pieceList[currentPieceIndex].phNode.runAction(cc.FadeOut.create(0.5, 0));
                                space.removeShape(pieceList[currentPieceIndex].shape);

                                totalNoOfPieces--;
                                // pieceList.splice(currentPieceIndex, 1);

                                // mainPanel.fallPieceIntoHole();

    
    // space.removeShape(pieceList[currentPieceIndex].shape.getBody());
    // space.removeShape(pieceList[currentPieceIndex].shape);
    // pieceList[currentPieceIndex].phNode.removeFromParent();

                                // pieceList[currentPieceIndex].vx = dx;
                                // pieceList[currentPieceIndex].vy = dy;

                                return false;
                            }

                            //collision between Hole and Obstacle
                            if((nA.name == "Hole" && nB.name == "Obstacle") || (nA.name == "Obstacle" && nB.name == "Hole")){
                                var currentPieceIndex;
                                var currentPieceShape;
                                if(nA.name == "Hole" && nB.name == "Obstacle"){
                                    currentPieceShape = nB;
                                    currentPieceIndex = nB.tag;
                                }
                                else if(nA.name == "Obstacle" && nB.name == "Hole"){
                                    currentPieceShape = nA;
                                    currentPieceIndex = nA.tag;
                                }
                                cc.log("begin: Hole and Obstacle");


                                // cc.log(hole.phNode.getPosition());
                                isHoleCollidedWithObstacle = true;

                                var dx = obstacleList[currentPieceIndex].phNode.getPosition().x - hole.phNode.getPosition().x;
                                var dy = obstacleList[currentPieceIndex].phNode.getPosition().y - hole.phNode.getPosition().y;
                                obstacleList[currentPieceIndex].phNode.runAction(cc.MoveBy.create(0.5, cc.p(-dx, -dy)));
                                obstacleList[currentPieceIndex].phNode.runAction(cc.FadeOut.create(0.5, 0));
                                space.removeShape(obstacleList[currentPieceIndex].shape);

                                // pieceList.splice(currentPieceIndex, 1);

                                // mainPanel.fallPieceIntoHole();

    
    // space.removeShape(pieceList[currentPieceIndex].shape.getBody());
    // space.removeShape(pieceList[currentPieceIndex].shape);
    // pieceList[currentPieceIndex].phNode.removeFromParent();

                                // pieceList[currentPieceIndex].vx = dx;
                                // pieceList[currentPieceIndex].vy = dy;

                                return false;
                            }
                        });

                        return true;
                    },
                    preSolveHandler: function(arbiter, space){

                        return true;
                    },
                    postSolveHandler: function(arbiter, space){
                        
                    },
                    collisionSeparate: function(arbiter, space){
                        var nA = arbiter.getA();    //shape
                        var nB = arbiter.getB();    //shape
                        cc.log("collision-separate: " + nA.name + "<-->" + nB.name);

                        //collision between Hole and Piece
                        if((nA.name == "Hole" && nB.name == "Piece") || (nA.name == "Piece" && nB.name == "Hole")){
                            if(nA.name == "Hole" && nB.name == "Piece"){
                            }
                            else if(nA.name == "Piece" && nB.name == "Hole"){
                            }
                            cc.log("separate: Hole and Piece");
                        }
                    },

                    //Touch
                    onTouchBegan:function(touch,event){
                        // cc.log("touch");
                        touchedPoint = touch.getLocation();
                        
                        //it the touch is first touch
                        if(this.isFirstTouch){
                            this.hand.removeFromParent();
                            this.getChildByName("instructionLabel").removeFromParent();
                            for(var i = 0; i < tutorialIndicatorList.length; i++){
                                tutorialIndicatorList[i].removeFromParent();
                            }

                            this.isFirstTouch = false;
                        }
                        //if the game is completed
                        if(this.isCompleted){
                            cc.log("go to appStore");
                            var appLink = "https://play.google.com/store/apps/details?id=com.itiw.dragonjump";
                            // var appLink = "“market://details?id=com.itiw.dragonjump”";
                            cc.sys.openURL("" + appLink);
                        }
                        
                        startTouchPosition = touch.getLocation();

                        isTouchEnded = false;

                        return true;
                    },

                    onTouchMoved:function(touch,event){
                        // hole.phNode.setPosition(touch.getLocation().x, touch.getLocation().y + 50 * appDelegate.deviceScaleFloat);

                        var target = event.getCurrentTarget();
                        var touchPoint = target.convertToNodeSpace(touch.getLocation());
                        // touchPoint = touch.getLocation();
                        var dx = hole.phNode.getPosition().x + (touchPoint.x - startTouchPosition.x);
                        var dy = hole.phNode.getPosition().y + (touchPoint.y - startTouchPosition.y);
                        hole.phNode.setPosition(cc.p(dx, dy));
                        startTouchPosition = touch.getLocation();
                    },

                    onTouchEnded:function(touch,event){
                        isTouchEnded = true;
                    },
                });

                GamePlay.sharedInstance=null;
                GamePlay.sharedManager=function(){
                    return GamePlay.sharedInstance;
                }

                GamePlay.create=function()
                {
                    var ret=new GamePlay();

                    if(ret && ret.init()) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }
                var GameHud=cc.Layer.extend({

                    init:function()
                    {
                        if (this._super())
                        {
                            //this.runAction(cc.Sequence.create(cc.delayTime(0.1),cc.CallFunc.create(this.callAfterLoad, this)));
                            this.callAfterLoad();
                            return true;
                        }
                        return false;
                    },

                    callAfterLoad:function()
                    {
                        // cc.log("callAfterLoad 1");

                                            
                    },

                    loadStorePanel:function(panelId){
                        switch(panelId){
                            case panel.panelGame:
                            {
                                var gamePlay = GamePlay.create();
                                this.addChild(gamePlay,1);
                            }
                            break;
                            case panel.panelTest:
                            {
                                var gameTest = GameTest.create();
                                this.addChild(gameTest,1);
                            }
                            break;
                        }
                    }

                });
                GameHud.create=function()
                {
                    var ret=new GameHud();

                    if(ret && ret.init()) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }
                var GameNode=cc.Layer.extend({
                    init:function()
                    {
                        if(this._super())
                        {
                            var appDelegate=AppDelegate.sharedApplication();
                            appDelegate.ghud.loadStorePanel(panel.panelGame);
                            //var resources=Resources.sharedManager();

                            return true;
                        }
                        return false;
                    },

                    runTimeLoadCompleted:function(tag)
                    {
                        if(tag=="egg")
                        {
                            
                        }
                    }

                });   

                GameNode.create=function() 
                {
                    var ret=new GameNode();
                    if(ret && ret.init()) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var GameNodeScene=cc.Scene.extend({
                    onEnter:function () {
                        this._super();
                        var appDelegate=AppDelegate.sharedApplication();
                        
                        var gameHud=GameHud.create();
                        this.addChild(gameHud,1);
                        appDelegate.ghud=gameHud;
                        
                        var gameNode=GameNode.create();
                        this.addChild(gameNode);
                        appDelegate.gnode=gameNode;    
                        // cc.director.getPhysicsManager().enabled = true;                
                    },

                    loadBackground:function () 
                    {
                        var sprite = StorePanel.createSprite(bgImgSrc, bgImgKey);
                        sprite.setPosition(cc.size.width / 2, cc.size.height / 2);
                        this.addChild(sprite, 0);
                    },
                });

                var AppDelegate=cc.Layer.extend({
                    deviceScaleFloat:1,

                    gnode:null,
                    ghud:null,
                    selectedObjectId:[],

                    autoBattleType:0,
                    isOtherVillage:false,
                    otherVillageData:null,
                    friendsVillageLBScores:[],
                    
                    myVillageData:null,

                    isTouchSwallowed:false,

                    isCalledFbMethod:false,

                    init:function()
                    {
                        if (this._super())
                        {
                            //cc.sys.localStorage.clear();
                            this.deviceScaleFloat=1;

                            var rectSize = cc.view.getFrameSize();
                               
                               //portrait
                                if (cc.sys.isNative && cc.sys.os == cc.sys.OS_IOS)
                                {
                                    if(rectSize.height==2436 && rectSize.width==1125) this.deviceScaleFloat=1.65;
                                    else if(rectSize.height==2208 && rectSize.width==1242) this.deviceScaleFloat=1.92;
                                    else if(rectSize.height==1334 && rectSize.width==750) this.deviceScaleFloat=1.17;
                                    else if(rectSize.height==2048 && rectSize.width==1536) this.deviceScaleFloat=1.9;
                                    else if(rectSize.height==1024 && rectSize.width==768) this.deviceScaleFloat=0.95;
                                }
                                else
                                {
                                    if(rectSize.height==2436 && rectSize.width==1125) this.deviceScaleFloat=1.65;
                                    else if(rectSize.height==2208 && rectSize.width==1242) this.deviceScaleFloat=1.92;
                                    else if(rectSize.height==1334 && rectSize.width==750) this.deviceScaleFloat=1.17;
                                    else if(rectSize.height==2048 && rectSize.width==1536) this.deviceScaleFloat=1.9;
                                    else if(rectSize.height==1024 && rectSize.width==768) this.deviceScaleFloat=0.95;

                                    else if(rectSize.height>=2048 && rectSize.width>=640*2.0) this.deviceScaleFloat=2.0;
                                    else if(rectSize.height>=1792 && rectSize.width>=640*1.75) this.deviceScaleFloat=1.75;
                                    else if(rectSize.height>=1536 && rectSize.width>=640*1.5) this.deviceScaleFloat=1.5;
                                    else if(rectSize.height>=1280 && rectSize.width>=640*1.25) this.deviceScaleFloat=1.25;
                                    else if(rectSize.height>=1152 && rectSize.width>=640*1.125) this.deviceScaleFloat=1.125;
                                    else if(rectSize.height>=960 && rectSize.width>=640*1.0) this.deviceScaleFloat=1.0;
                                    else if(rectSize.height>=840 && rectSize.width>=640*0.875) this.deviceScaleFloat=0.875;
                                    else if(rectSize.height>=720 && rectSize.width>=640*0.75) this.deviceScaleFloat=0.75;
                                    else if(rectSize.height>=480 && rectSize.width>=640*0.5) this.deviceScaleFloat=0.5;
                                    else deviceScaleFloat=0.4;
                                }
                                 
                            // if (window.matchMedia("(orientation: portrait)").matches) {
                            //    // you're in PORTRAIT mode
                            //    cc.log("orientation: portrait");
                            //    currentOrientation = "portrait";
                            // }

                            // if (window.matchMedia("(orientation: landscape)").matches) {
                            //    // you're in LANDSCAPE mode
                            //    cc.log("orientation: landscape");
                            //    currentOrientation = "landscape";

                            //    //landscape
                            //    if (cc.sys.isNative && cc.sys.os == cc.sys.OS_IOS)
                            //     {
                            //         if(rectSize.width==2436 && rectSize.height==1125) this.deviceScaleFloat=1.65;
                            //         else if(rectSize.width==2208 && rectSize.height==1242) this.deviceScaleFloat=1.92;
                            //         else if(rectSize.width==1334 && rectSize.height==750) this.deviceScaleFloat=1.17;
                            //         else if(rectSize.width==2048 && rectSize.height==1536) this.deviceScaleFloat=1.9;
                            //         else if(rectSize.width==1024 && rectSize.height==768) this.deviceScaleFloat=0.95;
                            //     }
                            //     else
                            //     {
                            //         if(rectSize.width==2436 && rectSize.height==1125) this.deviceScaleFloat=1.65;
                            //         else if(rectSize.width==2208 && rectSize.height==1242) this.deviceScaleFloat=1.92;
                            //         else if(rectSize.width==1334 && rectSize.height==750) this.deviceScaleFloat=1.17;
                            //         else if(rectSize.width==2048 && rectSize.height==1536) this.deviceScaleFloat=1.9;
                            //         else if(rectSize.width==1024 && rectSize.height==768) this.deviceScaleFloat=0.95;

                            //         else if(rectSize.width>=2048 && rectSize.height>=640*2.0) this.deviceScaleFloat=2.0;
                            //         else if(rectSize.width>=1792 && rectSize.height>=640*1.75) this.deviceScaleFloat=1.75;
                            //         else if(rectSize.width>=1536 && rectSize.height>=640*1.5) this.deviceScaleFloat=1.5;
                            //         else if(rectSize.width>=1280 && rectSize.height>=640*1.25) this.deviceScaleFloat=1.25;
                            //         else if(rectSize.width>=1152 && rectSize.height>=640*1.125) this.deviceScaleFloat=1.125;
                            //         else if(rectSize.width>=960 && rectSize.height>=640*1.0) this.deviceScaleFloat=1.0;
                            //         else if(rectSize.width>=840 && rectSize.height>=640*0.875) this.deviceScaleFloat=0.875;
                            //         else if(rectSize.width>=720 && rectSize.height>=640*0.75) this.deviceScaleFloat=0.75;
                            //         else if(rectSize.width>=480 && rectSize.height>=640*0.5) this.deviceScaleFloat=0.5;
                            //         else deviceScaleFloat=0.4;
                            //     }
                            // }

                            
                                           
                            // cc.log("rectSize.height / rectSize.width " + rectSize.height + " " + rectSize.width);
                            
                            // cc.log("this.deviceScaleFloat " + this.deviceScaleFloat);
                                                
                            this.runAction(cc.Sequence.create(cc.CallFunc.create(this.cache64Images, this),cc.delayTime(0.1),cc.CallFunc.create(this.callAfterLoad, this)));

                            return true;
                        }
                        return false;
                    },

                    cache64Images:function(){
                        StorePanel.cacheBase64Image(logoImgSrc, logoImgKey);

                        StorePanel.cacheBase64Image(handImgSrc, handImgKey);
                        StorePanel.cacheBase64Image(gamePlayBgImgSrc, gamePlayBgImgKey);

                        StorePanel.cacheBase64Image(holeImgSrc, holeImgKey);
                        StorePanel.cacheBase64Image(pieceImgSrc, pieceImgKey);
                        StorePanel.cacheBase64Image(playBoardImgSrc, playBoardImgKey);
                        StorePanel.cacheBase64Image(pieceRedImgSrc, pieceRedImgKey);
                        StorePanel.cacheBase64Image(indicatorImgSrc, indicatorImgKey);




                        // var preloader = new Audio();
                        // preloader.src = "data:audio/mp3;base64," + ballOnTileSoundSrc;
                    },

                    callAfterLoad:function()
                    {
                        this.isTouchSwallowed=false;
                        this.isOtherVillage=false;
                        
                        // this.myVillageData=VillageData.create(true,null);
                        // cc.log("my scene added");
                        cc.director.runScene(new GameNodeScene());
                        
                        /*if(!cc.sys.isNative && !isLocalhost)
                        {
                            FBInstantManager.getFriendsVillageLBScores("All Players Scores");
                        }
                        this.pausOn();*/
                    },

                    willDataUpdate:function()
                    {
                        if(this.isOtherVillage==true)
                            return false;
                        return true;
                    }
                    
                });

                AppDelegate.sharedInstance=null;
                    
                AppDelegate.sharedApplication=function() 
                {
                    if(AppDelegate.sharedInstance==null)
                    {
                        AppDelegate.sharedInstance=AppDelegate.create();
                    }
                    return AppDelegate.sharedInstance;
                }

                AppDelegate.isTileMapExpand=0;

                AppDelegate.create=function() 
                {
                    var ret=new AppDelegate();

                    if(ret && ret.init()) {
                        return ret;
                    } else {
                        delete ret;
                        ret=null;
                        return null;
                    }
                }

                var AppDelegateScene=cc.Scene.extend({
                    onEnter:function () {
                        this._super();

                        var appDelegate=AppDelegate.sharedApplication();
                        this.addChild(appDelegate,1);
                    } 
                });
                //-----

                cc._loaderImage = holeImgSrc;
                cc.LoaderScene.preload([], function () {
                    cc.director.runScene(new AppDelegateScene());
                }, this);
              };
              cc.game.run("gameCanvas");
          };
    </script>
</body>
</html>